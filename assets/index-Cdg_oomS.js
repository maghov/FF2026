(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=i(o);fetch(o.href,d)}})();var Qd={exports:{}},Nr={};var W_;function hE(){if(W_)return Nr;W_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var m in o)m!=="key"&&(d[m]=o[m])}else d=o;return o=d.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:d}}return Nr.Fragment=t,Nr.jsx=i,Nr.jsxs=i,Nr}var K_;function fE(){return K_||(K_=1,Qd.exports=hE()),Qd.exports}var c=fE(),$d={exports:{}},me={};var Q_;function mE(){if(Q_)return me;Q_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function C(E){return E===null||typeof E!="object"?null:(E=x&&E[x]||E["@@iterator"],typeof E=="function"?E:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,U={};function Y(E,A,k){this.props=E,this.context=A,this.refs=U,this.updater=k||N}Y.prototype.isReactComponent={},Y.prototype.setState=function(E,A){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,A,"setState")},Y.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function K(){}K.prototype=Y.prototype;function M(E,A,k){this.props=E,this.context=A,this.refs=U,this.updater=k||N}var D=M.prototype=new K;D.constructor=M,P(D,Y.prototype),D.isPureReactComponent=!0;var $=Array.isArray;function J(){}var W={H:null,A:null,T:null,S:null},ue=Object.prototype.hasOwnProperty;function Re(E,A,k){var H=k.ref;return{$$typeof:s,type:E,key:A,ref:H!==void 0?H:null,props:k}}function De(E,A){return Re(E.type,A,E.props)}function fe(E){return typeof E=="object"&&E!==null&&E.$$typeof===s}function te(E){var A={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(k){return A[k]})}var oe=/\/+/g;function F(E,A){return typeof E=="object"&&E!==null&&E.key!=null?te(""+E.key):A.toString(36)}function V(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(J,J):(E.status="pending",E.then(function(A){E.status==="pending"&&(E.status="fulfilled",E.value=A)},function(A){E.status==="pending"&&(E.status="rejected",E.reason=A)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function I(E,A,k,H,ee){var re=typeof E;(re==="undefined"||re==="boolean")&&(E=null);var _e=!1;if(E===null)_e=!0;else switch(re){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(E.$$typeof){case s:case t:_e=!0;break;case y:return _e=E._init,I(_e(E._payload),A,k,H,ee)}}if(_e)return ee=ee(E),_e=H===""?"."+F(E,0):H,$(ee)?(k="",_e!=null&&(k=_e.replace(oe,"$&/")+"/"),I(ee,A,k,"",function(dn){return dn})):ee!=null&&(fe(ee)&&(ee=De(ee,k+(ee.key==null||E&&E.key===ee.key?"":(""+ee.key).replace(oe,"$&/")+"/")+_e)),A.push(ee)),1;_e=0;var Qe=H===""?".":H+":";if($(E))for(var Me=0;Me<E.length;Me++)H=E[Me],re=Qe+F(H,Me),_e+=I(H,A,k,re,ee);else if(Me=C(E),typeof Me=="function")for(E=Me.call(E),Me=0;!(H=E.next()).done;)H=H.value,re=Qe+F(H,Me++),_e+=I(H,A,k,re,ee);else if(re==="object"){if(typeof E.then=="function")return I(V(E),A,k,H,ee);throw A=String(E),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return _e}function q(E,A,k){if(E==null)return E;var H=[],ee=0;return I(E,H,"","",function(re){return A.call(k,re,ee++)}),H}function Q(E){if(E._status===-1){var A=E._result;A=A(),A.then(function(k){(E._status===0||E._status===-1)&&(E._status=1,E._result=k)},function(k){(E._status===0||E._status===-1)&&(E._status=2,E._result=k)}),E._status===-1&&(E._status=0,E._result=A)}if(E._status===1)return E._result.default;throw E._result}var ne=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},ae={map:q,forEach:function(E,A,k){q(E,function(){A.apply(this,arguments)},k)},count:function(E){var A=0;return q(E,function(){A++}),A},toArray:function(E){return q(E,function(A){return A})||[]},only:function(E){if(!fe(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return me.Activity=b,me.Children=ae,me.Component=Y,me.Fragment=i,me.Profiler=o,me.PureComponent=M,me.StrictMode=r,me.Suspense=p,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,me.__COMPILER_RUNTIME={__proto__:null,c:function(E){return W.H.useMemoCache(E)}},me.cache=function(E){return function(){return E.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(E,A,k){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var H=P({},E.props),ee=E.key;if(A!=null)for(re in A.key!==void 0&&(ee=""+A.key),A)!ue.call(A,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&A.ref===void 0||(H[re]=A[re]);var re=arguments.length-2;if(re===1)H.children=k;else if(1<re){for(var _e=Array(re),Qe=0;Qe<re;Qe++)_e[Qe]=arguments[Qe+2];H.children=_e}return Re(E.type,ee,H)},me.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:d,_context:E},E},me.createElement=function(E,A,k){var H,ee={},re=null;if(A!=null)for(H in A.key!==void 0&&(re=""+A.key),A)ue.call(A,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(ee[H]=A[H]);var _e=arguments.length-2;if(_e===1)ee.children=k;else if(1<_e){for(var Qe=Array(_e),Me=0;Me<_e;Me++)Qe[Me]=arguments[Me+2];ee.children=Qe}if(E&&E.defaultProps)for(H in _e=E.defaultProps,_e)ee[H]===void 0&&(ee[H]=_e[H]);return Re(E,re,ee)},me.createRef=function(){return{current:null}},me.forwardRef=function(E){return{$$typeof:m,render:E}},me.isValidElement=fe,me.lazy=function(E){return{$$typeof:y,_payload:{_status:-1,_result:E},_init:Q}},me.memo=function(E,A){return{$$typeof:g,type:E,compare:A===void 0?null:A}},me.startTransition=function(E){var A=W.T,k={};W.T=k;try{var H=E(),ee=W.S;ee!==null&&ee(k,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(J,ne)}catch(re){ne(re)}finally{A!==null&&k.types!==null&&(A.types=k.types),W.T=A}},me.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},me.use=function(E){return W.H.use(E)},me.useActionState=function(E,A,k){return W.H.useActionState(E,A,k)},me.useCallback=function(E,A){return W.H.useCallback(E,A)},me.useContext=function(E){return W.H.useContext(E)},me.useDebugValue=function(){},me.useDeferredValue=function(E,A){return W.H.useDeferredValue(E,A)},me.useEffect=function(E,A){return W.H.useEffect(E,A)},me.useEffectEvent=function(E){return W.H.useEffectEvent(E)},me.useId=function(){return W.H.useId()},me.useImperativeHandle=function(E,A,k){return W.H.useImperativeHandle(E,A,k)},me.useInsertionEffect=function(E,A){return W.H.useInsertionEffect(E,A)},me.useLayoutEffect=function(E,A){return W.H.useLayoutEffect(E,A)},me.useMemo=function(E,A){return W.H.useMemo(E,A)},me.useOptimistic=function(E,A){return W.H.useOptimistic(E,A)},me.useReducer=function(E,A,k){return W.H.useReducer(E,A,k)},me.useRef=function(E){return W.H.useRef(E)},me.useState=function(E){return W.H.useState(E)},me.useSyncExternalStore=function(E,A,k){return W.H.useSyncExternalStore(E,A,k)},me.useTransition=function(){return W.H.useTransition()},me.version="19.2.4",me}var $_;function Fh(){return $_||($_=1,$d.exports=mE()),$d.exports}var Z=Fh(),Zd={exports:{}},Tr={},Jd={exports:{}},eh={};var Z_;function pE(){return Z_||(Z_=1,(function(s){function t(I,q){var Q=I.length;I.push(q);e:for(;0<Q;){var ne=Q-1>>>1,ae=I[ne];if(0<o(ae,q))I[ne]=q,I[Q]=ae,Q=ne;else break e}}function i(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var q=I[0],Q=I.pop();if(Q!==q){I[0]=Q;e:for(var ne=0,ae=I.length,E=ae>>>1;ne<E;){var A=2*(ne+1)-1,k=I[A],H=A+1,ee=I[H];if(0>o(k,Q))H<ae&&0>o(ee,k)?(I[ne]=ee,I[H]=Q,ne=H):(I[ne]=k,I[A]=Q,ne=A);else if(H<ae&&0>o(ee,Q))I[ne]=ee,I[H]=Q,ne=H;else break e}}return q}function o(I,q){var Q=I.sortIndex-q.sortIndex;return Q!==0?Q:I.id-q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var p=[],g=[],y=1,b=null,x=3,C=!1,N=!1,P=!1,U=!1,Y=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function D(I){for(var q=i(g);q!==null;){if(q.callback===null)r(g);else if(q.startTime<=I)r(g),q.sortIndex=q.expirationTime,t(p,q);else break;q=i(g)}}function $(I){if(P=!1,D(I),!N)if(i(p)!==null)N=!0,J||(J=!0,te());else{var q=i(g);q!==null&&V($,q.startTime-I)}}var J=!1,W=-1,ue=5,Re=-1;function De(){return U?!0:!(s.unstable_now()-Re<ue)}function fe(){if(U=!1,J){var I=s.unstable_now();Re=I;var q=!0;try{e:{N=!1,P&&(P=!1,K(W),W=-1),C=!0;var Q=x;try{t:{for(D(I),b=i(p);b!==null&&!(b.expirationTime>I&&De());){var ne=b.callback;if(typeof ne=="function"){b.callback=null,x=b.priorityLevel;var ae=ne(b.expirationTime<=I);if(I=s.unstable_now(),typeof ae=="function"){b.callback=ae,D(I),q=!0;break t}b===i(p)&&r(p),D(I)}else r(p);b=i(p)}if(b!==null)q=!0;else{var E=i(g);E!==null&&V($,E.startTime-I),q=!1}}break e}finally{b=null,x=Q,C=!1}q=void 0}}finally{q?te():J=!1}}}var te;if(typeof M=="function")te=function(){M(fe)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,F=oe.port2;oe.port1.onmessage=fe,te=function(){F.postMessage(null)}}else te=function(){Y(fe,0)};function V(I,q){W=Y(function(){I(s.unstable_now())},q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(I){I.callback=null},s.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<I?Math.floor(1e3/I):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(I){switch(x){case 1:case 2:case 3:var q=3;break;default:q=x}var Q=x;x=q;try{return I()}finally{x=Q}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(I,q){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Q=x;x=I;try{return q()}finally{x=Q}},s.unstable_scheduleCallback=function(I,q,Q){var ne=s.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ne+Q:ne):Q=ne,I){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,I={id:y++,callback:q,priorityLevel:I,startTime:Q,expirationTime:ae,sortIndex:-1},Q>ne?(I.sortIndex=Q,t(g,I),i(p)===null&&I===i(g)&&(P?(K(W),W=-1):P=!0,V($,Q-ne))):(I.sortIndex=ae,t(p,I),N||C||(N=!0,J||(J=!0,te()))),I},s.unstable_shouldYield=De,s.unstable_wrapCallback=function(I){var q=x;return function(){var Q=x;x=q;try{return I.apply(this,arguments)}finally{x=Q}}}})(eh)),eh}var J_;function gE(){return J_||(J_=1,Jd.exports=pE()),Jd.exports}var th={exports:{}},vt={};var ev;function _E(){if(ev)return vt;ev=1;var s=Fh();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(p,g,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:y}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vt.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return d(p,g,null,y)},vt.flushSync=function(p){var g=f.T,y=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=g,r.p=y,r.d.f()}},vt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},vt.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},vt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,b=m(y,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:C}):y==="script"&&r.d.X(p,{crossOrigin:b,integrity:x,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},vt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=m(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},vt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,b=m(y,g.crossOrigin);r.d.L(p,y,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},vt.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=m(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},vt.requestFormReset=function(p){r.d.r(p)},vt.unstable_batchedUpdates=function(p,g){return p(g)},vt.useFormState=function(p,g,y){return f.H.useFormState(p,g,y)},vt.useFormStatus=function(){return f.H.useHostTransitionStatus()},vt.version="19.2.4",vt}var tv;function vE(){if(tv)return th.exports;tv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),th.exports=_E(),th.exports}var nv;function yE(){if(nv)return Tr;nv=1;var s=gE(),t=Fh(),i=vE();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(r(188))}function g(e){var n=e.alternate;if(!n){if(n=d(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,l=n;;){var u=a.return;if(u===null)break;var h=u.alternate;if(h===null){if(l=u.return,l!==null){a=l;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===a)return p(u),e;if(h===l)return p(u),n;h=h.sibling}throw Error(r(188))}if(a.return!==l.return)a=u,l=h;else{for(var _=!1,v=u.child;v;){if(v===a){_=!0,a=u,l=h;break}if(v===l){_=!0,l=u,a=h;break}v=v.sibling}if(!_){for(v=h.child;v;){if(v===a){_=!0,a=h,l=u;break}if(v===l){_=!0,l=h,a=u;break}v=v.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),M=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),Re=Symbol.for("react.activity"),De=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=fe&&e[fe]||e["@@iterator"],typeof e=="function"?e:null)}var oe=Symbol.for("react.client.reference");function F(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case Y:return"Profiler";case U:return"StrictMode";case $:return"Suspense";case J:return"SuspenseList";case Re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case M:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case D:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case W:return n=e.displayName||null,n!==null?n:F(e.type)||"Memo";case ue:n=e._payload,e=e._init;try{return F(e(n))}catch{}}return null}var V=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ne=[],ae=-1;function E(e){return{current:e}}function A(e){0>ae||(e.current=ne[ae],ne[ae]=null,ae--)}function k(e,n){ae++,ne[ae]=e.current,e.current=n}var H=E(null),ee=E(null),re=E(null),_e=E(null);function Qe(e,n){switch(k(re,n),k(ee,e),k(H,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?__(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=__(n),e=v_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(H),k(H,e)}function Me(){A(H),A(ee),A(re)}function dn(e){e.memoizedState!==null&&k(_e,e);var n=H.current,a=v_(n,e.type);n!==a&&(k(ee,e),k(H,a))}function ml(e){ee.current===e&&(A(H),A(ee)),_e.current===e&&(A(_e),br._currentValue=Q)}var Oc,Xf;function Ls(e){if(Oc===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Oc=n&&n[1]||"",Xf=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oc+e+Xf}var Ic=!1;function Mc(e,n){if(!e||Ic)return"";Ic=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(L){var O=L}Reflect.construct(e,[],G)}else{try{G.call()}catch(L){O=L}e.call(G.prototype)}}else{try{throw Error()}catch(L){O=L}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(L){if(L&&O&&typeof L.stack=="string")return[L.stack,O.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),_=h[0],v=h[1];if(_&&v){var S=_.split(`
`),R=v.split(`
`);for(u=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;if(l===S.length||u===R.length)for(l=S.length-1,u=R.length-1;1<=l&&0<=u&&S[l]!==R[u];)u--;for(;1<=l&&0<=u;l--,u--)if(S[l]!==R[u]){if(l!==1||u!==1)do if(l--,u--,0>u||S[l]!==R[u]){var z=`
`+S[l].replace(" at new "," at ");return e.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",e.displayName)),z}while(1<=l&&0<=u);break}}}finally{Ic=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ls(a):""}function Fb(e,n){switch(e.tag){case 26:case 27:case 5:return Ls(e.type);case 16:return Ls("Lazy");case 13:return e.child!==n&&n!==null?Ls("Suspense Fallback"):Ls("Suspense");case 19:return Ls("SuspenseList");case 0:case 15:return Mc(e.type,!1);case 11:return Mc(e.type.render,!1);case 1:return Mc(e.type,!0);case 31:return Ls("Activity");default:return""}}function Wf(e){try{var n="",a=null;do n+=Fb(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var kc=Object.prototype.hasOwnProperty,Lc=s.unstable_scheduleCallback,Uc=s.unstable_cancelCallback,qb=s.unstable_shouldYield,Vb=s.unstable_requestPaint,Dt=s.unstable_now,Yb=s.unstable_getCurrentPriorityLevel,Kf=s.unstable_ImmediatePriority,Qf=s.unstable_UserBlockingPriority,pl=s.unstable_NormalPriority,Xb=s.unstable_LowPriority,$f=s.unstable_IdlePriority,Wb=s.log,Kb=s.unstable_setDisableYieldValue,Oa=null,Ot=null;function Wn(e){if(typeof Wb=="function"&&Kb(e),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Oa,e)}catch{}}var It=Math.clz32?Math.clz32:Zb,Qb=Math.log,$b=Math.LN2;function Zb(e){return e>>>=0,e===0?32:31-(Qb(e)/$b|0)|0}var gl=256,_l=262144,vl=4194304;function Us(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function yl(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var u=0,h=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var v=l&134217727;return v!==0?(l=v&~h,l!==0?u=Us(l):(_&=v,_!==0?u=Us(_):a||(a=v&~e,a!==0&&(u=Us(a))))):(v=l&~h,v!==0?u=Us(v):_!==0?u=Us(_):a||(a=l&~e,a!==0&&(u=Us(a)))),u===0?0:n!==0&&n!==u&&(n&h)===0&&(h=u&-u,a=n&-n,h>=a||h===32&&(a&4194048)!==0)?n:u}function Ia(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Jb(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zf(){var e=vl;return vl<<=1,(vl&62914560)===0&&(vl=4194304),e}function Pc(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Ma(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ex(e,n,a,l,u,h){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,S=e.expirationTimes,R=e.hiddenUpdates;for(a=_&~a;0<a;){var z=31-It(a),G=1<<z;v[z]=0,S[z]=-1;var O=R[z];if(O!==null)for(R[z]=null,z=0;z<O.length;z++){var L=O[z];L!==null&&(L.lane&=-536870913)}a&=~G}l!==0&&Jf(e,l,0),h!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=h&~(_&~n))}function Jf(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-It(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function em(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-It(a),u=1<<l;u&n|e[l]&n&&(e[l]|=n),a&=~u}}function tm(e,n){var a=n&-n;return a=(a&42)!==0?1:zc(a),(a&(e.suspendedLanes|n))!==0?0:a}function zc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nm(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:H_(e.type))}function sm(e,n){var a=q.p;try{return q.p=e,n()}finally{q.p=a}}var Kn=Math.random().toString(36).slice(2),ut="__reactFiber$"+Kn,Et="__reactProps$"+Kn,bi="__reactContainer$"+Kn,Hc="__reactEvents$"+Kn,tx="__reactListeners$"+Kn,nx="__reactHandles$"+Kn,im="__reactResources$"+Kn,ka="__reactMarker$"+Kn;function Gc(e){delete e[ut],delete e[Et],delete e[Hc],delete e[tx],delete e[nx]}function xi(e){var n=e[ut];if(n)return n;for(var a=e.parentNode;a;){if(n=a[bi]||a[ut]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=T_(e);e!==null;){if(a=e[ut])return a;e=T_(e)}return n}e=a,a=e.parentNode}return null}function Si(e){if(e=e[ut]||e[bi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function La(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Ei(e){var n=e[im];return n||(n=e[im]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function rt(e){e[ka]=!0}var am=new Set,rm={};function Ps(e,n){Ni(e,n),Ni(e+"Capture",n)}function Ni(e,n){for(rm[e]=n,e=0;e<n.length;e++)am.add(n[e])}var sx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lm={},om={};function ix(e){return kc.call(om,e)?!0:kc.call(lm,e)?!1:sx.test(e)?om[e]=!0:(lm[e]=!0,!1)}function bl(e,n,a){if(ix(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function xl(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function yn(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function Ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cm(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ax(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var u=l.get,h=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(_){a=""+_,h.call(this,_)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Fc(e){if(!e._valueTracker){var n=cm(e)?"checked":"value";e._valueTracker=ax(e,n,""+e[n])}}function um(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=cm(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function Sl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var rx=/[\n"\\]/g;function Gt(e){return e.replace(rx,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function qc(e,n,a,l,u,h,_,v){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ht(n)):e.value!==""+Ht(n)&&(e.value=""+Ht(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?Vc(e,_,Ht(n)):a!=null?Vc(e,_,Ht(a)):l!=null&&e.removeAttribute("value"),u==null&&h!=null&&(e.defaultChecked=!!h),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Ht(v):e.removeAttribute("name")}function dm(e,n,a,l,u,h,_,v){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){Fc(e);return}a=a!=null?""+Ht(a):"",n=n!=null?""+Ht(n):a,v||n===e.value||(e.value=n),e.defaultValue=n}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=v?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Fc(e)}function Vc(e,n,a){n==="number"&&Sl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ti(e,n,a,l){if(e=e.options,n){n={};for(var u=0;u<a.length;u++)n["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=n.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ht(a),n=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function hm(e,n,a){if(n!=null&&(n=""+Ht(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Ht(a):""}function fm(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(V(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Ht(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Fc(e)}function Ci(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var lx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mm(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||lx.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function pm(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var u in n)l=n[u],n.hasOwnProperty(u)&&a[u]!==l&&mm(e,u,l)}else for(var h in n)n.hasOwnProperty(h)&&mm(e,h,n[h])}function Yc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ox=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function El(e){return cx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function bn(){}var Xc=null;function Wc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wi=null,Ai=null;function gm(e){var n=Si(e);if(n&&(e=n.stateNode)){var a=e[Et]||null;e:switch(e=n.stateNode,n.type){case"input":if(qc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gt(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var u=l[Et]||null;if(!u)throw Error(r(90));qc(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&um(l)}break e;case"textarea":hm(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Ti(e,!!a.multiple,n,!1)}}}var Kc=!1;function _m(e,n,a){if(Kc)return e(n,a);Kc=!0;try{var l=e(n);return l}finally{if(Kc=!1,(wi!==null||Ai!==null)&&(uo(),wi&&(n=wi,e=Ai,Ai=wi=null,gm(n),e)))for(n=0;n<e.length;n++)gm(e[n])}}function Ua(e,n){var a=e.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qc=!1;if(xn)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){Qc=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{Qc=!1}var Qn=null,$c=null,Nl=null;function vm(){if(Nl)return Nl;var e,n=$c,a=n.length,l,u="value"in Qn?Qn.value:Qn.textContent,h=u.length;for(e=0;e<a&&n[e]===u[e];e++);var _=a-e;for(l=1;l<=_&&n[a-l]===u[h-l];l++);return Nl=u.slice(e,1<l?1-l:void 0)}function Tl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Cl(){return!0}function ym(){return!1}function Nt(e){function n(a,l,u,h,_){this._reactName=a,this._targetInst=u,this.type=l,this.nativeEvent=h,this.target=_,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Cl:ym,this.isPropagationStopped=ym,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),n}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wl=Nt(zs),za=b({},zs,{view:0,detail:0}),ux=Nt(za),Zc,Jc,Ba,Al=b({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ba&&(Ba&&e.type==="mousemove"?(Zc=e.screenX-Ba.screenX,Jc=e.screenY-Ba.screenY):Jc=Zc=0,Ba=e),Zc)},movementY:function(e){return"movementY"in e?e.movementY:Jc}}),bm=Nt(Al),dx=b({},Al,{dataTransfer:0}),hx=Nt(dx),fx=b({},za,{relatedTarget:0}),eu=Nt(fx),mx=b({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),px=Nt(mx),gx=b({},zs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_x=Nt(gx),vx=b({},zs,{data:0}),xm=Nt(vx),yx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sx(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=xx[e])?!!n[e]:!1}function tu(){return Sx}var Ex=b({},za,{key:function(e){if(e.key){var n=yx[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Tl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(e){return e.type==="keypress"?Tl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nx=Nt(Ex),Tx=b({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sm=Nt(Tx),Cx=b({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),wx=Nt(Cx),Ax=b({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),jx=Nt(Ax),Rx=b({},Al,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dx=Nt(Rx),Ox=b({},zs,{newState:0,oldState:0}),Ix=Nt(Ox),Mx=[9,13,27,32],nu=xn&&"CompositionEvent"in window,Ha=null;xn&&"documentMode"in document&&(Ha=document.documentMode);var kx=xn&&"TextEvent"in window&&!Ha,Em=xn&&(!nu||Ha&&8<Ha&&11>=Ha),Nm=" ",Tm=!1;function Cm(e,n){switch(e){case"keyup":return Mx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ji=!1;function Lx(e,n){switch(e){case"compositionend":return wm(n);case"keypress":return n.which!==32?null:(Tm=!0,Nm);case"textInput":return e=n.data,e===Nm&&Tm?null:e;default:return null}}function Ux(e,n){if(ji)return e==="compositionend"||!nu&&Cm(e,n)?(e=vm(),Nl=$c=Qn=null,ji=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Em&&n.locale!=="ko"?null:n.data;default:return null}}var Px={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Am(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Px[e.type]:n==="textarea"}function jm(e,n,a,l){wi?Ai?Ai.push(l):Ai=[l]:wi=l,n=vo(n,"onChange"),0<n.length&&(a=new wl("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var Ga=null,Fa=null;function zx(e){d_(e,0)}function jl(e){var n=La(e);if(um(n))return e}function Rm(e,n){if(e==="change")return n}var Dm=!1;if(xn){var su;if(xn){var iu="oninput"in document;if(!iu){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),iu=typeof Om.oninput=="function"}su=iu}else su=!1;Dm=su&&(!document.documentMode||9<document.documentMode)}function Im(){Ga&&(Ga.detachEvent("onpropertychange",Mm),Fa=Ga=null)}function Mm(e){if(e.propertyName==="value"&&jl(Fa)){var n=[];jm(n,Fa,e,Wc(e)),_m(zx,n)}}function Bx(e,n,a){e==="focusin"?(Im(),Ga=n,Fa=a,Ga.attachEvent("onpropertychange",Mm)):e==="focusout"&&Im()}function Hx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jl(Fa)}function Gx(e,n){if(e==="click")return jl(n)}function Fx(e,n){if(e==="input"||e==="change")return jl(n)}function qx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Mt=typeof Object.is=="function"?Object.is:qx;function qa(e,n){if(Mt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var u=a[l];if(!kc.call(n,u)||!Mt(e[u],n[u]))return!1}return!0}function km(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lm(e,n){var a=km(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=km(a)}}function Um(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Um(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Pm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Sl(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Sl(e.document)}return n}function au(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Vx=xn&&"documentMode"in document&&11>=document.documentMode,Ri=null,ru=null,Va=null,lu=!1;function zm(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;lu||Ri==null||Ri!==Sl(l)||(l=Ri,"selectionStart"in l&&au(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Va&&qa(Va,l)||(Va=l,l=vo(ru,"onSelect"),0<l.length&&(n=new wl("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Ri)))}function Bs(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Di={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},ou={},Bm={};xn&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);function Hs(e){if(ou[e])return ou[e];if(!Di[e])return e;var n=Di[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Bm)return ou[e]=n[a];return e}var Hm=Hs("animationend"),Gm=Hs("animationiteration"),Fm=Hs("animationstart"),Yx=Hs("transitionrun"),Xx=Hs("transitionstart"),Wx=Hs("transitioncancel"),qm=Hs("transitionend"),Vm=new Map,cu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cu.push("scrollEnd");function nn(e,n){Vm.set(e,n),Ps(n,[e])}var Rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ft=[],Oi=0,uu=0;function Dl(){for(var e=Oi,n=uu=Oi=0;n<e;){var a=Ft[n];Ft[n++]=null;var l=Ft[n];Ft[n++]=null;var u=Ft[n];Ft[n++]=null;var h=Ft[n];if(Ft[n++]=null,l!==null&&u!==null){var _=l.pending;_===null?u.next=u:(u.next=_.next,_.next=u),l.pending=u}h!==0&&Ym(a,u,h)}}function Ol(e,n,a,l){Ft[Oi++]=e,Ft[Oi++]=n,Ft[Oi++]=a,Ft[Oi++]=l,uu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function du(e,n,a,l){return Ol(e,n,a,l),Il(e)}function Gs(e,n){return Ol(e,null,null,n),Il(e)}function Ym(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var u=!1,h=e.return;h!==null;)h.childLanes|=a,l=h.alternate,l!==null&&(l.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(u=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,u&&n!==null&&(u=31-It(a),e=h.hiddenUpdates,l=e[u],l===null?e[u]=[n]:l.push(n),n.lane=a|536870912),h):null}function Il(e){if(50<fr)throw fr=0,bd=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ii={};function Kx(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,n,a,l){return new Kx(e,n,a,l)}function hu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sn(e,n){var a=e.alternate;return a===null?(a=kt(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Xm(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Ml(e,n,a,l,u,h){var _=0;if(l=e,typeof e=="function")hu(e)&&(_=1);else if(typeof e=="string")_=eE(e,a,H.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Re:return e=kt(31,a,n,u),e.elementType=Re,e.lanes=h,e;case P:return Fs(a.children,u,h,n);case U:_=8,u|=24;break;case Y:return e=kt(12,a,n,u|2),e.elementType=Y,e.lanes=h,e;case $:return e=kt(13,a,n,u),e.elementType=$,e.lanes=h,e;case J:return e=kt(19,a,n,u),e.elementType=J,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:_=10;break e;case K:_=9;break e;case D:_=11;break e;case W:_=14;break e;case ue:_=16,l=null;break e}_=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=kt(_,a,n,u),n.elementType=e,n.type=l,n.lanes=h,n}function Fs(e,n,a,l){return e=kt(7,e,l,n),e.lanes=a,e}function fu(e,n,a){return e=kt(6,e,null,n),e.lanes=a,e}function Wm(e){var n=kt(18,null,null,0);return n.stateNode=e,n}function mu(e,n,a){return n=kt(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Km=new WeakMap;function qt(e,n){if(typeof e=="object"&&e!==null){var a=Km.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Wf(n)},Km.set(e,n),n)}return{value:e,source:n,stack:Wf(n)}}var Mi=[],ki=0,kl=null,Ya=0,Vt=[],Yt=0,$n=null,hn=1,fn="";function En(e,n){Mi[ki++]=Ya,Mi[ki++]=kl,kl=e,Ya=n}function Qm(e,n,a){Vt[Yt++]=hn,Vt[Yt++]=fn,Vt[Yt++]=$n,$n=e;var l=hn;e=fn;var u=32-It(l)-1;l&=~(1<<u),a+=1;var h=32-It(n)+u;if(30<h){var _=u-u%5;h=(l&(1<<_)-1).toString(32),l>>=_,u-=_,hn=1<<32-It(n)+u|a<<u|l,fn=h+e}else hn=1<<h|a<<u|l,fn=e}function pu(e){e.return!==null&&(En(e,1),Qm(e,1,0))}function gu(e){for(;e===kl;)kl=Mi[--ki],Mi[ki]=null,Ya=Mi[--ki],Mi[ki]=null;for(;e===$n;)$n=Vt[--Yt],Vt[Yt]=null,fn=Vt[--Yt],Vt[Yt]=null,hn=Vt[--Yt],Vt[Yt]=null}function $m(e,n){Vt[Yt++]=hn,Vt[Yt++]=fn,Vt[Yt++]=$n,hn=n.id,fn=n.overflow,$n=e}var dt=null,Fe=null,Te=!1,Zn=null,Xt=!1,_u=Error(r(519));function Jn(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xa(qt(n,e)),_u}function Zm(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[ut]=e,n[Et]=l,a){case"dialog":be("cancel",n),be("close",n);break;case"iframe":case"object":case"embed":be("load",n);break;case"video":case"audio":for(a=0;a<pr.length;a++)be(pr[a],n);break;case"source":be("error",n);break;case"img":case"image":case"link":be("error",n),be("load",n);break;case"details":be("toggle",n);break;case"input":be("invalid",n),dm(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":be("invalid",n);break;case"textarea":be("invalid",n),fm(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||p_(n.textContent,a)?(l.popover!=null&&(be("beforetoggle",n),be("toggle",n)),l.onScroll!=null&&be("scroll",n),l.onScrollEnd!=null&&be("scrollend",n),l.onClick!=null&&(n.onclick=bn),n=!0):n=!1,n||Jn(e,!0)}function Jm(e){for(dt=e.return;dt;)switch(dt.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:dt=dt.return}}function Li(e){if(e!==dt)return!1;if(!Te)return Jm(e),Te=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||kd(e.type,e.memoizedProps)),a=!a),a&&Fe&&Jn(e),Jm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Fe=N_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Fe=N_(e)}else n===27?(n=Fe,fs(e.type)?(e=Bd,Bd=null,Fe=e):Fe=n):Fe=dt?Kt(e.stateNode.nextSibling):null;return!0}function qs(){Fe=dt=null,Te=!1}function vu(){var e=Zn;return e!==null&&(At===null?At=e:At.push.apply(At,e),Zn=null),e}function Xa(e){Zn===null?Zn=[e]:Zn.push(e)}var yu=E(null),Vs=null,Nn=null;function es(e,n,a){k(yu,n._currentValue),n._currentValue=a}function Tn(e){e._currentValue=yu.current,A(yu)}function bu(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function xu(e,n,a,l){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var h=u.dependencies;if(h!==null){var _=u.child;h=h.firstContext;e:for(;h!==null;){var v=h;h=u;for(var S=0;S<n.length;S++)if(v.context===n[S]){h.lanes|=a,v=h.alternate,v!==null&&(v.lanes|=a),bu(h.return,a,e),l||(_=null);break e}h=v.next}}else if(u.tag===18){if(_=u.return,_===null)throw Error(r(341));_.lanes|=a,h=_.alternate,h!==null&&(h.lanes|=a),bu(_,a,e),_=null}else _=u.child;if(_!==null)_.return=u;else for(_=u;_!==null;){if(_===e){_=null;break}if(u=_.sibling,u!==null){u.return=_.return,_=u;break}_=_.return}u=_}}function Ui(e,n,a,l){e=null;for(var u=n,h=!1;u!==null;){if(!h){if((u.flags&524288)!==0)h=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var _=u.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var v=u.type;Mt(u.pendingProps.value,_.value)||(e!==null?e.push(v):e=[v])}}else if(u===_e.current){if(_=u.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(br):e=[br])}u=u.return}e!==null&&xu(n,e,a,l),n.flags|=262144}function Ll(e){for(e=e.firstContext;e!==null;){if(!Mt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ys(e){Vs=e,Nn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ht(e){return ep(Vs,e)}function Ul(e,n){return Vs===null&&Ys(e),ep(e,n)}function ep(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Nn===null){if(e===null)throw Error(r(308));Nn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Nn=Nn.next=n;return a}var Qx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},$x=s.unstable_scheduleCallback,Zx=s.unstable_NormalPriority,Je={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Su(){return{controller:new Qx,data:new Map,refCount:0}}function Wa(e){e.refCount--,e.refCount===0&&$x(Zx,function(){e.controller.abort()})}var Ka=null,Eu=0,Pi=0,zi=null;function Jx(e,n){if(Ka===null){var a=Ka=[];Eu=0,Pi=Cd(),zi={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Eu++,n.then(tp,tp),n}function tp(){if(--Eu===0&&Ka!==null){zi!==null&&(zi.status="fulfilled");var e=Ka;Ka=null,Pi=0,zi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function eS(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var u=0;u<a.length;u++)(0,a[u])(n)},function(u){for(l.status="rejected",l.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),l}var np=I.S;I.S=function(e,n){zg=Dt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Jx(e,n),np!==null&&np(e,n)};var Xs=E(null);function Nu(){var e=Xs.current;return e!==null?e:Be.pooledCache}function Pl(e,n){n===null?k(Xs,Xs.current):k(Xs,n.pool)}function sp(){var e=Nu();return e===null?null:{parent:Je._currentValue,pool:e}}var Bi=Error(r(460)),Tu=Error(r(474)),zl=Error(r(542)),Bl={then:function(){}};function ip(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ap(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(bn,bn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,lp(e),e;default:if(typeof n.status=="string")n.then(bn,bn);else{if(e=Be,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=l}},function(l){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,lp(e),e}throw Ks=n,Bi}}function Ws(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ks=a,Bi):a}}var Ks=null;function rp(){if(Ks===null)throw Error(r(459));var e=Ks;return Ks=null,e}function lp(e){if(e===Bi||e===zl)throw Error(r(483))}var Hi=null,Qa=0;function Hl(e){var n=Qa;return Qa+=1,Hi===null&&(Hi=[]),ap(Hi,e,n)}function $a(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Gl(e,n){throw n.$$typeof===x?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function op(e){function n(w,T){if(e){var j=w.deletions;j===null?(w.deletions=[T],w.flags|=16):j.push(T)}}function a(w,T){if(!e)return null;for(;T!==null;)n(w,T),T=T.sibling;return null}function l(w){for(var T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function u(w,T){return w=Sn(w,T),w.index=0,w.sibling=null,w}function h(w,T,j){return w.index=j,e?(j=w.alternate,j!==null?(j=j.index,j<T?(w.flags|=67108866,T):j):(w.flags|=67108866,T)):(w.flags|=1048576,T)}function _(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function v(w,T,j,B){return T===null||T.tag!==6?(T=fu(j,w.mode,B),T.return=w,T):(T=u(T,j),T.return=w,T)}function S(w,T,j,B){var le=j.type;return le===P?z(w,T,j.props.children,B,j.key):T!==null&&(T.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ue&&Ws(le)===T.type)?(T=u(T,j.props),$a(T,j),T.return=w,T):(T=Ml(j.type,j.key,j.props,null,w.mode,B),$a(T,j),T.return=w,T)}function R(w,T,j,B){return T===null||T.tag!==4||T.stateNode.containerInfo!==j.containerInfo||T.stateNode.implementation!==j.implementation?(T=mu(j,w.mode,B),T.return=w,T):(T=u(T,j.children||[]),T.return=w,T)}function z(w,T,j,B,le){return T===null||T.tag!==7?(T=Fs(j,w.mode,B,le),T.return=w,T):(T=u(T,j),T.return=w,T)}function G(w,T,j){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=fu(""+T,w.mode,j),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case C:return j=Ml(T.type,T.key,T.props,null,w.mode,j),$a(j,T),j.return=w,j;case N:return T=mu(T,w.mode,j),T.return=w,T;case ue:return T=Ws(T),G(w,T,j)}if(V(T)||te(T))return T=Fs(T,w.mode,j,null),T.return=w,T;if(typeof T.then=="function")return G(w,Hl(T),j);if(T.$$typeof===M)return G(w,Ul(w,T),j);Gl(w,T)}return null}function O(w,T,j,B){var le=T!==null?T.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return le!==null?null:v(w,T,""+j,B);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case C:return j.key===le?S(w,T,j,B):null;case N:return j.key===le?R(w,T,j,B):null;case ue:return j=Ws(j),O(w,T,j,B)}if(V(j)||te(j))return le!==null?null:z(w,T,j,B,null);if(typeof j.then=="function")return O(w,T,Hl(j),B);if(j.$$typeof===M)return O(w,T,Ul(w,j),B);Gl(w,j)}return null}function L(w,T,j,B,le){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return w=w.get(j)||null,v(T,w,""+B,le);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return w=w.get(B.key===null?j:B.key)||null,S(T,w,B,le);case N:return w=w.get(B.key===null?j:B.key)||null,R(T,w,B,le);case ue:return B=Ws(B),L(w,T,j,B,le)}if(V(B)||te(B))return w=w.get(j)||null,z(T,w,B,le,null);if(typeof B.then=="function")return L(w,T,j,Hl(B),le);if(B.$$typeof===M)return L(w,T,j,Ul(T,B),le);Gl(T,B)}return null}function se(w,T,j,B){for(var le=null,Ce=null,ie=T,ge=T=0,Ee=null;ie!==null&&ge<j.length;ge++){ie.index>ge?(Ee=ie,ie=null):Ee=ie.sibling;var we=O(w,ie,j[ge],B);if(we===null){ie===null&&(ie=Ee);break}e&&ie&&we.alternate===null&&n(w,ie),T=h(we,T,ge),Ce===null?le=we:Ce.sibling=we,Ce=we,ie=Ee}if(ge===j.length)return a(w,ie),Te&&En(w,ge),le;if(ie===null){for(;ge<j.length;ge++)ie=G(w,j[ge],B),ie!==null&&(T=h(ie,T,ge),Ce===null?le=ie:Ce.sibling=ie,Ce=ie);return Te&&En(w,ge),le}for(ie=l(ie);ge<j.length;ge++)Ee=L(ie,w,ge,j[ge],B),Ee!==null&&(e&&Ee.alternate!==null&&ie.delete(Ee.key===null?ge:Ee.key),T=h(Ee,T,ge),Ce===null?le=Ee:Ce.sibling=Ee,Ce=Ee);return e&&ie.forEach(function(vs){return n(w,vs)}),Te&&En(w,ge),le}function ce(w,T,j,B){if(j==null)throw Error(r(151));for(var le=null,Ce=null,ie=T,ge=T=0,Ee=null,we=j.next();ie!==null&&!we.done;ge++,we=j.next()){ie.index>ge?(Ee=ie,ie=null):Ee=ie.sibling;var vs=O(w,ie,we.value,B);if(vs===null){ie===null&&(ie=Ee);break}e&&ie&&vs.alternate===null&&n(w,ie),T=h(vs,T,ge),Ce===null?le=vs:Ce.sibling=vs,Ce=vs,ie=Ee}if(we.done)return a(w,ie),Te&&En(w,ge),le;if(ie===null){for(;!we.done;ge++,we=j.next())we=G(w,we.value,B),we!==null&&(T=h(we,T,ge),Ce===null?le=we:Ce.sibling=we,Ce=we);return Te&&En(w,ge),le}for(ie=l(ie);!we.done;ge++,we=j.next())we=L(ie,w,ge,we.value,B),we!==null&&(e&&we.alternate!==null&&ie.delete(we.key===null?ge:we.key),T=h(we,T,ge),Ce===null?le=we:Ce.sibling=we,Ce=we);return e&&ie.forEach(function(dE){return n(w,dE)}),Te&&En(w,ge),le}function Ue(w,T,j,B){if(typeof j=="object"&&j!==null&&j.type===P&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case C:e:{for(var le=j.key;T!==null;){if(T.key===le){if(le=j.type,le===P){if(T.tag===7){a(w,T.sibling),B=u(T,j.props.children),B.return=w,w=B;break e}}else if(T.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===ue&&Ws(le)===T.type){a(w,T.sibling),B=u(T,j.props),$a(B,j),B.return=w,w=B;break e}a(w,T);break}else n(w,T);T=T.sibling}j.type===P?(B=Fs(j.props.children,w.mode,B,j.key),B.return=w,w=B):(B=Ml(j.type,j.key,j.props,null,w.mode,B),$a(B,j),B.return=w,w=B)}return _(w);case N:e:{for(le=j.key;T!==null;){if(T.key===le)if(T.tag===4&&T.stateNode.containerInfo===j.containerInfo&&T.stateNode.implementation===j.implementation){a(w,T.sibling),B=u(T,j.children||[]),B.return=w,w=B;break e}else{a(w,T);break}else n(w,T);T=T.sibling}B=mu(j,w.mode,B),B.return=w,w=B}return _(w);case ue:return j=Ws(j),Ue(w,T,j,B)}if(V(j))return se(w,T,j,B);if(te(j)){if(le=te(j),typeof le!="function")throw Error(r(150));return j=le.call(j),ce(w,T,j,B)}if(typeof j.then=="function")return Ue(w,T,Hl(j),B);if(j.$$typeof===M)return Ue(w,T,Ul(w,j),B);Gl(w,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,T!==null&&T.tag===6?(a(w,T.sibling),B=u(T,j),B.return=w,w=B):(a(w,T),B=fu(j,w.mode,B),B.return=w,w=B),_(w)):a(w,T)}return function(w,T,j,B){try{Qa=0;var le=Ue(w,T,j,B);return Hi=null,le}catch(ie){if(ie===Bi||ie===zl)throw ie;var Ce=kt(29,ie,null,w.mode);return Ce.lanes=B,Ce.return=w,Ce}}}var Qs=op(!0),cp=op(!1),ts=!1;function Cu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ns(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(je&2)!==0){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,n=Il(e),Ym(e,null,a),n}return Ol(e,l,n,a),Il(e)}function Za(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,em(e,a)}}function Au(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var u=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?u=h=_:h=h.next=_,a=a.next}while(a!==null);h===null?u=h=n:h=h.next=n}else u=h=n;a={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var ju=!1;function Ja(){if(ju){var e=zi;if(e!==null)throw e}}function er(e,n,a,l){ju=!1;var u=e.updateQueue;ts=!1;var h=u.firstBaseUpdate,_=u.lastBaseUpdate,v=u.shared.pending;if(v!==null){u.shared.pending=null;var S=v,R=S.next;S.next=null,_===null?h=R:_.next=R,_=S;var z=e.alternate;z!==null&&(z=z.updateQueue,v=z.lastBaseUpdate,v!==_&&(v===null?z.firstBaseUpdate=R:v.next=R,z.lastBaseUpdate=S))}if(h!==null){var G=u.baseState;_=0,z=R=S=null,v=h;do{var O=v.lane&-536870913,L=O!==v.lane;if(L?(Se&O)===O:(l&O)===O){O!==0&&O===Pi&&(ju=!0),z!==null&&(z=z.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var se=e,ce=v;O=n;var Ue=a;switch(ce.tag){case 1:if(se=ce.payload,typeof se=="function"){G=se.call(Ue,G,O);break e}G=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=ce.payload,O=typeof se=="function"?se.call(Ue,G,O):se,O==null)break e;G=b({},G,O);break e;case 2:ts=!0}}O=v.callback,O!==null&&(e.flags|=64,L&&(e.flags|=8192),L=u.callbacks,L===null?u.callbacks=[O]:L.push(O))}else L={lane:O,tag:v.tag,payload:v.payload,callback:v.callback,next:null},z===null?(R=z=L,S=G):z=z.next=L,_|=O;if(v=v.next,v===null){if(v=u.shared.pending,v===null)break;L=v,v=L.next,L.next=null,u.lastBaseUpdate=L,u.shared.pending=null}}while(!0);z===null&&(S=G),u.baseState=S,u.firstBaseUpdate=R,u.lastBaseUpdate=z,h===null&&(u.shared.lanes=0),os|=_,e.lanes=_,e.memoizedState=G}}function up(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function dp(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)up(a[e],n)}var Gi=E(null),Fl=E(0);function hp(e,n){e=Mn,k(Fl,e),k(Gi,n),Mn=e|n.baseLanes}function Ru(){k(Fl,Mn),k(Gi,Gi.current)}function Du(){Mn=Fl.current,A(Gi),A(Fl)}var Lt=E(null),Wt=null;function is(e){var n=e.alternate;k($e,$e.current&1),k(Lt,e),Wt===null&&(n===null||Gi.current!==null||n.memoizedState!==null)&&(Wt=e)}function Ou(e){k($e,$e.current),k(Lt,e),Wt===null&&(Wt=e)}function fp(e){e.tag===22?(k($e,$e.current),k(Lt,e),Wt===null&&(Wt=e)):as()}function as(){k($e,$e.current),k(Lt,Lt.current)}function Ut(e){A(Lt),Wt===e&&(Wt=null),A($e)}var $e=E(0);function ql(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Pd(a)||zd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Cn=0,pe=null,ke=null,et=null,Vl=!1,Fi=!1,$s=!1,Yl=0,tr=0,qi=null,tS=0;function Ye(){throw Error(r(321))}function Iu(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Mt(e[a],n[a]))return!1;return!0}function Mu(e,n,a,l,u,h){return Cn=h,pe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,I.H=e===null||e.memoizedState===null?Qp:Ku,$s=!1,h=a(l,u),$s=!1,Fi&&(h=pp(n,a,l,u)),mp(e),h}function mp(e){I.H=ir;var n=ke!==null&&ke.next!==null;if(Cn=0,et=ke=pe=null,Vl=!1,tr=0,qi=null,n)throw Error(r(300));e===null||tt||(e=e.dependencies,e!==null&&Ll(e)&&(tt=!0))}function pp(e,n,a,l){pe=e;var u=0;do{if(Fi&&(qi=null),tr=0,Fi=!1,25<=u)throw Error(r(301));if(u+=1,et=ke=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}I.H=$p,h=n(a,l)}while(Fi);return h}function nS(){var e=I.H,n=e.useState()[0];return n=typeof n.then=="function"?nr(n):n,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(pe.flags|=1024),n}function ku(){var e=Yl!==0;return Yl=0,e}function Lu(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Uu(e){if(Vl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Vl=!1}Cn=0,et=ke=pe=null,Fi=!1,tr=Yl=0,qi=null}function yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?pe.memoizedState=et=e:et=et.next=e,et}function Ze(){if(ke===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var n=et===null?pe.memoizedState:et.next;if(n!==null)et=n,ke=e;else{if(e===null)throw pe.alternate===null?Error(r(467)):Error(r(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},et===null?pe.memoizedState=et=e:et=et.next=e}return et}function Xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nr(e){var n=tr;return tr+=1,qi===null&&(qi=[]),e=ap(qi,e,n),n=pe,(et===null?n.memoizedState:et.next)===null&&(n=n.alternate,I.H=n===null||n.memoizedState===null?Qp:Ku),e}function Wl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return nr(e);if(e.$$typeof===M)return ht(e)}throw Error(r(438,String(e)))}function Pu(e){var n=null,a=pe.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Xl(),pe.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=De;return n.index++,a}function wn(e,n){return typeof n=="function"?n(e):n}function Kl(e){var n=Ze();return zu(n,ke,e)}function zu(e,n,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var u=e.baseQueue,h=l.pending;if(h!==null){if(u!==null){var _=u.next;u.next=h.next,h.next=_}n.baseQueue=u=h,l.pending=null}if(h=e.baseState,u===null)e.memoizedState=h;else{n=u.next;var v=_=null,S=null,R=n,z=!1;do{var G=R.lane&-536870913;if(G!==R.lane?(Se&G)===G:(Cn&G)===G){var O=R.revertLane;if(O===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),G===Pi&&(z=!0);else if((Cn&O)===O){R=R.next,O===Pi&&(z=!0);continue}else G={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(v=S=G,_=h):S=S.next=G,pe.lanes|=O,os|=O;G=R.action,$s&&a(h,G),h=R.hasEagerState?R.eagerState:a(h,G)}else O={lane:G,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(v=S=O,_=h):S=S.next=O,pe.lanes|=G,os|=G;R=R.next}while(R!==null&&R!==n);if(S===null?_=h:S.next=v,!Mt(h,e.memoizedState)&&(tt=!0,z&&(a=zi,a!==null)))throw a;e.memoizedState=h,e.baseState=_,e.baseQueue=S,l.lastRenderedState=h}return u===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Bu(e){var n=Ze(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,u=a.pending,h=n.memoizedState;if(u!==null){a.pending=null;var _=u=u.next;do h=e(h,_.action),_=_.next;while(_!==u);Mt(h,n.memoizedState)||(tt=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),a.lastRenderedState=h}return[h,l]}function gp(e,n,a){var l=pe,u=Ze(),h=Te;if(h){if(a===void 0)throw Error(r(407));a=a()}else a=n();var _=!Mt((ke||u).memoizedState,a);if(_&&(u.memoizedState=a,tt=!0),u=u.queue,Fu(yp.bind(null,l,u,e),[e]),u.getSnapshot!==n||_||et!==null&&et.memoizedState.tag&1){if(l.flags|=2048,Vi(9,{destroy:void 0},vp.bind(null,l,u,a,n),null),Be===null)throw Error(r(349));h||(Cn&127)!==0||_p(l,n,a)}return a}function _p(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=pe.updateQueue,n===null?(n=Xl(),pe.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function vp(e,n,a,l){n.value=a,n.getSnapshot=l,bp(n)&&xp(e)}function yp(e,n,a){return a(function(){bp(n)&&xp(e)})}function bp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Mt(e,a)}catch{return!0}}function xp(e){var n=Gs(e,2);n!==null&&jt(n,e,2)}function Hu(e){var n=yt();if(typeof e=="function"){var a=e;if(e=a(),$s){Wn(!0);try{a()}finally{Wn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:e},n}function Sp(e,n,a,l){return e.baseState=a,zu(e,ke,typeof l=="function"?l:wn)}function sS(e,n,a,l,u){if(Zl(e))throw Error(r(485));if(e=n.action,e!==null){var h={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){h.listeners.push(_)}};I.T!==null?a(!0):h.isTransition=!1,l(h),a=n.pending,a===null?(h.next=n.pending=h,Ep(n,h)):(h.next=a.next,n.pending=a.next=h)}}function Ep(e,n){var a=n.action,l=n.payload,u=e.state;if(n.isTransition){var h=I.T,_={};I.T=_;try{var v=a(u,l),S=I.S;S!==null&&S(_,v),Np(e,n,v)}catch(R){Gu(e,n,R)}finally{h!==null&&_.types!==null&&(h.types=_.types),I.T=h}}else try{h=a(u,l),Np(e,n,h)}catch(R){Gu(e,n,R)}}function Np(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Tp(e,n,l)},function(l){return Gu(e,n,l)}):Tp(e,n,a)}function Tp(e,n,a){n.status="fulfilled",n.value=a,Cp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Ep(e,a)))}function Gu(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Cp(n),n=n.next;while(n!==l)}e.action=null}function Cp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function wp(e,n){return n}function Ap(e,n){if(Te){var a=Be.formState;if(a!==null){e:{var l=pe;if(Te){if(Fe){t:{for(var u=Fe,h=Xt;u.nodeType!==8;){if(!h){u=null;break t}if(u=Kt(u.nextSibling),u===null){u=null;break t}}h=u.data,u=h==="F!"||h==="F"?u:null}if(u){Fe=Kt(u.nextSibling),l=u.data==="F!";break e}}Jn(l)}l=!1}l&&(n=a[0])}}return a=yt(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wp,lastRenderedState:n},a.queue=l,a=Xp.bind(null,pe,l),l.dispatch=a,l=Hu(!1),h=Wu.bind(null,pe,!1,l.queue),l=yt(),u={state:n,dispatch:null,action:e,pending:null},l.queue=u,a=sS.bind(null,pe,u,h,a),u.dispatch=a,l.memoizedState=e,[n,a,!1]}function jp(e){var n=Ze();return Rp(n,ke,e)}function Rp(e,n,a){if(n=zu(e,n,wp)[0],e=Kl(wn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=nr(n)}catch(_){throw _===Bi?zl:_}else l=n;n=Ze();var u=n.queue,h=u.dispatch;return a!==n.memoizedState&&(pe.flags|=2048,Vi(9,{destroy:void 0},iS.bind(null,u,a),null)),[l,h,e]}function iS(e,n){e.action=n}function Dp(e){var n=Ze(),a=ke;if(a!==null)return Rp(n,a,e);Ze(),n=n.memoizedState,a=Ze();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function Vi(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=pe.updateQueue,n===null&&(n=Xl(),pe.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function Op(){return Ze().memoizedState}function Ql(e,n,a,l){var u=yt();pe.flags|=e,u.memoizedState=Vi(1|n,{destroy:void 0},a,l===void 0?null:l)}function $l(e,n,a,l){var u=Ze();l=l===void 0?null:l;var h=u.memoizedState.inst;ke!==null&&l!==null&&Iu(l,ke.memoizedState.deps)?u.memoizedState=Vi(n,h,a,l):(pe.flags|=e,u.memoizedState=Vi(1|n,h,a,l))}function Ip(e,n){Ql(8390656,8,e,n)}function Fu(e,n){$l(2048,8,e,n)}function aS(e){pe.flags|=4;var n=pe.updateQueue;if(n===null)n=Xl(),pe.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Mp(e){var n=Ze().memoizedState;return aS({ref:n,nextImpl:e}),function(){if((je&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function kp(e,n){return $l(4,2,e,n)}function Lp(e,n){return $l(4,4,e,n)}function Up(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Pp(e,n,a){a=a!=null?a.concat([e]):null,$l(4,4,Up.bind(null,n,e),a)}function qu(){}function zp(e,n){var a=Ze();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Iu(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function Bp(e,n){var a=Ze();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Iu(n,l[1]))return l[0];if(l=e(),$s){Wn(!0);try{e()}finally{Wn(!1)}}return a.memoizedState=[l,n],l}function Vu(e,n,a){return a===void 0||(Cn&1073741824)!==0&&(Se&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Hg(),pe.lanes|=e,os|=e,a)}function Hp(e,n,a,l){return Mt(a,n)?a:Gi.current!==null?(e=Vu(e,a,l),Mt(e,n)||(tt=!0),e):(Cn&42)===0||(Cn&1073741824)!==0&&(Se&261930)===0?(tt=!0,e.memoizedState=a):(e=Hg(),pe.lanes|=e,os|=e,n)}function Gp(e,n,a,l,u){var h=q.p;q.p=h!==0&&8>h?h:8;var _=I.T,v={};I.T=v,Wu(e,!1,n,a);try{var S=u(),R=I.S;if(R!==null&&R(v,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var z=eS(S,l);sr(e,n,z,Bt(e))}else sr(e,n,l,Bt(e))}catch(G){sr(e,n,{then:function(){},status:"rejected",reason:G},Bt())}finally{q.p=h,_!==null&&v.types!==null&&(_.types=v.types),I.T=_}}function rS(){}function Yu(e,n,a,l){if(e.tag!==5)throw Error(r(476));var u=Fp(e).queue;Gp(e,u,n,Q,a===null?rS:function(){return qp(e),a(l)})}function Fp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:Q},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function qp(e){var n=Fp(e);n.next===null&&(n=e.alternate.memoizedState),sr(e,n.next.queue,{},Bt())}function Xu(){return ht(br)}function Vp(){return Ze().memoizedState}function Yp(){return Ze().memoizedState}function lS(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Bt();e=ns(a);var l=ss(n,e,a);l!==null&&(jt(l,n,a),Za(l,n,a)),n={cache:Su()},e.payload=n;return}n=n.return}}function oS(e,n,a){var l=Bt();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zl(e)?Wp(n,a):(a=du(e,n,a,l),a!==null&&(jt(a,e,l),Kp(a,n,l)))}function Xp(e,n,a){var l=Bt();sr(e,n,a,l)}function sr(e,n,a,l){var u={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zl(e))Wp(n,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var _=n.lastRenderedState,v=h(_,a);if(u.hasEagerState=!0,u.eagerState=v,Mt(v,_))return Ol(e,n,u,0),Be===null&&Dl(),!1}catch{}if(a=du(e,n,u,l),a!==null)return jt(a,e,l),Kp(a,n,l),!0}return!1}function Wu(e,n,a,l){if(l={lane:2,revertLane:Cd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zl(e)){if(n)throw Error(r(479))}else n=du(e,a,l,2),n!==null&&jt(n,e,2)}function Zl(e){var n=e.alternate;return e===pe||n!==null&&n===pe}function Wp(e,n){Fi=Vl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Kp(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,em(e,a)}}var ir={readContext:ht,use:Wl,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye};ir.useEffectEvent=Ye;var Qp={readContext:ht,use:Wl,useCallback:function(e,n){return yt().memoizedState=[e,n===void 0?null:n],e},useContext:ht,useEffect:Ip,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Ql(4194308,4,Up.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Ql(4194308,4,e,n)},useInsertionEffect:function(e,n){Ql(4,2,e,n)},useMemo:function(e,n){var a=yt();n=n===void 0?null:n;var l=e();if($s){Wn(!0);try{e()}finally{Wn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=yt();if(a!==void 0){var u=a(n);if($s){Wn(!0);try{a(n)}finally{Wn(!1)}}}else u=n;return l.memoizedState=l.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},l.queue=e,e=e.dispatch=oS.bind(null,pe,e),[l.memoizedState,e]},useRef:function(e){var n=yt();return e={current:e},n.memoizedState=e},useState:function(e){e=Hu(e);var n=e.queue,a=Xp.bind(null,pe,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:qu,useDeferredValue:function(e,n){var a=yt();return Vu(a,e,n)},useTransition:function(){var e=Hu(!1);return e=Gp.bind(null,pe,e.queue,!0,!1),yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=pe,u=yt();if(Te){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),Be===null)throw Error(r(349));(Se&127)!==0||_p(l,n,a)}u.memoizedState=a;var h={value:a,getSnapshot:n};return u.queue=h,Ip(yp.bind(null,l,h,e),[e]),l.flags|=2048,Vi(9,{destroy:void 0},vp.bind(null,l,h,a,n),null),a},useId:function(){var e=yt(),n=Be.identifierPrefix;if(Te){var a=fn,l=hn;a=(l&~(1<<32-It(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Yl++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=tS++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Xu,useFormState:Ap,useActionState:Ap,useOptimistic:function(e){var n=yt();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Wu.bind(null,pe,!0,a),a.dispatch=n,[e,n]},useMemoCache:Pu,useCacheRefresh:function(){return yt().memoizedState=lS.bind(null,pe)},useEffectEvent:function(e){var n=yt(),a={impl:e};return n.memoizedState=a,function(){if((je&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Ku={readContext:ht,use:Wl,useCallback:zp,useContext:ht,useEffect:Fu,useImperativeHandle:Pp,useInsertionEffect:kp,useLayoutEffect:Lp,useMemo:Bp,useReducer:Kl,useRef:Op,useState:function(){return Kl(wn)},useDebugValue:qu,useDeferredValue:function(e,n){var a=Ze();return Hp(a,ke.memoizedState,e,n)},useTransition:function(){var e=Kl(wn)[0],n=Ze().memoizedState;return[typeof e=="boolean"?e:nr(e),n]},useSyncExternalStore:gp,useId:Vp,useHostTransitionStatus:Xu,useFormState:jp,useActionState:jp,useOptimistic:function(e,n){var a=Ze();return Sp(a,ke,e,n)},useMemoCache:Pu,useCacheRefresh:Yp};Ku.useEffectEvent=Mp;var $p={readContext:ht,use:Wl,useCallback:zp,useContext:ht,useEffect:Fu,useImperativeHandle:Pp,useInsertionEffect:kp,useLayoutEffect:Lp,useMemo:Bp,useReducer:Bu,useRef:Op,useState:function(){return Bu(wn)},useDebugValue:qu,useDeferredValue:function(e,n){var a=Ze();return ke===null?Vu(a,e,n):Hp(a,ke.memoizedState,e,n)},useTransition:function(){var e=Bu(wn)[0],n=Ze().memoizedState;return[typeof e=="boolean"?e:nr(e),n]},useSyncExternalStore:gp,useId:Vp,useHostTransitionStatus:Xu,useFormState:Dp,useActionState:Dp,useOptimistic:function(e,n){var a=Ze();return ke!==null?Sp(a,ke,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Pu,useCacheRefresh:Yp};$p.useEffectEvent=Mp;function Qu(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:b({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var $u={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=Bt(),u=ns(l);u.payload=n,a!=null&&(u.callback=a),n=ss(e,u,l),n!==null&&(jt(n,e,l),Za(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=Bt(),u=ns(l);u.tag=1,u.payload=n,a!=null&&(u.callback=a),n=ss(e,u,l),n!==null&&(jt(n,e,l),Za(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Bt(),l=ns(a);l.tag=2,n!=null&&(l.callback=n),n=ss(e,l,a),n!==null&&(jt(n,e,a),Za(n,e,a))}};function Zp(e,n,a,l,u,h,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,_):n.prototype&&n.prototype.isPureReactComponent?!qa(a,l)||!qa(u,h):!0}function Jp(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&$u.enqueueReplaceState(n,n.state,null)}function Zs(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=b({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function eg(e){Rl(e)}function tg(e){console.error(e)}function ng(e){Rl(e)}function Jl(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function sg(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Zu(e,n,a){return a=ns(a),a.tag=3,a.payload={element:null},a.callback=function(){Jl(e,n)},a}function ig(e){return e=ns(e),e.tag=3,e}function ag(e,n,a,l){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var h=l.value;e.payload=function(){return u(h)},e.callback=function(){sg(n,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){sg(n,a,l),typeof u!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function cS(e,n,a,l,u){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ui(n,a,u,!0),a=Lt.current,a!==null){switch(a.tag){case 31:case 13:return Wt===null?ho():a.alternate===null&&Xe===0&&(Xe=3),a.flags&=-257,a.flags|=65536,a.lanes=u,l===Bl?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Ed(e,l,u)),!1;case 22:return a.flags|=65536,l===Bl?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Ed(e,l,u)),!1}throw Error(r(435,a.tag))}return Ed(e,l,u),ho(),!1}if(Te)return n=Lt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,l!==_u&&(e=Error(r(422),{cause:l}),Xa(qt(e,a)))):(l!==_u&&(n=Error(r(423),{cause:l}),Xa(qt(n,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,l=qt(l,a),u=Zu(e.stateNode,l,u),Au(e,u),Xe!==4&&(Xe=2)),!1;var h=Error(r(520),{cause:l});if(h=qt(h,a),hr===null?hr=[h]:hr.push(h),Xe!==4&&(Xe=2),n===null)return!0;l=qt(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=Zu(a.stateNode,l,e),Au(a,e),!1;case 1:if(n=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(cs===null||!cs.has(h))))return a.flags|=65536,u&=-u,a.lanes|=u,u=ig(u),ag(u,e,a,l),Au(a,u),!1}a=a.return}while(a!==null);return!1}var Ju=Error(r(461)),tt=!1;function ft(e,n,a,l){n.child=e===null?cp(n,null,a,l):Qs(n,e.child,a,l)}function rg(e,n,a,l,u){a=a.render;var h=n.ref;if("ref"in l){var _={};for(var v in l)v!=="ref"&&(_[v]=l[v])}else _=l;return Ys(n),l=Mu(e,n,a,_,h,u),v=ku(),e!==null&&!tt?(Lu(e,n,u),An(e,n,u)):(Te&&v&&pu(n),n.flags|=1,ft(e,n,l,u),n.child)}function lg(e,n,a,l,u){if(e===null){var h=a.type;return typeof h=="function"&&!hu(h)&&h.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=h,og(e,n,h,l,u)):(e=Ml(a.type,null,l,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!ld(e,u)){var _=h.memoizedProps;if(a=a.compare,a=a!==null?a:qa,a(_,l)&&e.ref===n.ref)return An(e,n,u)}return n.flags|=1,e=Sn(h,l),e.ref=n.ref,e.return=n,n.child=e}function og(e,n,a,l,u){if(e!==null){var h=e.memoizedProps;if(qa(h,l)&&e.ref===n.ref)if(tt=!1,n.pendingProps=l=h,ld(e,u))(e.flags&131072)!==0&&(tt=!0);else return n.lanes=e.lanes,An(e,n,u)}return ed(e,n,a,l,u)}function cg(e,n,a,l){var u=l.children,h=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,e!==null){for(l=n.child=e.child,u=0;l!==null;)u=u|l.lanes|l.childLanes,l=l.sibling;l=u&~h}else l=0,n.child=null;return ug(e,n,h,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Pl(n,h!==null?h.cachePool:null),h!==null?hp(n,h):Ru(),fp(n);else return l=n.lanes=536870912,ug(e,n,h!==null?h.baseLanes|a:a,a,l)}else h!==null?(Pl(n,h.cachePool),hp(n,h),as(),n.memoizedState=null):(e!==null&&Pl(n,null),Ru(),as());return ft(e,n,u,a),n.child}function ar(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function ug(e,n,a,l,u){var h=Nu();return h=h===null?null:{parent:Je._currentValue,pool:h},n.memoizedState={baseLanes:a,cachePool:h},e!==null&&Pl(n,null),Ru(),fp(n),e!==null&&Ui(e,n,l,!0),n.childLanes=u,null}function eo(e,n){return n=no({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function dg(e,n,a){return Qs(n,e.child,null,a),e=eo(n,n.pendingProps),e.flags|=2,Ut(n),n.memoizedState=null,e}function uS(e,n,a){var l=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Te){if(l.mode==="hidden")return e=eo(n,l),n.lanes=536870912,ar(null,e);if(Ou(n),(e=Fe)?(e=E_(e,Xt),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:$n!==null?{id:hn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},a=Wm(e),a.return=n,n.child=a,dt=n,Fe=null)):e=null,e===null)throw Jn(n);return n.lanes=536870912,null}return eo(n,l)}var h=e.memoizedState;if(h!==null){var _=h.dehydrated;if(Ou(n),u)if(n.flags&256)n.flags&=-257,n=dg(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(tt||Ui(e,n,a,!1),u=(a&e.childLanes)!==0,tt||u){if(l=Be,l!==null&&(_=tm(l,a),_!==0&&_!==h.retryLane))throw h.retryLane=_,Gs(e,_),jt(l,e,_),Ju;ho(),n=dg(e,n,a)}else e=h.treeContext,Fe=Kt(_.nextSibling),dt=n,Te=!0,Zn=null,Xt=!1,e!==null&&$m(n,e),n=eo(n,l),n.flags|=4096;return n}return e=Sn(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function to(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function ed(e,n,a,l,u){return Ys(n),a=Mu(e,n,a,l,void 0,u),l=ku(),e!==null&&!tt?(Lu(e,n,u),An(e,n,u)):(Te&&l&&pu(n),n.flags|=1,ft(e,n,a,u),n.child)}function hg(e,n,a,l,u,h){return Ys(n),n.updateQueue=null,a=pp(n,l,a,u),mp(e),l=ku(),e!==null&&!tt?(Lu(e,n,h),An(e,n,h)):(Te&&l&&pu(n),n.flags|=1,ft(e,n,a,h),n.child)}function fg(e,n,a,l,u){if(Ys(n),n.stateNode===null){var h=Ii,_=a.contextType;typeof _=="object"&&_!==null&&(h=ht(_)),h=new a(l,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=$u,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=l,h.state=n.memoizedState,h.refs={},Cu(n),_=a.contextType,h.context=typeof _=="object"&&_!==null?ht(_):Ii,h.state=n.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Qu(n,a,_,l),h.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(_=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),_!==h.state&&$u.enqueueReplaceState(h,h.state,null),er(n,l,h,u),Ja(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){h=n.stateNode;var v=n.memoizedProps,S=Zs(a,v);h.props=S;var R=h.context,z=a.contextType;_=Ii,typeof z=="object"&&z!==null&&(_=ht(z));var G=a.getDerivedStateFromProps;z=typeof G=="function"||typeof h.getSnapshotBeforeUpdate=="function",v=n.pendingProps!==v,z||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v||R!==_)&&Jp(n,h,l,_),ts=!1;var O=n.memoizedState;h.state=O,er(n,l,h,u),Ja(),R=n.memoizedState,v||O!==R||ts?(typeof G=="function"&&(Qu(n,a,G,l),R=n.memoizedState),(S=ts||Zp(n,a,S,l,O,R,_))?(z||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=R),h.props=l,h.state=R,h.context=_,l=S):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{h=n.stateNode,wu(e,n),_=n.memoizedProps,z=Zs(a,_),h.props=z,G=n.pendingProps,O=h.context,R=a.contextType,S=Ii,typeof R=="object"&&R!==null&&(S=ht(R)),v=a.getDerivedStateFromProps,(R=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==G||O!==S)&&Jp(n,h,l,S),ts=!1,O=n.memoizedState,h.state=O,er(n,l,h,u),Ja();var L=n.memoizedState;_!==G||O!==L||ts||e!==null&&e.dependencies!==null&&Ll(e.dependencies)?(typeof v=="function"&&(Qu(n,a,v,l),L=n.memoizedState),(z=ts||Zp(n,a,z,l,O,L,S)||e!==null&&e.dependencies!==null&&Ll(e.dependencies))?(R||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,L,S),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,L,S)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=L),h.props=l,h.state=L,h.context=S,l=z):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),l=!1)}return h=l,to(e,n),l=(n.flags&128)!==0,h||l?(h=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&l?(n.child=Qs(n,e.child,null,u),n.child=Qs(n,null,a,u)):ft(e,n,a,u),n.memoizedState=h.state,e=n.child):e=An(e,n,u),e}function mg(e,n,a,l){return qs(),n.flags|=256,ft(e,n,a,l),n.child}var td={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nd(e){return{baseLanes:e,cachePool:sp()}}function sd(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=zt),e}function pg(e,n,a){var l=n.pendingProps,u=!1,h=(n.flags&128)!==0,_;if((_=h)||(_=e!==null&&e.memoizedState===null?!1:($e.current&2)!==0),_&&(u=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if(Te){if(u?is(n):as(),(e=Fe)?(e=E_(e,Xt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:$n!==null?{id:hn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},a=Wm(e),a.return=n,n.child=a,dt=n,Fe=null)):e=null,e===null)throw Jn(n);return zd(e)?n.lanes=32:n.lanes=536870912,null}var v=l.children;return l=l.fallback,u?(as(),u=n.mode,v=no({mode:"hidden",children:v},u),l=Fs(l,u,a,null),v.return=n,l.return=n,v.sibling=l,n.child=v,l=n.child,l.memoizedState=nd(a),l.childLanes=sd(e,_,a),n.memoizedState=td,ar(null,l)):(is(n),id(n,v))}var S=e.memoizedState;if(S!==null&&(v=S.dehydrated,v!==null)){if(h)n.flags&256?(is(n),n.flags&=-257,n=ad(e,n,a)):n.memoizedState!==null?(as(),n.child=e.child,n.flags|=128,n=null):(as(),v=l.fallback,u=n.mode,l=no({mode:"visible",children:l.children},u),v=Fs(v,u,a,null),v.flags|=2,l.return=n,v.return=n,l.sibling=v,n.child=l,Qs(n,e.child,null,a),l=n.child,l.memoizedState=nd(a),l.childLanes=sd(e,_,a),n.memoizedState=td,n=ar(null,l));else if(is(n),zd(v)){if(_=v.nextSibling&&v.nextSibling.dataset,_)var R=_.dgst;_=R,l=Error(r(419)),l.stack="",l.digest=_,Xa({value:l,source:null,stack:null}),n=ad(e,n,a)}else if(tt||Ui(e,n,a,!1),_=(a&e.childLanes)!==0,tt||_){if(_=Be,_!==null&&(l=tm(_,a),l!==0&&l!==S.retryLane))throw S.retryLane=l,Gs(e,l),jt(_,e,l),Ju;Pd(v)||ho(),n=ad(e,n,a)}else Pd(v)?(n.flags|=192,n.child=e.child,n=null):(e=S.treeContext,Fe=Kt(v.nextSibling),dt=n,Te=!0,Zn=null,Xt=!1,e!==null&&$m(n,e),n=id(n,l.children),n.flags|=4096);return n}return u?(as(),v=l.fallback,u=n.mode,S=e.child,R=S.sibling,l=Sn(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&65011712,R!==null?v=Sn(R,v):(v=Fs(v,u,a,null),v.flags|=2),v.return=n,l.return=n,l.sibling=v,n.child=l,ar(null,l),l=n.child,v=e.child.memoizedState,v===null?v=nd(a):(u=v.cachePool,u!==null?(S=Je._currentValue,u=u.parent!==S?{parent:S,pool:S}:u):u=sp(),v={baseLanes:v.baseLanes|a,cachePool:u}),l.memoizedState=v,l.childLanes=sd(e,_,a),n.memoizedState=td,ar(e.child,l)):(is(n),a=e.child,e=a.sibling,a=Sn(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=a,n.memoizedState=null,a)}function id(e,n){return n=no({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function no(e,n){return e=kt(22,e,null,n),e.lanes=0,e}function ad(e,n,a){return Qs(n,e.child,null,a),e=id(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function gg(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),bu(e.return,n,a)}function rd(e,n,a,l,u,h){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:u,treeForkCount:h}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=u,_.treeForkCount=h)}function _g(e,n,a){var l=n.pendingProps,u=l.revealOrder,h=l.tail;l=l.children;var _=$e.current,v=(_&2)!==0;if(v?(_=_&1|2,n.flags|=128):_&=1,k($e,_),ft(e,n,l,a),l=Te?Ya:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gg(e,a,n);else if(e.tag===19)gg(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=n.child,u=null;a!==null;)e=a.alternate,e!==null&&ql(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=n.child,n.child=null):(u=a.sibling,a.sibling=null),rd(n,!1,u,a,h,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&ql(e)===null){n.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}rd(n,!0,a,null,h,l);break;case"together":rd(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function An(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),os|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Ui(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=Sn(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Sn(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function ld(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ll(e)))}function dS(e,n,a){switch(n.tag){case 3:Qe(n,n.stateNode.containerInfo),es(n,Je,e.memoizedState.cache),qs();break;case 27:case 5:dn(n);break;case 4:Qe(n,n.stateNode.containerInfo);break;case 10:es(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ou(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(is(n),n.flags|=128,null):(a&n.child.childLanes)!==0?pg(e,n,a):(is(n),e=An(e,n,a),e!==null?e.sibling:null);is(n);break;case 19:var u=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ui(e,n,a,!1),l=(a&n.childLanes)!==0),u){if(l)return _g(e,n,a);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),k($e,$e.current),l)break;return null;case 22:return n.lanes=0,cg(e,n,a,n.pendingProps);case 24:es(n,Je,e.memoizedState.cache)}return An(e,n,a)}function vg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)tt=!0;else{if(!ld(e,a)&&(n.flags&128)===0)return tt=!1,dS(e,n,a);tt=(e.flags&131072)!==0}else tt=!1,Te&&(n.flags&1048576)!==0&&Qm(n,Ya,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=Ws(n.elementType),n.type=e,typeof e=="function")hu(e)?(l=Zs(e,l),n.tag=1,n=fg(null,n,e,l,a)):(n.tag=0,n=ed(null,n,e,l,a));else{if(e!=null){var u=e.$$typeof;if(u===D){n.tag=11,n=rg(null,n,e,l,a);break e}else if(u===W){n.tag=14,n=lg(null,n,e,l,a);break e}}throw n=F(e)||e,Error(r(306,n,""))}}return n;case 0:return ed(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,u=Zs(l,n.pendingProps),fg(e,n,l,u,a);case 3:e:{if(Qe(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var h=n.memoizedState;u=h.element,wu(e,n),er(n,l,null,a);var _=n.memoizedState;if(l=_.cache,es(n,Je,l),l!==h.cache&&xu(n,[Je],a,!0),Ja(),l=_.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=mg(e,n,l,a);break e}else if(l!==u){u=qt(Error(r(424)),n),Xa(u),n=mg(e,n,l,a);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Fe=Kt(e.firstChild),dt=n,Te=!0,Zn=null,Xt=!0,a=cp(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(qs(),l===u){n=An(e,n,a);break e}ft(e,n,l,a)}n=n.child}return n;case 26:return to(e,n),e===null?(a=j_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Te||(a=n.type,e=n.pendingProps,l=yo(re.current).createElement(a),l[ut]=n,l[Et]=e,mt(l,a,e),rt(l),n.stateNode=l):n.memoizedState=j_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return dn(n),e===null&&Te&&(l=n.stateNode=C_(n.type,n.pendingProps,re.current),dt=n,Xt=!0,u=Fe,fs(n.type)?(Bd=u,Fe=Kt(l.firstChild)):Fe=u),ft(e,n,n.pendingProps.children,a),to(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Te&&((u=l=Fe)&&(l=HS(l,n.type,n.pendingProps,Xt),l!==null?(n.stateNode=l,dt=n,Fe=Kt(l.firstChild),Xt=!1,u=!0):u=!1),u||Jn(n)),dn(n),u=n.type,h=n.pendingProps,_=e!==null?e.memoizedProps:null,l=h.children,kd(u,h)?l=null:_!==null&&kd(u,_)&&(n.flags|=32),n.memoizedState!==null&&(u=Mu(e,n,nS,null,null,a),br._currentValue=u),to(e,n),ft(e,n,l,a),n.child;case 6:return e===null&&Te&&((e=a=Fe)&&(a=GS(a,n.pendingProps,Xt),a!==null?(n.stateNode=a,dt=n,Fe=null,e=!0):e=!1),e||Jn(n)),null;case 13:return pg(e,n,a);case 4:return Qe(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Qs(n,null,l,a):ft(e,n,l,a),n.child;case 11:return rg(e,n,n.type,n.pendingProps,a);case 7:return ft(e,n,n.pendingProps,a),n.child;case 8:return ft(e,n,n.pendingProps.children,a),n.child;case 12:return ft(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,es(n,n.type,l.value),ft(e,n,l.children,a),n.child;case 9:return u=n.type._context,l=n.pendingProps.children,Ys(n),u=ht(u),l=l(u),n.flags|=1,ft(e,n,l,a),n.child;case 14:return lg(e,n,n.type,n.pendingProps,a);case 15:return og(e,n,n.type,n.pendingProps,a);case 19:return _g(e,n,a);case 31:return uS(e,n,a);case 22:return cg(e,n,a,n.pendingProps);case 24:return Ys(n),l=ht(Je),e===null?(u=Nu(),u===null&&(u=Be,h=Su(),u.pooledCache=h,h.refCount++,h!==null&&(u.pooledCacheLanes|=a),u=h),n.memoizedState={parent:l,cache:u},Cu(n),es(n,Je,u)):((e.lanes&a)!==0&&(wu(e,n),er(n,null,null,a),Ja()),u=e.memoizedState,h=n.memoizedState,u.parent!==l?(u={parent:l,cache:l},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),es(n,Je,l)):(l=h.cache,es(n,Je,l),l!==u.cache&&xu(n,[Je],a,!0))),ft(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function jn(e){e.flags|=4}function od(e,n,a,l,u){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Vg())e.flags|=8192;else throw Ks=Bl,Tu}else e.flags&=-16777217}function yg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!M_(n))if(Vg())e.flags|=8192;else throw Ks=Bl,Tu}function so(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Zf():536870912,e.lanes|=n,Ki|=n)}function rr(e,n){if(!Te)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qe(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function hS(e,n,a){var l=n.pendingProps;switch(gu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(n),null;case 1:return qe(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Tn(Je),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Li(n)?jn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,vu())),qe(n),null;case 26:var u=n.type,h=n.memoizedState;return e===null?(jn(n),h!==null?(qe(n),yg(n,h)):(qe(n),od(n,u,null,l,a))):h?h!==e.memoizedState?(jn(n),qe(n),yg(n,h)):(qe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&jn(n),qe(n),od(n,u,e,l,a)),null;case 27:if(ml(n),a=re.current,u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&jn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return qe(n),null}e=H.current,Li(n)?Zm(n):(e=C_(u,l,a),n.stateNode=e,jn(n))}return qe(n),null;case 5:if(ml(n),u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&jn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return qe(n),null}if(h=H.current,Li(n))Zm(n);else{var _=yo(re.current);switch(h){case 1:h=_.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:h=_.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":h=_.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":h=_.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":h=_.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?_.createElement(u,{is:l.is}):_.createElement(u)}}h[ut]=n,h[Et]=l;e:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)h.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=h;e:switch(mt(h,u,l),u){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&jn(n)}}return qe(n),od(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&jn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=re.current,Li(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,u=dt,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}e[ut]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||p_(e.nodeValue,a)),e||Jn(n,!0)}else e=yo(e).createTextNode(l),e[ut]=n,n.stateNode=e}return qe(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=Li(n),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[ut]=n}else qs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qe(n),e=!1}else a=vu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ut(n),n):(Ut(n),null);if((n.flags&128)!==0)throw Error(r(558))}return qe(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Li(n),l!==null&&l.dehydrated!==null){if(e===null){if(!u)throw Error(r(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[ut]=n}else qs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qe(n),u=!1}else u=vu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(Ut(n),n):(Ut(n),null)}return Ut(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==u&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),so(n,n.updateQueue),qe(n),null);case 4:return Me(),e===null&&Rd(n.stateNode.containerInfo),qe(n),null;case 10:return Tn(n.type),qe(n),null;case 19:if(A($e),l=n.memoizedState,l===null)return qe(n),null;if(u=(n.flags&128)!==0,h=l.rendering,h===null)if(u)rr(l,!1);else{if(Xe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=ql(e),h!==null){for(n.flags|=128,rr(l,!1),e=h.updateQueue,n.updateQueue=e,so(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Xm(a,e),a=a.sibling;return k($e,$e.current&1|2),Te&&En(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Dt()>oo&&(n.flags|=128,u=!0,rr(l,!1),n.lanes=4194304)}else{if(!u)if(e=ql(h),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,n.updateQueue=e,so(n,e),rr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!Te)return qe(n),null}else 2*Dt()-l.renderingStartTime>oo&&a!==536870912&&(n.flags|=128,u=!0,rr(l,!1),n.lanes=4194304);l.isBackwards?(h.sibling=n.child,n.child=h):(e=l.last,e!==null?e.sibling=h:n.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Dt(),e.sibling=null,a=$e.current,k($e,u?a&1|2:a&1),Te&&En(n,l.treeForkCount),e):(qe(n),null);case 22:case 23:return Ut(n),Du(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(qe(n),n.subtreeFlags&6&&(n.flags|=8192)):qe(n),a=n.updateQueue,a!==null&&so(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&A(Xs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Tn(Je),qe(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function fS(e,n){switch(gu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Tn(Je),Me(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ml(n),null;case 31:if(n.memoizedState!==null){if(Ut(n),n.alternate===null)throw Error(r(340));qs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ut(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));qs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return A($e),null;case 4:return Me(),null;case 10:return Tn(n.type),null;case 22:case 23:return Ut(n),Du(),e!==null&&A(Xs),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Tn(Je),null;case 25:return null;default:return null}}function bg(e,n){switch(gu(n),n.tag){case 3:Tn(Je),Me();break;case 26:case 27:case 5:ml(n);break;case 4:Me();break;case 31:n.memoizedState!==null&&Ut(n);break;case 13:Ut(n);break;case 19:A($e);break;case 10:Tn(n.type);break;case 22:case 23:Ut(n),Du(),e!==null&&A(Xs);break;case 24:Tn(Je)}}function lr(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var u=l.next;a=u;do{if((a.tag&e)===e){l=void 0;var h=a.create,_=a.inst;l=h(),_.destroy=l}a=a.next}while(a!==u)}}catch(v){Ie(n,n.return,v)}}function rs(e,n,a){try{var l=n.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var h=u.next;l=h;do{if((l.tag&e)===e){var _=l.inst,v=_.destroy;if(v!==void 0){_.destroy=void 0,u=n;var S=a,R=v;try{R()}catch(z){Ie(u,S,z)}}}l=l.next}while(l!==h)}}catch(z){Ie(n,n.return,z)}}function xg(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{dp(n,a)}catch(l){Ie(e,e.return,l)}}}function Sg(e,n,a){a.props=Zs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Ie(e,n,l)}}function or(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(u){Ie(e,n,u)}}function mn(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(u){Ie(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Ie(e,n,u)}else a.current=null}function Eg(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(u){Ie(e,e.return,u)}}function cd(e,n,a){try{var l=e.stateNode;kS(l,e.type,a,n),l[Et]=n}catch(u){Ie(e,e.return,u)}}function Ng(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fs(e.type)||e.tag===4}function ud(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ng(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dd(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=bn));else if(l!==4&&(l===27&&fs(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(dd(e,n,a),e=e.sibling;e!==null;)dd(e,n,a),e=e.sibling}function io(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&fs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(io(e,n,a),e=e.sibling;e!==null;)io(e,n,a),e=e.sibling}function Tg(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);mt(n,l,a),n[ut]=e,n[Et]=a}catch(h){Ie(e,e.return,h)}}var Rn=!1,nt=!1,hd=!1,Cg=typeof WeakSet=="function"?WeakSet:Set,lt=null;function mS(e,n){if(e=e.containerInfo,Id=Co,e=Pm(e),au(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var _=0,v=-1,S=-1,R=0,z=0,G=e,O=null;t:for(;;){for(var L;G!==a||u!==0&&G.nodeType!==3||(v=_+u),G!==h||l!==0&&G.nodeType!==3||(S=_+l),G.nodeType===3&&(_+=G.nodeValue.length),(L=G.firstChild)!==null;)O=G,G=L;for(;;){if(G===e)break t;if(O===a&&++R===u&&(v=_),O===h&&++z===l&&(S=_),(L=G.nextSibling)!==null)break;G=O,O=G.parentNode}G=L}a=v===-1||S===-1?null:{start:v,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Md={focusedElem:e,selectionRange:a},Co=!1,lt=n;lt!==null;)if(n=lt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,lt=e;else for(;lt!==null;){switch(n=lt,h=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=n,u=h.memoizedProps,h=h.memoizedState,l=a.stateNode;try{var se=Zs(a.type,u);e=l.getSnapshotBeforeUpdate(se,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(ce){Ie(a,a.return,ce)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Ud(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ud(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,lt=e;break}lt=n.return}}function wg(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:On(e,a),l&4&&lr(5,a);break;case 1:if(On(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(_){Ie(a,a.return,_)}else{var u=Zs(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Ie(a,a.return,_)}}l&64&&xg(a),l&512&&or(a,a.return);break;case 3:if(On(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{dp(e,n)}catch(_){Ie(a,a.return,_)}}break;case 27:n===null&&l&4&&Tg(a);case 26:case 5:On(e,a),n===null&&l&4&&Eg(a),l&512&&or(a,a.return);break;case 12:On(e,a);break;case 31:On(e,a),l&4&&Rg(e,a);break;case 13:On(e,a),l&4&&Dg(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=ES.bind(null,a),FS(e,a))));break;case 22:if(l=a.memoizedState!==null||Rn,!l){n=n!==null&&n.memoizedState!==null||nt,u=Rn;var h=nt;Rn=l,(nt=n)&&!h?In(e,a,(a.subtreeFlags&8772)!==0):On(e,a),Rn=u,nt=h}break;case 30:break;default:On(e,a)}}function Ag(e){var n=e.alternate;n!==null&&(e.alternate=null,Ag(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Gc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,Tt=!1;function Dn(e,n,a){for(a=a.child;a!==null;)jg(e,n,a),a=a.sibling}function jg(e,n,a){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Oa,a)}catch{}switch(a.tag){case 26:nt||mn(a,n),Dn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:nt||mn(a,n);var l=Ve,u=Tt;fs(a.type)&&(Ve=a.stateNode,Tt=!1),Dn(e,n,a),_r(a.stateNode),Ve=l,Tt=u;break;case 5:nt||mn(a,n);case 6:if(l=Ve,u=Tt,Ve=null,Dn(e,n,a),Ve=l,Tt=u,Ve!==null)if(Tt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(a.stateNode)}catch(h){Ie(a,n,h)}else try{Ve.removeChild(a.stateNode)}catch(h){Ie(a,n,h)}break;case 18:Ve!==null&&(Tt?(e=Ve,x_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),sa(e)):x_(Ve,a.stateNode));break;case 4:l=Ve,u=Tt,Ve=a.stateNode.containerInfo,Tt=!0,Dn(e,n,a),Ve=l,Tt=u;break;case 0:case 11:case 14:case 15:rs(2,a,n),nt||rs(4,a,n),Dn(e,n,a);break;case 1:nt||(mn(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Sg(a,n,l)),Dn(e,n,a);break;case 21:Dn(e,n,a);break;case 22:nt=(l=nt)||a.memoizedState!==null,Dn(e,n,a),nt=l;break;default:Dn(e,n,a)}}function Rg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{sa(e)}catch(a){Ie(n,n.return,a)}}}function Dg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sa(e)}catch(a){Ie(n,n.return,a)}}function pS(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Cg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Cg),n;default:throw Error(r(435,e.tag))}}function ao(e,n){var a=pS(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var u=NS.bind(null,e,l);l.then(u,u)}})}function Ct(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var u=a[l],h=e,_=n,v=_;e:for(;v!==null;){switch(v.tag){case 27:if(fs(v.type)){Ve=v.stateNode,Tt=!1;break e}break;case 5:Ve=v.stateNode,Tt=!1;break e;case 3:case 4:Ve=v.stateNode.containerInfo,Tt=!0;break e}v=v.return}if(Ve===null)throw Error(r(160));jg(h,_,u),Ve=null,Tt=!1,h=u.alternate,h!==null&&(h.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Og(n,e),n=n.sibling}var sn=null;function Og(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ct(n,e),wt(e),l&4&&(rs(3,e,e.return),lr(3,e),rs(5,e,e.return));break;case 1:Ct(n,e),wt(e),l&512&&(nt||a===null||mn(a,a.return)),l&64&&Rn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var u=sn;if(Ct(n,e),wt(e),l&512&&(nt||a===null||mn(a,a.return)),l&4){var h=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":h=u.getElementsByTagName("title")[0],(!h||h[ka]||h[ut]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=u.createElement(l),u.head.insertBefore(h,u.querySelector("head > title"))),mt(h,l,a),h[ut]=e,rt(h),l=h;break e;case"link":var _=O_("link","href",u).get(l+(a.href||""));if(_){for(var v=0;v<_.length;v++)if(h=_[v],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(v,1);break t}}h=u.createElement(l),mt(h,l,a),u.head.appendChild(h);break;case"meta":if(_=O_("meta","content",u).get(l+(a.content||""))){for(v=0;v<_.length;v++)if(h=_[v],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(v,1);break t}}h=u.createElement(l),mt(h,l,a),u.head.appendChild(h);break;default:throw Error(r(468,l))}h[ut]=e,rt(h),l=h}e.stateNode=l}else I_(u,e.type,e.stateNode);else e.stateNode=D_(u,l,e.memoizedProps);else h!==l?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,l===null?I_(u,e.type,e.stateNode):D_(u,l,e.memoizedProps)):l===null&&e.stateNode!==null&&cd(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ct(n,e),wt(e),l&512&&(nt||a===null||mn(a,a.return)),a!==null&&l&4&&cd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ct(n,e),wt(e),l&512&&(nt||a===null||mn(a,a.return)),e.flags&32){u=e.stateNode;try{Ci(u,"")}catch(se){Ie(e,e.return,se)}}l&4&&e.stateNode!=null&&(u=e.memoizedProps,cd(e,u,a!==null?a.memoizedProps:u)),l&1024&&(hd=!0);break;case 6:if(Ct(n,e),wt(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(se){Ie(e,e.return,se)}}break;case 3:if(So=null,u=sn,sn=bo(n.containerInfo),Ct(n,e),sn=u,wt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{sa(n.containerInfo)}catch(se){Ie(e,e.return,se)}hd&&(hd=!1,Ig(e));break;case 4:l=sn,sn=bo(e.stateNode.containerInfo),Ct(n,e),wt(e),sn=l;break;case 12:Ct(n,e),wt(e);break;case 31:Ct(n,e),wt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ao(e,l)));break;case 13:Ct(n,e),wt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lo=Dt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ao(e,l)));break;case 22:u=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,R=Rn,z=nt;if(Rn=R||u,nt=z||S,Ct(n,e),nt=z,Rn=R,wt(e),l&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(a===null||S||Rn||nt||Js(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){S=a=n;try{if(h=S.stateNode,u)_=h.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{v=S.stateNode;var G=S.memoizedProps.style,O=G!=null&&G.hasOwnProperty("display")?G.display:null;v.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(se){Ie(S,S.return,se)}}}else if(n.tag===6){if(a===null){S=n;try{S.stateNode.nodeValue=u?"":S.memoizedProps}catch(se){Ie(S,S.return,se)}}}else if(n.tag===18){if(a===null){S=n;try{var L=S.stateNode;u?S_(L,!0):S_(S.stateNode,!1)}catch(se){Ie(S,S.return,se)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ao(e,a))));break;case 19:Ct(n,e),wt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ao(e,l)));break;case 30:break;case 21:break;default:Ct(n,e),wt(e)}}function wt(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(Ng(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var u=a.stateNode,h=ud(e);io(e,h,u);break;case 5:var _=a.stateNode;a.flags&32&&(Ci(_,""),a.flags&=-33);var v=ud(e);io(e,v,_);break;case 3:case 4:var S=a.stateNode.containerInfo,R=ud(e);dd(e,R,S);break;default:throw Error(r(161))}}catch(z){Ie(e,e.return,z)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ig(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Ig(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function On(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)wg(e,n.alternate,n),n=n.sibling}function Js(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:rs(4,n,n.return),Js(n);break;case 1:mn(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Sg(n,n.return,a),Js(n);break;case 27:_r(n.stateNode);case 26:case 5:mn(n,n.return),Js(n);break;case 22:n.memoizedState===null&&Js(n);break;case 30:Js(n);break;default:Js(n)}e=e.sibling}}function In(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,u=e,h=n,_=h.flags;switch(h.tag){case 0:case 11:case 15:In(u,h,a),lr(4,h);break;case 1:if(In(u,h,a),l=h,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(R){Ie(l,l.return,R)}if(l=h,u=l.updateQueue,u!==null){var v=l.stateNode;try{var S=u.shared.hiddenCallbacks;if(S!==null)for(u.shared.hiddenCallbacks=null,u=0;u<S.length;u++)up(S[u],v)}catch(R){Ie(l,l.return,R)}}a&&_&64&&xg(h),or(h,h.return);break;case 27:Tg(h);case 26:case 5:In(u,h,a),a&&l===null&&_&4&&Eg(h),or(h,h.return);break;case 12:In(u,h,a);break;case 31:In(u,h,a),a&&_&4&&Rg(u,h);break;case 13:In(u,h,a),a&&_&4&&Dg(u,h);break;case 22:h.memoizedState===null&&In(u,h,a),or(h,h.return);break;case 30:break;default:In(u,h,a)}n=n.sibling}}function fd(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Wa(a))}function md(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Wa(e))}function an(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Mg(e,n,a,l),n=n.sibling}function Mg(e,n,a,l){var u=n.flags;switch(n.tag){case 0:case 11:case 15:an(e,n,a,l),u&2048&&lr(9,n);break;case 1:an(e,n,a,l);break;case 3:an(e,n,a,l),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Wa(e)));break;case 12:if(u&2048){an(e,n,a,l),e=n.stateNode;try{var h=n.memoizedProps,_=h.id,v=h.onPostCommit;typeof v=="function"&&v(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Ie(n,n.return,S)}}else an(e,n,a,l);break;case 31:an(e,n,a,l);break;case 13:an(e,n,a,l);break;case 23:break;case 22:h=n.stateNode,_=n.alternate,n.memoizedState!==null?h._visibility&2?an(e,n,a,l):cr(e,n):h._visibility&2?an(e,n,a,l):(h._visibility|=2,Yi(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),u&2048&&fd(_,n);break;case 24:an(e,n,a,l),u&2048&&md(n.alternate,n);break;default:an(e,n,a,l)}}function Yi(e,n,a,l,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=e,_=n,v=a,S=l,R=_.flags;switch(_.tag){case 0:case 11:case 15:Yi(h,_,v,S,u),lr(8,_);break;case 23:break;case 22:var z=_.stateNode;_.memoizedState!==null?z._visibility&2?Yi(h,_,v,S,u):cr(h,_):(z._visibility|=2,Yi(h,_,v,S,u)),u&&R&2048&&fd(_.alternate,_);break;case 24:Yi(h,_,v,S,u),u&&R&2048&&md(_.alternate,_);break;default:Yi(h,_,v,S,u)}n=n.sibling}}function cr(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,u=l.flags;switch(l.tag){case 22:cr(a,l),u&2048&&fd(l.alternate,l);break;case 24:cr(a,l),u&2048&&md(l.alternate,l);break;default:cr(a,l)}n=n.sibling}}var ur=8192;function Xi(e,n,a){if(e.subtreeFlags&ur)for(e=e.child;e!==null;)kg(e,n,a),e=e.sibling}function kg(e,n,a){switch(e.tag){case 26:Xi(e,n,a),e.flags&ur&&e.memoizedState!==null&&tE(a,sn,e.memoizedState,e.memoizedProps);break;case 5:Xi(e,n,a);break;case 3:case 4:var l=sn;sn=bo(e.stateNode.containerInfo),Xi(e,n,a),sn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ur,ur=16777216,Xi(e,n,a),ur=l):Xi(e,n,a));break;default:Xi(e,n,a)}}function Lg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function dr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];lt=l,Pg(l,e)}Lg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ug(e),e=e.sibling}function Ug(e){switch(e.tag){case 0:case 11:case 15:dr(e),e.flags&2048&&rs(9,e,e.return);break;case 3:dr(e);break;case 12:dr(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ro(e)):dr(e);break;default:dr(e)}}function ro(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];lt=l,Pg(l,e)}Lg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:rs(8,n,n.return),ro(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,ro(n));break;default:ro(n)}e=e.sibling}}function Pg(e,n){for(;lt!==null;){var a=lt;switch(a.tag){case 0:case 11:case 15:rs(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Wa(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,lt=l;else e:for(a=e;lt!==null;){l=lt;var u=l.sibling,h=l.return;if(Ag(l),l===a){lt=null;break e}if(u!==null){u.return=h,lt=u;break e}lt=h}}}var gS={getCacheForType:function(e){var n=ht(Je),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return ht(Je).controller.signal}},_S=typeof WeakMap=="function"?WeakMap:Map,je=0,Be=null,ye=null,Se=0,Oe=0,Pt=null,ls=!1,Wi=!1,pd=!1,Mn=0,Xe=0,os=0,ei=0,gd=0,zt=0,Ki=0,hr=null,At=null,_d=!1,lo=0,zg=0,oo=1/0,co=null,cs=null,st=0,us=null,Qi=null,kn=0,vd=0,yd=null,Bg=null,fr=0,bd=null;function Bt(){return(je&2)!==0&&Se!==0?Se&-Se:I.T!==null?Cd():nm()}function Hg(){if(zt===0)if((Se&536870912)===0||Te){var e=_l;_l<<=1,(_l&3932160)===0&&(_l=262144),zt=e}else zt=536870912;return e=Lt.current,e!==null&&(e.flags|=32),zt}function jt(e,n,a){(e===Be&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)&&($i(e,0),ds(e,Se,zt,!1)),Ma(e,a),((je&2)===0||e!==Be)&&(e===Be&&((je&2)===0&&(ei|=a),Xe===4&&ds(e,Se,zt,!1)),pn(e))}function Gg(e,n,a){if((je&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Ia(e,n),u=l?bS(e,n):Sd(e,n,!0),h=l;do{if(u===0){Wi&&!l&&ds(e,n,0,!1);break}else{if(a=e.current.alternate,h&&!vS(a)){u=Sd(e,n,!1),h=!1;continue}if(u===2){if(h=n,e.errorRecoveryDisabledLanes&h)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var v=e;u=hr;var S=v.current.memoizedState.isDehydrated;if(S&&($i(v,_).flags|=256),_=Sd(v,_,!1),_!==2){if(pd&&!S){v.errorRecoveryDisabledLanes|=h,ei|=h,u=4;break e}h=At,At=u,h!==null&&(At===null?At=h:At.push.apply(At,h))}u=_}if(h=!1,u!==2)continue}}if(u===1){$i(e,0),ds(e,n,0,!0);break}e:{switch(l=e,h=u,h){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:ds(l,n,zt,!ls);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(u=lo+300-Dt(),10<u)){if(ds(l,n,zt,!ls),yl(l,0,!0)!==0)break e;kn=n,l.timeoutHandle=y_(Fg.bind(null,l,a,At,co,_d,n,zt,ei,Ki,ls,h,"Throttled",-0,0),u);break e}Fg(l,a,At,co,_d,n,zt,ei,Ki,ls,h,null,-0,0)}}break}while(!0);pn(e)}function Fg(e,n,a,l,u,h,_,v,S,R,z,G,O,L){if(e.timeoutHandle=-1,G=n.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bn},kg(n,h,G);var se=(h&62914560)===h?lo-Dt():(h&4194048)===h?zg-Dt():0;if(se=nE(G,se),se!==null){kn=h,e.cancelPendingCommit=se($g.bind(null,e,n,h,a,l,u,_,v,S,z,G,null,O,L)),ds(e,h,_,!R);return}}$g(e,n,h,a,l,u,_,v,S)}function vS(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var u=a[l],h=u.getSnapshot;u=u.value;try{if(!Mt(h(),u))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ds(e,n,a,l){n&=~gd,n&=~ei,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var u=n;0<u;){var h=31-It(u),_=1<<h;l[h]=-1,u&=~_}a!==0&&Jf(e,a,n)}function uo(){return(je&6)===0?(mr(0),!1):!0}function xd(){if(ye!==null){if(Oe===0)var e=ye.return;else e=ye,Nn=Vs=null,Uu(e),Hi=null,Qa=0,e=ye;for(;e!==null;)bg(e.alternate,e),e=e.return;ye=null}}function $i(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,PS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),kn=0,xd(),Be=e,ye=a=Sn(e.current,null),Se=n,Oe=0,Pt=null,ls=!1,Wi=Ia(e,n),pd=!1,Ki=zt=gd=ei=os=Xe=0,At=hr=null,_d=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var u=31-It(l),h=1<<u;n|=e[u],l&=~h}return Mn=n,Dl(),a}function qg(e,n){pe=null,I.H=ir,n===Bi||n===zl?(n=rp(),Oe=3):n===Tu?(n=rp(),Oe=4):Oe=n===Ju?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Pt=n,ye===null&&(Xe=1,Jl(e,qt(n,e.current)))}function Vg(){var e=Lt.current;return e===null?!0:(Se&4194048)===Se?Wt===null:(Se&62914560)===Se||(Se&536870912)!==0?e===Wt:!1}function Yg(){var e=I.H;return I.H=ir,e===null?ir:e}function Xg(){var e=I.A;return I.A=gS,e}function ho(){Xe=4,ls||(Se&4194048)!==Se&&Lt.current!==null||(Wi=!0),(os&134217727)===0&&(ei&134217727)===0||Be===null||ds(Be,Se,zt,!1)}function Sd(e,n,a){var l=je;je|=2;var u=Yg(),h=Xg();(Be!==e||Se!==n)&&(co=null,$i(e,n)),n=!1;var _=Xe;e:do try{if(Oe!==0&&ye!==null){var v=ye,S=Pt;switch(Oe){case 8:xd(),_=6;break e;case 3:case 2:case 9:case 6:Lt.current===null&&(n=!0);var R=Oe;if(Oe=0,Pt=null,Zi(e,v,S,R),a&&Wi){_=0;break e}break;default:R=Oe,Oe=0,Pt=null,Zi(e,v,S,R)}}yS(),_=Xe;break}catch(z){qg(e,z)}while(!0);return n&&e.shellSuspendCounter++,Nn=Vs=null,je=l,I.H=u,I.A=h,ye===null&&(Be=null,Se=0,Dl()),_}function yS(){for(;ye!==null;)Wg(ye)}function bS(e,n){var a=je;je|=2;var l=Yg(),u=Xg();Be!==e||Se!==n?(co=null,oo=Dt()+500,$i(e,n)):Wi=Ia(e,n);e:do try{if(Oe!==0&&ye!==null){n=ye;var h=Pt;t:switch(Oe){case 1:Oe=0,Pt=null,Zi(e,n,h,1);break;case 2:case 9:if(ip(h)){Oe=0,Pt=null,Kg(n);break}n=function(){Oe!==2&&Oe!==9||Be!==e||(Oe=7),pn(e)},h.then(n,n);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:ip(h)?(Oe=0,Pt=null,Kg(n)):(Oe=0,Pt=null,Zi(e,n,h,7));break;case 5:var _=null;switch(ye.tag){case 26:_=ye.memoizedState;case 5:case 27:var v=ye;if(_?M_(_):v.stateNode.complete){Oe=0,Pt=null;var S=v.sibling;if(S!==null)ye=S;else{var R=v.return;R!==null?(ye=R,fo(R)):ye=null}break t}}Oe=0,Pt=null,Zi(e,n,h,5);break;case 6:Oe=0,Pt=null,Zi(e,n,h,6);break;case 8:xd(),Xe=6;break e;default:throw Error(r(462))}}xS();break}catch(z){qg(e,z)}while(!0);return Nn=Vs=null,I.H=l,I.A=u,je=a,ye!==null?0:(Be=null,Se=0,Dl(),Xe)}function xS(){for(;ye!==null&&!qb();)Wg(ye)}function Wg(e){var n=vg(e.alternate,e,Mn);e.memoizedProps=e.pendingProps,n===null?fo(e):ye=n}function Kg(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=hg(a,n,n.pendingProps,n.type,void 0,Se);break;case 11:n=hg(a,n,n.pendingProps,n.type.render,n.ref,Se);break;case 5:Uu(n);default:bg(a,n),n=ye=Xm(n,Mn),n=vg(a,n,Mn)}e.memoizedProps=e.pendingProps,n===null?fo(e):ye=n}function Zi(e,n,a,l){Nn=Vs=null,Uu(n),Hi=null,Qa=0;var u=n.return;try{if(cS(e,u,n,a,Se)){Xe=1,Jl(e,qt(a,e.current)),ye=null;return}}catch(h){if(u!==null)throw ye=u,h;Xe=1,Jl(e,qt(a,e.current)),ye=null;return}n.flags&32768?(Te||l===1?e=!0:Wi||(Se&536870912)!==0?e=!1:(ls=e=!0,(l===2||l===9||l===3||l===6)&&(l=Lt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Qg(n,e)):fo(n)}function fo(e){var n=e;do{if((n.flags&32768)!==0){Qg(n,ls);return}e=n.return;var a=hS(n.alternate,n,Mn);if(a!==null){ye=a;return}if(n=n.sibling,n!==null){ye=n;return}ye=n=e}while(n!==null);Xe===0&&(Xe=5)}function Qg(e,n){do{var a=fS(e.alternate,e);if(a!==null){a.flags&=32767,ye=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){ye=e;return}ye=e=a}while(e!==null);Xe=6,ye=null}function $g(e,n,a,l,u,h,_,v,S){e.cancelPendingCommit=null;do mo();while(st!==0);if((je&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(h=n.lanes|n.childLanes,h|=uu,ex(e,a,h,_,v,S),e===Be&&(ye=Be=null,Se=0),Qi=n,us=e,kn=a,vd=h,yd=u,Bg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,TS(pl,function(){return n_(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=I.T,I.T=null,u=q.p,q.p=2,_=je,je|=4;try{mS(e,n,a)}finally{je=_,q.p=u,I.T=l}}st=1,Zg(),Jg(),e_()}}function Zg(){if(st===1){st=0;var e=us,n=Qi,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=I.T,I.T=null;var l=q.p;q.p=2;var u=je;je|=4;try{Og(n,e);var h=Md,_=Pm(e.containerInfo),v=h.focusedElem,S=h.selectionRange;if(_!==v&&v&&v.ownerDocument&&Um(v.ownerDocument.documentElement,v)){if(S!==null&&au(v)){var R=S.start,z=S.end;if(z===void 0&&(z=R),"selectionStart"in v)v.selectionStart=R,v.selectionEnd=Math.min(z,v.value.length);else{var G=v.ownerDocument||document,O=G&&G.defaultView||window;if(O.getSelection){var L=O.getSelection(),se=v.textContent.length,ce=Math.min(S.start,se),Ue=S.end===void 0?ce:Math.min(S.end,se);!L.extend&&ce>Ue&&(_=Ue,Ue=ce,ce=_);var w=Lm(v,ce),T=Lm(v,Ue);if(w&&T&&(L.rangeCount!==1||L.anchorNode!==w.node||L.anchorOffset!==w.offset||L.focusNode!==T.node||L.focusOffset!==T.offset)){var j=G.createRange();j.setStart(w.node,w.offset),L.removeAllRanges(),ce>Ue?(L.addRange(j),L.extend(T.node,T.offset)):(j.setEnd(T.node,T.offset),L.addRange(j))}}}}for(G=[],L=v;L=L.parentNode;)L.nodeType===1&&G.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<G.length;v++){var B=G[v];B.element.scrollLeft=B.left,B.element.scrollTop=B.top}}Co=!!Id,Md=Id=null}finally{je=u,q.p=l,I.T=a}}e.current=n,st=2}}function Jg(){if(st===2){st=0;var e=us,n=Qi,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=I.T,I.T=null;var l=q.p;q.p=2;var u=je;je|=4;try{wg(e,n.alternate,n)}finally{je=u,q.p=l,I.T=a}}st=3}}function e_(){if(st===4||st===3){st=0,Vb();var e=us,n=Qi,a=kn,l=Bg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?st=5:(st=0,Qi=us=null,t_(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(cs=null),Bc(a),n=n.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Oa,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=I.T,u=q.p,q.p=2,I.T=null;try{for(var h=e.onRecoverableError,_=0;_<l.length;_++){var v=l[_];h(v.value,{componentStack:v.stack})}}finally{I.T=n,q.p=u}}(kn&3)!==0&&mo(),pn(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===bd?fr++:(fr=0,bd=e):fr=0,mr(0)}}function t_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Wa(n)))}function mo(){return Zg(),Jg(),e_(),n_()}function n_(){if(st!==5)return!1;var e=us,n=vd;vd=0;var a=Bc(kn),l=I.T,u=q.p;try{q.p=32>a?32:a,I.T=null,a=yd,yd=null;var h=us,_=kn;if(st=0,Qi=us=null,kn=0,(je&6)!==0)throw Error(r(331));var v=je;if(je|=4,Ug(h.current),Mg(h,h.current,_,a),je=v,mr(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Oa,h)}catch{}return!0}finally{q.p=u,I.T=l,t_(e,n)}}function s_(e,n,a){n=qt(a,n),n=Zu(e.stateNode,n,2),e=ss(e,n,2),e!==null&&(Ma(e,2),pn(e))}function Ie(e,n,a){if(e.tag===3)s_(e,e,a);else for(;n!==null;){if(n.tag===3){s_(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(cs===null||!cs.has(l))){e=qt(a,e),a=ig(2),l=ss(n,a,2),l!==null&&(ag(a,l,n,e),Ma(l,2),pn(l));break}}n=n.return}}function Ed(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new _S;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(a)||(pd=!0,u.add(a),e=SS.bind(null,e,n,a),n.then(e,e))}function SS(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Be===e&&(Se&a)===a&&(Xe===4||Xe===3&&(Se&62914560)===Se&&300>Dt()-lo?(je&2)===0&&$i(e,0):gd|=a,Ki===Se&&(Ki=0)),pn(e)}function i_(e,n){n===0&&(n=Zf()),e=Gs(e,n),e!==null&&(Ma(e,n),pn(e))}function ES(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),i_(e,a)}function NS(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),i_(e,a)}function TS(e,n){return Lc(e,n)}var po=null,Ji=null,Nd=!1,go=!1,Td=!1,hs=0;function pn(e){e!==Ji&&e.next===null&&(Ji===null?po=Ji=e:Ji=Ji.next=e),go=!0,Nd||(Nd=!0,wS())}function mr(e,n){if(!Td&&go){Td=!0;do for(var a=!1,l=po;l!==null;){if(e!==0){var u=l.pendingLanes;if(u===0)var h=0;else{var _=l.suspendedLanes,v=l.pingedLanes;h=(1<<31-It(42|e)+1)-1,h&=u&~(_&~v),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,o_(l,h))}else h=Se,h=yl(l,l===Be?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||Ia(l,h)||(a=!0,o_(l,h));l=l.next}while(a);Td=!1}}function CS(){a_()}function a_(){go=Nd=!1;var e=0;hs!==0&&US()&&(e=hs);for(var n=Dt(),a=null,l=po;l!==null;){var u=l.next,h=r_(l,n);h===0?(l.next=null,a===null?po=u:a.next=u,u===null&&(Ji=a)):(a=l,(e!==0||(h&3)!==0)&&(go=!0)),l=u}st!==0&&st!==5||mr(e),hs!==0&&(hs=0)}function r_(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var _=31-It(h),v=1<<_,S=u[_];S===-1?((v&a)===0||(v&l)!==0)&&(u[_]=Jb(v,n)):S<=n&&(e.expiredLanes|=v),h&=~v}if(n=Be,a=Se,a=yl(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(Oe===2||Oe===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Uc(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ia(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&Uc(l),Bc(a)){case 2:case 8:a=Qf;break;case 32:a=pl;break;case 268435456:a=$f;break;default:a=pl}return l=l_.bind(null,e),a=Lc(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&Uc(l),e.callbackPriority=2,e.callbackNode=null,2}function l_(e,n){if(st!==0&&st!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(mo()&&e.callbackNode!==a)return null;var l=Se;return l=yl(e,e===Be?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Gg(e,l,n),r_(e,Dt()),e.callbackNode!=null&&e.callbackNode===a?l_.bind(null,e):null)}function o_(e,n){if(mo())return null;Gg(e,n,!0)}function wS(){zS(function(){(je&6)!==0?Lc(Kf,CS):a_()})}function Cd(){if(hs===0){var e=Pi;e===0&&(e=gl,gl<<=1,(gl&261888)===0&&(gl=256)),hs=e}return hs}function c_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:El(""+e)}function u_(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function AS(e,n,a,l,u){if(n==="submit"&&a&&a.stateNode===u){var h=c_((u[Et]||null).action),_=l.submitter;_&&(n=(n=_[Et]||null)?c_(n.formAction):_.getAttribute("formAction"),n!==null&&(h=n,_=null));var v=new wl("action","action",null,l,u);e.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(hs!==0){var S=_?u_(u,_):new FormData(u);Yu(a,{pending:!0,data:S,method:u.method,action:h},null,S)}}else typeof h=="function"&&(v.preventDefault(),S=_?u_(u,_):new FormData(u),Yu(a,{pending:!0,data:S,method:u.method,action:h},h,S))},currentTarget:u}]})}}for(var wd=0;wd<cu.length;wd++){var Ad=cu[wd],jS=Ad.toLowerCase(),RS=Ad[0].toUpperCase()+Ad.slice(1);nn(jS,"on"+RS)}nn(Hm,"onAnimationEnd"),nn(Gm,"onAnimationIteration"),nn(Fm,"onAnimationStart"),nn("dblclick","onDoubleClick"),nn("focusin","onFocus"),nn("focusout","onBlur"),nn(Yx,"onTransitionRun"),nn(Xx,"onTransitionStart"),nn(Wx,"onTransitionCancel"),nn(qm,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pr));function d_(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],u=l.event;l=l.listeners;e:{var h=void 0;if(n)for(var _=l.length-1;0<=_;_--){var v=l[_],S=v.instance,R=v.currentTarget;if(v=v.listener,S!==h&&u.isPropagationStopped())break e;h=v,u.currentTarget=R;try{h(u)}catch(z){Rl(z)}u.currentTarget=null,h=S}else for(_=0;_<l.length;_++){if(v=l[_],S=v.instance,R=v.currentTarget,v=v.listener,S!==h&&u.isPropagationStopped())break e;h=v,u.currentTarget=R;try{h(u)}catch(z){Rl(z)}u.currentTarget=null,h=S}}}}function be(e,n){var a=n[Hc];a===void 0&&(a=n[Hc]=new Set);var l=e+"__bubble";a.has(l)||(h_(n,e,2,!1),a.add(l))}function jd(e,n,a){var l=0;n&&(l|=4),h_(a,e,l,n)}var _o="_reactListening"+Math.random().toString(36).slice(2);function Rd(e){if(!e[_o]){e[_o]=!0,am.forEach(function(a){a!=="selectionchange"&&(DS.has(a)||jd(a,!1,e),jd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[_o]||(n[_o]=!0,jd("selectionchange",!1,n))}}function h_(e,n,a,l){switch(H_(n)){case 2:var u=aE;break;case 8:u=rE;break;default:u=Vd}a=u.bind(null,n,a,e),u=void 0,!Qc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(n,a,{capture:!0,passive:u}):e.addEventListener(n,a,!0):u!==void 0?e.addEventListener(n,a,{passive:u}):e.addEventListener(n,a,!1)}function Dd(e,n,a,l,u){var h=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var v=l.stateNode.containerInfo;if(v===u)break;if(_===4)for(_=l.return;_!==null;){var S=_.tag;if((S===3||S===4)&&_.stateNode.containerInfo===u)return;_=_.return}for(;v!==null;){if(_=xi(v),_===null)return;if(S=_.tag,S===5||S===6||S===26||S===27){l=h=_;continue e}v=v.parentNode}}l=l.return}_m(function(){var R=h,z=Wc(a),G=[];e:{var O=Vm.get(e);if(O!==void 0){var L=wl,se=e;switch(e){case"keypress":if(Tl(a)===0)break e;case"keydown":case"keyup":L=Nx;break;case"focusin":se="focus",L=eu;break;case"focusout":se="blur",L=eu;break;case"beforeblur":case"afterblur":L=eu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=hx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=wx;break;case Hm:case Gm:case Fm:L=px;break;case qm:L=jx;break;case"scroll":case"scrollend":L=ux;break;case"wheel":L=Dx;break;case"copy":case"cut":case"paste":L=_x;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Sm;break;case"toggle":case"beforetoggle":L=Ix}var ce=(n&4)!==0,Ue=!ce&&(e==="scroll"||e==="scrollend"),w=ce?O!==null?O+"Capture":null:O;ce=[];for(var T=R,j;T!==null;){var B=T;if(j=B.stateNode,B=B.tag,B!==5&&B!==26&&B!==27||j===null||w===null||(B=Ua(T,w),B!=null&&ce.push(gr(T,B,j))),Ue)break;T=T.return}0<ce.length&&(O=new L(O,se,null,a,z),G.push({event:O,listeners:ce}))}}if((n&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",O&&a!==Xc&&(se=a.relatedTarget||a.fromElement)&&(xi(se)||se[bi]))break e;if((L||O)&&(O=z.window===z?z:(O=z.ownerDocument)?O.defaultView||O.parentWindow:window,L?(se=a.relatedTarget||a.toElement,L=R,se=se?xi(se):null,se!==null&&(Ue=d(se),ce=se.tag,se!==Ue||ce!==5&&ce!==27&&ce!==6)&&(se=null)):(L=null,se=R),L!==se)){if(ce=bm,B="onMouseLeave",w="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(ce=Sm,B="onPointerLeave",w="onPointerEnter",T="pointer"),Ue=L==null?O:La(L),j=se==null?O:La(se),O=new ce(B,T+"leave",L,a,z),O.target=Ue,O.relatedTarget=j,B=null,xi(z)===R&&(ce=new ce(w,T+"enter",se,a,z),ce.target=j,ce.relatedTarget=Ue,B=ce),Ue=B,L&&se)t:{for(ce=OS,w=L,T=se,j=0,B=w;B;B=ce(B))j++;B=0;for(var le=T;le;le=ce(le))B++;for(;0<j-B;)w=ce(w),j--;for(;0<B-j;)T=ce(T),B--;for(;j--;){if(w===T||T!==null&&w===T.alternate){ce=w;break t}w=ce(w),T=ce(T)}ce=null}else ce=null;L!==null&&f_(G,O,L,ce,!1),se!==null&&Ue!==null&&f_(G,Ue,se,ce,!0)}}e:{if(O=R?La(R):window,L=O.nodeName&&O.nodeName.toLowerCase(),L==="select"||L==="input"&&O.type==="file")var Ce=Rm;else if(Am(O))if(Dm)Ce=Fx;else{Ce=Hx;var ie=Bx}else L=O.nodeName,!L||L.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?R&&Yc(R.elementType)&&(Ce=Rm):Ce=Gx;if(Ce&&(Ce=Ce(e,R))){jm(G,Ce,a,z);break e}ie&&ie(e,O,R),e==="focusout"&&R&&O.type==="number"&&R.memoizedProps.value!=null&&Vc(O,"number",O.value)}switch(ie=R?La(R):window,e){case"focusin":(Am(ie)||ie.contentEditable==="true")&&(Ri=ie,ru=R,Va=null);break;case"focusout":Va=ru=Ri=null;break;case"mousedown":lu=!0;break;case"contextmenu":case"mouseup":case"dragend":lu=!1,zm(G,a,z);break;case"selectionchange":if(Vx)break;case"keydown":case"keyup":zm(G,a,z)}var ge;if(nu)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else ji?Cm(e,a)&&(Ee="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(Em&&a.locale!=="ko"&&(ji||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&ji&&(ge=vm()):(Qn=z,$c="value"in Qn?Qn.value:Qn.textContent,ji=!0)),ie=vo(R,Ee),0<ie.length&&(Ee=new xm(Ee,e,null,a,z),G.push({event:Ee,listeners:ie}),ge?Ee.data=ge:(ge=wm(a),ge!==null&&(Ee.data=ge)))),(ge=kx?Lx(e,a):Ux(e,a))&&(Ee=vo(R,"onBeforeInput"),0<Ee.length&&(ie=new xm("onBeforeInput","beforeinput",null,a,z),G.push({event:ie,listeners:Ee}),ie.data=ge)),AS(G,e,R,a,z)}d_(G,n)})}function gr(e,n,a){return{instance:e,listener:n,currentTarget:a}}function vo(e,n){for(var a=n+"Capture",l=[];e!==null;){var u=e,h=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||h===null||(u=Ua(e,a),u!=null&&l.unshift(gr(e,u,h)),u=Ua(e,n),u!=null&&l.push(gr(e,u,h))),e.tag===3)return l;e=e.return}return[]}function OS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function f_(e,n,a,l,u){for(var h=n._reactName,_=[];a!==null&&a!==l;){var v=a,S=v.alternate,R=v.stateNode;if(v=v.tag,S!==null&&S===l)break;v!==5&&v!==26&&v!==27||R===null||(S=R,u?(R=Ua(a,h),R!=null&&_.unshift(gr(a,R,S))):u||(R=Ua(a,h),R!=null&&_.push(gr(a,R,S)))),a=a.return}_.length!==0&&e.push({event:n,listeners:_})}var IS=/\r\n?/g,MS=/\u0000|\uFFFD/g;function m_(e){return(typeof e=="string"?e:""+e).replace(IS,`
`).replace(MS,"")}function p_(e,n){return n=m_(n),m_(e)===n}function Le(e,n,a,l,u,h){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Ci(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Ci(e,""+l);break;case"className":xl(e,"class",l);break;case"tabIndex":xl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xl(e,a,l);break;case"style":pm(e,l,h);break;case"data":if(n!=="object"){xl(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=El(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(n!=="input"&&Le(e,n,"name",u.name,u,null),Le(e,n,"formEncType",u.formEncType,u,null),Le(e,n,"formMethod",u.formMethod,u,null),Le(e,n,"formTarget",u.formTarget,u,null)):(Le(e,n,"encType",u.encType,u,null),Le(e,n,"method",u.method,u,null),Le(e,n,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=El(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=bn);break;case"onScroll":l!=null&&be("scroll",e);break;case"onScrollEnd":l!=null&&be("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=El(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":be("beforetoggle",e),be("toggle",e),bl(e,"popover",l);break;case"xlinkActuate":yn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":yn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":yn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":yn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":yn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":yn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":yn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":yn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":yn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":bl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ox.get(a)||a,bl(e,a,l))}}function Od(e,n,a,l,u,h){switch(a){case"style":pm(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Ci(e,l):(typeof l=="number"||typeof l=="bigint")&&Ci(e,""+l);break;case"onScroll":l!=null&&be("scroll",e);break;case"onScrollEnd":l!=null&&be("scrollend",e);break;case"onClick":l!=null&&(e.onclick=bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),n=a.slice(2,u?a.length-7:void 0),h=e[Et]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(n,h,u),typeof l=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,u);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):bl(e,a,l)}}}function mt(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",e),be("load",e);var l=!1,u=!1,h;for(h in a)if(a.hasOwnProperty(h)){var _=a[h];if(_!=null)switch(h){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Le(e,n,h,_,a,null)}}u&&Le(e,n,"srcSet",a.srcSet,a,null),l&&Le(e,n,"src",a.src,a,null);return;case"input":be("invalid",e);var v=h=_=u=null,S=null,R=null;for(l in a)if(a.hasOwnProperty(l)){var z=a[l];if(z!=null)switch(l){case"name":u=z;break;case"type":_=z;break;case"checked":S=z;break;case"defaultChecked":R=z;break;case"value":h=z;break;case"defaultValue":v=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,n));break;default:Le(e,n,l,z,a,null)}}dm(e,h,v,S,R,_,u,!1);return;case"select":be("invalid",e),l=_=h=null;for(u in a)if(a.hasOwnProperty(u)&&(v=a[u],v!=null))switch(u){case"value":h=v;break;case"defaultValue":_=v;break;case"multiple":l=v;default:Le(e,n,u,v,a,null)}n=h,a=_,e.multiple=!!l,n!=null?Ti(e,!!l,n,!1):a!=null&&Ti(e,!!l,a,!0);return;case"textarea":be("invalid",e),h=u=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(v=a[_],v!=null))switch(_){case"value":l=v;break;case"defaultValue":u=v;break;case"children":h=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:Le(e,n,_,v,a,null)}fm(e,l,u,h);return;case"option":for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null)&&(S==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Le(e,n,S,l,a,null));return;case"dialog":be("beforetoggle",e),be("toggle",e),be("cancel",e),be("close",e);break;case"iframe":case"object":be("load",e);break;case"video":case"audio":for(l=0;l<pr.length;l++)be(pr[l],e);break;case"image":be("error",e),be("load",e);break;case"details":be("toggle",e);break;case"embed":case"source":case"link":be("error",e),be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Le(e,n,R,l,a,null)}return;default:if(Yc(n)){for(z in a)a.hasOwnProperty(z)&&(l=a[z],l!==void 0&&Od(e,n,z,l,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(l=a[v],l!=null&&Le(e,n,v,l,a,null))}function kS(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,h=null,_=null,v=null,S=null,R=null,z=null;for(L in a){var G=a[L];if(a.hasOwnProperty(L)&&G!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":S=G;default:l.hasOwnProperty(L)||Le(e,n,L,null,l,G)}}for(var O in l){var L=l[O];if(G=a[O],l.hasOwnProperty(O)&&(L!=null||G!=null))switch(O){case"type":h=L;break;case"name":u=L;break;case"checked":R=L;break;case"defaultChecked":z=L;break;case"value":_=L;break;case"defaultValue":v=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,n));break;default:L!==G&&Le(e,n,O,L,l,G)}}qc(e,_,v,S,R,z,h,u);return;case"select":L=_=v=O=null;for(h in a)if(S=a[h],a.hasOwnProperty(h)&&S!=null)switch(h){case"value":break;case"multiple":L=S;default:l.hasOwnProperty(h)||Le(e,n,h,null,l,S)}for(u in l)if(h=l[u],S=a[u],l.hasOwnProperty(u)&&(h!=null||S!=null))switch(u){case"value":O=h;break;case"defaultValue":v=h;break;case"multiple":_=h;default:h!==S&&Le(e,n,u,h,l,S)}n=v,a=_,l=L,O!=null?Ti(e,!!a,O,!1):!!l!=!!a&&(n!=null?Ti(e,!!a,n,!0):Ti(e,!!a,a?[]:"",!1));return;case"textarea":L=O=null;for(v in a)if(u=a[v],a.hasOwnProperty(v)&&u!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Le(e,n,v,null,l,u)}for(_ in l)if(u=l[_],h=a[_],l.hasOwnProperty(_)&&(u!=null||h!=null))switch(_){case"value":O=u;break;case"defaultValue":L=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==h&&Le(e,n,_,u,l,h)}hm(e,O,L);return;case"option":for(var se in a)O=a[se],a.hasOwnProperty(se)&&O!=null&&!l.hasOwnProperty(se)&&(se==="selected"?e.selected=!1:Le(e,n,se,null,l,O));for(S in l)O=l[S],L=a[S],l.hasOwnProperty(S)&&O!==L&&(O!=null||L!=null)&&(S==="selected"?e.selected=O&&typeof O!="function"&&typeof O!="symbol":Le(e,n,S,O,l,L));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in a)O=a[ce],a.hasOwnProperty(ce)&&O!=null&&!l.hasOwnProperty(ce)&&Le(e,n,ce,null,l,O);for(R in l)if(O=l[R],L=a[R],l.hasOwnProperty(R)&&O!==L&&(O!=null||L!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(137,n));break;default:Le(e,n,R,O,l,L)}return;default:if(Yc(n)){for(var Ue in a)O=a[Ue],a.hasOwnProperty(Ue)&&O!==void 0&&!l.hasOwnProperty(Ue)&&Od(e,n,Ue,void 0,l,O);for(z in l)O=l[z],L=a[z],!l.hasOwnProperty(z)||O===L||O===void 0&&L===void 0||Od(e,n,z,O,l,L);return}}for(var w in a)O=a[w],a.hasOwnProperty(w)&&O!=null&&!l.hasOwnProperty(w)&&Le(e,n,w,null,l,O);for(G in l)O=l[G],L=a[G],!l.hasOwnProperty(G)||O===L||O==null&&L==null||Le(e,n,G,O,l,L)}function g_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var u=a[l],h=u.transferSize,_=u.initiatorType,v=u.duration;if(h&&v&&g_(_)){for(_=0,v=u.responseEnd,l+=1;l<a.length;l++){var S=a[l],R=S.startTime;if(R>v)break;var z=S.transferSize,G=S.initiatorType;z&&g_(G)&&(S=S.responseEnd,_+=z*(S<v?1:(v-R)/(S-R)))}if(--l,n+=8*(h+_)/(u.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Id=null,Md=null;function yo(e){return e.nodeType===9?e:e.ownerDocument}function __(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function kd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ld=null;function US(){var e=window.event;return e&&e.type==="popstate"?e===Ld?!1:(Ld=e,!0):(Ld=null,!1)}var y_=typeof setTimeout=="function"?setTimeout:void 0,PS=typeof clearTimeout=="function"?clearTimeout:void 0,b_=typeof Promise=="function"?Promise:void 0,zS=typeof queueMicrotask=="function"?queueMicrotask:typeof b_<"u"?function(e){return b_.resolve(null).then(e).catch(BS)}:y_;function BS(e){setTimeout(function(){throw e})}function fs(e){return e==="head"}function x_(e,n){var a=n,l=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(u),sa(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")_r(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,_r(a);for(var h=a.firstChild;h;){var _=h.nextSibling,v=h.nodeName;h[ka]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=_}}else a==="body"&&_r(e.ownerDocument.body);a=u}while(a);sa(n)}function S_(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Ud(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ud(a),Gc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function HS(e,n,a,l){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ka])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Kt(e.nextSibling),e===null)break}return null}function GS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Kt(e.nextSibling),e===null))return null;return e}function E_(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Kt(e.nextSibling),e===null))return null;return e}function Pd(e){return e.data==="$?"||e.data==="$~"}function zd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function FS(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Kt(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Bd=null;function N_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Kt(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function T_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function C_(e,n,a){switch(n=yo(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function _r(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Gc(e)}var Qt=new Map,w_=new Set;function bo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ln=q.d;q.d={f:qS,r:VS,D:YS,C:XS,L:WS,m:KS,X:$S,S:QS,M:ZS};function qS(){var e=Ln.f(),n=uo();return e||n}function VS(e){var n=Si(e);n!==null&&n.tag===5&&n.type==="form"?qp(n):Ln.r(e)}var ea=typeof document>"u"?null:document;function A_(e,n,a){var l=ea;if(l&&typeof n=="string"&&n){var u=Gt(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),w_.has(u)||(w_.add(u),e={rel:e,crossOrigin:a,href:n},l.querySelector(u)===null&&(n=l.createElement("link"),mt(n,"link",e),rt(n),l.head.appendChild(n)))}}function YS(e){Ln.D(e),A_("dns-prefetch",e,null)}function XS(e,n){Ln.C(e,n),A_("preconnect",e,n)}function WS(e,n,a){Ln.L(e,n,a);var l=ea;if(l&&e&&n){var u='link[rel="preload"][as="'+Gt(n)+'"]';n==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+Gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+Gt(a.imageSizes)+'"]')):u+='[href="'+Gt(e)+'"]';var h=u;switch(n){case"style":h=ta(e);break;case"script":h=na(e)}Qt.has(h)||(e=b({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Qt.set(h,e),l.querySelector(u)!==null||n==="style"&&l.querySelector(vr(h))||n==="script"&&l.querySelector(yr(h))||(n=l.createElement("link"),mt(n,"link",e),rt(n),l.head.appendChild(n)))}}function KS(e,n){Ln.m(e,n);var a=ea;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+Gt(l)+'"][href="'+Gt(e)+'"]',h=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=na(e)}if(!Qt.has(h)&&(e=b({rel:"modulepreload",href:e},n),Qt.set(h,e),a.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(yr(h)))return}l=a.createElement("link"),mt(l,"link",e),rt(l),a.head.appendChild(l)}}}function QS(e,n,a){Ln.S(e,n,a);var l=ea;if(l&&e){var u=Ei(l).hoistableStyles,h=ta(e);n=n||"default";var _=u.get(h);if(!_){var v={loading:0,preload:null};if(_=l.querySelector(vr(h)))v.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Qt.get(h))&&Hd(e,a);var S=_=l.createElement("link");rt(S),mt(S,"link",e),S._p=new Promise(function(R,z){S.onload=R,S.onerror=z}),S.addEventListener("load",function(){v.loading|=1}),S.addEventListener("error",function(){v.loading|=2}),v.loading|=4,xo(_,n,l)}_={type:"stylesheet",instance:_,count:1,state:v},u.set(h,_)}}}function $S(e,n){Ln.X(e,n);var a=ea;if(a&&e){var l=Ei(a).hoistableScripts,u=na(e),h=l.get(u);h||(h=a.querySelector(yr(u)),h||(e=b({src:e,async:!0},n),(n=Qt.get(u))&&Gd(e,n),h=a.createElement("script"),rt(h),mt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(u,h))}}function ZS(e,n){Ln.M(e,n);var a=ea;if(a&&e){var l=Ei(a).hoistableScripts,u=na(e),h=l.get(u);h||(h=a.querySelector(yr(u)),h||(e=b({src:e,async:!0,type:"module"},n),(n=Qt.get(u))&&Gd(e,n),h=a.createElement("script"),rt(h),mt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(u,h))}}function j_(e,n,a,l){var u=(u=re.current)?bo(u):null;if(!u)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=ta(a.href),a=Ei(u).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ta(a.href);var h=Ei(u).hoistableStyles,_=h.get(e);if(_||(u=u.ownerDocument||u,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,_),(h=u.querySelector(vr(e)))&&!h._p&&(_.instance=h,_.state.loading=5),Qt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qt.set(e,a),h||JS(u,e,a,_.state))),n&&l===null)throw Error(r(528,""));return _}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=na(a),a=Ei(u).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function ta(e){return'href="'+Gt(e)+'"'}function vr(e){return'link[rel="stylesheet"]['+e+"]"}function R_(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function JS(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),mt(n,"link",a),rt(n),e.head.appendChild(n))}function na(e){return'[src="'+Gt(e)+'"]'}function yr(e){return"script[async]"+e}function D_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+Gt(a.href)+'"]');if(l)return n.instance=l,rt(l),l;var u=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),rt(l),mt(l,"style",u),xo(l,a.precedence,e),n.instance=l;case"stylesheet":u=ta(a.href);var h=e.querySelector(vr(u));if(h)return n.state.loading|=4,n.instance=h,rt(h),h;l=R_(a),(u=Qt.get(u))&&Hd(l,u),h=(e.ownerDocument||e).createElement("link"),rt(h);var _=h;return _._p=new Promise(function(v,S){_.onload=v,_.onerror=S}),mt(h,"link",l),n.state.loading|=4,xo(h,a.precedence,e),n.instance=h;case"script":return h=na(a.src),(u=e.querySelector(yr(h)))?(n.instance=u,rt(u),u):(l=a,(u=Qt.get(h))&&(l=b({},a),Gd(l,u)),e=e.ownerDocument||e,u=e.createElement("script"),rt(u),mt(u,"link",l),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,xo(l,a.precedence,e));return n.instance}function xo(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,h=u,_=0;_<l.length;_++){var v=l[_];if(v.dataset.precedence===n)h=v;else if(h!==u)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Hd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Gd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var So=null;function O_(e,n,a){if(So===null){var l=new Map,u=So=new Map;u.set(a,l)}else u=So,l=u.get(a),l||(l=new Map,u.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var h=a[u];if(!(h[ka]||h[ut]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var _=h.getAttribute(n)||"";_=e+_;var v=l.get(_);v?v.push(h):l.set(_,[h])}}return l}function I_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function eE(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function M_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function tE(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=ta(l.href),h=n.querySelector(vr(u));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Eo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=h,rt(h);return}h=n.ownerDocument||n,l=R_(l),(u=Qt.get(u))&&Hd(l,u),h=h.createElement("link"),rt(h);var _=h;_._p=new Promise(function(v,S){_.onload=v,_.onerror=S}),mt(h,"link",l),a.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Eo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Fd=0;function nE(e,n){return e.stylesheets&&e.count===0&&To(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&To(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+n);0<e.imgBytes&&Fd===0&&(Fd=62500*LS());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&To(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Fd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(u)}}:null}function Eo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)To(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var No=null;function To(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,No=new Map,n.forEach(sE,e),No=null,Eo.call(e))}function sE(e,n){if(!(n.state.loading&4)){var a=No.get(e);if(a)var l=a.get(null);else{a=new Map,No.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<u.length;h++){var _=u[h];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}u=n.instance,_=u.getAttribute("data-precedence"),h=a.get(_)||l,h===l&&a.set(null,u),a.set(_,u),this.count++,l=Eo.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),h?h.parentNode.insertBefore(u,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var br={$$typeof:M,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function iE(e,n,a,l,u,h,_,v,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pc(0),this.hiddenUpdates=Pc(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=h,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function k_(e,n,a,l,u,h,_,v,S,R,z,G){return e=new iE(e,n,a,_,S,R,z,G,v),n=1,h===!0&&(n|=24),h=kt(3,null,null,n),e.current=h,h.stateNode=e,n=Su(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:l,isDehydrated:a,cache:n},Cu(h),e}function L_(e){return e?(e=Ii,e):Ii}function U_(e,n,a,l,u,h){u=L_(u),l.context===null?l.context=u:l.pendingContext=u,l=ns(n),l.payload={element:a},h=h===void 0?null:h,h!==null&&(l.callback=h),a=ss(e,l,n),a!==null&&(jt(a,e,n),Za(a,e,n))}function P_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function qd(e,n){P_(e,n),(e=e.alternate)&&P_(e,n)}function z_(e){if(e.tag===13||e.tag===31){var n=Gs(e,67108864);n!==null&&jt(n,e,67108864),qd(e,67108864)}}function B_(e){if(e.tag===13||e.tag===31){var n=Bt();n=zc(n);var a=Gs(e,n);a!==null&&jt(a,e,n),qd(e,n)}}var Co=!0;function aE(e,n,a,l){var u=I.T;I.T=null;var h=q.p;try{q.p=2,Vd(e,n,a,l)}finally{q.p=h,I.T=u}}function rE(e,n,a,l){var u=I.T;I.T=null;var h=q.p;try{q.p=8,Vd(e,n,a,l)}finally{q.p=h,I.T=u}}function Vd(e,n,a,l){if(Co){var u=Yd(l);if(u===null)Dd(e,n,l,wo,a),G_(e,l);else if(oE(u,e,n,a,l))l.stopPropagation();else if(G_(e,l),n&4&&-1<lE.indexOf(e)){for(;u!==null;){var h=Si(u);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var _=Us(h.pendingLanes);if(_!==0){var v=h;for(v.pendingLanes|=2,v.entangledLanes|=2;_;){var S=1<<31-It(_);v.entanglements[1]|=S,_&=~S}pn(h),(je&6)===0&&(oo=Dt()+500,mr(0))}}break;case 31:case 13:v=Gs(h,2),v!==null&&jt(v,h,2),uo(),qd(h,2)}if(h=Yd(l),h===null&&Dd(e,n,l,wo,a),h===u)break;u=h}u!==null&&l.stopPropagation()}else Dd(e,n,l,null,a)}}function Yd(e){return e=Wc(e),Xd(e)}var wo=null;function Xd(e){if(wo=null,e=xi(e),e!==null){var n=d(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===31){if(e=m(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return wo=e,null}function H_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yb()){case Kf:return 2;case Qf:return 8;case pl:case Xb:return 32;case $f:return 268435456;default:return 32}default:return 32}}var Wd=!1,ms=null,ps=null,gs=null,xr=new Map,Sr=new Map,_s=[],lE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G_(e,n){switch(e){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":xr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(n.pointerId)}}function Er(e,n,a,l,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:h,targetContainers:[u]},n!==null&&(n=Si(n),n!==null&&z_(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function oE(e,n,a,l,u){switch(n){case"focusin":return ms=Er(ms,e,n,a,l,u),!0;case"dragenter":return ps=Er(ps,e,n,a,l,u),!0;case"mouseover":return gs=Er(gs,e,n,a,l,u),!0;case"pointerover":var h=u.pointerId;return xr.set(h,Er(xr.get(h)||null,e,n,a,l,u)),!0;case"gotpointercapture":return h=u.pointerId,Sr.set(h,Er(Sr.get(h)||null,e,n,a,l,u)),!0}return!1}function F_(e){var n=xi(e.target);if(n!==null){var a=d(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,sm(e.priority,function(){B_(a)});return}}else if(n===31){if(n=m(a),n!==null){e.blockedOn=n,sm(e.priority,function(){B_(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ao(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Yd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Xc=l,a.target.dispatchEvent(l),Xc=null}else return n=Si(a),n!==null&&z_(n),e.blockedOn=a,!1;n.shift()}return!0}function q_(e,n,a){Ao(e)&&a.delete(n)}function cE(){Wd=!1,ms!==null&&Ao(ms)&&(ms=null),ps!==null&&Ao(ps)&&(ps=null),gs!==null&&Ao(gs)&&(gs=null),xr.forEach(q_),Sr.forEach(q_)}function jo(e,n){e.blockedOn===n&&(e.blockedOn=null,Wd||(Wd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,cE)))}var Ro=null;function V_(e){Ro!==e&&(Ro=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ro===e&&(Ro=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],u=e[n+2];if(typeof l!="function"){if(Xd(l||a)===null)continue;break}var h=Si(a);h!==null&&(e.splice(n,3),n-=3,Yu(h,{pending:!0,data:u,method:a.method,action:l},l,u))}}))}function sa(e){function n(S){return jo(S,e)}ms!==null&&jo(ms,e),ps!==null&&jo(ps,e),gs!==null&&jo(gs,e),xr.forEach(n),Sr.forEach(n);for(var a=0;a<_s.length;a++){var l=_s[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<_s.length&&(a=_s[0],a.blockedOn===null);)F_(a),a.blockedOn===null&&_s.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var u=a[l],h=a[l+1],_=u[Et]||null;if(typeof h=="function")_||V_(a);else if(_){var v=null;if(h&&h.hasAttribute("formAction")){if(u=h,_=h[Et]||null)v=_.formAction;else if(Xd(u)!==null)continue}else v=_.action;typeof v=="function"?a[l+1]=v:(a.splice(l,3),l-=3),V_(a)}}}function Y_(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(_){return u=_})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function Kd(e){this._internalRoot=e}Do.prototype.render=Kd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Bt();U_(a,l,e,n,null,null)},Do.prototype.unmount=Kd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;U_(e.current,2,null,e,null,null),uo(),n[bi]=null}};function Do(e){this._internalRoot=e}Do.prototype.unstable_scheduleHydration=function(e){if(e){var n=nm();e={blockedOn:null,target:e,priority:n};for(var a=0;a<_s.length&&n!==0&&n<_s[a].priority;a++);_s.splice(a,0,e),a===0&&F_(e)}};var X_=t.version;if(X_!=="19.2.4")throw Error(r(527,X_,"19.2.4"));q.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=g(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var uE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{Oa=Oo.inject(uE),Ot=Oo}catch{}}return Tr.createRoot=function(e,n){if(!o(e))throw Error(r(299));var a=!1,l="",u=eg,h=tg,_=ng;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=k_(e,1,!1,null,null,a,l,null,u,h,_,Y_),e[bi]=n.current,Rd(e),new Kd(n)},Tr.hydrateRoot=function(e,n,a){if(!o(e))throw Error(r(299));var l=!1,u="",h=eg,_=tg,v=ng,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),n=k_(e,1,!0,n,a??null,l,u,S,h,_,v,Y_),n.context=L_(null),a=n.current,l=Bt(),l=zc(l),u=ns(l),u.callback=null,ss(a,u,l),a=l,n.current.lanes=a,Ma(n,a),pn(n),e[bi]=n.current,Rd(e),new Do(n)},Tr.version="19.2.4",Tr}var sv;function bE(){if(sv)return Zd.exports;sv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Zd.exports=yE(),Zd.exports}var xE=bE();function Ts(s,t=[],i=null){const[r,o]=Z.useState(null),[d,f]=Z.useState(!0),[m,p]=Z.useState(null),g=Z.useCallback(async()=>{try{f(!0),p(null);const y=await s();o(y)}catch(y){p(y.message||"Failed to fetch data")}finally{f(!1)}},[s,...t]);return Z.useEffect(()=>{g()},[g]),Z.useEffect(()=>{if(!i)return;const y=setInterval(g,i);return()=>clearInterval(y)},[g,i]),{data:r,loading:d,error:m,reload:g}}const SE="https://fantasy.premierleague.com/api";let el=5398119;function nh(s){el=Number(s)}function EE(){return el}let Or=null,bh=0;const NE=1800*1e3;let Io=null;const Mo={},Ty=[s=>`https://corsproxy.io/?url=${encodeURIComponent(s)}`,s=>`https://api.allorigins.win/raw?url=${encodeURIComponent(s)}`,s=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(s)}`,s=>`https://thingproxy.freeboard.io/fetch/${s}`];let ko=-1,Cr=null;async function Bo(s,t=8e3){const i=new AbortController,r=setTimeout(()=>i.abort(),t);try{const o=await fetch(s,{signal:i.signal});return clearTimeout(r),o}catch(o){throw clearTimeout(r),o}}async function iv(s,t){const i=Ty[s](t),r=await Bo(i,6e3);if(!r.ok)throw new Error(`FPL API error (${r.status})`);const o=await r.json();return{index:s,data:o}}async function mi(s){try{const f=await Bo(`/api/fpl-proxy?path=${encodeURIComponent(s)}`);if(f.ok)return await f.json()}catch{}const t={"bootstrap-static/":"bootstrap.json","fixtures/":"fixtures.json"},i=s.match(/^event\/(\d+)\/live\/$/),r=t[s]||(i?`live/gw${i[1]}.json`:null);if(r)try{const m=await Bo(`/FF2026/data/${r}`,3e3);if(m.ok){const p=await m.json();if(p&&(Array.isArray(p)?p.length>0:Object.keys(p).length>0))return p}}catch{}if(Cr!==!1)try{const f=await Bo(`/api/fpl-proxy?path=${encodeURIComponent(s)}`,Cr===null?3e3:6e3);if(f.ok){const m=await f.json();return Cr=!0,m}Cr=!1}catch{Cr=!1}const o=`${SE}/${s}`;if(ko>=0)try{const{data:f}=await iv(ko,o);return f}catch{ko=-1}const d=Ty.map((f,m)=>iv(m,o));try{const{index:f,data:m}=await Promise.any(d);return ko=f,m}catch{throw new Error('Unable to reach the FPL API. All proxy methods failed. Try refreshing or running the app locally with "npm run dev".')}}async function Vn(){const s=Date.now();return(!Or||s-bh>=NE)&&(Or=mi("bootstrap-static/").catch(t=>{throw Or=null,t}),bh=s),Or}function TE(){Or=null,bh=0}async function qh(){return mi(`entry/${el}/`)}async function Vh(){return mi(`entry/${el}/history/`)}async function Yh(s){return mi(`entry/${el}/event/${s}/picks/`)}async function Sa(){return Io||(Io=mi("fixtures/").catch(s=>{throw Io=null,s})),Io}async function gc(s){return Mo[s]||(Mo[s]=mi(`event/${s}/live/`).catch(t=>{throw delete Mo[s],t})),Mo[s]}async function CE(s){return mi(`leagues-classic/${s}/standings/`)}let sh=null,ih=null;async function Cy(s){try{const i=await fetch(`/FF2026/data/${s}`);return i.ok?await i.json():null}catch{return null}}async function Xh(){return sh||(sh=Cy("understat.json").then(s=>{if(!s||!Array.isArray(s))return{};const t={};for(const i of s){const r=Ho(i.name);t[r]=i}return t})),sh}function wy(s,t){if(!s||!t)return null;const i=Ho(t.web_name||"");if(i&&s[i])return s[i];const r=Ho(t.second_name||"");if(r&&s[r])return s[r];const o=Ho(`${t.first_name||""} ${t.second_name||""}`);if(o&&s[o])return s[o];if(i.length>=4){for(const[d,f]of Object.entries(s))if(d.endsWith(i)||i.endsWith(d))return f}return null}async function Wh(){return ih||(ih=Cy("odds.json").then(s=>s||{matches:[],teamStrength:{}})),ih}const wE={Arsenal:"ARS","Aston Villa":"AVL",Bournemouth:"BOU",Brentford:"BRE",Brighton:"BHA",Chelsea:"CHE","Crystal Palace":"CRY",Everton:"EVE",Fulham:"FUL",Ipswich:"IPS",Leicester:"LEI",Liverpool:"LIV","Man City":"MCI","Man United":"MUN",Newcastle:"NEW","Nott'm Forest":"NFO",Southampton:"SOU",Tottenham:"TOT","West Ham":"WHU",Wolves:"WOL"},AE=Object.fromEntries(Object.entries(wE).map(([s,t])=>[t,s]));function jE(s,t){const i=AE[t];return!i||!s?.teamStrength?.[i]?null:s.teamStrength[i].strength}function Ho(s){return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z\s]/g,"").trim()}const av={ATK:{form:.18,ppg:.14,ict:.18,fdr:.14,homeAway:.1,teamStr:.12,availability:.09,bonus:.05},DEF:{form:.2,ppg:.16,ict:.1,fdr:.16,homeAway:.1,teamStr:.14,availability:.09,bonus:.05}};function RE(s){return s==="GKP"||s==="DEF"?av.DEF:av.ATK}function ii(s,t,i){return Math.max(t,Math.min(i,s))}function rv(s){return ii(s/50,0,10)}function DE(s){return ii((5-s)*2.5,0,10)}function OE(s){return s==null||s===""?10:ii(s/10,0,10)}function IE(s,t){if(!t||t<=0)return 5;const i=s/t;return ii(i*3.3,0,10)}function ME(s,t,i){if(!s)return 5;const r=t==="GKP"||t==="DEF";let o;return r?o=i?s.strength_defence_home:s.strength_defence_away:o=i?s.strength_attack_home:s.strength_attack_away,o?ii((o-900)/60,0,10):5}function kE(s){return s?7.5:4.5}function LE(s){return s>=7?"In great form":s>=5?"Decent form":s>=3?"Average form":"Poor form"}function UE(s,t){const i=t||"";return s<=2?`Easy fixture ${i}`:s<=3?`Medium fixture ${i}`:`Tough fixture ${i}`}function PE(s){return s>=7?"High attacking threat":s>=4?"Moderate involvement":"Low attacking involvement"}function zE(s){return s==null||s===""||s>=100?"Fully available":s>=75?"Likely to play":s>=50?"Fitness doubt":s>=25?"Unlikely to play":"Expected to miss"}function Xo(s,t,i){const r=RE(s.position),o=t?.opponent?.includes("(H)")??!1,d=i?.[s.teamId]||null,f=s.appearances||(s.minutes?Math.round(s.minutes/70):0),m=[{name:"form",value:s.form||0,norm:ii(s.form||0,0,10),weight:r.form,label:LE(s.form||0)},{name:"ppg",value:s.pointsPerGame||0,norm:ii((s.pointsPerGame||0)*2,0,10),weight:r.ppg,label:`${(s.pointsPerGame||0).toFixed(1)} pts/game average`},{name:"ict",value:s.ictIndex||0,norm:rv(s.ictIndex||0),weight:r.ict,label:PE(rv(s.ictIndex||0))},{name:"fdr",value:t?.difficulty||3,norm:DE(t?.difficulty||3),weight:r.fdr,label:UE(t?.difficulty||3,t?.opponent)},{name:"homeAway",value:o?1:0,norm:kE(o),weight:r.homeAway,label:o?"Home advantage":"Away match"},{name:"teamStr",value:0,norm:ME(d,s.position,o),weight:r.teamStr,label:`Team ${s.position==="GKP"||s.position==="DEF"?"defence":"attack"} strength`},{name:"availability",value:s.chanceOfPlaying??100,norm:OE(s.chanceOfPlaying),weight:r.availability,label:zE(s.chanceOfPlaying)},{name:"bonus",value:s.bonus||0,norm:IE(s.bonus||0,f),weight:r.bonus,label:`${((s.bonus||0)/Math.max(f,1)).toFixed(1)} bonus/game`}];let p=0;for(const b of m)b.impact=+(b.norm*b.weight).toFixed(2),p+=b.impact;const g=+(p*.85).toFixed(1),y=m.filter(b=>b.impact>.5).sort((b,x)=>x.impact-b.impact).slice(0,3).map(b=>b.label);return{xpts:g,factors:m,topReasons:y}}function ai(s,t,i,r=3){const o=(t||[]).slice(0,r);if(o.length===0){const y=Xo(s,{difficulty:3,opponent:"TBD"},i);return{totalXpts:+(y.xpts*r).toFixed(1),perGw:Array(r).fill(y),avgXpts:y.xpts,topReasons:y.topReasons}}const d=o.map(y=>Xo(s,y,i)),f=+d.reduce((y,b)=>y+b.xpts,0).toFixed(1),m=+(f/d.length).toFixed(1),p={};for(const y of d)for(const b of y.topReasons)p[b]=(p[b]||0)+1;const g=Object.entries(p).sort((y,b)=>b[1]-y[1]).slice(0,3).map(([y])=>y);return{totalXpts:f,perGw:d,avgXpts:m,topReasons:g}}function Ay(s,t){const i=s.map(r=>{const{totalXpts:o,avgXpts:d,topReasons:f}=ai(r,r.upcomingFixtures,t,3);return{...r,xpts:d,totalXpts3:o,topReasons:f}});return i.sort((r,o)=>o.xpts-r.xpts),{ranked:i,captain:i[0]||null,viceCaptain:i[1]||null}}function lv(s,t,i=3){return s.map(r=>{const{totalXpts:o,avgXpts:d,topReasons:f}=ai(r,r.upcomingFixtures,t,i);return{...r,xpts:d,totalXpts:o,topReasons:f}}).sort((r,o)=>o.xpts-r.xpts)}function pi(s){const t={};for(const m of s.teams)t[m.id]=m;const i={};for(const m of s.element_types)i[m.id]=m.singular_name_short;const r={};for(const m of s.elements)r[m.id]=m;const o={};for(const m of s.events)o[m.id]=m;const d=s.events.find(m=>m.is_current),f=s.events.find(m=>m.is_next);return{teams:t,positionMap:i,players:r,events:o,currentEvent:d,nextEvent:f}}function _c(s,t,i){const r={},o=s.filter(d=>d.event&&d.event>i&&!d.finished).sort((d,f)=>d.event-f.event);for(const d of o)r[d.team_h]||(r[d.team_h]=[]),r[d.team_h].length<5&&r[d.team_h].push({gw:d.event,opponent:`${t[d.team_a]?.short_name||"?"} (H)`,difficulty:d.team_h_difficulty}),r[d.team_a]||(r[d.team_a]=[]),r[d.team_a].length<5&&r[d.team_a].push({gw:d.event,opponent:`${t[d.team_h]?.short_name||"?"} (A)`,difficulty:d.team_a_difficulty});return r}function BE(s){let t=1;const i=new Set(s.chips.map(r=>r.event));for(const r of s.current){if(i.has(r.event)){t=Math.min(t+1,5);continue}r.event_transfers===0?t=Math.min(t+1,5):r.event_transfers_cost>0?t=1:t=Math.max(1,Math.min(t-r.event_transfers+1,5))}return t}function jy(s){return{xG:parseFloat(s.expected_goals)||0,xA:parseFloat(s.expected_assists)||0,xGI:parseFloat(s.expected_goal_involvements)||0,xGC:parseFloat(s.expected_goals_conceded)||0,xG90:parseFloat(s.expected_goals_per_90)||0,xA90:parseFloat(s.expected_assists_per_90)||0,xGI90:parseFloat(s.expected_goal_involvements_per_90)||0,ictIndex:parseFloat(s.ict_index)||0,influence:parseFloat(s.influence)||0,creativity:parseFloat(s.creativity)||0,threat:parseFloat(s.threat)||0,pointsPerGame:parseFloat(s.points_per_game)||0,goalsScored:s.goals_scored||0,assists:s.assists||0,cleanSheets:s.clean_sheets||0,minutes:s.minutes||0,bonus:s.bonus||0,bps:s.bps||0,penaltiesOrder:s.penalties_order||null,cornersOrder:s.corners_and_indirect_freekicks_order||null,directFKOrder:s.direct_freekicks_order||null}}function Kh(s){const t=s.cost_change_event||0,i=s.cost_change_start||0,r=s.transfers_in_event||0,o=s.transfers_out_event||0,d=r-o;let f="stable";return d>5e4?f="rising":d>2e4?f="likely-rising":d<-5e4?f="falling":d<-2e4&&(f="likely-falling"),{costChangeEvent:t/10,costChangeStart:i/10,transfersInEvent:r,transfersOutEvent:o,netTransfersEvent:d,transfersIn:s.transfers_in||0,transfersOut:s.transfers_out||0,pricePressure:f,startPrice:(s.now_cost-i)/10}}function Qh(s,t,i,r,o){const d=parseFloat(s.form)||0,f=parseFloat(s.points_per_game)||0,m=parseFloat(s.expected_goal_involvements_per_90)||0,p=parseFloat(s.ict_index)||0,g=s.minutes||0,y=g>0?g/90:1,b=p/Math.max(y,1),x=Math.min(b/10,10);let C=d*.3+f*.25+m*8*.2+x*.15;if(i){const U=wy(i,s);if(U&&U.games>0){const Y=(U.goals-U.xG)/U.games,K=U.npxG/U.games*(90/(U.time/U.games||90));C+=K*5*.1,C-=Y*.5}}let N=1;if(r&&o){const U=jE(r,o);U!==null?N=1.15-U*.5:N=1+(3-t)*.06}else N=1+(3-t)*.06;return Math.max(1,Math.round(C*N))}async function HE(){const s=Vn(),t=qh(),i=Sa(),r=Vh(),o=Xh(),d=Wh(),f=await s,{teams:m,positionMap:p,players:g,currentEvent:y}=pi(f),b=y?.id||1,[x,C,N,P,U,Y,K]=await Promise.all([t,i,r,Yh(b),gc(b),o,d]),M={};for(const F of U.elements)M[F.id]=F.stats.total_points;const D=_c(C,m,b);function $(F){const V=g[F.element],I=m[V.team],q=D[V.team]||[],Q=q[0],ne=parseFloat(V.form)||0;return{id:V.id,name:V.web_name,position:p[V.element_type],club:I?.name||"Unknown",clubShort:I?.short_name||"???",teamId:V.team,price:V.now_cost/10,totalPoints:V.total_points,gameweekPoints:M[V.id]??V.event_points??0,form:ne,upcomingFixtures:q.slice(0,5),upcomingFixture:Q?Q.opponent:"TBD",fixtureDifficulty:Q?Q.difficulty:3,isCaptain:F.is_captain,isViceCaptain:F.is_vice_captain,benchOrder:F.position>11?F.position-11:0,ictIndex:parseFloat(V.ict_index)||0,pointsPerGame:parseFloat(V.points_per_game)||0,chanceOfPlaying:V.chance_of_playing_next_round,bonus:V.bonus||0,minutes:V.minutes||0}}const J=P.picks.filter(F=>F.position<=11).map(F=>{const V=g[F.element],I=m[V.team],q=D[V.team]||[],Q=q[0],ne=parseFloat(V.form)||0,ae=jy(V),E=Kh(V),A=wy(Y,V),k=A?{xG:A.xG,xA:A.xA,npxG:A.npxG,xGChain:A.xGChain,xGBuildup:A.xGBuildup,shots:A.shots,keyPasses:A.key_passes}:null;return{id:V.id,name:V.web_name,position:p[V.element_type],club:I?.name||"Unknown",clubShort:I?.short_name||"???",price:V.now_cost/10,totalPoints:V.total_points,gameweekPoints:M[V.id]??V.event_points??0,form:ne,...ae,...E,understat:k,upcomingFixtures:q.slice(0,5),upcomingFixture:Q?Q.opponent:"TBD",fixtureDifficulty:Q?Q.difficulty:3,isCaptain:F.is_captain,isViceCaptain:F.is_vice_captain,pointsHistory:Array.from({length:5},()=>Math.max(1,Math.round(ne+(Math.random()-.5)*4))),expectedPoints:q.slice(0,5).map(H=>{const ee=H.opponent?.match(/^(\w+)/)?.[1]||null;return Qh(V,H.difficulty,Y,K,ee)})}}),W=P.picks.filter(F=>F.position>11).sort((F,V)=>F.position-V.position).map($),ue=P.picks.find(F=>F.is_captain),De=(ue&&M[ue.element]||0)*(ue?.multiplier||2),fe=new Set(N.chips.map(F=>F.name)),te=P.entry_history,oe={totalPoints:te.total_points,teamValue:te.value/10,moneyInBank:te.bank/10,overallRank:te.overall_rank||x.summary_overall_rank||0,gameweekRank:te.rank||0,currentGameweek:b,gameweekPoints:te.points,captainPoints:De,averagePoints:y?.average_entry_score||0,highestPoints:y?.highest_score||0,transfers:{made:te.event_transfers,cost:te.event_transfers_cost,available:BE(N)},chips:{wildcard:!fe.has("wildcard"),benchBoost:!fe.has("bboost"),tripleCaptain:!fe.has("3xc"),freeHit:!fe.has("freehit")}};return{players:J,bench:W,summary:oe,teams:m}}async function GE(){const[s,t]=await Promise.all([Vn(),Vh()]),{events:i}=pi(s);return t.current.slice(-7).map(o=>({gw:o.event,points:o.points,average:i[o.event]?.average_entry_score||0,rank:o.overall_rank}))}async function FE(){const[s,t]=await Promise.all([Vn(),Sa()]),{currentEvent:i}=pi(s),r=i?.id||1,o=s.events.filter(m=>m.id>r).slice(0,5);if(o.length===0)return[{gw:r+1,projected:50,difficulty:"Medium"}];const d=s.events.filter(m=>m.finished),f=d.length>0?Math.round(d.reduce((m,p)=>m+(p.average_entry_score||0),0)/d.length):50;return o.map(m=>{const p=t.filter(C=>C.event===m.id),g=p.length>0?p.reduce((C,N)=>C+N.team_h_difficulty+N.team_a_difficulty,0)/(p.length*2):3,y=g<2.5?"Easy":g>3.5?"Hard":"Medium",b=g<3?1.1:g>3?.9:1,x=Math.round(f*b);return{gw:m.id,projected:x,difficulty:y}})}async function qE(){const[s,t,i,r,o]=await Promise.all([Vn(),qh(),Sa(),Xh(),Wh()]),{teams:d,positionMap:f,currentEvent:m}=pi(s),p=m?.id||t.current_event,g=await Yh(p),y=new Set(g.picks.map(N=>N.element)),b=_c(i,d,p);return{candidates:s.elements.filter(N=>!y.has(N.id)&&N.minutes>0&&N.status==="a").sort((N,P)=>parseFloat(P.form)-parseFloat(N.form)).slice(0,150).map(N=>{const P=d[N.team],U=parseFloat(N.form)||0,Y=b[N.team]||[],K=jy(N),M=Kh(N);return{id:N.id,name:N.web_name,position:f[N.element_type],club:P?.name||"Unknown",clubShort:P?.short_name||"???",teamId:N.team,price:N.now_cost/10,totalPoints:N.total_points,form:U,...K,...M,selectedByPercent:parseFloat(N.selected_by_percent)||0,upcomingFixtures:Y.slice(0,5),expectedPoints:Y.slice(0,5).map(D=>{const $=D.opponent?.match(/^(\w+)/)?.[1]||null;return Qh(N,D.difficulty,r,o,$)}),ictIndex:parseFloat(N.ict_index)||0,pointsPerGame:parseFloat(N.points_per_game)||0,chanceOfPlaying:N.chance_of_playing_next_round,bonus:N.bonus||0,minutes:N.minutes||0}}),teams:d}}async function VE(){const t=(await qh()).leagues?.classic||[],i=t.find(o=>o.league_type==="x")||t.find(o=>o.max_entries&&o.max_entries<1e3)||t[0];if(!i)return{name:"No League Found",myPosition:0,totalMembers:0,standings:[]};const r=await CE(i.id);return{name:r.league.name,myPosition:i.entry_rank||0,totalMembers:i.entry_count||r.standings.results.length,standings:r.standings.results.slice(0,10).map((o,d)=>({rank:o.rank||d+1,name:o.entry_name,manager:o.entry===EE()?"You":o.player_name,points:o.total}))}}async function YE(){const[s,t,i,r]=await Promise.all([Vn(),Sa(),Xh(),Wh()]),{teams:o,positionMap:d,currentEvent:f}=pi(s),m=f?.id||1,p=t.filter(N=>N.event&&N.event>m&&!N.finished).sort((N,P)=>N.event-P.event||N.kickoff_time?.localeCompare(P.kickoff_time||"")),g=[...new Set(p.map(N=>N.event))].slice(0,5),y={};for(const N of s.events)y[N.id]=N.deadline_time;const b={};for(const N of p)b[N.team_h]||(b[N.team_h]={}),b[N.team_h][N.event]={difficulty:N.team_h_difficulty,opponent:`${o[N.team_a]?.short_name||"?"} (H)`,opponentShort:o[N.team_a]?.short_name||null},b[N.team_a]||(b[N.team_a]={}),b[N.team_a][N.event]={difficulty:N.team_a_difficulty,opponent:`${o[N.team_h]?.short_name||"?"} (A)`,opponentShort:o[N.team_h]?.short_name||null};const x=s.elements.filter(N=>N.minutes>0&&N.status==="a"&&parseFloat(N.form)>0);function C(N){const P=x.filter(K=>b[K.team]?.[N]).map(K=>{const M=b[K.team][N],D=parseFloat(K.form)||0,$=Qh(K,M.difficulty,i,r,M.opponentShort);return{id:K.id,name:K.web_name,position:d[K.element_type],club:o[K.team]?.short_name||"???",price:K.now_cost/10,form:D,totalPoints:K.total_points,opponent:M.opponent,difficulty:M.difficulty,score:$}}).sort((K,M)=>M.score-K.score),U=[],Y={};for(const K of P){const M=Y[K.position]||0;if(M<2&&(U.push(K),Y[K.position]=M+1),U.length>=8)break}return U}return g.map(N=>({gw:N,deadline:y[N]||null,matches:p.filter(P=>P.event===N).map(P=>({id:P.id,kickoff:P.kickoff_time,homeTeam:o[P.team_h]?.name||"TBD",homeShort:o[P.team_h]?.short_name||"?",awayTeam:o[P.team_a]?.name||"TBD",awayShort:o[P.team_a]?.short_name||"?",homeDifficulty:P.team_h_difficulty,awayDifficulty:P.team_a_difficulty})),picks:C(N)}))}async function XE(){const[s,t]=await Promise.all([Vn(),Sa()]),{teams:i,positionMap:r,currentEvent:o,nextEvent:d}=pi(s),f=o?.id||1,m=_c(t,i,f),p=d?.deadline_time||o?.deadline_time||null,g=d?.id||f+1,y=s.elements.filter(U=>U.minutes>0&&U.status==="a").map(U=>{const Y=i[U.team],K=Kh(U),D=(m[U.team]||[])[0];return{id:U.id,name:U.web_name,position:r[U.element_type],club:Y?.name||"Unknown",clubShort:Y?.short_name||"???",price:U.now_cost/10,form:parseFloat(U.form)||0,totalPoints:U.total_points,selectedByPercent:parseFloat(U.selected_by_percent)||0,...K,nextFixture:D?D.opponent:"TBD",nextDifficulty:D?D.difficulty:3}}),b=y.filter(U=>U.pricePressure==="rising"||U.pricePressure==="likely-rising").sort((U,Y)=>Y.netTransfersEvent-U.netTransfersEvent),x=y.filter(U=>U.pricePressure==="falling"||U.pricePressure==="likely-falling").sort((U,Y)=>U.netTransfersEvent-Y.netTransfersEvent),C=y.filter(U=>U.costChangeEvent!==0).sort((U,Y)=>Math.abs(Y.costChangeEvent)-Math.abs(U.costChangeEvent)),N=[...y].filter(U=>U.costChangeStart>0).sort((U,Y)=>Y.costChangeStart-U.costChangeStart).slice(0,10),P=[...y].filter(U=>U.costChangeStart<0).sort((U,Y)=>U.costChangeStart-Y.costChangeStart).slice(0,10);return{rising:b,falling:x,recentChanges:C,biggestRisers:N,biggestFallers:P,currentGw:f,nextGw:g,deadline:p,lastUpdated:new Date().toLocaleTimeString()}}async function WE(){const[s,t,i]=await Promise.all([Vn(),Vh(),Sa()]),{teams:r,positionMap:o,players:d,currentEvent:f}=pi(s),m=t.current.filter(M=>M.event_transfers>0);if(m.length===0)return{transfers:[],teams:r};const p=f?.id||t.current[t.current.length-1]?.event||1,g=_c(i,r,p),y=t.current.map(M=>M.event),b={},x=5;for(let M=0;M<y.length;M+=x){const D=y.slice(M,M+x),$=await Promise.all(D.map(J=>Yh(J).catch(()=>null)));D.forEach((J,W)=>{$[W]&&(b[J]=$[W])})}const C=[];for(const M of m){const D=M.event,$=y[y.indexOf(D)-1];if(!$||!b[$]||!b[D])continue;const J=new Set(b[$].picks.map(fe=>fe.element)),W=new Set(b[D].picks.map(fe=>fe.element)),ue=[...W].filter(fe=>!J.has(fe)),Re=[...J].filter(fe=>!W.has(fe)),De=Math.min(ue.length,Re.length);for(let fe=0;fe<De;fe++){const te=d[ue[fe]],oe=d[Re[fe]];!te||!oe||C.push({gameweek:D,transferCost:M.event_transfers_cost,playerIn:{id:te.id,name:te.web_name,position:o[te.element_type],club:r[te.team]?.short_name||"???",clubFull:r[te.team]?.name||"Unknown",price:te.now_cost/10,teamId:te.team,form:parseFloat(te.form)||0,ictIndex:parseFloat(te.ict_index)||0,pointsPerGame:parseFloat(te.points_per_game)||0,chanceOfPlaying:te.chance_of_playing_next_round,bonus:te.bonus||0,minutes:te.minutes||0,upcomingFixtures:(g[te.team]||[]).slice(0,5)},playerOut:{id:oe.id,name:oe.web_name,position:o[oe.element_type],club:r[oe.team]?.short_name||"???",clubFull:r[oe.team]?.name||"Unknown",price:oe.now_cost/10,teamId:oe.team,form:parseFloat(oe.form)||0,ictIndex:parseFloat(oe.ict_index)||0,pointsPerGame:parseFloat(oe.points_per_game)||0,chanceOfPlaying:oe.chance_of_playing_next_round,bonus:oe.bonus||0,minutes:oe.minutes||0,upcomingFixtures:(g[oe.team]||[]).slice(0,5)}})}}const N=Math.max(...y),P=[...y].sort((M,D)=>M-D);for(const M of C){M.endGameweek=N;let D=M.gameweek;const $=P.indexOf(M.gameweek);for(let J=$+1;J<P.length;J++){const W=P[J];if(b[W])if(b[W].picks.some(ue=>ue.element===M.playerIn.id))D=W;else{M.endGameweek=D;break}}}const U=new Set;for(const M of C)for(let D=M.gameweek;D<=M.endGameweek;D++)U.add(D);const Y={},K=[...U].sort((M,D)=>M-D);for(let M=0;M<K.length;M+=x){const D=K.slice(M,M+x),$=await Promise.all(D.map(J=>gc(J).catch(()=>null)));D.forEach((J,W)=>{Y[J]=$[W]})}for(const M of C){let D=0,$=0;const J=[];for(let W=M.gameweek;W<=M.endGameweek;W++){const ue=Y[W];if(!ue)continue;const Re=ue.elements.find(oe=>oe.id===M.playerIn.id),De=ue.elements.find(oe=>oe.id===M.playerOut.id),fe=Re?.stats?.total_points||0,te=De?.stats?.total_points||0;D+=fe,$+=te,J.push({gw:W,inPts:fe,outPts:te,diff:fe-te})}M.playerIn.pointsSinceTransfer=D,M.playerOut.pointsSinceTransfer=$,M.netGain=D-$,M.gwBreakdown=J,M.gameweeksCompared=J.length}return C.sort((M,D)=>D.gameweek-M.gameweek),{transfers:C,teams:r}}function KE(s,t,i,r){const o=ai(s,s.upcomingFixtures,r,i),d=ai(t,t.upcomingFixtures,r,i),f=o.totalXpts,m=d.totalXpts,p=+(m-f).toFixed(1),g=(t.form||0)-(s.form||0),y=(t.price||0)-(s.price||0),b=t.xGI90||t.xGI||0,x=s.xGI90||s.xGI||0,C=b-x,N=t.upcomingFixtures?.length?t.upcomingFixtures.slice(0,i).reduce((J,W)=>J+W.difficulty,0)/i:3,U=(s.upcomingFixtures?.length?s.upcomingFixtures.slice(0,i).reduce((J,W)=>J+W.difficulty,0)/i:s.fixtureDifficulty||3)-N;let Y;Math.abs(p)<=2&&Math.abs(g)<1?Y="Low":Math.abs(p)>5||N>3.5?Y="High":Y="Medium";let K;if(p>3&&g>=0||p>3&&C>.1?K="Strong Buy":p<-2||g<-1.5?K="Avoid":K="Neutral",K==="Neutral"){const J=t.pricePressure==="rising"||t.pricePressure==="likely-rising",W=s.pricePressure==="falling"||s.pricePressure==="likely-falling";J&&W&&p>=0&&(K="Strong Buy")}b>0&&x>0&&(`${t.name}`,C>0,`${C.toFixed(2)}${s.name}`),t.pricePressure==="rising"||t.pricePressure==="likely-rising"?`${t.name}${(t.netTransfersEvent||0).toLocaleString()}`:(s.pricePressure==="falling"||s.pricePressure==="likely-falling")&&`${s.name}`;const M=d.topReasons,D=o.topReasons,$={"Strong Buy":`${t.name} (${m} xPts) is projected to outscore ${s.name} (${f} xPts) over ${i} GW${i>1?"s":""}. Key factors: ${M.join(", ").toLowerCase()}.`,Neutral:`Sideways move. ${t.name} (${m} xPts) vs ${s.name} (${f} xPts) over ${i} GW${i>1?"s":""}. Consider saving the transfer.`,Avoid:`${s.name} (${f} xPts) is the better option. Key: ${D.join(", ").toLowerCase()}.`};return{pointsDiff:p,formDiff:g.toFixed(1),priceDiff:y.toFixed(1),fixtureDiff:U.toFixed(1),xgiDiff:C.toFixed(2),riskLevel:Y,recommendation:K,explanation:$[K],outProjected:f,inProjected:m,outReasons:D,inReasons:M,avgInDifficulty:N.toFixed(1)}}function gi({message:s="Loading..."}){return c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:s})]})}function Ea({message:s,onRetry:t}){return c.jsxs("div",{className:"error-container",children:[c.jsx("div",{className:"error-icon",children:"!"}),c.jsx("p",{children:s}),t&&c.jsx("button",{className:"btn btn-primary",onClick:t,children:"Try Again"})]})}const ov={GKP:0,DEF:1,MID:2,FWD:3};function QE({player:s}){if(!s||!s.pricePressure||s.pricePressure==="stable")return null;const i={rising:{arrow:"",label:"Rising",className:"price-rising"},"likely-rising":{arrow:"",label:"Likely rising",className:"price-likely-rising"},falling:{arrow:"",label:"Falling",className:"price-falling"},"likely-falling":{arrow:"",label:"Likely falling",className:"price-likely-falling"}}[s.pricePressure];return i?c.jsx("span",{className:`price-indicator ${i.className}`,title:i.label,children:i.arrow}):null}function $E({player:s,isExpanded:t,onToggle:i}){const r=s.form>=7?"positive":s.form<=4?"negative":"",o=s.upcomingFixtures||[];return c.jsxs("div",{className:`player-card ${t?"expanded":""}`,onClick:i,children:[c.jsxs("div",{className:"player-card-header",children:[c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),c.jsx("span",{className:"player-club",children:s.clubShort}),s.isCaptain&&c.jsx("span",{className:"badge captain",children:"C"}),s.isViceCaptain&&c.jsx("span",{className:"badge vice-captain",children:"V"})]}),c.jsx("div",{className:"player-name",children:s.name}),c.jsx("div",{className:"player-club-full",children:s.club}),c.jsxs("div",{className:"player-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Price"}),c.jsxs("span",{className:"stat-value",children:["",s.price,"m",c.jsx(QE,{player:s})]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Points"}),c.jsx("span",{className:"stat-value",children:s.totalPoints})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Form"}),c.jsx("span",{className:`stat-value ${r}`,children:s.form})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"GW Pts"}),c.jsx("span",{className:"stat-value highlight",children:s.gameweekPoints})]})]}),c.jsxs("div",{className:"player-fixture",children:[c.jsx("span",{className:"fixture-label",children:"Next:"}),c.jsx("span",{className:`fixture-value fdr-${s.fixtureDifficulty}`,children:s.upcomingFixture}),c.jsx("span",{className:`expand-arrow ${t?"open":""}`,children:c.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),t&&c.jsxs("div",{className:"player-expanded",onClick:d=>d.stopPropagation(),children:[o.length>0&&c.jsxs("div",{className:"expanded-fixtures",children:[c.jsx("div",{className:"expanded-section-title",children:"Upcoming Fixtures"}),c.jsx("div",{className:"expanded-fixture-list",children:o.map(d=>c.jsxs("div",{className:"expanded-fixture-row",children:[c.jsxs("span",{className:"ef-gw",children:["GW",d.gw]}),c.jsx("span",{className:`ef-opponent fdr-${d.difficulty}`,children:d.opponent}),c.jsx("span",{className:"ef-diff-dots",children:[1,2,3,4,5].map(f=>c.jsx("span",{className:`ef-dot ${f<=d.difficulty?"filled":""}`},f))})]},d.gw))})]}),c.jsxs("div",{className:"expanded-stats",children:[c.jsx("div",{className:"expanded-section-title",children:"Season Stats"}),c.jsxs("div",{className:"expanded-stats-grid",children:[c.jsxs("div",{className:"es-item",children:[c.jsx("span",{className:"es-value",children:s.totalPoints}),c.jsx("span",{className:"es-label",children:"Total Pts"})]}),c.jsxs("div",{className:"es-item",children:[c.jsx("span",{className:"es-value",children:s.gameweekPoints}),c.jsx("span",{className:"es-label",children:"GW Pts"})]}),c.jsxs("div",{className:"es-item",children:[c.jsx("span",{className:`es-value ${r}`,children:s.form}),c.jsx("span",{className:"es-label",children:"Form"})]}),c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:"es-value",children:["",s.price,"m"]}),c.jsx("span",{className:"es-label",children:"Price"})]})]})]}),(s.costChangeEvent!==void 0&&s.costChangeEvent!==0||s.pricePressure&&s.pricePressure!=="stable")&&c.jsxs("div",{className:"expanded-price-info",children:[c.jsx("div",{className:"expanded-section-title",children:"Price Movement"}),c.jsxs("div",{className:"expanded-stats-grid",children:[c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:`es-value ${s.costChangeStart>0?"positive":s.costChangeStart<0?"negative":""}`,children:[s.costChangeStart>0?"+":"",(s.costChangeStart||0).toFixed(1)]}),c.jsx("span",{className:"es-label",children:"Season"})]}),c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:`es-value ${s.costChangeEvent>0?"positive":s.costChangeEvent<0?"negative":""}`,children:[s.costChangeEvent>0?"+":"",(s.costChangeEvent||0).toFixed(1)]}),c.jsx("span",{className:"es-label",children:"This GW"})]}),c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:"es-value",children:[((s.netTransfersEvent||0)/1e3).toFixed(0),"k"]}),c.jsx("span",{className:"es-label",children:"Net Xfers"})]}),c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:"es-value",children:["",(s.startPrice||s.price).toFixed(1),"m"]}),c.jsx("span",{className:"es-label",children:"Start Price"})]})]})]})]})]})}function ZE({summary:s}){return c.jsxs("div",{className:"team-summary",children:[c.jsxs("h3",{children:["Team Summary  GW",s.currentGameweek]}),c.jsxs("div",{className:"summary-grid",children:[c.jsxs("div",{className:"summary-item featured",children:[c.jsx("span",{className:"summary-value",children:s.gameweekPoints}),c.jsx("span",{className:"summary-label",children:"GW Points"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"summary-value",children:s.totalPoints}),c.jsx("span",{className:"summary-label",children:"Total Points"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsxs("span",{className:"summary-value",children:["",s.teamValue,"m"]}),c.jsx("span",{className:"summary-label",children:"Team Value"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsxs("span",{className:"summary-value",children:["",s.moneyInBank,"m"]}),c.jsx("span",{className:"summary-label",children:"In Bank"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"summary-value",children:s.overallRank.toLocaleString()}),c.jsx("span",{className:"summary-label",children:"Overall Rank"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"summary-value",children:s.transfers.available}),c.jsx("span",{className:"summary-label",children:"Free Transfers"})]})]}),c.jsxs("div",{className:"chips-section",children:[c.jsx("span",{className:"chips-label",children:"Chips Available:"}),c.jsxs("div",{className:"chips-list",children:[s.chips.wildcard&&c.jsx("span",{className:"chip available",children:"Wildcard"}),s.chips.benchBoost&&c.jsx("span",{className:"chip available",children:"Bench Boost"}),s.chips.tripleCaptain&&c.jsx("span",{className:"chip available",children:"Triple Captain"}),s.chips.freeHit&&c.jsx("span",{className:"chip available",children:"Free Hit"}),!s.chips.tripleCaptain&&c.jsx("span",{className:"chip used",children:"Triple Captain"})]})]})]})}function JE({teamData:s,teamLoading:t,teamError:i,teamReload:r}){const[o,d]=Z.useState(null);if(t)return c.jsx(gi,{message:"Loading your team..."});if(i)return c.jsx(Ea,{message:i,onRetry:r});const{players:f,summary:m}=s,p=[...f].sort((g,y)=>ov[g.position]-ov[y.position]);return c.jsxs("div",{className:"my-team",children:[c.jsx(ZE,{summary:m}),c.jsxs("div",{className:"players-section",children:[c.jsx("h3",{children:"Your Squad"}),c.jsx("div",{className:"players-grid",children:p.map(g=>c.jsx($E,{player:g,isExpanded:o===g.id,onToggle:()=>d(o===g.id?null:g.id)},g.id))})]})]})}function eN({data:s,maxValue:t,labelKey:i,valueKey:r,compareKey:o}){return c.jsx("div",{className:"bar-chart",children:s.map((d,f)=>c.jsxs("div",{className:"bar-group",children:[c.jsxs("div",{className:"bar-container",children:[o&&c.jsx("div",{className:"bar bar-compare",style:{height:`${d[o]/t*100}%`},title:`Avg: ${d[o]}`}),c.jsx("div",{className:"bar bar-primary",style:{height:`${d[r]/t*100}%`},title:`${d[r]} pts`,children:c.jsx("span",{className:"bar-value",children:d[r]})})]}),c.jsx("span",{className:"bar-label",children:d[i]})]},f))})}function tN({projections:s}){return c.jsxs("div",{className:"projections-table",children:[c.jsxs("div",{className:"table-header",children:[c.jsx("span",{children:"GW"}),c.jsx("span",{children:"Projected"}),c.jsx("span",{children:"Difficulty"})]}),s.map(t=>c.jsxs("div",{className:"table-row",children:[c.jsxs("span",{children:["GW",t.gw]}),c.jsx("span",{className:"projected-value",children:t.projected}),c.jsx("span",{className:`difficulty difficulty-${t.difficulty.toLowerCase()}`,children:t.difficulty})]},t.gw))]})}function nN({league:s}){return c.jsxs("div",{className:"league-standings",children:[c.jsxs("div",{className:"table-header league-header",children:[c.jsx("span",{children:"#"}),c.jsx("span",{children:"Team"}),c.jsx("span",{children:"Pts"})]}),s.standings.map(t=>c.jsxs("div",{className:`table-row league-row ${t.manager==="You"?"my-row":""}`,children:[c.jsx("span",{className:"rank",children:t.rank}),c.jsxs("span",{className:"team-name",children:[t.name,c.jsx("small",{children:t.manager})]}),c.jsx("span",{className:"league-points",children:t.points})]},t.rank))]})}function sN({teamData:s,teamLoading:t,teamError:i,teamReload:r}){const{data:o,loading:d,error:f,reload:m}=Ts(GE),{data:p,loading:g,error:y}=Ts(FE),{data:b,loading:x,error:C}=Ts(VE),N=d||g||t||x,P=f||y||i||C;if(N)return c.jsx(gi,{message:"Loading performance data..."});if(P)return c.jsx(Ea,{message:P,onRetry:m});const{summary:U}=s,Y=Math.max(...o.map($=>Math.max($.points,$.average)))+10,K=o.reduce(($,J)=>$+J.points,0),M=o.reduce(($,J)=>$+J.average,0),D=K-M;return c.jsxs("div",{className:"points-performance",children:[c.jsxs("div",{className:"metrics-row",children:[c.jsxs("div",{className:"metric-card featured",children:[c.jsx("span",{className:"metric-value",children:U.gameweekPoints}),c.jsxs("span",{className:"metric-label",children:["GW",U.currentGameweek," Points"]})]}),c.jsxs("div",{className:"metric-card",children:[c.jsx("span",{className:"metric-value",children:U.totalPoints}),c.jsx("span",{className:"metric-label",children:"Total Points"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsx("span",{className:"metric-value",children:U.captainPoints}),c.jsx("span",{className:"metric-label",children:"Captain Bonus"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsxs("span",{className:`metric-value ${D>0?"positive":"negative"}`,children:[D>0?"+":"",D]}),c.jsx("span",{className:"metric-label",children:"vs League Avg"})]})]}),c.jsxs("div",{className:"panels-grid",children:[c.jsxs("div",{className:"panel",children:[c.jsx("h3",{children:"Gameweek Trend"}),c.jsxs("div",{className:"chart-legend",children:[c.jsxs("span",{className:"legend-item",children:[c.jsx("span",{className:"legend-dot primary"})," You"]}),c.jsxs("span",{className:"legend-item",children:[c.jsx("span",{className:"legend-dot compare"})," Average"]})]}),c.jsx(eN,{data:o,maxValue:Y,labelKey:"gw",valueKey:"points",compareKey:"average"})]}),c.jsxs("div",{className:"panel",children:[c.jsx("h3",{children:"Upcoming Projections"}),c.jsx(tN,{projections:p})]}),c.jsxs("div",{className:"panel",children:[c.jsx("h3",{children:b.name}),c.jsx(nN,{league:b})]}),c.jsxs("div",{className:"panel",children:[c.jsx("h3",{children:"Rank Progression"}),c.jsx("div",{className:"rank-trend",children:o.map(($,J)=>{const ue=(J>0?o[J-1].rank:$.rank)-$.rank;return c.jsxs("div",{className:"rank-item",children:[c.jsxs("span",{className:"rank-gw",children:["GW",$.gw]}),c.jsx("span",{className:"rank-number",children:$.rank.toLocaleString()}),c.jsx("span",{className:`rank-change ${ue>0?"positive":ue<0?"negative":""}`,children:ue>0?`+${ue.toLocaleString()}`:ue<0?ue.toLocaleString():"-"})]},$.gw)})})]})]})]})}const iN=()=>{};var cv={};const Ry={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const X=function(s,t){if(!s)throw Na(t)},Na=function(s){return new Error("Firebase Database ("+Ry.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};const Dy=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},aN=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const o=s[i++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const d=s[i++];t[r++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=s[i++],f=s[i++],m=s[i++],p=((o&7)<<18|(d&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(p>>10)),t[r++]=String.fromCharCode(56320+(p&1023))}else{const d=s[i++],f=s[i++];t[r++]=String.fromCharCode((o&15)<<12|(d&63)<<6|f&63)}}return t.join("")},$h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const d=s[o],f=o+1<s.length,m=f?s[o+1]:0,p=o+2<s.length,g=p?s[o+2]:0,y=d>>2,b=(d&3)<<4|m>>4;let x=(m&15)<<2|g>>6,C=g&63;p||(C=64,f||(x=64)),r.push(i[y],i[b],i[x],i[C])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(Dy(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):aN(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const d=i[s.charAt(o++)],m=o<s.length?i[s.charAt(o)]:0;++o;const g=o<s.length?i[s.charAt(o)]:64;++o;const b=o<s.length?i[s.charAt(o)]:64;if(++o,d==null||m==null||g==null||b==null)throw new rN;const x=d<<2|m>>4;if(r.push(x),g!==64){const C=m<<4&240|g>>2;if(r.push(C),b!==64){const N=g<<6&192|b;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class rN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oy=function(s){const t=Dy(s);return $h.encodeByteArray(t,!0)},Wo=function(s){return Oy(s).replace(/\./g,"")},Ko=function(s){try{return $h.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function lN(s){return Iy(void 0,s)}function Iy(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!oN(i)||(s[i]=Iy(s[i],t[i]));return s}function oN(s){return s!=="__proto__"}function cN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const uN=()=>cN().__FIREBASE_DEFAULTS__,dN=()=>{if(typeof process>"u"||typeof cv>"u")return;const s=cv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},hN=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&Ko(s[1]);return t&&JSON.parse(t)},Zh=()=>{try{return iN()||uN()||dN()||hN()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},My=s=>Zh()?.emulatorHosts?.[s],fN=s=>{const t=My(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},ky=()=>Zh()?.config,Ly=s=>Zh()?.[`_${s}`];class tl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}function Ta(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Uy(s){return(await fetch(s,{credentials:"include"})).ok}function mN(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,d=s.sub||s.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Wo(JSON.stringify(i)),Wo(JSON.stringify(f)),""].join(".")}const kr={};function pN(){const s={prod:[],emulator:[]};for(const t of Object.keys(kr))kr[t]?s.emulator.push(t):s.prod.push(t);return s}function gN(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let uv=!1;function Py(s,t){if(typeof window>"u"||typeof document>"u"||!Ta(window.location.host)||kr[s]===t||kr[s]||uv)return;kr[s]=t;function i(x){return`__firebase__banner__${x}`}const r="__firebase__banner",d=pN().prod.length>0;function f(){const x=document.getElementById(r);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,C){x.setAttribute("width","24"),x.setAttribute("id",C),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function g(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{uv=!0,f()},x}function y(x,C){x.setAttribute("id",C),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function b(){const x=gN(r),C=i("text"),N=document.getElementById(C)||document.createElement("span"),P=i("learnmore"),U=document.getElementById(P)||document.createElement("a"),Y=i("preprendIcon"),K=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const M=x.element;m(M),y(U,P);const D=g();p(K,Y),M.append(K,N,U,D),document.body.appendChild(M)}d?(N.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function _N(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vN(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function zy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yN(){const s=St();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function bN(){return Ry.NODE_ADMIN===!0}function xN(){try{return typeof indexedDB=="object"}catch{return!1}}function SN(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(i){t(i)}})}const EN="FirebaseError";class Ms extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=EN,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nl.prototype.create)}}class nl{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},o=`${this.service}/${t}`,d=this.errors[t],f=d?NN(d,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Ms(o,m,r)}}function NN(s,t){return s.replace(TN,(i,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const TN=/\{\$([^}]+)}/g;function Gr(s){return JSON.parse(s)}function at(s){return JSON.stringify(s)}const By=function(s){let t={},i={},r={},o="";try{const d=s.split(".");t=Gr(Ko(d[0])||""),i=Gr(Ko(d[1])||""),o=d[2],r=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:r,signature:o}},CN=function(s){const t=By(s),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},wN=function(s){const t=By(s).claims;return typeof t=="object"&&t.admin===!0};function vn(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function fa(s,t){if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}function xh(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Qo(s,t,i){const r={};for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=t.call(i,s[o],o,s));return r}function ri(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const o of i){if(!r.includes(o))return!1;const d=s[o],f=t[o];if(dv(d)&&dv(f)){if(!ri(d,f))return!1}else if(d!==f)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function dv(s){return s!==null&&typeof s=="object"}function Ca(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ir(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,d]=r.split("=");t[decodeURIComponent(o)]=decodeURIComponent(d)}}),t}function Mr(s){const t=s.indexOf("?");if(!t)return"";const i=s.indexOf("#",t);return s.substring(t,i>0?i:void 0)}class AN{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const r=this.W_;if(typeof t=="string")for(let b=0;b<16;b++)r[b]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let b=0;b<16;b++)r[b]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let b=16;b<80;b++){const x=r[b-3]^r[b-8]^r[b-14]^r[b-16];r[b]=(x<<1|x>>>31)&4294967295}let o=this.chain_[0],d=this.chain_[1],f=this.chain_[2],m=this.chain_[3],p=this.chain_[4],g,y;for(let b=0;b<80;b++){b<40?b<20?(g=m^d&(f^m),y=1518500249):(g=d^f^m,y=1859775393):b<60?(g=d&f|m&(d|f),y=2400959708):(g=d^f^m,y=3395469782);const x=(o<<5|o>>>27)+g+p+y+r[b]&4294967295;p=m,m=f,f=(d<<30|d>>>2)&4294967295,d=o,o=x}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+d&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const r=i-this.blockSize;let o=0;const d=this.buf_;let f=this.inbuf_;for(;o<i;){if(f===0)for(;o<=r;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<i;)if(d[f]=t.charCodeAt(o),++f,++o,f===this.blockSize){this.compress_(d),f=0;break}}else for(;o<i;)if(d[f]=t[o],++f,++o,f===this.blockSize){this.compress_(d),f=0;break}}this.inbuf_=f,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let d=24;d>=0;d-=8)t[r]=this.chain_[o]>>d&255,++r;return t}}function jN(s,t){const i=new RN(s,t);return i.subscribe.bind(i)}class RN{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let o;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");DN(t,["next","error","complete"])?o=t:o={next:t,error:i,complete:r},o.next===void 0&&(o.next=ah),o.error===void 0&&(o.error=ah),o.complete===void 0&&(o.complete=ah);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),d}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DN(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function ah(){}function vc(s,t){return`${s} failed: ${t} argument `}const ON=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);if(o>=55296&&o<=56319){const d=o-55296;r++,X(r<s.length,"Surrogate pair missing trail surrogate.");const f=s.charCodeAt(r)-56320;o=65536+(d<<10)+f}o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):o<65536?(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},yc=function(s){let t=0;for(let i=0;i<s.length;i++){const r=s.charCodeAt(i);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,i++):t+=3}return t};function _t(s){return s&&s._delegate?s._delegate:s}class li{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ti="[DEFAULT]";class IN{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new tl;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kN(t))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const d=this.getOrInitializeService({instanceIdentifier:o});r.resolve(d)}catch{}}}}clearInstance(t=ti){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ti){return this.instances.has(t)}getOptions(t=ti){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[d,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(d);r===m&&f.resolve(o)}return o}onInit(t,i){const r=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const d=this.instances.get(r);return d&&t(d,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MN(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ti){return this.component?this.component.multipleInstances?t:ti:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MN(s){return s===ti?void 0:s}function kN(s){return s.instantiationMode==="EAGER"}class LN{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new IN(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}var Pe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pe||(Pe={}));const UN={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},PN=Pe.INFO,zN={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},BN=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=zN[t];if(o)console[o](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ef{constructor(t){this.name=t,this._logLevel=PN,this._logHandler=BN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?UN[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...t),this._logHandler(this,Pe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...t),this._logHandler(this,Pe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...t),this._logHandler(this,Pe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...t),this._logHandler(this,Pe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...t),this._logHandler(this,Pe.ERROR,...t)}}const HN=(s,t)=>t.some(i=>s instanceof i);let hv,fv;function GN(){return hv||(hv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FN(){return fv||(fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hy=new WeakMap,Sh=new WeakMap,Gy=new WeakMap,rh=new WeakMap,tf=new WeakMap;function qN(s){const t=new Promise((i,r)=>{const o=()=>{s.removeEventListener("success",d),s.removeEventListener("error",f)},d=()=>{i(Cs(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",d),s.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&Hy.set(i,s)}).catch(()=>{}),tf.set(t,s),t}function VN(s){if(Sh.has(s))return;const t=new Promise((i,r)=>{const o=()=>{s.removeEventListener("complete",d),s.removeEventListener("error",f),s.removeEventListener("abort",f)},d=()=>{i(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",d),s.addEventListener("error",f),s.addEventListener("abort",f)});Sh.set(s,t)}let Eh={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return Sh.get(s);if(t==="objectStoreNames")return s.objectStoreNames||Gy.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Cs(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function YN(s){Eh=s(Eh)}function XN(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(lh(this),t,...i);return Gy.set(r,t.sort?t.sort():[t]),Cs(r)}:FN().includes(s)?function(...t){return s.apply(lh(this),t),Cs(Hy.get(this))}:function(...t){return Cs(s.apply(lh(this),t))}}function WN(s){return typeof s=="function"?XN(s):(s instanceof IDBTransaction&&VN(s),HN(s,GN())?new Proxy(s,Eh):s)}function Cs(s){if(s instanceof IDBRequest)return qN(s);if(rh.has(s))return rh.get(s);const t=WN(s);return t!==s&&(rh.set(s,t),tf.set(t,s)),t}const lh=s=>tf.get(s);function KN(s,t,{blocked:i,upgrade:r,blocking:o,terminated:d}={}){const f=indexedDB.open(s,t),m=Cs(f);return r&&f.addEventListener("upgradeneeded",p=>{r(Cs(f.result),p.oldVersion,p.newVersion,Cs(f.transaction),p)}),i&&f.addEventListener("blocked",p=>i(p.oldVersion,p.newVersion,p)),m.then(p=>{d&&p.addEventListener("close",()=>d()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const QN=["get","getKey","getAll","getAllKeys","count"],$N=["put","add","delete","clear"],oh=new Map;function mv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(oh.get(t))return oh.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,o=$N.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||QN.includes(i)))return;const d=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[i](...m),o&&p.done]))[0]};return oh.set(t,d),d}YN(s=>({...s,get:(t,i,r)=>mv(t,i)||s.get(t,i,r),has:(t,i)=>!!mv(t,i)||s.has(t,i)}));class ZN{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(JN(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function JN(s){return s.getComponent()?.type==="VERSION"}const Nh="@firebase/app",pv="0.14.8";const Gn=new ef("@firebase/app"),e1="@firebase/app-compat",t1="@firebase/analytics-compat",n1="@firebase/analytics",s1="@firebase/app-check-compat",i1="@firebase/app-check",a1="@firebase/auth",r1="@firebase/auth-compat",l1="@firebase/database",o1="@firebase/data-connect",c1="@firebase/database-compat",u1="@firebase/functions",d1="@firebase/functions-compat",h1="@firebase/installations",f1="@firebase/installations-compat",m1="@firebase/messaging",p1="@firebase/messaging-compat",g1="@firebase/performance",_1="@firebase/performance-compat",v1="@firebase/remote-config",y1="@firebase/remote-config-compat",b1="@firebase/storage",x1="@firebase/storage-compat",S1="@firebase/firestore",E1="@firebase/ai",N1="@firebase/firestore-compat",T1="firebase",C1="12.9.0";const Th="[DEFAULT]",w1={[Nh]:"fire-core",[e1]:"fire-core-compat",[n1]:"fire-analytics",[t1]:"fire-analytics-compat",[i1]:"fire-app-check",[s1]:"fire-app-check-compat",[a1]:"fire-auth",[r1]:"fire-auth-compat",[l1]:"fire-rtdb",[o1]:"fire-data-connect",[c1]:"fire-rtdb-compat",[u1]:"fire-fn",[d1]:"fire-fn-compat",[h1]:"fire-iid",[f1]:"fire-iid-compat",[m1]:"fire-fcm",[p1]:"fire-fcm-compat",[g1]:"fire-perf",[_1]:"fire-perf-compat",[v1]:"fire-rc",[y1]:"fire-rc-compat",[b1]:"fire-gcs",[x1]:"fire-gcs-compat",[S1]:"fire-fst",[N1]:"fire-fst-compat",[E1]:"fire-vertex","fire-js":"fire-js",[T1]:"fire-js-all"};const $o=new Map,A1=new Map,Ch=new Map;function gv(s,t){try{s.container.addComponent(t)}catch(i){Gn.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function ma(s){const t=s.name;if(Ch.has(t))return Gn.debug(`There were multiple attempts to register component ${t}.`),!1;Ch.set(t,s);for(const i of $o.values())gv(i,s);for(const i of A1.values())gv(i,s);return!0}function nf(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function $t(s){return s==null?!1:s.settings!==void 0}const j1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ws=new nl("app","Firebase",j1);class R1{constructor(t,i,r){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ws.create("app-deleted",{appName:this._name})}}const wa=C1;function Fy(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r={name:Th,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw ws.create("bad-app-name",{appName:String(o)});if(i||(i=ky()),!i)throw ws.create("no-options");const d=$o.get(o);if(d){if(ri(i,d.options)&&ri(r,d.config))return d;throw ws.create("duplicate-app",{appName:o})}const f=new LN(o);for(const p of Ch.values())f.addComponent(p);const m=new R1(i,r,f);return $o.set(o,m),m}function qy(s=Th){const t=$o.get(s);if(!t&&s===Th&&ky())return Fy();if(!t)throw ws.create("no-app",{appName:s});return t}function As(s,t,i){let r=w1[s]??s;i&&(r+=`-${i}`);const o=r.match(/\s|\//),d=t.match(/\s|\//);if(o||d){const f=[`Unable to register library "${r}" with version "${t}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&d&&f.push("and"),d&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gn.warn(f.join(" "));return}ma(new li(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const D1="firebase-heartbeat-database",O1=1,Fr="firebase-heartbeat-store";let ch=null;function Vy(){return ch||(ch=KN(D1,O1,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Fr)}catch(i){console.warn(i)}}}}).catch(s=>{throw ws.create("idb-open",{originalErrorMessage:s.message})})),ch}async function I1(s){try{const i=(await Vy()).transaction(Fr),r=await i.objectStore(Fr).get(Yy(s));return await i.done,r}catch(t){if(t instanceof Ms)Gn.warn(t.message);else{const i=ws.create("idb-get",{originalErrorMessage:t?.message});Gn.warn(i.message)}}}async function _v(s,t){try{const r=(await Vy()).transaction(Fr,"readwrite");await r.objectStore(Fr).put(t,Yy(s)),await r.done}catch(i){if(i instanceof Ms)Gn.warn(i.message);else{const r=ws.create("idb-set",{originalErrorMessage:i?.message});Gn.warn(r.message)}}}function Yy(s){return`${s.name}!${s.options.appId}`}const M1=1024,k1=30;class L1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new P1(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>k1){const o=z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Gn.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=vv(),{heartbeatsToSend:i,unsentEntries:r}=U1(this._heartbeatsCache.heartbeats),o=Wo(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Gn.warn(t),""}}}function vv(){return new Date().toISOString().substring(0,10)}function U1(s,t=M1){const i=[];let r=s.slice();for(const o of s){const d=i.find(f=>f.agent===o.agent);if(d){if(d.dates.push(o.date),yv(i)>t){d.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),yv(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class P1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xN()?SN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await I1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return _v(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return _v(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function yv(s){return Wo(JSON.stringify({version:2,heartbeats:s})).length}function z1(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}function B1(s){ma(new li("platform-logger",t=>new ZN(t),"PRIVATE")),ma(new li("heartbeat",t=>new L1(t),"PRIVATE")),As(Nh,pv,s),As(Nh,pv,"esm2020"),As("fire-js","")}B1("");function Xy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H1=Xy,Wy=new nl("auth","Firebase",Xy());const Zo=new ef("@firebase/auth");function G1(s,...t){Zo.logLevel<=Pe.WARN&&Zo.warn(`Auth (${wa}): ${s}`,...t)}function Go(s,...t){Zo.logLevel<=Pe.ERROR&&Zo.error(`Auth (${wa}): ${s}`,...t)}function un(s,...t){throw sf(s,...t)}function gn(s,...t){return sf(s,...t)}function Ky(s,t,i){const r={...H1(),[t]:i};return new nl("auth","Firebase",r).create(t,{appName:s.name})}function Bn(s){return Ky(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sf(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return Wy.create(s,...t)}function de(s,t,...i){if(!s)throw sf(t,...i)}function Un(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Go(t),new Error(t)}function Fn(s,t){s||Un(t)}function wh(){return typeof self<"u"&&self.location?.href||""}function F1(){return bv()==="http:"||bv()==="https:"}function bv(){return typeof self<"u"&&self.location?.protocol||null}function q1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F1()||vN()||"connection"in navigator)?navigator.onLine:!0}function V1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class sl{constructor(t,i){this.shortDelay=t,this.longDelay=i,Fn(i>t,"Short delay should be less than long delay!"),this.isMobile=Jh()||zy()}get(){return q1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function af(s,t){Fn(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class Qy{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Y1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const X1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],W1=new sl(3e4,6e4);function ks(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Yn(s,t,i,r,o={}){return $y(s,o,async()=>{let d={},f={};r&&(t==="GET"?f=r:d={body:JSON.stringify(r)});const m=Ca({key:s.config.apiKey,...f}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const g={method:t,headers:p,...d};return _N()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&Ta(s.emulatorConfig.host)&&(g.credentials="include"),Qy.fetch()(await Zy(s,s.config.apiHost,i,m),g)})}async function $y(s,t,i){s._canInitEmulator=!1;const r={...Y1,...t};try{const o=new Q1(s),d=await Promise.race([i(),o.promise]);o.clearNetworkTimeout();const f=await d.json();if("needConfirmation"in f)throw Lo(s,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{const m=d.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lo(s,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Lo(s,"email-already-in-use",f);if(p==="USER_DISABLED")throw Lo(s,"user-disabled",f);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Ky(s,y,g);un(s,y)}}catch(o){if(o instanceof Ms)throw o;un(s,"network-request-failed",{message:String(o)})}}async function il(s,t,i,r,o={}){const d=await Yn(s,t,i,r,o);return"mfaPendingCredential"in d&&un(s,"multi-factor-auth-required",{_serverResponse:d}),d}async function Zy(s,t,i,r){const o=`${t}${i}?${r}`,d=s,f=d.config.emulator?af(s.config,o):`${s.config.apiScheme}://${o}`;return X1.includes(i)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(f).toString():f}function K1(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(gn(this.auth,"network-request-failed")),W1.get())})}}function Lo(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const o=gn(s,t,r);return o.customData._tokenResponse=i,o}function xv(s){return s!==void 0&&s.enterprise!==void 0}class $1{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return K1(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Z1(s,t){return Yn(s,"GET","/v2/recaptchaConfig",ks(s,t))}async function J1(s,t){return Yn(s,"POST","/v1/accounts:delete",t)}async function Jo(s,t){return Yn(s,"POST","/v1/accounts:lookup",t)}function Lr(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function eT(s,t=!1){const i=_t(s),r=await i.getIdToken(t),o=rf(r);de(o&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error");const d=typeof o.firebase=="object"?o.firebase:void 0,f=d?.sign_in_provider;return{claims:o,token:r,authTime:Lr(uh(o.auth_time)),issuedAtTime:Lr(uh(o.iat)),expirationTime:Lr(uh(o.exp)),signInProvider:f||null,signInSecondFactor:d?.sign_in_second_factor||null}}function uh(s){return Number(s)*1e3}function rf(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return Go("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ko(i);return o?JSON.parse(o):(Go("Failed to decode base64 JWT payload"),null)}catch(o){return Go("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Sv(s){const t=rf(s);return de(t,"internal-error"),de(typeof t.exp<"u","internal-error"),de(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function pa(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof Ms&&tT(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function tT({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class nT{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ah{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lr(this.lastLoginAt),this.creationTime=Lr(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ec(s){const t=s.auth,i=await s.getIdToken(),r=await pa(s,Jo(t,{idToken:i}));de(r?.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const d=o.providerUserInfo?.length?Jy(o.providerUserInfo):[],f=iT(s.providerData,d),m=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!f?.length,g=m?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Ah(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(s,y)}async function sT(s){const t=_t(s);await ec(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function iT(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function Jy(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function aT(s,t){const i=await $y(s,{},async()=>{const r=Ca({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:d}=s.config,f=await Zy(s,o,"/v1/token",`key=${d}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return s.emulatorConfig&&Ta(s.emulatorConfig.host)&&(p.credentials="include"),Qy.fetch()(f,p)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function rT(s,t){return Yn(s,"POST","/v2/accounts:revokeToken",ks(s,t))}class oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){de(t.idToken,"internal-error"),de(typeof t.idToken<"u","internal-error"),de(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Sv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){de(t.length!==0,"internal-error");const i=Sv(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:o,expiresIn:d}=await aT(t,i);this.updateTokensAndExpiration(r,o,Number(d))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:o,expirationTime:d}=i,f=new oa;return r&&(de(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),o&&(de(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),d&&(de(typeof d=="number","internal-error",{appName:t}),f.expirationTime=d),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new oa,this.toJSON())}_performRefresh(){return Un("not implemented")}}function ys(s,t){de(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class ln{constructor({uid:t,auth:i,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new nT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ah(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const i=await pa(this,this.stsTokenManager.getToken(this.auth,t));return de(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return eT(this,t)}reload(){return sT(this)}_assign(t){this!==t&&(de(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new ln({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await ec(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(Bn(this.auth));const t=await this.getIdToken();return await pa(this,J1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const r=i.displayName??void 0,o=i.email??void 0,d=i.phoneNumber??void 0,f=i.photoURL??void 0,m=i.tenantId??void 0,p=i._redirectEventId??void 0,g=i.createdAt??void 0,y=i.lastLoginAt??void 0,{uid:b,emailVerified:x,isAnonymous:C,providerData:N,stsTokenManager:P}=i;de(b&&P,t,"internal-error");const U=oa.fromJSON(this.name,P);de(typeof b=="string",t,"internal-error"),ys(r,t.name),ys(o,t.name),de(typeof x=="boolean",t,"internal-error"),de(typeof C=="boolean",t,"internal-error"),ys(d,t.name),ys(f,t.name),ys(m,t.name),ys(p,t.name),ys(g,t.name),ys(y,t.name);const Y=new ln({uid:b,auth:t,email:o,emailVerified:x,displayName:r,isAnonymous:C,photoURL:f,phoneNumber:d,tenantId:m,stsTokenManager:U,createdAt:g,lastLoginAt:y});return N&&Array.isArray(N)&&(Y.providerData=N.map(K=>({...K}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(t,i,r=!1){const o=new oa;o.updateFromServerResponse(i);const d=new ln({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await ec(d),d}static async _fromGetAccountInfoResponse(t,i,r){const o=i.users[0];de(o.localId!==void 0,"internal-error");const d=o.providerUserInfo!==void 0?Jy(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!d?.length,m=new oa;m.updateFromIdToken(r);const p=new ln({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Ah(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!d?.length};return Object.assign(p,g),p}}const Ev=new Map;function Pn(s){Fn(s instanceof Function,"Expected a class definition");let t=Ev.get(s);return t?(Fn(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,Ev.set(s,t),t)}class e0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}e0.type="NONE";const Nv=e0;function Fo(s,t,i){return`firebase:${s}:${t}:${i}`}class ca{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:o,name:d}=this.auth;this.fullUserKey=Fo(this.userKey,o.apiKey,d),this.fullPersistenceKey=Fo("persistence",o.apiKey,d),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Jo(this.auth,{idToken:t}).catch(()=>{});return i?ln._fromGetAccountInfoResponse(this.auth,i,t):null}return ln._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new ca(Pn(Nv),t,r);const o=(await Promise.all(i.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let d=o[0]||Pn(Nv);const f=Fo(r,t.config.apiKey,t.name);let m=null;for(const g of i)try{const y=await g._get(f);if(y){let b;if(typeof y=="string"){const x=await Jo(t,{idToken:y}).catch(()=>{});if(!x)break;b=await ln._fromGetAccountInfoResponse(t,x,y)}else b=ln._fromJSON(t,y);g!==d&&(m=b),d=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!d._shouldAllowMigration||!p.length?new ca(d,t,r):(d=p[0],m&&await d._set(f,m.toJSON()),await Promise.all(i.map(async g=>{if(g!==d)try{await g._remove(f)}catch{}})),new ca(d,t,r))}}function Tv(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(i0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(t0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(r0(t))return"Blackberry";if(l0(t))return"Webos";if(n0(t))return"Safari";if((t.includes("chrome/")||s0(t))&&!t.includes("edge/"))return"Chrome";if(a0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function t0(s=St()){return/firefox\//i.test(s)}function n0(s=St()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function s0(s=St()){return/crios\//i.test(s)}function i0(s=St()){return/iemobile/i.test(s)}function a0(s=St()){return/android/i.test(s)}function r0(s=St()){return/blackberry/i.test(s)}function l0(s=St()){return/webos/i.test(s)}function lf(s=St()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function lT(s=St()){return lf(s)&&!!window.navigator?.standalone}function oT(){return yN()&&document.documentMode===10}function o0(s=St()){return lf(s)||a0(s)||l0(s)||r0(s)||/windows phone/i.test(s)||i0(s)}function c0(s,t=[]){let i;switch(s){case"Browser":i=Tv(St());break;case"Worker":i=`${Tv(St())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${wa}/${r}`}class cT{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=d=>new Promise((f,m)=>{try{const p=t(d);f(p)}catch(p){m(p)}});r.onAbort=i,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const o of i)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function uT(s,t={}){return Yn(s,"GET","/v2/passwordPolicy",ks(s,t))}const dT=6;class hT{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??dT,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),o&&(i.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,o,d){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=d))}}class fT{constructor(t,i,r,o){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cv(this),this.idTokenSubscription=new Cv(this),this.beforeStateQueue=new cT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Pn(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ca.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Jo(this,{idToken:t}),r=await ln._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if($t(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,f=r?._redirectEventId,m=await this.tryRedirectSignIn(t);(!d||d===f)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(d){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await ec(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=V1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if($t(this.app))return Promise.reject(Bn(this));const i=t?_t(t):null;return i&&de(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&de(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(Bn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return $t(this.app)?Promise.reject(Bn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await uT(this),i=new hT(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new nl("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await rT(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Pn(t)||this._popupRedirectResolver;de(i,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[Pn(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,o){if(this._deleted)return()=>{};const d=typeof i=="function"?i:i.next.bind(i);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(m,this,"internal-error"),m.then(()=>{f||d(this.currentUser)}),typeof i=="function"){const p=t.addObserver(i,r,o);return()=>{f=!0,p()}}else{const p=t.addObserver(i);return()=>{f=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=c0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&G1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function _i(s){return _t(s)}class Cv{constructor(t){this.auth=t,this.observer=null,this.addObserver=jN(i=>this.observer=i)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mT(s){bc=s}function u0(s){return bc.loadJS(s)}function pT(){return bc.recaptchaEnterpriseScript}function gT(){return bc.gapiScript}function _T(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class vT{constructor(){this.enterprise=new yT}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class yT{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const bT="recaptcha-enterprise",d0="NO_RECAPTCHA";class xT{constructor(t){this.type=bT,this.auth=_i(t)}async verify(t="verify",i=!1){async function r(d){if(!i){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(f,m)=>{Z1(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new $1(p);return d.tenantId==null?d._agentRecaptchaConfig=g:d._tenantRecaptchaConfigs[d.tenantId]=g,f(g.siteKey)}}).catch(p=>{m(p)})})}function o(d,f,m){const p=window.grecaptcha;xv(p)?p.enterprise.ready(()=>{p.enterprise.execute(d,{action:t}).then(g=>{f(g)}).catch(()=>{f(d0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vT().execute("siteKey",{action:"verify"}):new Promise((d,f)=>{r(this.auth).then(m=>{if(!i&&xv(window.grecaptcha))o(m,d,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=pT();p.length!==0&&(p+=m),u0(p).then(()=>{o(m,d,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function wv(s,t,i,r=!1,o=!1){const d=new xT(s);let f;if(o)f=d0;else try{f=await d.verify(i)}catch{f=await d.verify(i,!0)}const m={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function jh(s,t,i,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await wv(s,t,i,i==="getOobCode");return r(s,d)}else return r(s,t).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await wv(s,t,i,i==="getOobCode");return r(s,f)}else return Promise.reject(d)})}function ST(s,t){const i=nf(s,"auth");if(i.isInitialized()){const o=i.getImmediate(),d=i.getOptions();if(ri(d,t??{}))return o;un(o,"already-initialized")}return i.initialize({options:t})}function ET(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map(Pn);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function NT(s,t,i){const r=_i(s);de(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,d=h0(t),{host:f,port:m}=TT(t),p=m===null?"":`:${m}`,g={url:`${d}//${f}${p}/`},y=Object.freeze({host:f,port:m,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(ri(g,r.config.emulator)&&ri(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Ta(f)?(Uy(`${d}//${f}${p}`),Py("Auth",!0)):CT()}function h0(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function TT(s){const t=h0(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const d=o[1];return{host:d,port:Av(r.substr(d.length+1))}}else{const[d,f]=r.split(":");return{host:d,port:Av(f)}}}function Av(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function CT(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class of{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Un("not implemented")}_getIdTokenResponse(t){return Un("not implemented")}_linkToIdToken(t,i){return Un("not implemented")}_getReauthenticationResolver(t){return Un("not implemented")}}async function wT(s,t){return Yn(s,"POST","/v1/accounts:signUp",t)}async function AT(s,t){return il(s,"POST","/v1/accounts:signInWithPassword",ks(s,t))}async function jT(s,t){return il(s,"POST","/v1/accounts:signInWithEmailLink",ks(s,t))}async function RT(s,t){return il(s,"POST","/v1/accounts:signInWithEmailLink",ks(s,t))}class qr extends of{constructor(t,i,r,o=null){super("password",r),this._email=t,this._password=i,this._tenantId=o}static _fromEmailAndPassword(t,i){return new qr(t,i,"password")}static _fromEmailAndCode(t,i,r=null){return new qr(t,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jh(t,i,"signInWithPassword",AT);case"emailLink":return jT(t,{email:this._email,oobCode:this._password});default:un(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jh(t,r,"signUpPassword",wT);case"emailLink":return RT(t,{idToken:i,email:this._email,oobCode:this._password});default:un(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function ua(s,t){return il(s,"POST","/v1/accounts:signInWithIdp",ks(s,t))}const DT="http://localhost";class oi extends of{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new oi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):un("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...d}=i;if(!r||!o)return null;const f=new oi(r,o);return f.idToken=d.idToken||void 0,f.accessToken=d.accessToken||void 0,f.secret=d.secret,f.nonce=d.nonce,f.pendingToken=d.pendingToken||null,f}_getIdTokenResponse(t){const i=this.buildRequest();return ua(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,ua(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,ua(t,i)}buildRequest(){const t={requestUri:DT,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Ca(i)}return t}}function OT(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IT(s){const t=Ir(Mr(s)).link,i=t?Ir(Mr(t)).deep_link_id:null,r=Ir(Mr(s)).deep_link_id;return(r?Ir(Mr(r)).link:null)||r||i||t||s}class cf{constructor(t){const i=Ir(Mr(t)),r=i.apiKey??null,o=i.oobCode??null,d=OT(i.mode??null);de(r&&o&&d,"argument-error"),this.apiKey=r,this.operation=d,this.code=o,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=IT(t);try{return new cf(i)}catch{return null}}}class Aa{constructor(){this.providerId=Aa.PROVIDER_ID}static credential(t,i){return qr._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=cf.parseLink(i);return de(r,"argument-error"),qr._fromEmailAndCode(t,r.code,r.tenantId)}}Aa.PROVIDER_ID="password";Aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class f0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class al extends f0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class bs extends al{constructor(){super("facebook.com")}static credential(t){return oi._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bs.credentialFromTaggedObject(t)}static credentialFromError(t){return bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bs.credential(t.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";class xs extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return oi._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return xs.credential(i,r)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";class Ss extends al{constructor(){super("github.com")}static credential(t){return oi._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ss.credentialFromTaggedObject(t)}static credentialFromError(t){return Ss.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ss.credential(t.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";class Es extends al{constructor(){super("twitter.com")}static credential(t,i){return oi._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Es.credentialFromTaggedObject(t)}static credentialFromError(t){return Es.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return Es.credential(i,r)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";async function MT(s,t){return il(s,"POST","/v1/accounts:signUp",ks(s,t))}class ci{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,o=!1){const d=await ln._fromIdTokenResponse(t,r,o),f=jv(r);return new ci({user:d,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const o=jv(r);return new ci({user:t,providerId:o,_tokenResponse:r,operationType:i})}}function jv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class tc extends Ms{constructor(t,i,r,o){super(i.code,i.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,tc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,o){return new tc(t,i,r,o)}}function m0(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?tc._fromErrorAndOperation(s,d,t,r):d})}async function kT(s,t,i=!1){const r=await pa(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return ci._forOperation(s,"link",r)}async function LT(s,t,i=!1){const{auth:r}=s;if($t(r.app))return Promise.reject(Bn(r));const o="reauthenticate";try{const d=await pa(s,m0(r,o,t,s),i);de(d.idToken,r,"internal-error");const f=rf(d.idToken);de(f,r,"internal-error");const{sub:m}=f;return de(s.uid===m,r,"user-mismatch"),ci._forOperation(s,o,d)}catch(d){throw d?.code==="auth/user-not-found"&&un(r,"user-mismatch"),d}}async function p0(s,t,i=!1){if($t(s.app))return Promise.reject(Bn(s));const r="signIn",o=await m0(s,r,t),d=await ci._fromIdTokenResponse(s,r,o);return i||await s._updateCurrentUser(d.user),d}async function UT(s,t){return p0(_i(s),t)}async function g0(s){const t=_i(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function PT(s,t,i){if($t(s.app))return Promise.reject(Bn(s));const r=_i(s),f=await jh(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MT).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&g0(s),p}),m=await ci._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function zT(s,t,i){return $t(s.app)?Promise.reject(Bn(s)):UT(_t(s),Aa.credential(t,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&g0(s),r})}async function BT(s,t){return Yn(s,"POST","/v1/accounts:update",t)}async function HT(s,{displayName:t,photoURL:i}){if(t===void 0&&i===void 0)return;const r=_t(s),d={idToken:await r.getIdToken(),displayName:t,photoUrl:i,returnSecureToken:!0},f=await pa(r,BT(r.auth,d));r.displayName=f.displayName||null,r.photoURL=f.photoUrl||null;const m=r.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(f)}function GT(s,t,i,r){return _t(s).onIdTokenChanged(t,i,r)}function FT(s,t,i){return _t(s).beforeAuthStateChanged(t,i)}function qT(s,t,i,r){return _t(s).onAuthStateChanged(t,i,r)}function VT(s){return _t(s).signOut()}const nc="__sak";class _0{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(nc,"1"),this.storage.removeItem(nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const YT=1e3,XT=10;class v0 extends _0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=o0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const r=t.key;i?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},d=this.storage.getItem(r);oT()&&d!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,XT):o()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},YT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}v0.type="LOCAL";const WT=v0;class y0 extends _0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}y0.type="SESSION";const b0=y0;function KT(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}class xc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;const r=new xc(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:o,data:d}=i.data,f=this.handlersMap[o];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(f).map(async g=>g(i.origin,d)),p=await KT(m);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];function uf(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}class QT{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let d,f;return new Promise((m,p)=>{const g=uf("",20);o.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(b){const x=b;if(x.data.eventId===g)switch(x.data.status){case"ack":clearTimeout(y),d=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),m(x.data.response);break;default:clearTimeout(y),clearTimeout(d),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:g,data:i},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function _n(){return window}function $T(s){_n().location.href=s}function x0(){return typeof _n().WorkerGlobalScope<"u"&&typeof _n().importScripts=="function"}async function ZT(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JT(){return navigator?.serviceWorker?.controller||null}function eC(){return x0()?self:null}const S0="firebaseLocalStorageDb",tC=1,sc="firebaseLocalStorage",E0="fbase_key";class rl{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Sc(s,t){return s.transaction([sc],t?"readwrite":"readonly").objectStore(sc)}function nC(){const s=indexedDB.deleteDatabase(S0);return new rl(s).toPromise()}function Rh(){const s=indexedDB.open(S0,tC);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(sc,{keyPath:E0})}catch(o){i(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(sc)?t(r):(r.close(),await nC(),t(await Rh()))})})}async function Rv(s,t,i){const r=Sc(s,!0).put({[E0]:t,value:i});return new rl(r).toPromise()}async function sC(s,t){const i=Sc(s,!1).get(t),r=await new rl(i).toPromise();return r===void 0?null:r.value}function Dv(s,t){const i=Sc(s,!0).delete(t);return new rl(i).toPromise()}const iC=800,aC=3;class N0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rh(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>aC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(eC()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ZT(),!this.activeServiceWorker)return;this.sender=new QT(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||JT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Rh();return await Rv(t,nc,"1"),await Dv(t,nc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rv(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>sC(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Dv(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const d=Sc(o,!1).getAll();return new rl(d).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:d}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(d)&&(this.notifyListeners(o,d),i.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N0.type="LOCAL";const rC=N0;new sl(3e4,6e4);function lC(s,t){return t?Pn(t):(de(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class df extends of{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ua(t,this._buildIdpRequest())}_linkToIdToken(t,i){return ua(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return ua(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function oC(s){return p0(s.auth,new df(s),s.bypassAuthState)}function cC(s){const{auth:t,user:i}=s;return de(i,t,"internal-error"),LT(i,new df(s),s.bypassAuthState)}async function uC(s){const{auth:t,user:i}=s;return de(i,t,"internal-error"),kT(i,new df(s),s.bypassAuthState)}class T0{constructor(t,i,r,o,d=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:o,tenantId:d,error:f,type:m}=t;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:i,sessionId:r,tenantId:d||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return oC;case"linkViaPopup":case"linkViaRedirect":return uC;case"reauthViaPopup":case"reauthViaRedirect":return cC;default:un(this.auth,"internal-error")}}resolve(t){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dC=new sl(2e3,1e4);class ra extends T0{constructor(t,i,r,o,d){super(t,i,o,d),this.provider=r,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return de(t,this.auth,"internal-error"),t}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const t=uf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,dC.get())};t()}}ra.currentPopupAction=null;const hC="pendingRedirect",qo=new Map;class fC extends T0{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=qo.get(this.auth._key());if(!t){try{const r=await mC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}qo.set(this.auth._key(),t)}return this.bypassAuthState||qo.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mC(s,t){const i=_C(t),r=gC(s);if(!await r._isAvailable())return!1;const o=await r._get(i)==="true";return await r._remove(i),o}function pC(s,t){qo.set(s._key(),t)}function gC(s){return Pn(s._redirectPersistence)}function _C(s){return Fo(hC,s.config.apiKey,s.name)}async function vC(s,t,i=!1){if($t(s.app))return Promise.reject(Bn(s));const r=_i(s),o=lC(r,t),f=await new fC(r,o,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}const yC=600*1e3;class bC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!xC(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!C0(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";i.onError(gn(this.auth,r))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=yC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ov(t))}saveEventToCache(t){this.cachedEventUids.add(Ov(t)),this.lastProcessedEventTime=Date.now()}}function Ov(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function C0({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function xC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C0(s);default:return!1}}async function SC(s,t={}){return Yn(s,"GET","/v1/projects",t)}const EC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NC=/^https?/;async function TC(s){if(s.config.emulator)return;const{authorizedDomains:t}=await SC(s);for(const i of t)try{if(CC(i))return}catch{}un(s,"unauthorized-domain")}function CC(s){const t=wh(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!NC.test(i))return!1;if(EC.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const wC=new sl(3e4,6e4);function Iv(){const s=_n().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function AC(s){return new Promise((t,i)=>{function r(){Iv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Iv(),i(gn(s,"network-request-failed"))},timeout:wC.get()})}if(_n().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(_n().gapi?.load)r();else{const o=_T("iframefcb");return _n()[o]=()=>{gapi.load?r():i(gn(s,"network-request-failed"))},u0(`${gT()}?onload=${o}`).catch(d=>i(d))}}).catch(t=>{throw Vo=null,t})}let Vo=null;function jC(s){return Vo=Vo||AC(s),Vo}const RC=new sl(5e3,15e3),DC="__/auth/iframe",OC="emulator/auth/iframe",IC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kC(s){const t=s.config;de(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?af(t,OC):`https://${s.config.authDomain}/${DC}`,r={apiKey:t.apiKey,appName:s.name,v:wa},o=MC.get(s.config.apiHost);o&&(r.eid=o);const d=s._getFrameworks();return d.length&&(r.fw=d.join(",")),`${i}?${Ca(r).slice(1)}`}async function LC(s){const t=await jC(s),i=_n().gapi;return de(i,s,"internal-error"),t.open({where:document.body,url:kC(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IC,dontclear:!0},r=>new Promise(async(o,d)=>{await r.restyle({setHideOnLeave:!1});const f=gn(s,"network-request-failed"),m=_n().setTimeout(()=>{d(f)},RC.get());function p(){_n().clearTimeout(m),o(r)}r.ping(p).then(p,()=>{d(f)})}))}const UC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PC=500,zC=600,BC="_blank",HC="http://localhost";class Mv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GC(s,t,i,r=PC,o=zC){const d=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p={...UC,width:r.toString(),height:o.toString(),top:d,left:f},g=St().toLowerCase();i&&(m=s0(g)?BC:i),t0(g)&&(t=t||HC,p.scrollbars="yes");const y=Object.entries(p).reduce((x,[C,N])=>`${x}${C}=${N},`,"");if(lT(g)&&m!=="_self")return FC(t||"",m),new Mv(null);const b=window.open(t||"",m,y);de(b,s,"popup-blocked");try{b.focus()}catch{}return new Mv(b)}function FC(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}const qC="__/auth/handler",VC="emulator/auth/handler",YC=encodeURIComponent("fac");async function kv(s,t,i,r,o,d){de(s.config.authDomain,s,"auth-domain-config-required"),de(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:wa,eventId:o};if(t instanceof f0){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",xh(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,b]of Object.entries({}))f[y]=b}if(t instanceof al){const y=t.getScopes().filter(b=>b!=="");y.length>0&&(f.scopes=y.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const y of Object.keys(m))m[y]===void 0&&delete m[y];const p=await s._getAppCheckToken(),g=p?`#${YC}=${encodeURIComponent(p)}`:"";return`${XC(s)}?${Ca(m).slice(1)}${g}`}function XC({config:s}){return s.emulator?af(s,VC):`https://${s.authDomain}/${qC}`}const dh="webStorageSupport";class WC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b0,this._completeRedirectFn=vC,this._overrideRedirectResult=pC}async _openPopup(t,i,r,o){Fn(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const d=await kv(t,i,r,wh(),o);return GC(t,d,uf())}async _openRedirect(t,i,r,o){await this._originValidation(t);const d=await kv(t,i,r,wh(),o);return $T(d),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:o,promise:d}=this.eventManagers[i];return o?Promise.resolve(o):(Fn(d,"If manager is not set, promise should be"),d)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await LC(t),r=new bC(t);return i.register("authEvent",o=>(de(o?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(dh,{type:dh},o=>{const d=o?.[0]?.[dh];d!==void 0&&i(!!d),un(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=TC(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return o0()||n0()||lf()}}const KC=WC;var Lv="@firebase/auth",Uv="1.12.0";class QC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $C(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZC(s){ma(new li("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),d=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;de(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c0(s)},g=new fT(r,o,d,p);return ET(g,i),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),ma(new li("auth-internal",t=>{const i=_i(t.getProvider("auth").getImmediate());return(r=>new QC(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),As(Lv,Uv,$C(s)),As(Lv,Uv,"esm2020")}const JC=300,ew=Ly("authIdTokenMaxAge")||JC;let Pv=null;const tw=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>ew)return;const o=i?.token;Pv!==o&&(Pv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function nw(s=qy()){const t=nf(s,"auth");if(t.isInitialized())return t.getImmediate();const i=ST(s,{popupRedirectResolver:KC,persistence:[rC,WT,b0]}),r=Ly("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(r,location.origin);if(location.origin===d.origin){const f=tw(d.toString());FT(i,f,()=>f(i.currentUser)),GT(i,m=>f(m))}}const o=My("auth");return o&&NT(i,`http://${o}`),i}function sw(){return document.getElementsByTagName("head")?.[0]??document}mT({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const d=gn("internal-error");d.customData=o,i(d)},r.type="text/javascript",r.charset="UTF-8",sw().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZC("Browser");var zv={};const Bv="@firebase/database",Hv="1.1.0";let w0="";function iw(s){w0=s}class aw{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),at(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Gr(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class rw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return vn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const A0=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const t=window[s];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new aw(t)}}catch{}return new rw},si=A0("localStorage"),lw=A0("sessionStorage");const da=new ef("@firebase/database"),ow=(function(){let s=1;return function(){return s++}})(),j0=function(s){const t=ON(s),i=new AN;i.update(t);const r=i.digest();return $h.encodeByteArray(r)},ll=function(...s){let t="";for(let i=0;i<s.length;i++){const r=s[i];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=ll.apply(null,r):typeof r=="object"?t+=at(r):t+=r,t+=" "}return t};let Ur=null,Gv=!0;const cw=function(s,t){X(!0,"Can't turn on custom loggers persistently."),da.logLevel=Pe.VERBOSE,Ur=da.log.bind(da)},pt=function(...s){if(Gv===!0&&(Gv=!1,Ur===null&&lw.get("logging_enabled")===!0&&cw()),Ur){const t=ll.apply(null,s);Ur(t)}},ol=function(s){return function(...t){pt(s,...t)}},Dh=function(...s){const t="FIREBASE INTERNAL ERROR: "+ll(...s);da.error(t)},qn=function(...s){const t=`FIREBASE FATAL ERROR: ${ll(...s)}`;throw da.error(t),new Error(t)},xt=function(...s){const t="FIREBASE WARNING: "+ll(...s);da.warn(t)},uw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},hf=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},dw=function(s){if(document.readyState==="complete")s();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},ga="[MIN_NAME]",ui="[MAX_NAME]",vi=function(s,t){if(s===t)return 0;if(s===ga||t===ui)return-1;if(t===ga||s===ui)return 1;{const i=Fv(s),r=Fv(t);return i!==null?r!==null?i-r===0?s.length-t.length:i-r:-1:r!==null?1:s<t?-1:1}},hw=function(s,t){return s===t?0:s<t?-1:1},wr=function(s,t){if(t&&s in t)return t[s];throw new Error("Missing required key ("+s+") in object: "+at(t))},ff=function(s){if(typeof s!="object"||s===null)return at(s);const t=[];for(const r in s)t.push(r);t.sort();let i="{";for(let r=0;r<t.length;r++)r!==0&&(i+=","),i+=at(t[r]),i+=":",i+=ff(s[t[r]]);return i+="}",i},R0=function(s,t){const i=s.length;if(i<=t)return[s];const r=[];for(let o=0;o<i;o+=t)o+t>i?r.push(s.substring(o,i)):r.push(s.substring(o,o+t));return r};function gt(s,t){for(const i in s)s.hasOwnProperty(i)&&t(i,s[i])}const D0=function(s){X(!hf(s),"Invalid JSON number");const t=11,i=52,r=(1<<t-1)-1;let o,d,f,m,p;s===0?(d=0,f=0,o=1/s===-1/0?1:0):(o=s<0,s=Math.abs(s),s>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(s)/Math.LN2),r),d=m+r,f=Math.round(s*Math.pow(2,i-m)-Math.pow(2,i))):(d=0,f=Math.round(s/Math.pow(2,1-r-i))));const g=[];for(p=i;p;p-=1)g.push(f%2?1:0),f=Math.floor(f/2);for(p=t;p;p-=1)g.push(d%2?1:0),d=Math.floor(d/2);g.push(o?1:0),g.reverse();const y=g.join("");let b="";for(p=0;p<64;p+=8){let x=parseInt(y.substr(p,8),2).toString(16);x.length===1&&(x="0"+x),b=b+x}return b.toLowerCase()},fw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},mw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function pw(s,t){let i="Unknown Error";s==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?i="Client doesn't have permission to access the desired data.":s==="unavailable"&&(i="The service is unavailable");const r=new Error(s+" at "+t._path.toString()+": "+i);return r.code=s.toUpperCase(),r}const gw=new RegExp("^-?(0*)\\d{1,10}$"),_w=-2147483648,vw=2147483647,Fv=function(s){if(gw.test(s)){const t=Number(s);if(t>=_w&&t<=vw)return t}return null},ja=function(s){try{s()}catch(t){setTimeout(()=>{const i=t.stack||"";throw xt("Exception was thrown by user callback.",i),t},Math.floor(0))}},yw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pr=function(s,t){const i=setTimeout(s,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};class bw{constructor(t,i){this.appCheckProvider=i,this.appName=t.name,$t(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=i?.getImmediate({optional:!0}),this.appCheck||i?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((i,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){xt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class xw{constructor(t,i,r){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(pt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xt(t)}}class Yo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Yo.OWNER="owner";const mf="5",O0="v",I0="s",M0="r",k0="f",L0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,U0="ls",P0="p",Oh="ac",z0="websocket",B0="long_polling";class H0{constructor(t,i,r,o,d=!1,f="",m=!1,p=!1,g=null){this.secure=i,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=d,this.persistenceKey=f,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=si.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&si.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function Sw(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function G0(s,t,i){X(typeof t=="string","typeof type must == string"),X(typeof i=="object","typeof params must == object");let r;if(t===z0)r=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(t===B0)r=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Sw(s)&&(i.ns=s.namespace);const o=[];return gt(i,(d,f)=>{o.push(d+"="+f)}),r+o.join("&")}class Ew{constructor(){this.counters_={}}incrementCounter(t,i=1){vn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return lN(this.counters_)}}const hh={},fh={};function pf(s){const t=s.toString();return hh[t]||(hh[t]=new Ew),hh[t]}function Nw(s,t){const i=s.toString();return fh[i]||(fh[i]=t()),fh[i]}class Tw{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&ja(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const qv="start",Cw="close",ww="pLPCommand",Aw="pRTLPCB",F0="id",q0="pw",V0="ser",jw="cb",Rw="seg",Dw="ts",Ow="d",Iw="dframe",Y0=1870,X0=30,Mw=Y0-X0,kw=25e3,Lw=3e4;class la{constructor(t,i,r,o,d,f,m){this.connId=t,this.repoInfo=i,this.applicationId=r,this.appCheckToken=o,this.authToken=d,this.transportSessionId=f,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ol(t),this.stats_=pf(i),this.urlFn=p=>(this.appCheckToken&&(p[Oh]=this.appCheckToken),G0(i,B0,p))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new Tw(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Lw)),dw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gf((...d)=>{const[f,m,p,g,y]=d;if(this.incrementIncomingBytes_(d),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===qv)this.id=m,this.password=p;else if(f===Cw)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...d)=>{const[f,m]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(f,m)},()=>{this.onClosed_()},this.urlFn);const r={};r[qv]="t",r[V0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[jw]=this.scriptTagHolder.uniqueCallbackIdentifier),r[O0]=mf,this.transportSessionId&&(r[I0]=this.transportSessionId),this.lastSessionId&&(r[U0]=this.lastSessionId),this.applicationId&&(r[P0]=this.applicationId),this.appCheckToken&&(r[Oh]=this.appCheckToken),typeof location<"u"&&location.hostname&&L0.test(location.hostname)&&(r[M0]=k0);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){la.forceAllow_=!0}static forceDisallow(){la.forceDisallow_=!0}static isAvailable(){return la.forceAllow_?!0:!la.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!fw()&&!mw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=at(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Oy(i),o=R0(r,Mw);for(let d=0;d<o.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[d]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const r={};r[Iw]="t",r[F0]=t,r[q0]=i,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=at(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class gf{constructor(t,i,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ow(),window[ww+this.uniqueCallbackIdentifier]=t,window[Aw+this.uniqueCallbackIdentifier]=i,this.myIFrame=gf.createIFrame_();let d="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(d='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(m){pt("frame writing exception"),m.stack&&pt(m.stack),pt(m)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||pt("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[F0]=this.myID,t[q0]=this.myPW,t[V0]=this.currentSerial;let i=this.urlFn(t),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+X0+r.length<=Y0;){const f=this.pendingSegs.shift();r=r+"&"+Rw+o+"="+f.seg+"&"+Dw+o+"="+f.ts+"&"+Ow+o+"="+f.d,o++}return i=i+r,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,r){this.pendingSegs.push({seg:t,ts:i,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const r=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(r,Math.floor(kw)),d=()=>{clearTimeout(o),r()};this.addTag(t,d)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),i())},r.onerror=()=>{pt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}const Uw=16384,Pw=45e3;let ic=null;typeof MozWebSocket<"u"?ic=MozWebSocket:typeof WebSocket<"u"&&(ic=WebSocket);class rn{constructor(t,i,r,o,d,f,m){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ol(this.connId),this.stats_=pf(i),this.connURL=rn.connectionURL_(i,f,m,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,d){const f={};return f[O0]=mf,typeof location<"u"&&location.hostname&&L0.test(location.hostname)&&(f[M0]=k0),i&&(f[I0]=i),r&&(f[U0]=r),o&&(f[Oh]=o),d&&(f[P0]=d),G0(t,z0,f)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,si.set("previous_websocket_failure",!0);try{let r;bN(),this.mySock=new ic(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){rn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&ic!==null&&!rn.forceDisallow_}static previouslyFailed(){return si.isInMemoryStorage||si.get("previous_websocket_failure")===!0}markConnectionHealthy(){si.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=Gr(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(X(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=at(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=R0(i,Uw);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Pw))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rn.responsesRequiredToBeHealthy=2;rn.healthyTimeout=3e4;class Vr{static get ALL_TRANSPORTS(){return[la,rn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const i=rn&&rn.isAvailable();let r=i&&!rn.previouslyFailed();if(t.webSocketOnly&&(i||xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rn];else{const o=this.transports_=[];for(const d of Vr.ALL_TRANSPORTS)d&&d.isAvailable()&&o.push(d);Vr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Vr.globalTransportInitialized_=!1;const zw=6e4,Bw=5e3,Hw=10*1024,Gw=100*1024,mh="t",Vv="d",Fw="s",Yv="r",qw="e",Xv="o",Wv="a",Kv="n",Qv="p",Vw="h";class Yw{constructor(t,i,r,o,d,f,m,p,g,y){this.id=t,this.repoInfo_=i,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=d,this.onMessage_=f,this.onReady_=m,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ol("c:"+this.id+":"),this.transportManager_=new Vr(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,r)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=Pr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Gw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Hw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(mh in t){const i=t[mh];i===Wv?this.upgradeIfSecondaryHealthy_():i===Yv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===Xv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=wr("t",t),r=wr("d",t);if(i==="c")this.onSecondaryControl_(r);else if(i==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Qv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Kv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=wr("t",t),r=wr("d",t);i==="c"?this.onControl_(r):i==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=wr(mh,t);if(Vv in t){const r=t[Vv];if(i===Vw){const o={...r};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(i===Kv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===Fw?this.onConnectionShutdown_(r):i===Yv?this.onReset_(r):i===qw?Dh("Server Error: "+r):i===Xv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dh("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,r=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),mf!==r&&xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,r),Pr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Bw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Qv,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(si.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class W0{put(t,i,r,o){}merge(t,i,r,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,r){}onDisconnectMerge(t,i,r){}onDisconnectCancel(t,i){}reportStats(t){}}class K0{constructor(t){this.allowedEvents_=t,this.listeners_={},X(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,i)}}on(t,i,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:r});const o=this.getInitialEvent(t);o&&i.apply(r,o)}off(t,i,r){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let d=0;d<o.length;d++)if(o[d].callback===i&&(!r||r===o[d].context)){o.splice(d,1);return}}validateEventType_(t){X(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}class ac extends K0{static getInstance(){return new ac}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Jh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return X(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const $v=32,Zv=768;class ze{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function Ae(){return new ze("")}function Ne(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function Ds(s){return s.pieces_.length-s.pieceNum_}function Ge(s){let t=s.pieceNum_;return t<s.pieces_.length&&t++,new ze(s.pieces_,t)}function _f(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function Xw(s){let t="";for(let i=s.pieceNum_;i<s.pieces_.length;i++)s.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(s.pieces_[i])));return t||"/"}function Yr(s,t=0){return s.pieces_.slice(s.pieceNum_+t)}function Q0(s){if(s.pieceNum_>=s.pieces_.length)return null;const t=[];for(let i=s.pieceNum_;i<s.pieces_.length-1;i++)t.push(s.pieces_[i]);return new ze(t,0)}function We(s,t){const i=[];for(let r=s.pieceNum_;r<s.pieces_.length;r++)i.push(s.pieces_[r]);if(t instanceof ze)for(let r=t.pieceNum_;r<t.pieces_.length;r++)i.push(t.pieces_[r]);else{const r=t.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&i.push(r[o])}return new ze(i,0)}function xe(s){return s.pieceNum_>=s.pieces_.length}function bt(s,t){const i=Ne(s),r=Ne(t);if(i===null)return t;if(i===r)return bt(Ge(s),Ge(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+s+")")}function Ww(s,t){const i=Yr(s,0),r=Yr(t,0);for(let o=0;o<i.length&&o<r.length;o++){const d=vi(i[o],r[o]);if(d!==0)return d}return i.length===r.length?0:i.length<r.length?-1:1}function $0(s,t){if(Ds(s)!==Ds(t))return!1;for(let i=s.pieceNum_,r=t.pieceNum_;i<=s.pieces_.length;i++,r++)if(s.pieces_[i]!==t.pieces_[r])return!1;return!0}function Zt(s,t){let i=s.pieceNum_,r=t.pieceNum_;if(Ds(s)>Ds(t))return!1;for(;i<s.pieces_.length;){if(s.pieces_[i]!==t.pieces_[r])return!1;++i,++r}return!0}class Kw{constructor(t,i){this.errorPrefix_=i,this.parts_=Yr(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=yc(this.parts_[r]);Z0(this)}}function Qw(s,t){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(t),s.byteLength_+=yc(t),Z0(s)}function $w(s){const t=s.parts_.pop();s.byteLength_-=yc(t),s.parts_.length>0&&(s.byteLength_-=1)}function Z0(s){if(s.byteLength_>Zv)throw new Error(s.errorPrefix_+"has a key path longer than "+Zv+" bytes ("+s.byteLength_+").");if(s.parts_.length>$v)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$v+") or object contains a cycle "+ni(s))}function ni(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}class vf extends K0{static getInstance(){return new vf}constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return X(t==="visible","Unknown event type: "+t),[this.visible_]}}const Ar=1e3,Zw=300*1e3,Jv=30*1e3,Jw=1.3,eA=3e4,tA="server_kill",ey=3;class Hn extends W0{constructor(t,i,r,o,d,f,m,p){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=p,this.id=Hn.nextPersistentConnectionId_++,this.log_=ol("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ar,this.maxReconnectDelay_=Zw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vf.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ac.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const o=++this.requestNumber_,d={r:o,a:t,b:i};this.log_(at(d)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const i=new tl,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;f.s==="ok"?i.resolve(m):i.reject(m)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(d),i.promise}listen(t,i,r,o){this.initConnection_();const d=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),X(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(f).set(d,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const d={p:r},f="q";t.tag&&(d.q=i._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest(f,d,m=>{const p=m.d,g=m.s;Hn.warnOnListenWarnings_(p,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",m),g!=="ok"&&this.removeListen_(r,o),t.onComplete&&t.onComplete(g,p))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&vn(t,"w")){const r=fa(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',d=i._path.toString();xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||wN(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Jv)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=CN(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const d=o.s,f=o.d||"error";this.authToken_===t&&(d==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),X(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);const d={p:t},f="n";o&&(d.q=r,d.t=o),this.sendRequest(f,d)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){const d={p:i,d:r};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,d){this.initConnection_();const f={p:i,d:r};d!==void 0&&(f.h=d),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,d=>{this.log_(i+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(d.s,d.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){const d=r.d;this.log_("reportStats","Error sending stats: "+d)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+at(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):Dh("Unrecognized action received from server: "+at(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ar,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ar,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>eA&&(this.reconnectDelay_=Ar),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Jw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Hn.nextConnectionId_++,d=this.lastSessionId;let f=!1,m=null;const p=function(){m?m.close():(f=!0,r())},g=function(b){X(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(b)};this.realtime_={close:p,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[b,x]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);f?pt("getToken() completed but was canceled"):(pt("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=x&&x.token,m=new Yw(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,C=>{xt(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(tA)},d))}catch(b){this.log_("Failed to get token: "+b),f||(this.repoInfo_.nodeAdmin&&xt(b),p())}}}interrupt(t){pt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){pt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],xh(this.interruptReasons_)&&(this.reconnectDelay_=Ar,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(d=>ff(d)).join("$"):r="default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const r=new ze(t).toString();let o;if(this.listens.has(r)){const d=this.listens.get(r);o=d.get(i),d.delete(i),d.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){pt("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ey&&(this.reconnectDelay_=Jv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){pt("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ey&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+w0.replace(/\./g,"-")]=1,Jh()?t["framework.cordova"]=1:zy()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ac.getInstance().currentlyOnline();return xh(this.interruptReasons_)&&t}}Hn.nextPersistentConnectionId_=0;Hn.nextConnectionId_=0;class ve{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new ve(t,i)}}class Ec{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const r=new ve(ga,t),o=new ve(ga,i);return this.compare(r,o)!==0}minPost(){return ve.MIN}}let Uo;class J0 extends Ec{static get __EMPTY_NODE(){return Uo}static set __EMPTY_NODE(t){Uo=t}compare(t,i){return vi(t.name,i.name)}isDefinedOn(t){throw Na("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return ve.MIN}maxPost(){return new ve(ui,Uo)}makePost(t,i){return X(typeof t=="string","KeyIndex indexValue must always be a string."),new ve(t,Uo)}toString(){return".key"}}const ha=new J0;class Po{constructor(t,i,r,o,d=null){this.isReverse_=o,this.resultGenerator_=d,this.nodeStack_=[];let f=1;for(;!t.isEmpty();)if(t=t,f=i?r(t.key,i):1,o&&(f*=-1),f<0)this.isReverse_?t=t.left:t=t.right;else if(f===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class ct{constructor(t,i,r,o,d){this.key=t,this.value=i,this.color=r??ct.RED,this.left=o??Rt.EMPTY_NODE,this.right=d??Rt.EMPTY_NODE}copy(t,i,r,o,d){return new ct(t??this.key,i??this.value,r??this.color,o??this.left,d??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const d=r(t,o.key);return d<0?o=o.copy(null,null,null,o.left.insert(t,i,r),null):d===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return Rt.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}ct.RED=!0;ct.BLACK=!1;class nA{copy(t,i,r,o,d){return this}insert(t,i,r){return new ct(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Rt{constructor(t,i=Rt.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new Rt(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,ct.BLACK,null,null))}remove(t){return new Rt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ct.BLACK,null,null))}get(t){let i,r=this.root_;for(;!r.isEmpty();){if(i=this.comparator_(t,r.key),i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}getPredecessorKey(t){let i,r=this.root_,o=null;for(;!r.isEmpty();)if(i=this.comparator_(t,r.key),i===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else i<0?r=r.left:i>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Po(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Po(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Po(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Po(this.root_,null,this.comparator_,!0,t)}}Rt.EMPTY_NODE=new nA;function sA(s,t){return vi(s.name,t.name)}function yf(s,t){return vi(s,t)}let Ih;function iA(s){Ih=s}const eb=function(s){return typeof s=="number"?"number:"+D0(s):"string:"+s},tb=function(s){if(s.isLeafNode()){const t=s.val();X(typeof t=="string"||typeof t=="number"||typeof t=="object"&&vn(t,".sv"),"Priority must be a string or number.")}else X(s===Ih||s.isEmpty(),"priority of unexpected type.");X(s===Ih||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ty;class ot{static set __childrenNodeConstructor(t){ty=t}static get __childrenNodeConstructor(){return ty}constructor(t,i=ot.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),tb(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new ot(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:ot.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return xe(t)?this:Ne(t)===".priority"?this.priorityNode_:ot.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:ot.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Ne(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(X(r!==".priority"||Ds(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ot.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ge(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+eb(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=D0(this.value_):t+=this.value_,this.lazyHash_=j0(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===ot.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ot.__childrenNodeConstructor?-1:(X(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,o=ot.VALUE_TYPE_ORDER.indexOf(i),d=ot.VALUE_TYPE_ORDER.indexOf(r);return X(o>=0,"Unknown leaf type: "+i),X(d>=0,"Unknown leaf type: "+r),o===d?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}ot.VALUE_TYPE_ORDER=["object","boolean","number","string"];let nb,sb;function aA(s){nb=s}function rA(s){sb=s}class lA extends Ec{compare(t,i){const r=t.node.getPriority(),o=i.node.getPriority(),d=r.compareTo(o);return d===0?vi(t.name,i.name):d}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(ui,new ot("[PRIORITY-POST]",sb))}makePost(t,i){const r=nb(t);return new ve(i,new ot("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ke=new lA;const oA=Math.log(2);class cA{constructor(t){const i=d=>parseInt(Math.log(d)/oA,10),r=d=>parseInt(Array(d+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const o=r(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const rc=function(s,t,i,r){s.sort(t);const o=function(p,g){const y=g-p;let b,x;if(y===0)return null;if(y===1)return b=s[p],x=i?i(b):b,new ct(x,b.node,ct.BLACK,null,null);{const C=parseInt(y/2,10)+p,N=o(p,C),P=o(C+1,g);return b=s[C],x=i?i(b):b,new ct(x,b.node,ct.BLACK,N,P)}},d=function(p){let g=null,y=null,b=s.length;const x=function(N,P){const U=b-N,Y=b;b-=N;const K=o(U+1,Y),M=s[U],D=i?i(M):M;C(new ct(D,M.node,P,null,K))},C=function(N){g?(g.left=N,g=N):(y=N,g=N)};for(let N=0;N<p.count;++N){const P=p.nextBitIsOne(),U=Math.pow(2,p.count-(N+1));P?x(U,ct.BLACK):(x(U,ct.BLACK),x(U,ct.RED))}return y},f=new cA(s.length),m=d(f);return new Rt(r||t,m)};let ph;const ia={};class zn{static get Default(){return X(ia&&Ke,"ChildrenNode.ts has not been loaded"),ph=ph||new zn({".priority":ia},{".priority":Ke}),ph}constructor(t,i){this.indexes_=t,this.indexSet_=i}get(t){const i=fa(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof Rt?i:null}hasIndex(t){return vn(this.indexSet_,t.toString())}addIndex(t,i){X(t!==ha,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const d=i.getIterator(ve.Wrap);let f=d.getNext();for(;f;)o=o||t.isDefinedOn(f.node),r.push(f),f=d.getNext();let m;o?m=rc(r,t.getCompare()):m=ia;const p=t.toString(),g={...this.indexSet_};g[p]=t;const y={...this.indexes_};return y[p]=m,new zn(y,g)}addToIndexes(t,i){const r=Qo(this.indexes_,(o,d)=>{const f=fa(this.indexSet_,d);if(X(f,"Missing index implementation for "+d),o===ia)if(f.isDefinedOn(t.node)){const m=[],p=i.getIterator(ve.Wrap);let g=p.getNext();for(;g;)g.name!==t.name&&m.push(g),g=p.getNext();return m.push(t),rc(m,f.getCompare())}else return ia;else{const m=i.get(t.name);let p=o;return m&&(p=p.remove(new ve(t.name,m))),p.insert(t,t.node)}});return new zn(r,this.indexSet_)}removeFromIndexes(t,i){const r=Qo(this.indexes_,o=>{if(o===ia)return o;{const d=i.get(t.name);return d?o.remove(new ve(t.name,d)):o}});return new zn(r,this.indexSet_)}}let jr;class he{static get EMPTY_NODE(){return jr||(jr=new he(new Rt(yf),null,zn.Default))}constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&tb(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||jr}updatePriority(t){return this.children_.isEmpty()?this:new he(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?jr:i}}getChild(t){const i=Ne(t);return i===null?this:this.getImmediateChild(i).getChild(Ge(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(X(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const r=new ve(t,i);let o,d;i.isEmpty()?(o=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),d=this.indexMap_.addToIndexes(r,this.children_));const f=o.isEmpty()?jr:this.priorityNode_;return new he(o,f,d)}}updateChild(t,i){const r=Ne(t);if(r===null)return i;{X(Ne(t)!==".priority"||Ds(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Ge(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,o=0,d=!0;if(this.forEachChild(Ke,(f,m)=>{i[f]=m.val(t),r++,d&&he.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):d=!1}),!t&&d&&o<2*r){const f=[];for(const m in i)f[m]=i[m];return f}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+eb(this.getPriority().val())+":"),this.forEachChild(Ke,(i,r)=>{const o=r.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":j0(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const o=this.resolveIndex_(r);if(o){const d=o.getPredecessorKey(new ve(t,i));return d?d.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new ve(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new ve(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,ve.Wrap);let d=o.peek();for(;d!=null&&i.compare(d,t)<0;)o.getNext(),d=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,ve.Wrap);let d=o.peek();for(;d!=null&&i.compare(d,t)>0;)o.getNext(),d=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===cl?-1:0}withIndex(t){if(t===ha||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new he(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===ha||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const r=this.getIterator(Ke),o=i.getIterator(Ke);let d=r.getNext(),f=o.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=r.getNext(),f=o.getNext()}return d===null&&f===null}else return!1;else return!1}}resolveIndex_(t){return t===ha?null:this.indexMap_.get(t.toString())}}he.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class uA extends he{constructor(){super(new Rt(yf),he.EMPTY_NODE,zn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return he.EMPTY_NODE}isEmpty(){return!1}}const cl=new uA;Object.defineProperties(ve,{MIN:{value:new ve(ga,he.EMPTY_NODE)},MAX:{value:new ve(ui,cl)}});J0.__EMPTY_NODE=he.EMPTY_NODE;ot.__childrenNodeConstructor=he;iA(cl);rA(cl);const dA=!0;function it(s,t=null){if(s===null)return he.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(t=s[".priority"]),X(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const i=s;return new ot(i,it(t))}if(!(s instanceof Array)&&dA){const i=[];let r=!1;if(gt(s,(f,m)=>{if(f.substring(0,1)!=="."){const p=it(m);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),i.push(new ve(f,p)))}}),i.length===0)return he.EMPTY_NODE;const d=rc(i,sA,f=>f.name,yf);if(r){const f=rc(i,Ke.getCompare());return new he(d,it(t),new zn({".priority":f},{".priority":Ke}))}else return new he(d,it(t),zn.Default)}else{let i=he.EMPTY_NODE;return gt(s,(r,o)=>{if(vn(s,r)&&r.substring(0,1)!=="."){const d=it(o);(d.isLeafNode()||!d.isEmpty())&&(i=i.updateImmediateChild(r,d))}}),i.updatePriority(it(t))}}aA(it);class hA extends Ec{constructor(t){super(),this.indexPath_=t,X(!xe(t)&&Ne(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const r=this.extractChild(t.node),o=this.extractChild(i.node),d=r.compareTo(o);return d===0?vi(t.name,i.name):d}makePost(t,i){const r=it(t),o=he.EMPTY_NODE.updateChild(this.indexPath_,r);return new ve(i,o)}maxPost(){const t=he.EMPTY_NODE.updateChild(this.indexPath_,cl);return new ve(ui,t)}toString(){return Yr(this.indexPath_,0).join("/")}}class fA extends Ec{compare(t,i){const r=t.node.compareTo(i.node);return r===0?vi(t.name,i.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(t,i){const r=it(t);return new ve(i,r)}toString(){return".value"}}const mA=new fA;function ib(s){return{type:"value",snapshotNode:s}}function _a(s,t){return{type:"child_added",snapshotNode:t,childName:s}}function Xr(s,t){return{type:"child_removed",snapshotNode:t,childName:s}}function Wr(s,t,i){return{type:"child_changed",snapshotNode:t,childName:s,oldSnap:i}}function pA(s,t){return{type:"child_moved",snapshotNode:t,childName:s}}class bf{constructor(t){this.index_=t}updateChild(t,i,r,o,d,f){X(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=t.getImmediateChild(i);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(f!=null&&(r.isEmpty()?t.hasChild(i)?f.trackChildChange(Xr(i,m)):X(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?f.trackChildChange(_a(i,r)):f.trackChildChange(Wr(i,r,m))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(i,r).withIndex(this.index_)}updateFullNode(t,i,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Ke,(o,d)=>{i.hasChild(o)||r.trackChildChange(Xr(o,d))}),i.isLeafNode()||i.forEachChild(Ke,(o,d)=>{if(t.hasChild(o)){const f=t.getImmediateChild(o);f.equals(d)||r.trackChildChange(Wr(o,d,f))}else r.trackChildChange(_a(o,d))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?he.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Kr{constructor(t){this.indexedFilter_=new bf(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Kr.getStartPost_(t),this.endPost_=Kr.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return i&&r}updateChild(t,i,r,o,d,f){return this.matches(new ve(i,r))||(r=he.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,r,o,d,f)}updateFullNode(t,i,r){i.isLeafNode()&&(i=he.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(he.EMPTY_NODE);const d=this;return i.forEachChild(Ke,(f,m)=>{d.matches(new ve(f,m))||(o=o.updateImmediateChild(f,he.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,r)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}class gA{constructor(t){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=i=>{const r=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Kr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,i,r,o,d,f){return this.rangedFilter_.matches(new ve(i,r))||(r=he.EMPTY_NODE),t.getImmediateChild(i).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,r,o,d,f):this.fullLimitUpdateChild_(t,i,r,d,f)}updateFullNode(t,i,r){let o;if(i.isLeafNode()||i.isEmpty())o=he.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=he.EMPTY_NODE.withIndex(this.index_);let d;this.reverse_?d=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;d.hasNext()&&f<this.limit_;){const m=d.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))o=o.updateImmediateChild(m.name,m.node),f++;else break;else continue}}else{o=i.withIndex(this.index_),o=o.updatePriority(he.EMPTY_NODE);let d;this.reverse_?d=o.getReverseIterator(this.index_):d=o.getIterator(this.index_);let f=0;for(;d.hasNext();){const m=d.getNext();f<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?f++:o=o.updateImmediateChild(m.name,he.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,r)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,r,o,d){let f;if(this.reverse_){const b=this.index_.getCompare();f=(x,C)=>b(C,x)}else f=this.index_.getCompare();const m=t;X(m.numChildren()===this.limit_,"");const p=new ve(i,r),g=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),y=this.rangedFilter_.matches(p);if(m.hasChild(i)){const b=m.getImmediateChild(i);let x=o.getChildAfterChild(this.index_,g,this.reverse_);for(;x!=null&&(x.name===i||m.hasChild(x.name));)x=o.getChildAfterChild(this.index_,x,this.reverse_);const C=x==null?1:f(x,p);if(y&&!r.isEmpty()&&C>=0)return d?.trackChildChange(Wr(i,r,b)),m.updateImmediateChild(i,r);{d?.trackChildChange(Xr(i,b));const P=m.updateImmediateChild(i,he.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(d?.trackChildChange(_a(x.name,x.node)),P.updateImmediateChild(x.name,x.node)):P}}else return r.isEmpty()?t:y&&f(g,p)>=0?(d!=null&&(d.trackChildChange(Xr(g.name,g.node)),d.trackChildChange(_a(i,r))),m.updateImmediateChild(i,r).updateImmediateChild(g.name,he.EMPTY_NODE)):t}}class xf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ke}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ga}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ui}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ke}copy(){const t=new xf;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function _A(s){return s.loadsAllData()?new bf(s.getIndex()):s.hasLimit()?new gA(s):new Kr(s)}function ny(s){const t={};if(s.isDefault())return t;let i;if(s.index_===Ke?i="$priority":s.index_===mA?i="$value":s.index_===ha?i="$key":(X(s.index_ instanceof hA,"Unrecognized index type!"),i=s.index_.toString()),t.orderBy=at(i),s.startSet_){const r=s.startAfterSet_?"startAfter":"startAt";t[r]=at(s.indexStartValue_),s.startNameSet_&&(t[r]+=","+at(s.indexStartName_))}if(s.endSet_){const r=s.endBeforeSet_?"endBefore":"endAt";t[r]=at(s.indexEndValue_),s.endNameSet_&&(t[r]+=","+at(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?t.limitToFirst=s.limit_:t.limitToLast=s.limit_),t}function sy(s){const t={};if(s.startSet_&&(t.sp=s.indexStartValue_,s.startNameSet_&&(t.sn=s.indexStartName_),t.sin=!s.startAfterSet_),s.endSet_&&(t.ep=s.indexEndValue_,s.endNameSet_&&(t.en=s.indexEndName_),t.ein=!s.endBeforeSet_),s.limitSet_){t.l=s.limit_;let i=s.viewFrom_;i===""&&(s.isViewFromLeft()?i="l":i="r"),t.vf=i}return s.index_!==Ke&&(t.i=s.index_.toString()),t}class lc extends W0{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(X(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,i,r,o){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=ol("p:rest:"),this.listens_={}}listen(t,i,r,o){const d=t._path.toString();this.log_("Listen called for "+d+" "+t._queryIdentifier);const f=lc.getListenId_(t,r),m={};this.listens_[f]=m;const p=ny(t._queryParams);this.restRequest_(d+".json",p,(g,y)=>{let b=y;if(g===404&&(b=null,g=null),g===null&&this.onDataUpdate_(d,b,!1,r),fa(this.listens_,f)===m){let x;g?g===401?x="permission_denied":x="rest_error:"+g:x="ok",o(x,null)}})}unlisten(t,i){const r=lc.getListenId_(t,i);delete this.listens_[r]}get(t){const i=ny(t._queryParams),r=t._path.toString(),o=new tl;return this.restRequest_(r+".json",i,(d,f)=>{let m=f;d===404&&(m=null,d=null),d===null?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(t){}restRequest_(t,i={},r){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,d])=>{o&&o.accessToken&&(i.auth=o.accessToken),d&&d.token&&(i.ac=d.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ca(i);this.log_("Sending REST request for "+f);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&m.readyState===4){this.log_("REST Response for "+f+" received. status:",m.status,"response:",m.responseText);let p=null;if(m.status>=200&&m.status<300){try{p=Gr(m.responseText)}catch{xt("Failed to parse JSON response for "+f+": "+m.responseText)}r(null,p)}else m.status!==401&&m.status!==404&&xt("Got unsuccessful REST response for "+f+" Status: "+m.status),r(m.status);r=null}},m.open("GET",f,!0),m.send()})}}class vA{constructor(){this.rootNode_=he.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}function oc(){return{value:null,children:new Map}}function ab(s,t,i){if(xe(t))s.value=i,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(t,i);else{const r=Ne(t);s.children.has(r)||s.children.set(r,oc());const o=s.children.get(r);t=Ge(t),ab(o,t,i)}}function Mh(s,t,i){s.value!==null?i(t,s.value):yA(s,(r,o)=>{const d=new ze(t.toString()+"/"+r);Mh(o,d,i)})}function yA(s,t){s.children.forEach((i,r)=>{t(r,i)})}class bA{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i={...t};return this.last_&&gt(this.last_,(r,o)=>{i[r]=i[r]-o}),this.last_=t,i}}const iy=10*1e3,xA=30*1e3,SA=300*1e3;class EA{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new bA(t);const r=iy+(xA-iy)*Math.random();Pr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),i={};let r=!1;gt(t,(o,d)=>{d>0&&vn(this.statsToReport_,o)&&(i[o]=d,r=!0)}),r&&this.server_.reportStats(i),Pr(this.reportStats_.bind(this),Math.floor(Math.random()*2*SA))}}var on;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(on||(on={}));function Sf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ef(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Nf(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}class cc{constructor(t,i,r){this.path=t,this.affectedTree=i,this.revert=r,this.type=on.ACK_USER_WRITE,this.source=Sf()}operationForChild(t){if(xe(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new ze(t));return new cc(Ae(),i,this.revert)}}else return X(Ne(this.path)===t,"operationForChild called for unrelated child."),new cc(Ge(this.path),this.affectedTree,this.revert)}}class Qr{constructor(t,i){this.source=t,this.path=i,this.type=on.LISTEN_COMPLETE}operationForChild(t){return xe(this.path)?new Qr(this.source,Ae()):new Qr(this.source,Ge(this.path))}}class di{constructor(t,i,r){this.source=t,this.path=i,this.snap=r,this.type=on.OVERWRITE}operationForChild(t){return xe(this.path)?new di(this.source,Ae(),this.snap.getImmediateChild(t)):new di(this.source,Ge(this.path),this.snap)}}class va{constructor(t,i,r){this.source=t,this.path=i,this.children=r,this.type=on.MERGE}operationForChild(t){if(xe(this.path)){const i=this.children.subtree(new ze(t));return i.isEmpty()?null:i.value?new di(this.source,Ae(),i.value):new va(this.source,Ae(),i)}else return X(Ne(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new va(this.source,Ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Os{constructor(t,i,r){this.node_=t,this.fullyInitialized_=i,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(xe(t))return this.isFullyInitialized()&&!this.filtered_;const i=Ne(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class NA{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function TA(s,t,i,r){const o=[],d=[];return t.forEach(f=>{f.type==="child_changed"&&s.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&d.push(pA(f.childName,f.snapshotNode))}),Rr(s,o,"child_removed",t,r,i),Rr(s,o,"child_added",t,r,i),Rr(s,o,"child_moved",d,r,i),Rr(s,o,"child_changed",t,r,i),Rr(s,o,"value",t,r,i),o}function Rr(s,t,i,r,o,d){const f=r.filter(m=>m.type===i);f.sort((m,p)=>wA(s,m,p)),f.forEach(m=>{const p=CA(s,m,d);o.forEach(g=>{g.respondsTo(m.type)&&t.push(g.createEvent(p,s.query_))})})}function CA(s,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,s.index_)),t}function wA(s,t,i){if(t.childName==null||i.childName==null)throw Na("Should only compare child_ events.");const r=new ve(t.childName,t.snapshotNode),o=new ve(i.childName,i.snapshotNode);return s.index_.compare(r,o)}function Nc(s,t){return{eventCache:s,serverCache:t}}function zr(s,t,i,r){return Nc(new Os(t,i,r),s.serverCache)}function rb(s,t,i,r){return Nc(s.eventCache,new Os(t,i,r))}function uc(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function hi(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}let gh;const AA=()=>(gh||(gh=new Rt(hw)),gh);class He{static fromObject(t){let i=new He(null);return gt(t,(r,o)=>{i=i.set(new ze(r),o)}),i}constructor(t,i=AA()){this.value=t,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:Ae(),value:this.value};if(xe(t))return null;{const r=Ne(t),o=this.children.get(r);if(o!==null){const d=o.findRootMostMatchingPathAndValue(Ge(t),i);return d!=null?{path:We(new ze(r),d.path),value:d.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(xe(t))return this;{const i=Ne(t),r=this.children.get(i);return r!==null?r.subtree(Ge(t)):new He(null)}}set(t,i){if(xe(t))return new He(i,this.children);{const r=Ne(t),d=(this.children.get(r)||new He(null)).set(Ge(t),i),f=this.children.insert(r,d);return new He(this.value,f)}}remove(t){if(xe(t))return this.children.isEmpty()?new He(null):new He(null,this.children);{const i=Ne(t),r=this.children.get(i);if(r){const o=r.remove(Ge(t));let d;return o.isEmpty()?d=this.children.remove(i):d=this.children.insert(i,o),this.value===null&&d.isEmpty()?new He(null):new He(this.value,d)}else return this}}get(t){if(xe(t))return this.value;{const i=Ne(t),r=this.children.get(i);return r?r.get(Ge(t)):null}}setTree(t,i){if(xe(t))return i;{const r=Ne(t),d=(this.children.get(r)||new He(null)).setTree(Ge(t),i);let f;return d.isEmpty()?f=this.children.remove(r):f=this.children.insert(r,d),new He(this.value,f)}}fold(t){return this.fold_(Ae(),t)}fold_(t,i){const r={};return this.children.inorderTraversal((o,d)=>{r[o]=d.fold_(We(t,o),i)}),i(t,this.value,r)}findOnPath(t,i){return this.findOnPath_(t,Ae(),i)}findOnPath_(t,i,r){const o=this.value?r(i,this.value):!1;if(o)return o;if(xe(t))return null;{const d=Ne(t),f=this.children.get(d);return f?f.findOnPath_(Ge(t),We(i,d),r):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,Ae(),i)}foreachOnPath_(t,i,r){if(xe(t))return this;{this.value&&r(i,this.value);const o=Ne(t),d=this.children.get(o);return d?d.foreachOnPath_(Ge(t),We(i,o),r):new He(null)}}foreach(t){this.foreach_(Ae(),t)}foreach_(t,i){this.children.inorderTraversal((r,o)=>{o.foreach_(We(t,r),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,r)=>{r.value&&t(i,r.value)})}}class cn{constructor(t){this.writeTree_=t}static empty(){return new cn(new He(null))}}function Br(s,t,i){if(xe(t))return new cn(new He(i));{const r=s.writeTree_.findRootMostValueAndPath(t);if(r!=null){const o=r.path;let d=r.value;const f=bt(o,t);return d=d.updateChild(f,i),new cn(s.writeTree_.set(o,d))}else{const o=new He(i),d=s.writeTree_.setTree(t,o);return new cn(d)}}}function kh(s,t,i){let r=s;return gt(i,(o,d)=>{r=Br(r,We(t,o),d)}),r}function ay(s,t){if(xe(t))return cn.empty();{const i=s.writeTree_.setTree(t,new He(null));return new cn(i)}}function Lh(s,t){return yi(s,t)!=null}function yi(s,t){const i=s.writeTree_.findRootMostValueAndPath(t);return i!=null?s.writeTree_.get(i.path).getChild(bt(i.path,t)):null}function ry(s){const t=[],i=s.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Ke,(r,o)=>{t.push(new ve(r,o))}):s.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&t.push(new ve(r,o.value))}),t}function js(s,t){if(xe(t))return s;{const i=yi(s,t);return i!=null?new cn(new He(i)):new cn(s.writeTree_.subtree(t))}}function Uh(s){return s.writeTree_.isEmpty()}function ya(s,t){return lb(Ae(),s.writeTree_,t)}function lb(s,t,i){if(t.value!=null)return i.updateChild(s,t.value);{let r=null;return t.children.inorderTraversal((o,d)=>{o===".priority"?(X(d.value!==null,"Priority writes must always be leaf nodes"),r=d.value):i=lb(We(s,o),d,i)}),!i.getChild(s).isEmpty()&&r!==null&&(i=i.updateChild(We(s,".priority"),r)),i}}function Tc(s,t){return db(t,s)}function jA(s,t,i,r,o){X(r>s.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),s.allWrites.push({path:t,snap:i,writeId:r,visible:o}),o&&(s.visibleWrites=Br(s.visibleWrites,t,i)),s.lastWriteId=r}function RA(s,t,i,r){X(r>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:t,children:i,writeId:r,visible:!0}),s.visibleWrites=kh(s.visibleWrites,t,i),s.lastWriteId=r}function DA(s,t){for(let i=0;i<s.allWrites.length;i++){const r=s.allWrites[i];if(r.writeId===t)return r}return null}function OA(s,t){const i=s.allWrites.findIndex(m=>m.writeId===t);X(i>=0,"removeWrite called with nonexistent writeId.");const r=s.allWrites[i];s.allWrites.splice(i,1);let o=r.visible,d=!1,f=s.allWrites.length-1;for(;o&&f>=0;){const m=s.allWrites[f];m.visible&&(f>=i&&IA(m,r.path)?o=!1:Zt(r.path,m.path)&&(d=!0)),f--}if(o){if(d)return MA(s),!0;if(r.snap)s.visibleWrites=ay(s.visibleWrites,r.path);else{const m=r.children;gt(m,p=>{s.visibleWrites=ay(s.visibleWrites,We(r.path,p))})}return!0}else return!1}function IA(s,t){if(s.snap)return Zt(s.path,t);for(const i in s.children)if(s.children.hasOwnProperty(i)&&Zt(We(s.path,i),t))return!0;return!1}function MA(s){s.visibleWrites=ob(s.allWrites,kA,Ae()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function kA(s){return s.visible}function ob(s,t,i){let r=cn.empty();for(let o=0;o<s.length;++o){const d=s[o];if(t(d)){const f=d.path;let m;if(d.snap)Zt(i,f)?(m=bt(i,f),r=Br(r,m,d.snap)):Zt(f,i)&&(m=bt(f,i),r=Br(r,Ae(),d.snap.getChild(m)));else if(d.children){if(Zt(i,f))m=bt(i,f),r=kh(r,m,d.children);else if(Zt(f,i))if(m=bt(f,i),xe(m))r=kh(r,Ae(),d.children);else{const p=fa(d.children,Ne(m));if(p){const g=p.getChild(Ge(m));r=Br(r,Ae(),g)}}}else throw Na("WriteRecord should have .snap or .children")}}return r}function cb(s,t,i,r,o){if(!r&&!o){const d=yi(s.visibleWrites,t);if(d!=null)return d;{const f=js(s.visibleWrites,t);if(Uh(f))return i;if(i==null&&!Lh(f,Ae()))return null;{const m=i||he.EMPTY_NODE;return ya(f,m)}}}else{const d=js(s.visibleWrites,t);if(!o&&Uh(d))return i;if(!o&&i==null&&!Lh(d,Ae()))return null;{const f=function(g){return(g.visible||o)&&(!r||!~r.indexOf(g.writeId))&&(Zt(g.path,t)||Zt(t,g.path))},m=ob(s.allWrites,f,t),p=i||he.EMPTY_NODE;return ya(m,p)}}}function LA(s,t,i){let r=he.EMPTY_NODE;const o=yi(s.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Ke,(d,f)=>{r=r.updateImmediateChild(d,f)}),r;if(i){const d=js(s.visibleWrites,t);return i.forEachChild(Ke,(f,m)=>{const p=ya(js(d,new ze(f)),m);r=r.updateImmediateChild(f,p)}),ry(d).forEach(f=>{r=r.updateImmediateChild(f.name,f.node)}),r}else{const d=js(s.visibleWrites,t);return ry(d).forEach(f=>{r=r.updateImmediateChild(f.name,f.node)}),r}}function UA(s,t,i,r,o){X(r||o,"Either existingEventSnap or existingServerSnap must exist");const d=We(t,i);if(Lh(s.visibleWrites,d))return null;{const f=js(s.visibleWrites,d);return Uh(f)?o.getChild(i):ya(f,o.getChild(i))}}function PA(s,t,i,r){const o=We(t,i),d=yi(s.visibleWrites,o);if(d!=null)return d;if(r.isCompleteForChild(i)){const f=js(s.visibleWrites,o);return ya(f,r.getNode().getImmediateChild(i))}else return null}function zA(s,t){return yi(s.visibleWrites,t)}function BA(s,t,i,r,o,d,f){let m;const p=js(s.visibleWrites,t),g=yi(p,Ae());if(g!=null)m=g;else if(i!=null)m=ya(p,i);else return[];if(m=m.withIndex(f),!m.isEmpty()&&!m.isLeafNode()){const y=[],b=f.getCompare(),x=d?m.getReverseIteratorFrom(r,f):m.getIteratorFrom(r,f);let C=x.getNext();for(;C&&y.length<o;)b(C,r)!==0&&y.push(C),C=x.getNext();return y}else return[]}function HA(){return{visibleWrites:cn.empty(),allWrites:[],lastWriteId:-1}}function dc(s,t,i,r){return cb(s.writeTree,s.treePath,t,i,r)}function Tf(s,t){return LA(s.writeTree,s.treePath,t)}function ly(s,t,i,r){return UA(s.writeTree,s.treePath,t,i,r)}function hc(s,t){return zA(s.writeTree,We(s.treePath,t))}function GA(s,t,i,r,o,d){return BA(s.writeTree,s.treePath,t,i,r,o,d)}function Cf(s,t,i){return PA(s.writeTree,s.treePath,t,i)}function ub(s,t){return db(We(s.treePath,t),s.writeTree)}function db(s,t){return{treePath:s,writeTree:t}}class FA{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,r=t.childName;X(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),X(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const d=o.type;if(i==="child_added"&&d==="child_removed")this.changeMap.set(r,Wr(r,t.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&d==="child_added")this.changeMap.delete(r);else if(i==="child_removed"&&d==="child_changed")this.changeMap.set(r,Xr(r,o.oldSnap));else if(i==="child_changed"&&d==="child_added")this.changeMap.set(r,_a(r,t.snapshotNode));else if(i==="child_changed"&&d==="child_changed")this.changeMap.set(r,Wr(r,t.snapshotNode,o.oldSnap));else throw Na("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}class qA{getCompleteChild(t){return null}getChildAfterChild(t,i,r){return null}}const hb=new qA;class wf{constructor(t,i,r=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=r}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Os(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Cf(this.writes_,t,r)}}getChildAfterChild(t,i,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:hi(this.viewCache_),d=GA(this.writes_,o,i,1,r,t);return d.length===0?null:d[0]}}function VA(s){return{filter:s}}function YA(s,t){X(t.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),X(t.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function XA(s,t,i,r,o){const d=new FA;let f,m;if(i.type===on.OVERWRITE){const g=i;g.source.fromUser?f=Ph(s,t,g.path,g.snap,r,o,d):(X(g.source.fromServer,"Unknown source."),m=g.source.tagged||t.serverCache.isFiltered()&&!xe(g.path),f=fc(s,t,g.path,g.snap,r,o,m,d))}else if(i.type===on.MERGE){const g=i;g.source.fromUser?f=KA(s,t,g.path,g.children,r,o,d):(X(g.source.fromServer,"Unknown source."),m=g.source.tagged||t.serverCache.isFiltered(),f=zh(s,t,g.path,g.children,r,o,m,d))}else if(i.type===on.ACK_USER_WRITE){const g=i;g.revert?f=ZA(s,t,g.path,r,o,d):f=QA(s,t,g.path,g.affectedTree,r,o,d)}else if(i.type===on.LISTEN_COMPLETE)f=$A(s,t,i.path,r,d);else throw Na("Unknown operation type: "+i.type);const p=d.getChanges();return WA(t,f,p),{viewCache:f,changes:p}}function WA(s,t,i){const r=t.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),d=uc(s);(i.length>0||!s.eventCache.isFullyInitialized()||o&&!r.getNode().equals(d)||!r.getNode().getPriority().equals(d.getPriority()))&&i.push(ib(uc(t)))}}function fb(s,t,i,r,o,d){const f=t.eventCache;if(hc(r,i)!=null)return t;{let m,p;if(xe(i))if(X(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=hi(t),y=g instanceof he?g:he.EMPTY_NODE,b=Tf(r,y);m=s.filter.updateFullNode(t.eventCache.getNode(),b,d)}else{const g=dc(r,hi(t));m=s.filter.updateFullNode(t.eventCache.getNode(),g,d)}else{const g=Ne(i);if(g===".priority"){X(Ds(i)===1,"Can't have a priority with additional path components");const y=f.getNode();p=t.serverCache.getNode();const b=ly(r,i,y,p);b!=null?m=s.filter.updatePriority(y,b):m=f.getNode()}else{const y=Ge(i);let b;if(f.isCompleteForChild(g)){p=t.serverCache.getNode();const x=ly(r,i,f.getNode(),p);x!=null?b=f.getNode().getImmediateChild(g).updateChild(y,x):b=f.getNode().getImmediateChild(g)}else b=Cf(r,g,t.serverCache);b!=null?m=s.filter.updateChild(f.getNode(),g,b,y,o,d):m=f.getNode()}}return zr(t,m,f.isFullyInitialized()||xe(i),s.filter.filtersNodes())}}function fc(s,t,i,r,o,d,f,m){const p=t.serverCache;let g;const y=f?s.filter:s.filter.getIndexedFilter();if(xe(i))g=y.updateFullNode(p.getNode(),r,null);else if(y.filtersNodes()&&!p.isFiltered()){const C=p.getNode().updateChild(i,r);g=y.updateFullNode(p.getNode(),C,null)}else{const C=Ne(i);if(!p.isCompleteForPath(i)&&Ds(i)>1)return t;const N=Ge(i),U=p.getNode().getImmediateChild(C).updateChild(N,r);C===".priority"?g=y.updatePriority(p.getNode(),U):g=y.updateChild(p.getNode(),C,U,N,hb,null)}const b=rb(t,g,p.isFullyInitialized()||xe(i),y.filtersNodes()),x=new wf(o,b,d);return fb(s,b,i,o,x,m)}function Ph(s,t,i,r,o,d,f){const m=t.eventCache;let p,g;const y=new wf(o,t,d);if(xe(i))g=s.filter.updateFullNode(t.eventCache.getNode(),r,f),p=zr(t,g,!0,s.filter.filtersNodes());else{const b=Ne(i);if(b===".priority")g=s.filter.updatePriority(t.eventCache.getNode(),r),p=zr(t,g,m.isFullyInitialized(),m.isFiltered());else{const x=Ge(i),C=m.getNode().getImmediateChild(b);let N;if(xe(x))N=r;else{const P=y.getCompleteChild(b);P!=null?_f(x)===".priority"&&P.getChild(Q0(x)).isEmpty()?N=P:N=P.updateChild(x,r):N=he.EMPTY_NODE}if(C.equals(N))p=t;else{const P=s.filter.updateChild(m.getNode(),b,N,x,y,f);p=zr(t,P,m.isFullyInitialized(),s.filter.filtersNodes())}}}return p}function oy(s,t){return s.eventCache.isCompleteForChild(t)}function KA(s,t,i,r,o,d,f){let m=t;return r.foreach((p,g)=>{const y=We(i,p);oy(t,Ne(y))&&(m=Ph(s,m,y,g,o,d,f))}),r.foreach((p,g)=>{const y=We(i,p);oy(t,Ne(y))||(m=Ph(s,m,y,g,o,d,f))}),m}function cy(s,t,i){return i.foreach((r,o)=>{t=t.updateChild(r,o)}),t}function zh(s,t,i,r,o,d,f,m){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let p=t,g;xe(i)?g=r:g=new He(null).setTree(i,r);const y=t.serverCache.getNode();return g.children.inorderTraversal((b,x)=>{if(y.hasChild(b)){const C=t.serverCache.getNode().getImmediateChild(b),N=cy(s,C,x);p=fc(s,p,new ze(b),N,o,d,f,m)}}),g.children.inorderTraversal((b,x)=>{const C=!t.serverCache.isCompleteForChild(b)&&x.value===null;if(!y.hasChild(b)&&!C){const N=t.serverCache.getNode().getImmediateChild(b),P=cy(s,N,x);p=fc(s,p,new ze(b),P,o,d,f,m)}}),p}function QA(s,t,i,r,o,d,f){if(hc(o,i)!=null)return t;const m=t.serverCache.isFiltered(),p=t.serverCache;if(r.value!=null){if(xe(i)&&p.isFullyInitialized()||p.isCompleteForPath(i))return fc(s,t,i,p.getNode().getChild(i),o,d,m,f);if(xe(i)){let g=new He(null);return p.getNode().forEachChild(ha,(y,b)=>{g=g.set(new ze(y),b)}),zh(s,t,i,g,o,d,m,f)}else return t}else{let g=new He(null);return r.foreach((y,b)=>{const x=We(i,y);p.isCompleteForPath(x)&&(g=g.set(y,p.getNode().getChild(x)))}),zh(s,t,i,g,o,d,m,f)}}function $A(s,t,i,r,o){const d=t.serverCache,f=rb(t,d.getNode(),d.isFullyInitialized()||xe(i),d.isFiltered());return fb(s,f,i,r,hb,o)}function ZA(s,t,i,r,o,d){let f;if(hc(r,i)!=null)return t;{const m=new wf(r,t,o),p=t.eventCache.getNode();let g;if(xe(i)||Ne(i)===".priority"){let y;if(t.serverCache.isFullyInitialized())y=dc(r,hi(t));else{const b=t.serverCache.getNode();X(b instanceof he,"serverChildren would be complete if leaf node"),y=Tf(r,b)}y=y,g=s.filter.updateFullNode(p,y,d)}else{const y=Ne(i);let b=Cf(r,y,t.serverCache);b==null&&t.serverCache.isCompleteForChild(y)&&(b=p.getImmediateChild(y)),b!=null?g=s.filter.updateChild(p,y,b,Ge(i),m,d):t.eventCache.getNode().hasChild(y)?g=s.filter.updateChild(p,y,he.EMPTY_NODE,Ge(i),m,d):g=p,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(f=dc(r,hi(t)),f.isLeafNode()&&(g=s.filter.updateFullNode(g,f,d)))}return f=t.serverCache.isFullyInitialized()||hc(r,Ae())!=null,zr(t,g,f,s.filter.filtersNodes())}}class JA{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new bf(r.getIndex()),d=_A(r);this.processor_=VA(d);const f=i.serverCache,m=i.eventCache,p=o.updateFullNode(he.EMPTY_NODE,f.getNode(),null),g=d.updateFullNode(he.EMPTY_NODE,m.getNode(),null),y=new Os(p,f.isFullyInitialized(),o.filtersNodes()),b=new Os(g,m.isFullyInitialized(),d.filtersNodes());this.viewCache_=Nc(b,y),this.eventGenerator_=new NA(this.query_)}get query(){return this.query_}}function ej(s){return s.viewCache_.serverCache.getNode()}function tj(s){return uc(s.viewCache_)}function nj(s,t){const i=hi(s.viewCache_);return i&&(s.query._queryParams.loadsAllData()||!xe(t)&&!i.getImmediateChild(Ne(t)).isEmpty())?i.getChild(t):null}function uy(s){return s.eventRegistrations_.length===0}function sj(s,t){s.eventRegistrations_.push(t)}function dy(s,t,i){const r=[];if(i){X(t==null,"A cancel should cancel all event registrations.");const o=s.query._path;s.eventRegistrations_.forEach(d=>{const f=d.createCancelEvent(i,o);f&&r.push(f)})}if(t){let o=[];for(let d=0;d<s.eventRegistrations_.length;++d){const f=s.eventRegistrations_[d];if(!f.matches(t))o.push(f);else if(t.hasAnyCallback()){o=o.concat(s.eventRegistrations_.slice(d+1));break}}s.eventRegistrations_=o}else s.eventRegistrations_=[];return r}function hy(s,t,i,r){t.type===on.MERGE&&t.source.queryId!==null&&(X(hi(s.viewCache_),"We should always have a full cache before handling merges"),X(uc(s.viewCache_),"Missing event cache, even though we have a server cache"));const o=s.viewCache_,d=XA(s.processor_,o,t,i,r);return YA(s.processor_,d.viewCache),X(d.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=d.viewCache,mb(s,d.changes,d.viewCache.eventCache.getNode(),null)}function ij(s,t){const i=s.viewCache_.eventCache,r=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Ke,(d,f)=>{r.push(_a(d,f))}),i.isFullyInitialized()&&r.push(ib(i.getNode())),mb(s,r,i.getNode(),t)}function mb(s,t,i,r){const o=r?[r]:s.eventRegistrations_;return TA(s.eventGenerator_,t,i,o)}let mc;class pb{constructor(){this.views=new Map}}function aj(s){X(!mc,"__referenceConstructor has already been defined"),mc=s}function rj(){return X(mc,"Reference.ts has not been loaded"),mc}function lj(s){return s.views.size===0}function Af(s,t,i,r){const o=t.source.queryId;if(o!==null){const d=s.views.get(o);return X(d!=null,"SyncTree gave us an op for an invalid query."),hy(d,t,i,r)}else{let d=[];for(const f of s.views.values())d=d.concat(hy(f,t,i,r));return d}}function gb(s,t,i,r,o){const d=t._queryIdentifier,f=s.views.get(d);if(!f){let m=dc(i,o?r:null),p=!1;m?p=!0:r instanceof he?(m=Tf(i,r),p=!1):(m=he.EMPTY_NODE,p=!1);const g=Nc(new Os(m,p,!1),new Os(r,o,!1));return new JA(t,g)}return f}function oj(s,t,i,r,o,d){const f=gb(s,t,r,o,d);return s.views.has(t._queryIdentifier)||s.views.set(t._queryIdentifier,f),sj(f,i),ij(f,i)}function cj(s,t,i,r){const o=t._queryIdentifier,d=[];let f=[];const m=Is(s);if(o==="default")for(const[p,g]of s.views.entries())f=f.concat(dy(g,i,r)),uy(g)&&(s.views.delete(p),g.query._queryParams.loadsAllData()||d.push(g.query));else{const p=s.views.get(o);p&&(f=f.concat(dy(p,i,r)),uy(p)&&(s.views.delete(o),p.query._queryParams.loadsAllData()||d.push(p.query)))}return m&&!Is(s)&&d.push(new(rj())(t._repo,t._path)),{removed:d,events:f}}function _b(s){const t=[];for(const i of s.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function Rs(s,t){let i=null;for(const r of s.views.values())i=i||nj(r,t);return i}function vb(s,t){if(t._queryParams.loadsAllData())return Cc(s);{const r=t._queryIdentifier;return s.views.get(r)}}function yb(s,t){return vb(s,t)!=null}function Is(s){return Cc(s)!=null}function Cc(s){for(const t of s.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let pc;function uj(s){X(!pc,"__referenceConstructor has already been defined"),pc=s}function dj(){return X(pc,"Reference.ts has not been loaded"),pc}let hj=1;class fy{constructor(t){this.listenProvider_=t,this.syncPointTree_=new He(null),this.pendingWriteTree_=HA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bb(s,t,i,r,o){return jA(s.pendingWriteTree_,t,i,r,o),o?Ra(s,new di(Sf(),t,i)):[]}function fj(s,t,i,r){RA(s.pendingWriteTree_,t,i,r);const o=He.fromObject(i);return Ra(s,new va(Sf(),t,o))}function Ns(s,t,i=!1){const r=DA(s.pendingWriteTree_,t);if(OA(s.pendingWriteTree_,t)){let d=new He(null);return r.snap!=null?d=d.set(Ae(),!0):gt(r.children,f=>{d=d.set(new ze(f),!0)}),Ra(s,new cc(r.path,d,i))}else return[]}function ul(s,t,i){return Ra(s,new di(Ef(),t,i))}function mj(s,t,i){const r=He.fromObject(i);return Ra(s,new va(Ef(),t,r))}function pj(s,t){return Ra(s,new Qr(Ef(),t))}function gj(s,t,i){const r=Rf(s,i);if(r){const o=Df(r),d=o.path,f=o.queryId,m=bt(d,t),p=new Qr(Nf(f),m);return Of(s,d,p)}else return[]}function xb(s,t,i,r,o=!1){const d=t._path,f=s.syncPointTree_.get(d);let m=[];if(f&&(t._queryIdentifier==="default"||yb(f,t))){const p=cj(f,t,i,r);lj(f)&&(s.syncPointTree_=s.syncPointTree_.remove(d));const g=p.removed;if(m=p.events,!o){const y=g.findIndex(x=>x._queryParams.loadsAllData())!==-1,b=s.syncPointTree_.findOnPath(d,(x,C)=>Is(C));if(y&&!b){const x=s.syncPointTree_.subtree(d);if(!x.isEmpty()){const C=bj(x);for(let N=0;N<C.length;++N){const P=C[N],U=P.query,Y=Tb(s,P);s.listenProvider_.startListening(Hr(U),$r(s,U),Y.hashFn,Y.onComplete)}}}!b&&g.length>0&&!r&&(y?s.listenProvider_.stopListening(Hr(t),null):g.forEach(x=>{const C=s.queryToTagMap.get(wc(x));s.listenProvider_.stopListening(Hr(x),C)}))}xj(s,g)}return m}function Sb(s,t,i,r){const o=Rf(s,r);if(o!=null){const d=Df(o),f=d.path,m=d.queryId,p=bt(f,t),g=new di(Nf(m),p,i);return Of(s,f,g)}else return[]}function _j(s,t,i,r){const o=Rf(s,r);if(o){const d=Df(o),f=d.path,m=d.queryId,p=bt(f,t),g=He.fromObject(i),y=new va(Nf(m),p,g);return Of(s,f,y)}else return[]}function vj(s,t,i,r=!1){const o=t._path;let d=null,f=!1;s.syncPointTree_.foreachOnPath(o,(x,C)=>{const N=bt(x,o);d=d||Rs(C,N),f=f||Is(C)});let m=s.syncPointTree_.get(o);m?(f=f||Is(m),d=d||Rs(m,Ae())):(m=new pb,s.syncPointTree_=s.syncPointTree_.set(o,m));let p;d!=null?p=!0:(p=!1,d=he.EMPTY_NODE,s.syncPointTree_.subtree(o).foreachChild((C,N)=>{const P=Rs(N,Ae());P&&(d=d.updateImmediateChild(C,P))}));const g=yb(m,t);if(!g&&!t._queryParams.loadsAllData()){const x=wc(t);X(!s.queryToTagMap.has(x),"View does not exist, but we have a tag");const C=Sj();s.queryToTagMap.set(x,C),s.tagToQueryMap.set(C,x)}const y=Tc(s.pendingWriteTree_,o);let b=oj(m,t,i,y,d,p);if(!g&&!f&&!r){const x=vb(m,t);b=b.concat(Ej(s,t,x))}return b}function jf(s,t,i){const o=s.pendingWriteTree_,d=s.syncPointTree_.findOnPath(t,(f,m)=>{const p=bt(f,t),g=Rs(m,p);if(g)return g});return cb(o,t,d,i,!0)}function yj(s,t){const i=t._path;let r=null;s.syncPointTree_.foreachOnPath(i,(g,y)=>{const b=bt(g,i);r=r||Rs(y,b)});let o=s.syncPointTree_.get(i);o?r=r||Rs(o,Ae()):(o=new pb,s.syncPointTree_=s.syncPointTree_.set(i,o));const d=r!=null,f=d?new Os(r,!0,!1):null,m=Tc(s.pendingWriteTree_,t._path),p=gb(o,t,m,d?f.getNode():he.EMPTY_NODE,d);return tj(p)}function Ra(s,t){return Eb(t,s.syncPointTree_,null,Tc(s.pendingWriteTree_,Ae()))}function Eb(s,t,i,r){if(xe(s.path))return Nb(s,t,i,r);{const o=t.get(Ae());i==null&&o!=null&&(i=Rs(o,Ae()));let d=[];const f=Ne(s.path),m=s.operationForChild(f),p=t.children.get(f);if(p&&m){const g=i?i.getImmediateChild(f):null,y=ub(r,f);d=d.concat(Eb(m,p,g,y))}return o&&(d=d.concat(Af(o,s,r,i))),d}}function Nb(s,t,i,r){const o=t.get(Ae());i==null&&o!=null&&(i=Rs(o,Ae()));let d=[];return t.children.inorderTraversal((f,m)=>{const p=i?i.getImmediateChild(f):null,g=ub(r,f),y=s.operationForChild(f);y&&(d=d.concat(Nb(y,m,p,g)))}),o&&(d=d.concat(Af(o,s,r,i))),d}function Tb(s,t){const i=t.query,r=$r(s,i);return{hashFn:()=>(ej(t)||he.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?gj(s,i._path,r):pj(s,i._path);{const d=pw(o,i);return xb(s,i,null,d)}}}}function $r(s,t){const i=wc(t);return s.queryToTagMap.get(i)}function wc(s){return s._path.toString()+"$"+s._queryIdentifier}function Rf(s,t){return s.tagToQueryMap.get(t)}function Df(s){const t=s.indexOf("$");return X(t!==-1&&t<s.length-1,"Bad queryKey."),{queryId:s.substr(t+1),path:new ze(s.substr(0,t))}}function Of(s,t,i){const r=s.syncPointTree_.get(t);X(r,"Missing sync point for query tag that we're tracking");const o=Tc(s.pendingWriteTree_,t);return Af(r,i,o,null)}function bj(s){return s.fold((t,i,r)=>{if(i&&Is(i))return[Cc(i)];{let o=[];return i&&(o=_b(i)),gt(r,(d,f)=>{o=o.concat(f)}),o}})}function Hr(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(dj())(s._repo,s._path):s}function xj(s,t){for(let i=0;i<t.length;++i){const r=t[i];if(!r._queryParams.loadsAllData()){const o=wc(r),d=s.queryToTagMap.get(o);s.queryToTagMap.delete(o),s.tagToQueryMap.delete(d)}}}function Sj(){return hj++}function Ej(s,t,i){const r=t._path,o=$r(s,t),d=Tb(s,i),f=s.listenProvider_.startListening(Hr(t),o,d.hashFn,d.onComplete),m=s.syncPointTree_.subtree(r);if(o)X(!Is(m.value),"If we're adding a query, it shouldn't be shadowed");else{const p=m.fold((g,y,b)=>{if(!xe(g)&&y&&Is(y))return[Cc(y).query];{let x=[];return y&&(x=x.concat(_b(y).map(C=>C.query))),gt(b,(C,N)=>{x=x.concat(N)}),x}});for(let g=0;g<p.length;++g){const y=p[g];s.listenProvider_.stopListening(Hr(y),$r(s,y))}}return f}class If{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new If(i)}node(){return this.node_}}class Mf{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=We(this.path_,t);return new Mf(this.syncTree_,i)}node(){return jf(this.syncTree_,this.path_)}}const Nj=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},my=function(s,t,i){if(!s||typeof s!="object")return s;if(X(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return Tj(s[".sv"],t,i);if(typeof s[".sv"]=="object")return Cj(s[".sv"],t);X(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},Tj=function(s,t,i){if(s==="timestamp")return i.timestamp;X(!1,"Unexpected server value: "+s)},Cj=function(s,t,i){s.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const r=s.increment;typeof r!="number"&&X(!1,"Unexpected increment value: "+r);const o=t.node();if(X(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const f=o.getValue();return typeof f!="number"?r:f+r},Cb=function(s,t,i,r){return kf(t,new Mf(i,s),r)},wb=function(s,t,i){return kf(s,new If(t),i)};function kf(s,t,i){const r=s.getPriority().val(),o=my(r,t.getImmediateChild(".priority"),i);let d;if(s.isLeafNode()){const f=s,m=my(f.getValue(),t,i);return m!==f.getValue()||o!==f.getPriority().val()?new ot(m,it(o)):s}else{const f=s;return d=f,o!==f.getPriority().val()&&(d=d.updatePriority(new ot(o))),f.forEachChild(Ke,(m,p)=>{const g=kf(p,t.getImmediateChild(m),i);g!==p&&(d=d.updateImmediateChild(m,g))}),d}}class Lf{constructor(t="",i=null,r={children:{},childCount:0}){this.name=t,this.parent=i,this.node=r}}function Uf(s,t){let i=t instanceof ze?t:new ze(t),r=s,o=Ne(i);for(;o!==null;){const d=fa(r.node.children,o)||{children:{},childCount:0};r=new Lf(o,r,d),i=Ge(i),o=Ne(i)}return r}function Da(s){return s.node.value}function Ab(s,t){s.node.value=t,Bh(s)}function jb(s){return s.node.childCount>0}function wj(s){return Da(s)===void 0&&!jb(s)}function Ac(s,t){gt(s.node.children,(i,r)=>{t(new Lf(i,s,r))})}function Rb(s,t,i,r){i&&t(s),Ac(s,o=>{Rb(o,t,!0)})}function Aj(s,t,i){let r=s.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function dl(s){return new ze(s.parent===null?s.name:dl(s.parent)+"/"+s.name)}function Bh(s){s.parent!==null&&jj(s.parent,s.name,s)}function jj(s,t,i){const r=wj(i),o=vn(s.node.children,t);r&&o?(delete s.node.children[t],s.node.childCount--,Bh(s)):!r&&!o&&(s.node.children[t]=i.node,s.node.childCount++,Bh(s))}const Rj=/[\[\].#$\/\u0000-\u001F\u007F]/,Dj=/[\[\].#$\u0000-\u001F\u007F]/,_h=10*1024*1024,Pf=function(s){return typeof s=="string"&&s.length!==0&&!Rj.test(s)},Db=function(s){return typeof s=="string"&&s.length!==0&&!Dj.test(s)},Oj=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Db(s)},Ij=function(s){return s===null||typeof s=="string"||typeof s=="number"&&!hf(s)||s&&typeof s=="object"&&vn(s,".sv")},Ob=function(s,t,i,r){r&&t===void 0||jc(vc(s,"value"),t,i)},jc=function(s,t,i){const r=i instanceof ze?new Kw(i,s):i;if(t===void 0)throw new Error(s+"contains undefined "+ni(r));if(typeof t=="function")throw new Error(s+"contains a function "+ni(r)+" with contents = "+t.toString());if(hf(t))throw new Error(s+"contains "+t.toString()+" "+ni(r));if(typeof t=="string"&&t.length>_h/3&&yc(t)>_h)throw new Error(s+"contains a string greater than "+_h+" utf8 bytes "+ni(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,d=!1;if(gt(t,(f,m)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(d=!0,!Pf(f)))throw new Error(s+" contains an invalid key ("+f+") "+ni(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Qw(r,f),jc(s,m,r),$w(r)}),o&&d)throw new Error(s+' contains ".value" child '+ni(r)+" in addition to actual children.")}},Mj=function(s,t){let i,r;for(i=0;i<t.length;i++){r=t[i];const d=Yr(r);for(let f=0;f<d.length;f++)if(!(d[f]===".priority"&&f===d.length-1)){if(!Pf(d[f]))throw new Error(s+"contains an invalid key ("+d[f]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(Ww);let o=null;for(i=0;i<t.length;i++){if(r=t[i],o!==null&&Zt(o,r))throw new Error(s+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}},kj=function(s,t,i,r){const o=vc(s,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const d=[];gt(t,(f,m)=>{const p=new ze(f);if(jc(o,m,We(i,p)),_f(p)===".priority"&&!Ij(m))throw new Error(o+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");d.push(p)}),Mj(o,d)},Ib=function(s,t,i,r){if(!Db(i))throw new Error(vc(s,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Lj=function(s,t,i,r){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Ib(s,t,i)},zf=function(s,t){if(Ne(t)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},Uj=function(s,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Pf(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!Oj(i))throw new Error(vc(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class Pj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Bf(s,t){let i=null;for(let r=0;r<t.length;r++){const o=t[r],d=o.getPath();i!==null&&!$0(d,i.path)&&(s.eventLists_.push(i),i=null),i===null&&(i={events:[],path:d}),i.events.push(o)}i&&s.eventLists_.push(i)}function tn(s,t,i){Bf(s,i),zj(s,r=>Zt(r,t)||Zt(t,r))}function zj(s,t){s.recursionDepth_++;let i=!0;for(let r=0;r<s.eventLists_.length;r++){const o=s.eventLists_[r];if(o){const d=o.path;t(d)?(Bj(s.eventLists_[r]),s.eventLists_[r]=null):i=!1}}i&&(s.eventLists_=[]),s.recursionDepth_--}function Bj(s){for(let t=0;t<s.events.length;t++){const i=s.events[t];if(i!==null){s.events[t]=null;const r=i.getEventRunner();Ur&&pt("event: "+i.toString()),ja(r)}}}const Hj="repo_interrupt",Gj=25;class Fj{constructor(t,i,r,o){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oc(),this.transactionQueueTree_=new Lf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qj(s,t,i){if(s.stats_=pf(s.repoInfo_),s.forceRestClient_||yw())s.server_=new lc(s.repoInfo_,(r,o,d,f)=>{py(s,r,o,d,f)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>gy(s,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{at(i)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}s.persistentConnection_=new Hn(s.repoInfo_,t,(r,o,d,f)=>{py(s,r,o,d,f)},r=>{gy(s,r)},r=>{Vj(s,r)},s.authTokenProvider_,s.appCheckProvider_,i),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(r=>{s.server_.refreshAuthToken(r)}),s.appCheckProvider_.addTokenChangeListener(r=>{s.server_.refreshAppCheckToken(r.token)}),s.statsReporter_=Nw(s.repoInfo_,()=>new EA(s.stats_,s.server_)),s.infoData_=new vA,s.infoSyncTree_=new fy({startListening:(r,o,d,f)=>{let m=[];const p=s.infoData_.getNode(r._path);return p.isEmpty()||(m=ul(s.infoSyncTree_,r._path,p),setTimeout(()=>{f("ok")},0)),m},stopListening:()=>{}}),Hf(s,"connected",!1),s.serverSyncTree_=new fy({startListening:(r,o,d,f)=>(s.server_.listen(r,d,o,(m,p)=>{const g=f(m,p);tn(s.eventQueue_,r._path,g)}),[]),stopListening:(r,o)=>{s.server_.unlisten(r,o)}})}function Mb(s){const i=s.infoData_.getNode(new ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Rc(s){return Nj({timestamp:Mb(s)})}function py(s,t,i,r,o){s.dataUpdateCount++;const d=new ze(t);i=s.interceptServerDataCallback_?s.interceptServerDataCallback_(t,i):i;let f=[];if(o)if(r){const p=Qo(i,g=>it(g));f=_j(s.serverSyncTree_,d,p,o)}else{const p=it(i);f=Sb(s.serverSyncTree_,d,p,o)}else if(r){const p=Qo(i,g=>it(g));f=mj(s.serverSyncTree_,d,p)}else{const p=it(i);f=ul(s.serverSyncTree_,d,p)}let m=d;f.length>0&&(m=ba(s,d)),tn(s.eventQueue_,m,f)}function gy(s,t){Hf(s,"connected",t),t===!1&&Kj(s)}function Vj(s,t){gt(t,(i,r)=>{Hf(s,i,r)})}function Hf(s,t,i){const r=new ze("/.info/"+t),o=it(i);s.infoData_.updateSnapshot(r,o);const d=ul(s.infoSyncTree_,r,o);tn(s.eventQueue_,r,d)}function Gf(s){return s.nextWriteId_++}function Yj(s,t,i){const r=yj(s.serverSyncTree_,t);return r!=null?Promise.resolve(r):s.server_.get(t).then(o=>{const d=it(o).withIndex(t._queryParams.getIndex());vj(s.serverSyncTree_,t,i,!0);let f;if(t._queryParams.loadsAllData())f=ul(s.serverSyncTree_,t._path,d);else{const m=$r(s.serverSyncTree_,t);f=Sb(s.serverSyncTree_,t._path,d,m)}return tn(s.eventQueue_,t._path,f),xb(s.serverSyncTree_,t,i,null,!0),d},o=>(hl(s,"get for query "+at(t)+" failed: "+o),Promise.reject(new Error(o))))}function Xj(s,t,i,r,o){hl(s,"set",{path:t.toString(),value:i,priority:r});const d=Rc(s),f=it(i,r),m=jf(s.serverSyncTree_,t),p=wb(f,m,d),g=Gf(s),y=bb(s.serverSyncTree_,t,p,g,!0);Bf(s.eventQueue_,y),s.server_.put(t.toString(),f.val(!0),(x,C)=>{const N=x==="ok";N||xt("set at "+t+" failed: "+x);const P=Ns(s.serverSyncTree_,g,!N);tn(s.eventQueue_,t,P),Hh(s,o,x,C)});const b=qf(s,t);ba(s,b),tn(s.eventQueue_,b,[])}function Wj(s,t,i,r){hl(s,"update",{path:t.toString(),value:i});let o=!0;const d=Rc(s),f={};if(gt(i,(m,p)=>{o=!1,f[m]=Cb(We(t,m),it(p),s.serverSyncTree_,d)}),o)pt("update() called with empty data.  Don't do anything."),Hh(s,r,"ok",void 0);else{const m=Gf(s),p=fj(s.serverSyncTree_,t,f,m);Bf(s.eventQueue_,p),s.server_.merge(t.toString(),i,(g,y)=>{const b=g==="ok";b||xt("update at "+t+" failed: "+g);const x=Ns(s.serverSyncTree_,m,!b),C=x.length>0?ba(s,t):t;tn(s.eventQueue_,C,x),Hh(s,r,g,y)}),gt(i,g=>{const y=qf(s,We(t,g));ba(s,y)}),tn(s.eventQueue_,t,[])}}function Kj(s){hl(s,"onDisconnectEvents");const t=Rc(s),i=oc();Mh(s.onDisconnect_,Ae(),(o,d)=>{const f=Cb(o,d,s.serverSyncTree_,t);ab(i,o,f)});let r=[];Mh(i,Ae(),(o,d)=>{r=r.concat(ul(s.serverSyncTree_,o,d));const f=qf(s,o);ba(s,f)}),s.onDisconnect_=oc(),tn(s.eventQueue_,Ae(),r)}function Qj(s){s.persistentConnection_&&s.persistentConnection_.interrupt(Hj)}function hl(s,...t){let i="";s.persistentConnection_&&(i=s.persistentConnection_.id+":"),pt(i,...t)}function Hh(s,t,i,r){t&&ja(()=>{if(i==="ok")t(null);else{const o=(i||"error").toUpperCase();let d=o;r&&(d+=": "+r);const f=new Error(d);f.code=o,t(f)}})}function kb(s,t,i){return jf(s.serverSyncTree_,t,i)||he.EMPTY_NODE}function Ff(s,t=s.transactionQueueTree_){if(t||Dc(s,t),Da(t)){const i=Ub(s,t);X(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&$j(s,dl(t),i)}else jb(t)&&Ac(t,i=>{Ff(s,i)})}function $j(s,t,i){const r=i.map(g=>g.currentWriteId),o=kb(s,t,r);let d=o;const f=o.hash();for(let g=0;g<i.length;g++){const y=i[g];X(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const b=bt(t,y.path);d=d.updateChild(b,y.currentOutputSnapshotRaw)}const m=d.val(!0),p=t;s.server_.put(p.toString(),m,g=>{hl(s,"transaction put response",{path:p.toString(),status:g});let y=[];if(g==="ok"){const b=[];for(let x=0;x<i.length;x++)i[x].status=2,y=y.concat(Ns(s.serverSyncTree_,i[x].currentWriteId)),i[x].onComplete&&b.push(()=>i[x].onComplete(null,!0,i[x].currentOutputSnapshotResolved)),i[x].unwatcher();Dc(s,Uf(s.transactionQueueTree_,t)),Ff(s,s.transactionQueueTree_),tn(s.eventQueue_,t,y);for(let x=0;x<b.length;x++)ja(b[x])}else{if(g==="datastale")for(let b=0;b<i.length;b++)i[b].status===3?i[b].status=4:i[b].status=0;else{xt("transaction at "+p.toString()+" failed: "+g);for(let b=0;b<i.length;b++)i[b].status=4,i[b].abortReason=g}ba(s,t)}},f)}function ba(s,t){const i=Lb(s,t),r=dl(i),o=Ub(s,i);return Zj(s,o,r),r}function Zj(s,t,i){if(t.length===0)return;const r=[];let o=[];const f=t.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<t.length;m++){const p=t[m],g=bt(i,p.path);let y=!1,b;if(X(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)y=!0,b=p.abortReason,o=o.concat(Ns(s.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=Gj)y=!0,b="maxretry",o=o.concat(Ns(s.serverSyncTree_,p.currentWriteId,!0));else{const x=kb(s,p.path,f);p.currentInputSnapshot=x;const C=t[m].update(x.val());if(C!==void 0){jc("transaction failed: Data returned ",C,p.path);let N=it(C);typeof C=="object"&&C!=null&&vn(C,".priority")||(N=N.updatePriority(x.getPriority()));const U=p.currentWriteId,Y=Rc(s),K=wb(N,x,Y);p.currentOutputSnapshotRaw=N,p.currentOutputSnapshotResolved=K,p.currentWriteId=Gf(s),f.splice(f.indexOf(U),1),o=o.concat(bb(s.serverSyncTree_,p.path,K,p.currentWriteId,p.applyLocally)),o=o.concat(Ns(s.serverSyncTree_,U,!0))}else y=!0,b="nodata",o=o.concat(Ns(s.serverSyncTree_,p.currentWriteId,!0))}tn(s.eventQueue_,i,o),o=[],y&&(t[m].status=2,(function(x){setTimeout(x,Math.floor(0))})(t[m].unwatcher),t[m].onComplete&&(b==="nodata"?r.push(()=>t[m].onComplete(null,!1,t[m].currentInputSnapshot)):r.push(()=>t[m].onComplete(new Error(b),!1,null))))}Dc(s,s.transactionQueueTree_);for(let m=0;m<r.length;m++)ja(r[m]);Ff(s,s.transactionQueueTree_)}function Lb(s,t){let i,r=s.transactionQueueTree_;for(i=Ne(t);i!==null&&Da(r)===void 0;)r=Uf(r,i),t=Ge(t),i=Ne(t);return r}function Ub(s,t){const i=[];return Pb(s,t,i),i.sort((r,o)=>r.order-o.order),i}function Pb(s,t,i){const r=Da(t);if(r)for(let o=0;o<r.length;o++)i.push(r[o]);Ac(t,o=>{Pb(s,o,i)})}function Dc(s,t){const i=Da(t);if(i){let r=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[r]=i[o],r++);i.length=r,Ab(t,i.length>0?i:void 0)}Ac(t,r=>{Dc(s,r)})}function qf(s,t){const i=dl(Lb(s,t)),r=Uf(s.transactionQueueTree_,t);return Aj(r,o=>{vh(s,o)}),vh(s,r),Rb(r,o=>{vh(s,o)}),i}function vh(s,t){const i=Da(t);if(i){const r=[];let o=[],d=-1;for(let f=0;f<i.length;f++)i[f].status===3||(i[f].status===1?(X(d===f-1,"All SENT items should be at beginning of queue."),d=f,i[f].status=3,i[f].abortReason="set"):(X(i[f].status===0,"Unexpected transaction status in abort"),i[f].unwatcher(),o=o.concat(Ns(s.serverSyncTree_,i[f].currentWriteId,!0)),i[f].onComplete&&r.push(i[f].onComplete.bind(null,new Error("set"),!1,null))));d===-1?Ab(t,void 0):i.length=d+1,tn(s.eventQueue_,dl(t),o);for(let f=0;f<r.length;f++)ja(r[f])}}function Jj(s){let t="";const i=s.split("/");for(let r=0;r<i.length;r++)if(i[r].length>0){let o=i[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function eR(s){const t={};s.charAt(0)==="?"&&(s=s.substring(1));for(const i of s.split("&")){if(i.length===0)continue;const r=i.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xt(`Invalid query segment '${i}' in query '${s}'`)}return t}const _y=function(s,t){const i=tR(s),r=i.namespace;i.domain==="firebase.com"&&qn(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&i.domain!=="localhost"&&qn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||uw();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new H0(i.host,i.secure,r,o,t,"",r!==i.subdomain),path:new ze(i.pathString)}},tR=function(s){let t="",i="",r="",o="",d="",f=!0,m="https",p=443;if(typeof s=="string"){let g=s.indexOf("//");g>=0&&(m=s.substring(0,g-1),s=s.substring(g+2));let y=s.indexOf("/");y===-1&&(y=s.length);let b=s.indexOf("?");b===-1&&(b=s.length),t=s.substring(0,Math.min(y,b)),y<b&&(o=Jj(s.substring(y,b)));const x=eR(s.substring(Math.min(s.length,b)));g=t.indexOf(":"),g>=0?(f=m==="https"||m==="wss",p=parseInt(t.substring(g+1),10)):g=t.length;const C=t.slice(0,g);if(C.toLowerCase()==="localhost")i="localhost";else if(C.split(".").length<=2)i=C;else{const N=t.indexOf(".");r=t.substring(0,N).toLowerCase(),i=t.substring(N+1),d=r}"ns"in x&&(d=x.ns)}return{host:t,port:p,domain:i,subdomain:r,secure:f,scheme:m,pathString:o,namespace:d}};const vy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",nR=(function(){let s=0;const t=[];return function(i){const r=i===s;s=i;let o;const d=new Array(8);for(o=7;o>=0;o--)d[o]=vy.charAt(i%64),i=Math.floor(i/64);X(i===0,"Cannot push at time == 0");let f=d.join("");if(r){for(o=11;o>=0&&t[o]===63;o--)t[o]=0;t[o]++}else for(o=0;o<12;o++)t[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)f+=vy.charAt(t[o]);return X(f.length===20,"nextPushId: Length should be 20."),f}})();class sR{constructor(t,i,r,o){this.eventType=t,this.eventRegistration=i,this.snapshot=r,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+at(this.snapshot.exportVal())}}class iR{constructor(t,i,r){this.eventRegistration=t,this.error=i,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class aR{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Vf{constructor(t,i,r,o){this._repo=t,this._path=i,this._queryParams=r,this._orderByCalled=o}get key(){return xe(this._path)?null:_f(this._path)}get ref(){return new Xn(this._repo,this._path)}get _queryIdentifier(){const t=sy(this._queryParams),i=ff(t);return i==="{}"?"default":i}get _queryObject(){return sy(this._queryParams)}isEqual(t){if(t=_t(t),!(t instanceof Vf))return!1;const i=this._repo===t._repo,r=$0(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return i&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+Xw(this._path)}}class Xn extends Vf{constructor(t,i){super(t,i,new xf,!1)}get parent(){const t=Q0(this._path);return t===null?null:new Xn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Zr{constructor(t,i,r){this._node=t,this.ref=i,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new ze(t),r=Jr(this.ref,t);return new Zr(this._node.getChild(i),r,Ke)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>t(new Zr(o,Jr(this.ref,r),Ke)))}hasChild(t){const i=new ze(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Jt(s,t){return s=_t(s),s._checkNotDeleted("ref"),t!==void 0?Jr(s._root,t):s._root}function Jr(s,t){return s=_t(s),Ne(s._path)===null?Lj("child","path",t):Ib("child","path",t),new Xn(s._repo,We(s._path,t))}function rR(s,t){s=_t(s),zf("push",s._path),Ob("push",t,s._path,!0);const i=Mb(s._repo),r=nR(i),o=Jr(s,r),d=Jr(s,r);let f;return f=Promise.resolve(d),o.then=f.then.bind(f),o.catch=f.then.bind(f,void 0),o}function lR(s){return zf("remove",s._path),xa(s,null)}function xa(s,t){s=_t(s),zf("set",s._path),Ob("set",t,s._path,!1);const i=new tl;return Xj(s._repo,s._path,t,null,i.wrapCallback(()=>{})),i.promise}function oR(s,t){kj("update",t,s._path);const i=new tl;return Wj(s._repo,s._path,t,i.wrapCallback(()=>{})),i.promise}function fi(s){s=_t(s);const t=new aR(()=>{}),i=new Yf(t);return Yj(s._repo,s,i).then(r=>new Zr(r,new Xn(s._repo,s._path),s._queryParams.getIndex()))}class Yf{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const r=i._queryParams.getIndex();return new sR("value",this,new Zr(t.snapshotNode,new Xn(i._repo,i._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new iR(this,t,i):null}matches(t){return t instanceof Yf?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}aj(Xn);uj(Xn);const cR="FIREBASE_DATABASE_EMULATOR_HOST",Gh={};let uR=!1;function dR(s,t,i,r){const o=t.lastIndexOf(":"),d=t.substring(0,o),f=Ta(d);s.repoInfo_=new H0(t,f,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,i),r&&(s.authTokenProvider_=r)}function hR(s,t,i,r,o){let d=r||s.options.databaseURL;d===void 0&&(s.options.projectId||qn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pt("Using default host for project ",s.options.projectId),d=`${s.options.projectId}-default-rtdb.firebaseio.com`);let f=_y(d,o),m=f.repoInfo,p;typeof process<"u"&&zv&&(p=zv[cR]),p?(d=`http://${p}?ns=${m.namespace}`,f=_y(d,o),m=f.repoInfo):f.repoInfo.secure;const g=new xw(s.name,s.options,t);Uj("Invalid Firebase Database URL",f),xe(f.path)||qn("Database URL must point to the root of a Firebase Database (not including a child path).");const y=mR(m,s,g,new bw(s,i));return new pR(y,s)}function fR(s,t){const i=Gh[t];(!i||i[s.key]!==s)&&qn(`Database ${t}(${s.repoInfo_}) has already been deleted.`),Qj(s),delete i[s.key]}function mR(s,t,i,r){let o=Gh[t.name];o||(o={},Gh[t.name]=o);let d=o[s.toURLString()];return d&&qn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new Fj(s,uR,i,r),o[s.toURLString()]=d,d}class pR{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xn(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(fR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&qn("Cannot call "+t+" on a deleted database.")}}function gR(s=qy(),t){const i=nf(s,"database").getImmediate({identifier:t});if(!i._instanceStarted){const r=fN("database");r&&_R(i,...r)}return i}function _R(s,t,i,r={}){s=_t(s),s._checkNotDeleted("useEmulator");const o=`${t}:${i}`,d=s._repoInternal;if(s._instanceStarted){if(o===s._repoInternal.repoInfo_.host&&ri(r,d.repoInfo_.emulatorOptions))return;qn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(d.repoInfo_.nodeAdmin)r.mockUserToken&&qn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new Yo(Yo.OWNER);else if(r.mockUserToken){const m=typeof r.mockUserToken=="string"?r.mockUserToken:mN(r.mockUserToken,s.app.options.projectId);f=new Yo(m)}Ta(t)&&(Uy(t),Py("Database",!0)),dR(d,o,r,f)}function vR(s){iw(wa),ma(new li("database",(t,{instanceIdentifier:i})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),d=t.getProvider("app-check-internal");return hR(r,o,d,i)},"PUBLIC").setMultipleInstances(!0)),As(Bv,Hv,s),As(Bv,Hv,"esm2020")}Hn.prototype.simpleListen=function(s,t){this.sendRequest("q",{p:s},t)};Hn.prototype.echo=function(s,t){this.sendRequest("echo",{d:s},t)};vR();var yR="firebase",bR="12.9.0";As(yR,bR,"app");const xR={apiKey:"AIzaSyBhZ7XGKFde4UWy5H3i9NzVGYN-joVvoSY",authDomain:"pl-football-fantasy.firebaseapp.com",databaseURL:"https://pl-football-fantasy-default-rtdb.europe-west1.firebasedatabase.app",projectId:"pl-football-fantasy",storageBucket:"pl-football-fantasy.firebasestorage.app",messagingSenderId:"875638327100",appId:"1:875638327100:web:020b2630584c6d1e6dc039",measurementId:"G-FNBYMP2H7H"},zb=Fy(xR),en=gR(zb),aa=nw(zb),SR="maghovk@gmail.com",Bb=Z.createContext(null);function ER({children:s}){const[t,i]=Z.useState(null),[r,o]=Z.useState(null),[d,f]=Z.useState(!0),m=t?.email===SR;Z.useEffect(()=>qT(aa,async C=>{if(C){const U=(await fi(Jt(en,`users/${C.uid}`))).val()?.fplCode??null;U&&nh(U),o(U),i(C)}else i(null),o(null);f(!1)}),[]);async function p(x,C,N,P){const{user:U}=await PT(aa,C,N);await HT(U,{displayName:x}),await xa(Jt(en,`users/${U.uid}`),{name:x,email:C,fplCode:Number(P),createdAt:new Date().toISOString()}),nh(Number(P)),o(Number(P))}async function g(x){if(!aa.currentUser)return;const C=Number(x);await oR(Jt(en,`users/${aa.currentUser.uid}`),{fplCode:C}),nh(C),o(C)}async function y(x,C){await zT(aa,x,C)}async function b(){await VT(aa)}return c.jsx(Bb.Provider,{value:{user:t,fplCode:r,loading:d,isAdmin:m,register:p,login:y,logout:b,updateFplCode:g},children:s})}function fl(){return Z.useContext(Bb)}const NR=["All","GKP","DEF","MID","FWD"],TR=[{value:"xpts",label:"xPts"},{value:"form",label:"Form"},{value:"totalPoints",label:"Total Pts"},{value:"price-asc",label:"Price (low)"},{value:"price-desc",label:"Price (high)"},{value:"selectedByPercent",label:"Ownership %"},{value:"netTransfersEvent",label:"Transfer Activity"}];function yy({label:s,players:t,selected:i,onChange:r,disabledId:o,groups:d}){return c.jsxs("div",{className:"selector",children:[c.jsx("label",{children:s}),c.jsxs("select",{value:i||"",onChange:f=>r(Number(f.target.value)||null),children:[c.jsx("option",{value:"",children:"Select a player..."}),d?d.map(f=>c.jsx("optgroup",{label:f.label,children:f.players.filter(m=>m.id!==o).map(m=>c.jsxs("option",{value:m.id,children:[m.name," (",m.position,") - ",m.clubShort," - ",m.price,"m"]},m.id))},f.label)):t.filter(f=>f.id!==o).map(f=>c.jsxs("option",{value:f.id,children:[f.name," (",f.position,") - ",f.clubShort," - ",f.price,"m"]},f.id))]})]})}function CR({player:s}){const t=s?.pricePressure;if(!t||t==="stable")return c.jsxs("span",{children:["",s.price,"m"]});const i=t.includes("rising"),r=i?"":"",o=i?"positive":"negative";return c.jsxs("span",{children:["",s.price,"m ",c.jsx("span",{className:o,style:{fontSize:"0.65rem"},children:r})]})}function by({player:s,label:t,teams:i}){const r=Z.useMemo(()=>s?ai(s,s.upcomingFixtures,i,3):null,[s,i]);if(!s)return null;const o=s.upcomingFixtures?.[0];return c.jsxs("div",{className:"player-stat-card",children:[c.jsxs("div",{className:"stat-card-header",children:[c.jsx("span",{className:"stat-card-label",children:t}),c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position})]}),c.jsx("div",{className:"stat-card-name",children:s.name}),c.jsx("div",{className:"stat-card-club",children:s.club}),c.jsxs("div",{className:"stat-card-stats",children:[c.jsxs("div",{className:"stat-card-item",children:[c.jsx("span",{className:"sc-value",children:s.totalPoints}),c.jsx("span",{className:"sc-label",children:"Pts"})]}),c.jsxs("div",{className:"stat-card-item",children:[c.jsx("span",{className:"sc-value",children:s.form}),c.jsx("span",{className:"sc-label",children:"Form"})]}),c.jsxs("div",{className:"stat-card-item",children:[c.jsx("span",{className:"sc-value",children:c.jsx(CR,{player:s})}),c.jsx("span",{className:"sc-label",children:"Price"})]}),c.jsxs("div",{className:"stat-card-item",children:[r?c.jsx("span",{className:"sc-value trade-xpts-value",children:r.avgXpts}):c.jsx("span",{className:"sc-value",children:"-"}),c.jsx("span",{className:"sc-label",children:"xPts"})]}),c.jsxs("div",{className:"stat-card-item",children:[o?c.jsx("span",{className:`sc-value fixture-badge fdr-${o.difficulty}`,children:o.opponent}):c.jsx("span",{className:"sc-value",children:"-"}),c.jsx("span",{className:"sc-label",children:"Next"})]})]}),r?.topReasons?.length>0&&c.jsx("div",{className:"trade-xpts-reasons",children:r.topReasons.map((d,f)=>c.jsx("span",{className:"trade-reason-chip",children:d},f))})]})}function wR({playerOut:s,playerIn:t,gameweeks:i}){const r=s.upcomingFixtures?.slice(0,i)||[],o=t.upcomingFixtures?.slice(0,i)||[],d=[...new Set([...r.map(p=>p.gw),...o.map(p=>p.gw)])].sort((p,g)=>p-g),f=Object.fromEntries(r.map(p=>[p.gw,p])),m=Object.fromEntries(o.map(p=>[p.gw,p]));return c.jsxs("div",{className:"fixture-comparison",children:[c.jsx("h4",{children:"Fixture Comparison"}),c.jsxs("div",{className:"fixture-table",children:[c.jsxs("div",{className:"fixture-row header three-col",children:[c.jsx("span",{children:s.name}),c.jsx("span",{children:"GW"}),c.jsx("span",{children:t.name})]}),d.map(p=>{const g=f[p],y=m[p];return c.jsxs("div",{className:"fixture-row three-col",children:[c.jsx("span",{className:g?`fixture-badge fdr-${g.difficulty}`:"fixture-blank",children:g?g.opponent:"-"}),c.jsxs("span",{className:"fixture-gw",children:["GW",p]}),c.jsx("span",{className:y?`fixture-badge fdr-${y.difficulty}`:"fixture-blank",children:y?y.opponent:"-"})]},p)})]})]})}function AR({result:s,playerOut:t,playerIn:i}){const r=s.recommendation==="Strong Buy"?"strong-buy":s.recommendation==="Avoid"?"avoid":"neutral";return c.jsxs("div",{className:"trade-result",children:[c.jsx("div",{className:`recommendation-badge ${r}`,children:s.recommendation}),c.jsxs("div",{className:"result-metrics",children:[c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Projected xPts Diff"}),c.jsxs("span",{className:`result-value ${s.pointsDiff>0?"positive":s.pointsDiff<0?"negative":""}`,children:[s.pointsDiff>0?"+":"",s.pointsDiff]})]}),c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Form Comparison"}),c.jsxs("span",{className:`result-value ${Number(s.formDiff)>0?"positive":Number(s.formDiff)<0?"negative":""}`,children:[Number(s.formDiff)>0?"+":"",s.formDiff]})]}),c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Price Impact"}),c.jsxs("span",{className:`result-value ${Number(s.priceDiff)<0?"positive":Number(s.priceDiff)>0?"negative":""}`,children:[Number(s.priceDiff)>0?"+":"","",s.priceDiff,"m"]})]}),c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Fixture Swing"}),c.jsxs("span",{className:`result-value ${Number(s.fixtureDiff)>0?"positive":Number(s.fixtureDiff)<0?"negative":""}`,children:[Number(s.fixtureDiff)>0?"+":"",s.fixtureDiff]})]}),c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Risk Rating"}),c.jsx("span",{className:`risk-badge risk-${s.riskLevel.toLowerCase()}`,children:s.riskLevel})]})]}),(i.pricePressure==="rising"||i.pricePressure==="likely-rising")&&c.jsxs("div",{className:"urgency-alert urgency-rising",children:[c.jsx("span",{className:"urgency-icon",children:""}),c.jsxs("span",{className:"urgency-text",children:[i.name," has ",(i.netTransfersEvent||0).toLocaleString()," net transfers in this GW",i.pricePressure==="rising"?"  price rise imminent, act now!":"  trending toward a price rise."]})]}),(t.pricePressure==="falling"||t.pricePressure==="likely-falling")&&c.jsxs("div",{className:"urgency-alert urgency-falling",children:[c.jsx("span",{className:"urgency-icon",children:""}),c.jsxs("span",{className:"urgency-text",children:[t.name," is losing ",Math.abs(t.netTransfersEvent||0).toLocaleString()," net transfers",t.pricePressure==="falling"?"  price drop imminent, sell before value loss!":"  trending toward a price drop."]})]}),c.jsxs("div",{className:"points-projection",children:[c.jsxs("div",{className:"projection-bar",children:[c.jsx("span",{className:"proj-label",children:t.name}),c.jsx("div",{className:"proj-track",children:c.jsxs("div",{className:"proj-fill out",style:{width:`${s.outProjected/Math.max(s.outProjected,s.inProjected)*100}%`},children:[s.outProjected," xPts"]})})]}),c.jsxs("div",{className:"projection-bar",children:[c.jsx("span",{className:"proj-label",children:i.name}),c.jsx("div",{className:"proj-track",children:c.jsxs("div",{className:"proj-fill in",style:{width:`${s.inProjected/Math.max(s.outProjected,s.inProjected)*100}%`},children:[s.inProjected," xPts"]})})]})]}),(s.inReasons?.length>0||s.outReasons?.length>0)&&c.jsxs("div",{className:"trade-reasons-section",children:[s.inReasons?.length>0&&c.jsxs("div",{className:"trade-reasons-group",children:[c.jsx("span",{className:"trade-reasons-label",children:i.name}),c.jsx("div",{className:"trade-reasons-chips",children:s.inReasons.map((o,d)=>c.jsx("span",{className:"trade-reason-chip positive",children:o},d))})]}),s.outReasons?.length>0&&c.jsxs("div",{className:"trade-reasons-group",children:[c.jsx("span",{className:"trade-reasons-label",children:t.name}),c.jsx("div",{className:"trade-reasons-chips",children:s.outReasons.map((o,d)=>c.jsx("span",{className:"trade-reason-chip",children:o},d))})]})]}),c.jsxs("div",{className:"ai-explanation",children:[c.jsx("div",{className:"explanation-header",children:"Analysis"}),c.jsx("p",{children:s.explanation})]})]})}function jR({uid:s}){const[t,i]=Z.useState([]),[r,o]=Z.useState(!0),[d,f]=Z.useState(!1),[m,p]=Z.useState(null),g=Z.useCallback(async()=>{o(!0);try{const[C,N]=await Promise.all([fi(Jt(en,`users/${s}/tradeAnalyses`)),Vn()]),P=N.events.find(M=>M.is_current)?.id||1;p(P);const U=C.val();if(!U){i([]);return}const Y=Object.entries(U).map(([M,D])=>({key:M,...D}));Y.sort((M,D)=>new Date(D.savedAt)-new Date(M.savedAt)),i(Y);const K=Y.filter(M=>!M.outcome&&P>M.gameweek+M.gameweeksToTrack);if(K.length>0){f(!0),await RR(K,P,s);const D=(await fi(Jt(en,`users/${s}/tradeAnalyses`))).val();if(D){const $=Object.entries(D).map(([J,W])=>({key:J,...W})).sort((J,W)=>new Date(W.savedAt)-new Date(J.savedAt));i($)}f(!1)}}catch(C){console.error("Failed to load history:",C)}finally{o(!1)}},[s]);Z.useEffect(()=>{g()},[g]);async function y(C){await lR(Jt(en,`users/${s}/tradeAnalyses/${C}`)),i(N=>N.filter(P=>P.key!==C))}if(r)return c.jsx(gi,{message:"Loading saved analyses..."});if(t.length===0)return c.jsxs("div",{className:"ta-history-empty",children:[c.jsx("div",{className:"placeholder-icon",children:""}),c.jsx("p",{children:"No saved analyses yet"}),c.jsx("p",{className:"ta-history-hint",children:'Analyze a transfer and click "Save Analysis" to track its accuracy over time.'})]});const b=t.filter(C=>C.outcome),x=b.filter(C=>C.outcome?.verdict==="correct").length;return c.jsxs("div",{className:"ta-history",children:[d&&c.jsx("p",{className:"ta-resolving",children:"Calculating outcomes..."}),b.length>0&&c.jsxs("div",{className:"ta-history-stats",children:[c.jsxs("div",{className:"ta-hstat",children:[c.jsx("span",{className:"ta-hstat-num",children:t.length}),c.jsx("span",{className:"ta-hstat-label",children:"Saved"})]}),c.jsxs("div",{className:"ta-hstat",children:[c.jsx("span",{className:"ta-hstat-num",children:b.length}),c.jsx("span",{className:"ta-hstat-label",children:"Completed"})]}),c.jsxs("div",{className:"ta-hstat",children:[c.jsx("span",{className:"ta-hstat-num ta-hstat-pos",children:x}),c.jsx("span",{className:"ta-hstat-label",children:"Correct"})]}),c.jsxs("div",{className:"ta-hstat",children:[c.jsx("span",{className:"ta-hstat-num ta-hstat-neg",children:b.length-x}),c.jsx("span",{className:"ta-hstat-label",children:"Wrong"})]}),c.jsxs("div",{className:"ta-hstat",children:[c.jsxs("span",{className:"ta-hstat-num",children:[b.length>0?Math.round(x/b.length*100):0,"%"]}),c.jsx("span",{className:"ta-hstat-label",children:"Accuracy"})]})]}),c.jsx("div",{className:"ta-history-list",children:t.map(C=>c.jsx(DR,{entry:C,currentGw:m,onDelete:()=>y(C.key)},C.key))})]})}async function RR(s,t,i){const r=new Set;for(const m of s){const p=m.gameweek+1,g=m.gameweek+m.gameweeksToTrack;for(let y=p;y<=Math.min(g,t);y++)r.add(y)}const o={},d=[...r],f=5;for(let m=0;m<d.length;m+=f){const p=d.slice(m,m+f),g=await Promise.all(p.map(y=>gc(y).catch(()=>null)));p.forEach((y,b)=>{g[b]&&(o[y]=g[b])})}for(const m of s){const p=m.gameweek+1,g=m.gameweek+m.gameweeksToTrack;let y=0,b=0;const x=[];for(let U=p;U<=g;U++){const Y=o[U];if(!Y)continue;const K=Y.elements.find(J=>J.id===m.playerIn.id),M=Y.elements.find(J=>J.id===m.playerOut.id),D=K?.stats?.total_points||0,$=M?.stats?.total_points||0;y+=D,b+=$,x.push({gw:U,inPts:D,outPts:$})}const C=m.analysis.recommendation;let N;C==="Strong Buy"?N=y>=b?"correct":"wrong":C==="Avoid"?N=b>=y?"correct":"wrong":N=y>=b?"correct":"wrong";const P={inActual:y,outActual:b,verdict:N,gwBreakdown:x};await xa(Jt(en,`users/${i}/tradeAnalyses/${m.key}/outcome`),P)}}function DR({entry:s,currentGw:t,onDelete:i}){const r=s,o=r.gameweek+r.gameweeksToTrack,d=!r.outcome&&t<=o,f=d?o-t+1:0,m=r.analysis.recommendation==="Strong Buy"?"strong-buy":r.analysis.recommendation==="Avoid"?"avoid":"neutral",p=r.outcome?.verdict==="correct"?"ta-verdict-correct":"ta-verdict-wrong",g=new Date(r.savedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short"});return c.jsxs("div",{className:`ta-hcard ${r.outcome?p:"ta-verdict-pending"}`,children:[c.jsxs("div",{className:"ta-hcard-top",children:[c.jsxs("div",{className:"ta-hcard-meta",children:[c.jsxs("span",{className:"ta-hcard-date",children:[g,"  GW",r.gameweek]}),c.jsxs("span",{className:"ta-hcard-tracking",children:[r.gameweeksToTrack," GW window"]})]}),c.jsxs("div",{className:"ta-hcard-actions",children:[c.jsx("span",{className:`recommendation-badge ${m}`,children:r.analysis.recommendation}),c.jsx("button",{className:"ta-hcard-delete",onClick:i,title:"Delete",children:""})]})]}),c.jsxs("div",{className:"ta-hcard-players",children:[c.jsxs("div",{className:"ta-hcard-player ta-hcard-out",children:[c.jsx("span",{className:"ta-hcard-dir",children:"OUT"}),c.jsx("span",{className:`position-badge position-${r.playerOut.position}`,children:r.playerOut.position}),c.jsx("span",{className:"ta-hcard-name",children:r.playerOut.name}),c.jsx("span",{className:"ta-hcard-club",children:r.playerOut.clubShort})]}),c.jsx("span",{className:"ta-hcard-arrow",children:""}),c.jsxs("div",{className:"ta-hcard-player ta-hcard-in",children:[c.jsx("span",{className:"ta-hcard-dir",children:"IN"}),c.jsx("span",{className:`position-badge position-${r.playerIn.position}`,children:r.playerIn.position}),c.jsx("span",{className:"ta-hcard-name",children:r.playerIn.name}),c.jsx("span",{className:"ta-hcard-club",children:r.playerIn.clubShort})]})]}),c.jsxs("div",{className:"ta-hcard-comparison",children:[c.jsxs("div",{className:"ta-hcard-col",children:[c.jsx("span",{className:"ta-hcard-col-label",children:"Projected"}),c.jsxs("div",{className:"ta-hcard-pts-row",children:[c.jsxs("span",{className:"ta-hcard-pts",children:[r.analysis.outProjected," xPts"]}),c.jsx("span",{className:"ta-hcard-vs",children:"vs"}),c.jsxs("span",{className:"ta-hcard-pts",children:[r.analysis.inProjected," xPts"]})]}),c.jsxs("span",{className:`ta-hcard-diff ${r.analysis.pointsDiff>0?"positive":r.analysis.pointsDiff<0?"negative":""}`,children:[r.analysis.pointsDiff>0?"+":"",r.analysis.pointsDiff," diff"]})]}),r.outcome?c.jsxs("div",{className:"ta-hcard-col",children:[c.jsx("span",{className:"ta-hcard-col-label",children:"Actual"}),c.jsxs("div",{className:"ta-hcard-pts-row",children:[c.jsxs("span",{className:"ta-hcard-pts",children:[r.outcome.outActual," pts"]}),c.jsx("span",{className:"ta-hcard-vs",children:"vs"}),c.jsxs("span",{className:"ta-hcard-pts",children:[r.outcome.inActual," pts"]})]}),c.jsxs("span",{className:`ta-hcard-diff ${r.outcome.inActual-r.outcome.outActual>0?"positive":r.outcome.inActual-r.outcome.outActual<0?"negative":""}`,children:[r.outcome.inActual-r.outcome.outActual>0?"+":"",r.outcome.inActual-r.outcome.outActual," diff"]})]}):c.jsxs("div",{className:"ta-hcard-col ta-hcard-pending",children:[c.jsx("span",{className:"ta-hcard-col-label",children:"Actual"}),c.jsx("span",{className:"ta-hcard-pending-text",children:d?`${f} GW${f>1?"s":""} left`:"Resolving..."})]})]}),r.outcome&&c.jsx("div",{className:`ta-hcard-verdict ${p}`,children:r.outcome.verdict==="correct"?"Prediction Correct":"Prediction Wrong"}),r.outcome?.gwBreakdown?.length>0&&c.jsx("div",{className:"ta-hcard-breakdown",children:r.outcome.gwBreakdown.map(y=>c.jsxs("div",{className:"ta-hcard-gw",children:[c.jsxs("span",{className:"ta-hcard-gw-label",children:["GW",y.gw]}),c.jsx("span",{className:y.outPts>y.inPts?"negative":y.inPts>y.outPts?"positive":"",children:y.outPts}),c.jsx("span",{className:"ta-hcard-gw-sep",children:"vs"}),c.jsx("span",{className:y.inPts>y.outPts?"positive":y.outPts>y.inPts?"negative":"",children:y.inPts})]},y.gw))})]})}function OR({picks:s,onSelect:t}){return!s||s.length===0?null:c.jsxs("div",{className:"trade-top-picks",children:[c.jsx("h4",{children:"Top Picks by xPts"}),c.jsx("div",{className:"top-picks-grid",children:s.map(i=>c.jsxs("button",{className:"top-pick-card",onClick:()=>t(i.id),children:[c.jsxs("div",{className:"top-pick-header",children:[c.jsx("span",{className:`position-badge position-${i.position}`,children:i.position}),c.jsxs("span",{className:"top-pick-xpts",children:[i.xpts," xPts"]})]}),c.jsx("div",{className:"top-pick-name",children:i.name}),c.jsxs("div",{className:"top-pick-meta",children:[i.clubShort,"  ",i.price,"m  ",i.form," form"]}),i.topReasons?.length>0&&c.jsx("div",{className:"top-pick-reasons",children:i.topReasons.slice(0,2).map((r,o)=>c.jsx("span",{className:"trade-reason-chip small",children:r},o))})]},i.id))})]})}function IR({teamData:s,teamLoading:t,teamError:i,teamReload:r}){const{user:o}=fl(),[d,f]=Z.useState("analyze"),[m,p]=Z.useState(null),[g,y]=Z.useState(null),[b,x]=Z.useState(3),[C,N]=Z.useState("All"),[P,U]=Z.useState(""),[Y,K]=Z.useState("xpts"),[M,D]=Z.useState(!1),[$,J]=Z.useState(null),{data:W,loading:ue,error:Re}=Ts(qE),De=t||ue,fe=i||Re,te=Z.useMemo(()=>W?.candidates||[],[W]),oe=Z.useMemo(()=>W?.teams||s?.teams||{},[W,s]),F=Z.useMemo(()=>[...s?.players||[],...s?.bench||[]],[s]),V=Z.useMemo(()=>F.find(A=>A.id===m),[F,m]),I=Z.useMemo(()=>{if(!te.length)return[];let A=te;if(C!=="All"&&(A=A.filter(H=>H.position===C)),P){const H=parseFloat(P);isNaN(H)||(A=A.filter(ee=>ee.price<=H))}const k=[...A];switch(Y){case"xpts":return lv(k,oe,b);case"form":k.sort((H,ee)=>ee.form-H.form);break;case"totalPoints":k.sort((H,ee)=>ee.totalPoints-H.totalPoints);break;case"price-asc":k.sort((H,ee)=>H.price-ee.price);break;case"price-desc":k.sort((H,ee)=>ee.price-H.price);break;case"selectedByPercent":k.sort((H,ee)=>ee.selectedByPercent-H.selectedByPercent);break;case"netTransfersEvent":k.sort((H,ee)=>(ee.netTransfersEvent||0)-(H.netTransfersEvent||0));break}return k},[te,C,P,Y,oe,b]),q=Z.useMemo(()=>te.find(A=>A.id===g),[te,g]),Q=Z.useMemo(()=>!V||!q?null:KE(V,q,b,oe),[V,q,b,oe]),ne=Z.useMemo(()=>{if(!te.length)return[];let A=te;return C!=="All"&&(A=A.filter(k=>k.position===C)),lv(A,oe,b).slice(0,3)},[te,C,oe,b]);function ae(A){if(p(A),A){const k=F.find(H=>H.id===A);k&&N(k.position)}}async function E(){if(!(!o||!Q||!V||!q)){D(!0),J(null);try{const A=rR(Jt(en,`users/${o.uid}/tradeAnalyses`));await xa(A,{savedAt:new Date().toISOString(),gameweek:s.summary.currentGameweek,gameweeksToTrack:b,playerOut:{id:V.id,name:V.name,position:V.position,club:V.club,clubShort:V.clubShort,price:V.price},playerIn:{id:q.id,name:q.name,position:q.position,club:q.club,clubShort:q.clubShort,price:q.price},analysis:{recommendation:Q.recommendation,pointsDiff:Q.pointsDiff,outProjected:Q.outProjected,inProjected:Q.inProjected,riskLevel:Q.riskLevel,explanation:Q.explanation}}),J("Saved! Track it in the History tab."),setTimeout(()=>J(null),3e3)}catch(A){console.error("Save failed:",A),J("Failed to save.")}finally{D(!1)}}}return De?c.jsx(gi,{message:"Loading trade data..."}):fe?c.jsx(Ea,{message:fe,onRetry:r}):c.jsxs("div",{className:"trade-analyzer",children:[c.jsxs("div",{className:"ta-tabs",children:[c.jsx("button",{className:`ta-tab ${d==="analyze"?"active":""}`,onClick:()=>f("analyze"),children:"Analyze"}),c.jsx("button",{className:`ta-tab ${d==="history"?"active":""}`,onClick:()=>f("history"),children:"History"})]}),d==="history"&&o&&c.jsx(jR,{uid:o.uid}),d==="history"&&!o&&c.jsx("div",{className:"ta-history-empty",children:c.jsx("p",{children:"Log in to save and track analyses."})}),d==="analyze"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"trade-controls",children:[c.jsxs("div",{className:"controls-card",children:[c.jsx("h3",{children:"Transfer Setup"}),c.jsx(yy,{label:"Transfer Out",players:F,selected:m,onChange:ae,groups:[{label:"Starting XI",players:s.players||[]},{label:"Bench",players:s.bench||[]}]}),c.jsxs("div",{className:"filter-bar",children:[c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Position"}),c.jsx("div",{className:"filter-buttons",children:NR.map(A=>c.jsx("button",{className:`filter-btn ${C===A?"active":""}`,onClick:()=>N(A),children:A},A))})]}),c.jsxs("div",{className:"filter-row",children:[c.jsxs("div",{className:"filter-group filter-group-sm",children:[c.jsx("label",{children:"Max Price"}),c.jsx("input",{type:"number",className:"filter-input",placeholder:"e.g. 8.0",step:"0.5",min:"3.5",max:"15",value:P,onChange:A=>U(A.target.value)})]}),c.jsxs("div",{className:"filter-group filter-group-sm",children:[c.jsx("label",{children:"Sort By"}),c.jsx("select",{className:"filter-select",value:Y,onChange:A=>K(A.target.value),children:TR.map(A=>c.jsx("option",{value:A.value,children:A.label},A.value))})]})]})]}),c.jsx(yy,{label:`Transfer In (${I.length} players)`,players:I,selected:g,onChange:y}),c.jsxs("div",{className:"gameweeks-selector",children:[c.jsx("label",{children:"Gameweeks to Analyze"}),c.jsx("div",{className:"gw-buttons",children:[1,2,3,4,5].map(A=>c.jsx("button",{className:`gw-btn ${b===A?"active":""}`,onClick:()=>x(A),children:A},A))})]})]}),c.jsx("div",{className:"stat-cards-column",children:V||q?c.jsxs(c.Fragment,{children:[c.jsx(by,{player:V,label:"OUT",teams:oe}),V&&q&&c.jsx("div",{className:"versus-icon",children:"vs"}),c.jsx(by,{player:q,label:"IN",teams:oe})]}):c.jsxs("div",{className:"versus-card",children:[c.jsx("div",{className:"placeholder-icon",children:""}),c.jsx("p",{className:"versus-detail",children:"Select players to compare stats"})]})})]}),Q&&c.jsxs("div",{className:"trade-results",children:[c.jsxs("div",{children:[c.jsx(AR,{result:Q,playerOut:V,playerIn:q}),o&&c.jsxs("div",{className:"ta-save-row",children:[c.jsx("button",{className:"ta-save-btn",onClick:E,disabled:M,children:M?"Saving...":"Save Analysis"}),$&&c.jsx("span",{className:"ta-save-msg",children:$})]})]}),c.jsx(wR,{playerOut:V,playerIn:q,gameweeks:b})]}),!m&&!g&&c.jsxs(c.Fragment,{children:[c.jsx(OR,{picks:ne,onSelect:y}),c.jsxs("div",{className:"trade-placeholder",children:[c.jsx("div",{className:"placeholder-icon",children:""}),c.jsx("p",{children:"Select players above to analyze a potential transfer"})]})]})]})]})}function MR(s){return s?new Date(s).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""}function kR(s){return s?new Date(s).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"TBD"}function LR({match:s}){return c.jsxs("div",{className:"match-row",children:[c.jsxs("div",{className:"match-team home",children:[c.jsx("span",{className:"team-full",children:s.homeTeam}),c.jsx("span",{className:"team-short",children:s.homeShort}),c.jsx("span",{className:`fdr-badge fdr-${s.homeDifficulty}`,children:s.homeDifficulty})]}),c.jsx("div",{className:"match-vs",children:"vs"}),c.jsxs("div",{className:"match-team away",children:[c.jsx("span",{className:`fdr-badge fdr-${s.awayDifficulty}`,children:s.awayDifficulty}),c.jsx("span",{className:"team-full",children:s.awayTeam}),c.jsx("span",{className:"team-short",children:s.awayShort})]}),c.jsx("div",{className:"match-kickoff",children:kR(s.kickoff)})]})}function UR({pick:s}){return c.jsxs("div",{className:"pick-card",children:[c.jsxs("div",{className:"pick-top",children:[c.jsx("span",{className:`pick-pos position-badge position-${s.position}`,children:s.position}),c.jsxs("span",{className:"pick-price",children:["",s.price,"m"]})]}),c.jsx("div",{className:"pick-name",children:s.name}),c.jsx("div",{className:"pick-club",children:s.club}),c.jsxs("div",{className:"pick-details",children:[c.jsxs("div",{className:"pick-stat",children:[c.jsx("span",{className:"pick-stat-value",children:s.form}),c.jsx("span",{className:"pick-stat-label",children:"Form"})]}),c.jsxs("div",{className:"pick-stat",children:[c.jsx("span",{className:"pick-stat-value",children:s.totalPoints}),c.jsx("span",{className:"pick-stat-label",children:"Pts"})]}),c.jsxs("div",{className:"pick-stat",children:[c.jsx("span",{className:`pick-stat-value fixture-badge fdr-${s.difficulty}`,children:s.opponent}),c.jsx("span",{className:"pick-stat-label",children:"Fix"})]})]})]})}function PR({picks:s}){return!s||s.length===0?null:c.jsxs("div",{className:"picks-section",children:[c.jsxs("div",{className:"picks-header",children:[c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),c.jsx("span",{children:"Recommended Picks"})]}),c.jsx("div",{className:"picks-grid",children:s.map(t=>c.jsx(UR,{pick:t},t.id))})]})}function zR({gw:s,isActive:t,onToggle:i}){return c.jsxs("div",{className:`gw-card ${t?"expanded":""}`,children:[c.jsxs("button",{className:"gw-card-header",onClick:i,children:[c.jsxs("div",{className:"gw-title",children:[c.jsxs("span",{className:"gw-number",children:["GW",s.gw]}),c.jsxs("span",{className:"gw-match-count",children:[s.matches.length," match",s.matches.length!==1?"es":""]})]}),c.jsxs("div",{className:"gw-meta",children:[s.deadline&&c.jsxs("span",{className:"gw-deadline",children:["Deadline: ",MR(s.deadline)]}),c.jsx("span",{className:`gw-chevron ${t?"open":""}`,children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),t&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"gw-matches",children:s.matches.map(r=>c.jsx(LR,{match:r},r.id))}),c.jsx(PR,{picks:s.picks})]})]})}function BR(){const{data:s,loading:t,error:i,reload:r}=Ts(YE),[o,d]=Z.useState(null);if(t)return c.jsx(gi,{message:"Loading fixtures..."});if(i)return c.jsx(Ea,{message:i,onRetry:r});const f=o??s[0]?.gw;return c.jsxs("div",{className:"fixtures",children:[c.jsxs("div",{className:"fixtures-header",children:[c.jsx("h3",{children:"Upcoming Fixtures"}),c.jsxs("div",{className:"fdr-legend",children:[c.jsx("span",{className:"legend-label",children:"FDR:"}),[1,2,3,4,5].map(m=>c.jsx("span",{className:`fdr-badge fdr-${m}`,children:m},m))]})]}),c.jsx("div",{className:"gw-list",children:s.map(m=>c.jsx(zR,{gw:m,isActive:f===m.gw,onToggle:()=>d(f===m.gw?null:m.gw)},m.gw))})]})}function HR(s){const t={DEF:0,MID:0,FWD:0};for(const i of s)t[i.position]!==void 0&&t[i.position]++;return`${t.DEF}-${t.MID}-${t.FWD}`}function Hb(s){const t={GKP:[],DEF:[],MID:[],FWD:[]};for(const i of s)t[i.position]?.push(i);return t}const Gb=[[3,4,3],[3,5,2],[4,3,3],[4,4,2],[4,5,1],[5,3,2],[5,4,1]];function GR(s,t){const{ranked:i}=Ay(s,t),r=Hb(i);for(const p of Object.keys(r))r[p].sort((g,y)=>(y.xpts||0)-(g.xpts||0));let o=null,d=-1/0,f=null,m=null;for(const[p,g,y]of Gb){if(r.GKP.length<1||r.DEF.length<p||r.MID.length<g||r.FWD.length<y)continue;const b=[r.GKP[0],...r.DEF.slice(0,p),...r.MID.slice(0,g),...r.FWD.slice(0,y)],x=new Set(b.map(P=>P.id)),C=s.filter(P=>!x.has(P.id)),N=b.reduce((P,U)=>P+(U.xpts||0),0);N>d&&(d=N,o=`${p}-${g}-${y}`,f=b,m=C)}return{formation:o,xi:f,bench:m,score:d}}function FR({fixtures:s}){return!s||s.length===0?null:c.jsx("div",{className:"formation-fdr-dots",children:s.slice(0,3).map((t,i)=>c.jsx("span",{className:`formation-fdr-dot fdr-dot-${t.difficulty}`,title:`GW${t.gw}: ${t.opponent} (FDR ${t.difficulty})`},i))})}function qR(s){const t={DEF:0,MID:0,FWD:0,GKP:0};for(const r of s)t[r.position]!==void 0&&t[r.position]++;return t.GKP!==1?{valid:!1,reason:"Must have exactly 1 goalkeeper in the XI"}:Gb.some(([r,o,d])=>t.DEF===r&&t.MID===o&&t.FWD===d)?{valid:!0}:{valid:!1,reason:`${t.DEF}-${t.MID}-${t.FWD} is not a valid formation`}}function VR({player:s,isSelected:t,isCompareSelected:i,isSwapSource:r,onSelect:o,compareMode:d,isSuggested:f,xpts:m}){const p=()=>o(s),g=["pitch-player",t?"selected":"",i?"compare-selected":"",r?"swap-source":"",f?"suggested-glow":""].filter(Boolean).join(" ");return c.jsxs("div",{className:g,onClick:p,children:[c.jsxs("div",{className:`pitch-shirt position-shirt-${s.position}`,children:[s.isCaptain&&c.jsx("span",{className:"pitch-armband",children:"C"}),s.isViceCaptain&&c.jsx("span",{className:"pitch-armband vc",children:"V"}),d&&i&&c.jsx("span",{className:"pitch-compare-badge",children:"VS"}),m!=null&&c.jsx("span",{className:"pitch-xpts-badge",title:`xPts: ${m}`,children:m})]}),c.jsx("div",{className:"pitch-player-name",children:s.name}),c.jsxs("div",{className:"pitch-player-pts",children:[s.gameweekPoints," pts"]}),c.jsx(FR,{fixtures:s.upcomingFixtures})]})}function YR({player:s,xptsData:t,onClose:i}){if(!s)return null;const r=s.form>=7?"positive":s.form<=4?"negative":"";return c.jsxs("div",{className:"formation-detail",children:[c.jsxs("div",{className:"formation-detail-header",children:[c.jsxs("div",{children:[c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),c.jsx("span",{className:"detail-player-name",children:s.name}),s.isCaptain&&c.jsx("span",{className:"badge captain",children:"C"}),s.isViceCaptain&&c.jsx("span",{className:"badge vice-captain",children:"V"})]}),c.jsx("button",{className:"detail-close",onClick:i,children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsx("div",{className:"detail-club",children:s.club}),c.jsxs("div",{className:"detail-stats-grid",children:[c.jsxs("div",{className:"detail-stat",children:[c.jsx("span",{className:"detail-stat-value highlight",children:s.gameweekPoints}),c.jsx("span",{className:"detail-stat-label",children:"GW Pts"})]}),c.jsxs("div",{className:"detail-stat",children:[c.jsx("span",{className:"detail-stat-value",children:s.totalPoints}),c.jsx("span",{className:"detail-stat-label",children:"Total"})]}),c.jsxs("div",{className:"detail-stat",children:[c.jsx("span",{className:`detail-stat-value ${r}`,children:s.form}),c.jsx("span",{className:"detail-stat-label",children:"Form"})]}),c.jsxs("div",{className:"detail-stat",children:[c.jsxs("span",{className:"detail-stat-value",children:["",s.price,"m"]}),c.jsx("span",{className:"detail-stat-label",children:"Price"})]}),t&&c.jsxs("div",{className:"detail-stat",children:[c.jsx("span",{className:"detail-stat-value highlight",children:t.xpts}),c.jsx("span",{className:"detail-stat-label",children:"xPts"})]})]}),t?.topReasons?.length>0&&c.jsx("div",{className:"detail-xpts-reasons",children:t.topReasons.map((o,d)=>c.jsx("span",{className:"xpts-reason-chip",children:o},d))}),s.upcomingFixtures?.length>0&&c.jsxs("div",{className:"detail-fixtures",children:[c.jsx("div",{className:"detail-fixtures-label",children:"Upcoming"}),c.jsx("div",{className:"detail-fixture-chips",children:s.upcomingFixtures.slice(0,5).map(o=>c.jsx("span",{className:`detail-fixture-chip fdr-${o.difficulty}`,children:o.opponent},o.gw))})]})]})}function XR({players:s,onClose:t}){if(s.length<2)return null;const[i,r]=s,o=[{label:"GW Pts",valA:i.gameweekPoints,valB:r.gameweekPoints},{label:"Total",valA:i.totalPoints,valB:r.totalPoints},{label:"Form",valA:i.form,valB:r.form},{label:"Price",valA:`${i.price}m`,valB:`${r.price}m`,isText:!0}],d=f=>{const m=f.upcomingFixtures||[];return m.length===0?3:(m.slice(0,3).reduce((p,g)=>p+g.difficulty,0)/Math.min(m.length,3)).toFixed(1)};return o.push({label:"Avg FDR",valA:d(i),valB:d(r),lowerBetter:!0}),c.jsxs("div",{className:"formation-compare",children:[c.jsxs("div",{className:"compare-header",children:[c.jsx("h4",{children:"Player Comparison"}),c.jsx("button",{className:"detail-close",onClick:t,children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsxs("div",{className:"compare-names",children:[c.jsxs("div",{className:"compare-player-label",children:[c.jsx("span",{className:`position-badge position-${i.position}`,children:i.position}),c.jsx("span",{children:i.name})]}),c.jsx("span",{className:"compare-vs",children:"VS"}),c.jsxs("div",{className:"compare-player-label",children:[c.jsx("span",{className:`position-badge position-${r.position}`,children:r.position}),c.jsx("span",{children:r.name})]})]}),c.jsx("div",{className:"compare-table",children:o.map(f=>{const m=parseFloat(f.valA),p=parseFloat(f.valB);let g="",y="";return!f.isText&&!isNaN(m)&&!isNaN(p)&&(f.lowerBetter?m<p?g="compare-win":p<m&&(y="compare-win"):m>p?g="compare-win":p>m&&(y="compare-win")),c.jsxs("div",{className:"compare-row",children:[c.jsx("span",{className:`compare-val ${g}`,children:f.valA}),c.jsx("span",{className:"compare-label",children:f.label}),c.jsx("span",{className:`compare-val ${y}`,children:f.valB})]},f.label)})}),c.jsxs("div",{className:"compare-fixtures",children:[c.jsx("div",{className:"compare-fix-col",children:(i.upcomingFixtures||[]).slice(0,5).map(f=>c.jsx("span",{className:`detail-fixture-chip fdr-${f.difficulty}`,children:f.opponent},f.gw))}),c.jsx("span",{className:"compare-fix-label",children:"Fixtures"}),c.jsx("div",{className:"compare-fix-col",children:(r.upcomingFixtures||[]).slice(0,5).map(f=>c.jsx("span",{className:`detail-fixture-chip fdr-${f.difficulty}`,children:f.opponent},f.gw))})]})]})}function WR({suggestion:s,currentFormation:t,captainPick:i,onClose:r}){if(!s)return null;const o=s.formation===t;return c.jsxs("div",{className:"formation-suggested-panel",children:[c.jsxs("div",{className:"compare-header",children:[c.jsx("h4",{children:"Suggested Formation"}),c.jsx("button",{className:"detail-close",onClick:r,children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),o?c.jsxs("p",{className:"suggested-verdict suggested-good",children:["Your current ",t," is already optimal based on xPts analysis."]}):c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"suggested-verdict suggested-change",children:["Consider switching from ",c.jsx("strong",{children:t})," to ",c.jsx("strong",{children:s.formation})," to maximise expected points."]}),c.jsxs("div",{className:"suggested-changes",children:[c.jsx("div",{className:"suggested-changes-label",children:"Move to bench:"}),s.bench.filter(d=>d.benchOrder===0).slice(0,3).map(d=>c.jsxs("span",{className:"suggested-chip bench-chip",children:[d.name," ",c.jsx("span",{className:"suggested-chip-pos",children:d.position}),d.xpts!=null&&c.jsxs("span",{className:"suggested-chip-xpts",children:[d.xpts," xPts"]})]},d.id)),c.jsx("div",{className:"suggested-changes-label",style:{marginTop:"0.5rem"},children:"Bring into XI:"}),s.xi.filter(d=>d.benchOrder>0).slice(0,3).map(d=>c.jsxs("span",{className:"suggested-chip start-chip",children:[d.name," ",c.jsx("span",{className:"suggested-chip-pos",children:d.position}),d.xpts!=null&&c.jsxs("span",{className:"suggested-chip-xpts",children:[d.xpts," xPts"]})]},d.id))]})]}),i&&c.jsxs("div",{className:"suggested-captain",children:[c.jsx("div",{className:"suggested-changes-label",style:{marginTop:"0.75rem"},children:"Recommended captain:"}),c.jsxs("div",{className:"captain-suggestion",children:[c.jsx("span",{className:`position-badge position-${i.position}`,children:i.position}),c.jsx("strong",{children:i.name}),c.jsxs("span",{className:"xpts-reason-badge",children:[i.xpts," xPts"]}),i.topReasons?.length>0&&c.jsx("span",{className:"captain-reasons",children:i.topReasons.join("  ")})]})]})]})}function KR({teamData:s,teamLoading:t,teamError:i,teamReload:r}){const[o,d]=Z.useState(null),[f,m]=Z.useState(!1),[p,g]=Z.useState([]),[y,b]=Z.useState(!1),[x,C]=Z.useState(!1),[N,P]=Z.useState(null),[U,Y]=Z.useState([]),[K,M]=Z.useState(null);Z.useEffect(()=>{if(!K)return;const k=setTimeout(()=>M(null),2500);return()=>clearTimeout(k)},[K]);const D=Z.useMemo(()=>s?.teams||{},[s]),$=Z.useMemo(()=>{if(!s)return null;const k=[...s.players,...s.bench||[]];return GR(k,D)},[s,D]),J=Z.useMemo(()=>{if(!s)return{};const k=[...s.players,...s.bench||[]],H={};for(const ee of k){const re=ee.upcomingFixtures?.[0]||{difficulty:3,opponent:"TBD"},_e=Xo(ee,re,D);H[ee.id]=_e.xpts}return H},[s,D]),W=Z.useMemo(()=>{if(!s)return null;const k=[...s.players,...s.bench||[]],{captain:H}=Ay(k,D);return H},[s,D]),{players:ue,bench:Re,hasSwaps:De}=Z.useMemo(()=>{if(!s)return{players:[],bench:[],hasSwaps:!1};let k=[...s.players],H=[...s.bench||[]];for(const[ee,re]of U){const _e=k.findIndex(Me=>Me.id===ee),Qe=H.findIndex(Me=>Me.id===re);_e===-1||Qe===-1||([k[_e],H[Qe]]=[H[Qe],k[_e]])}return{players:k,bench:H,hasSwaps:U.length>0}},[s,U]);if(t)return c.jsx(gi,{message:"Loading formation..."});if(i)return c.jsx(Ea,{message:i,onRetry:r});const{summary:fe}=s,te=HR(ue),oe=Hb(ue),F=y&&$?new Set($.xi.map(k=>k.id)):new Set,V=new Set(ue.map(k=>k.id));function I(k){if(x){q(k);return}f?g(H=>H.find(re=>re.id===k.id)?H.filter(re=>re.id!==k.id):H.length>=2?[H[1],k]:[...H,k]):d(H=>H?.id===k.id?null:k)}function q(k){if(!N){P(k);return}if(N.id===k.id){P(null);return}const H=V.has(N.id),ee=V.has(k.id);if(H===ee){P(k);return}const re=H?N:k,_e=H?k:N,Qe=ue.map(dn=>dn.id===re.id?_e:dn),Me=qR(Qe);if(!Me.valid){M(Me.reason),P(null);return}Y(dn=>[...dn,[re.id,_e.id]]),P(null)}function Q(){const k=!x;C(k),P(null),M(null),k&&(m(!1),g([]),d(null))}function ne(){const k=!f;m(k),g([]),d(null),k&&(C(!1),P(null))}function ae(){b(k=>!k)}function E(){Y([]),P(null),M(null)}const A=k=>c.jsx(VR,{player:k,isSelected:o?.id===k.id,isCompareSelected:p.some(H=>H.id===k.id),isSwapSource:N?.id===k.id,onSelect:I,compareMode:f,isSuggested:y&&F.has(k.id),xpts:J[k.id]},k.id);return c.jsxs("div",{className:"formation-view",children:[c.jsxs("div",{className:"formation-header",children:[c.jsxs("h3",{children:["Formation  ",te]}),c.jsxs("div",{className:"formation-header-actions",children:[c.jsxs("button",{className:`formation-action-btn ${x?"active":""}`,onClick:Q,title:"Swap players between XI and bench",children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"17 1 21 5 17 9"}),c.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),c.jsx("polyline",{points:"7 23 3 19 7 15"}),c.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),c.jsx("span",{children:"Swap"})]}),De&&c.jsxs("button",{className:"formation-action-btn formation-reset-btn",onClick:E,title:"Reset to original lineup",children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"1 4 1 10 7 10"}),c.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),c.jsx("span",{children:"Reset"})]}),c.jsxs("button",{className:`formation-action-btn ${f?"active":""}`,onClick:ne,title:"Compare two players",children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),c.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),c.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),c.jsx("span",{children:"Compare"})]}),c.jsxs("button",{className:`formation-action-btn ${y?"active":""}`,onClick:ae,title:"Suggest optimal formation",children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),c.jsx("path",{d:"M2 17l10 5 10-5"}),c.jsx("path",{d:"M2 12l10 5 10-5"})]}),c.jsx("span",{children:"Suggest"})]}),c.jsxs("span",{className:"formation-gw",children:["GW",fe.currentGameweek]})]})]}),f&&c.jsx("div",{className:"formation-compare-hint",children:"Tap any 2 players to compare them side-by-side"}),x&&c.jsx("div",{className:"formation-swap-hint",children:N?c.jsxs(c.Fragment,{children:["Tap a ",V.has(N.id)?"bench":"starting"," player to swap with ",c.jsx("strong",{children:N.name})]}):"Tap a player, then tap another to swap them"}),K&&c.jsx("div",{className:"swap-invalid-msg",children:K}),c.jsxs("div",{className:"pitch",children:[c.jsxs("div",{className:"pitch-surface",children:[c.jsx("div",{className:"pitch-marking center-circle"}),c.jsx("div",{className:"pitch-marking center-line"}),c.jsx("div",{className:"pitch-marking penalty-box top"}),c.jsx("div",{className:"pitch-marking penalty-box bottom"}),c.jsx("div",{className:"pitch-row fwd-row",children:oe.FWD.map(A)}),c.jsx("div",{className:"pitch-row mid-row",children:oe.MID.map(A)}),c.jsx("div",{className:"pitch-row def-row",children:oe.DEF.map(A)}),c.jsx("div",{className:"pitch-row gk-row",children:oe.GKP.map(A)})]}),Re.length>0&&c.jsxs("div",{className:"formation-bench",children:[c.jsx("div",{className:"formation-bench-label",children:"Bench"}),c.jsx("div",{className:"formation-bench-row",children:Re.map((k,H)=>c.jsxs("div",{className:"formation-bench-player",children:[c.jsx("span",{className:"bench-order",children:H+1}),A(k)]},k.id))})]})]}),f&&p.length===2&&c.jsx(XR,{players:p,onClose:()=>g([])}),!f&&!x&&o&&c.jsx(YR,{player:o,xptsData:Xo(o,o.upcomingFixtures?.[0]||{difficulty:3,opponent:"TBD"},D),onClose:()=>d(null)}),y&&c.jsx(WR,{suggestion:$,currentFormation:te,captainPick:W,onClose:()=>b(!1)})]})}function QR(){const[s,t]=Z.useState([]),[i,r]=Z.useState(!0),[o,d]=Z.useState([]),[f,m]=Z.useState({}),[p,g]=Z.useState(!1);if(Z.useEffect(()=>{async function D(){try{const[$,J,W]=await Promise.all([fi(Jt(en,"users")),fi(Jt(en,"xptsSnapshots")),Vn()]),ue=$.val();if(ue){const De=Object.entries(ue).map(([fe,te])=>({uid:fe,name:te.name||"Unknown",email:te.email||"N/A",fplCode:te.fplCode||"N/A",createdAt:te.createdAt||null}));De.sort((fe,te)=>(te.createdAt||"").localeCompare(fe.createdAt||"")),t(De)}const Re=J.val();if(Re){const De=[];for(const[,oe]of Object.entries(Re))for(const[,F]of Object.entries(oe))De.push(F);De.sort((oe,F)=>F.gameweek-oe.gameweek),d(De);const te=W.events.find(oe=>oe.is_current)?.id||1;if(De.length>0){g(!0);const oe=await $R(De,te);m(oe),g(!1)}}}catch($){console.error("Failed to load admin data:",$)}finally{r(!1)}}D()},[]),i)return c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Loading admin data..."})]});const y=s.length,b=s.filter(D=>D.fplCode&&D.fplCode!=="N/A").length,x=s.filter(D=>D.createdAt?Date.now()-new Date(D.createdAt).getTime()<10080*60*1e3:!1).length,C={};s.forEach(D=>{if(!D.createdAt)return;const $=D.createdAt.slice(0,10);C[$]=(C[$]||0)+1});const N=Object.keys(C).sort(),P=Math.max(...Object.values(C),1),U=o.filter(D=>{const $=`${D.uid}-${D.gameweek}-${D.playerIn.id}`;return f[$]&&f[$].verdict!=="pending"}),Y=U.filter(D=>{const $=`${D.uid}-${D.gameweek}-${D.playerIn.id}`;return f[$]?.verdict==="correct"}).length,K=o.length-U.length,M=U.length>0?Math.round(Y/U.length*100):0;return c.jsxs("div",{className:"admin-page",children:[c.jsx("h2",{className:"admin-title",children:"Admin Dashboard"}),c.jsxs("div",{className:"admin-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:y}),c.jsx("div",{className:"admin-stat-label",children:"Total Users"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:b}),c.jsx("div",{className:"admin-stat-label",children:"With FPL Code"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:x}),c.jsx("div",{className:"admin-stat-label",children:"New This Week"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsxs("div",{className:"admin-stat-value",children:[y>0?Math.round(b/y*100):0,"%"]}),c.jsx("div",{className:"admin-stat-label",children:"FPL Linked"})]})]}),N.length>0&&c.jsxs("div",{className:"admin-section",children:[c.jsx("h3",{children:"Registrations Over Time"}),c.jsx("div",{className:"reg-chart",children:N.map(D=>c.jsxs("div",{className:"reg-bar-group",children:[c.jsx("div",{className:"reg-bar-wrapper",children:c.jsx("div",{className:"reg-bar",style:{height:`${C[D]/P*100}%`},children:c.jsx("span",{className:"reg-bar-count",children:C[D]})})}),c.jsx("span",{className:"reg-bar-label",children:new Date(D+"T00:00:00").toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},D))})]}),c.jsxs("div",{className:"admin-section",children:[c.jsxs("h3",{children:["All Users (",y,")"]}),c.jsx("div",{className:"admin-table-wrapper",children:c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Name"}),c.jsx("th",{children:"Email"}),c.jsx("th",{children:"FPL Code"}),c.jsx("th",{children:"Registered"})]})}),c.jsx("tbody",{children:s.map(D=>c.jsxs("tr",{children:[c.jsx("td",{children:D.name}),c.jsx("td",{children:D.email}),c.jsx("td",{className:"mono",children:D.fplCode}),c.jsx("td",{children:D.createdAt?new Date(D.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"N/A"})]},D.uid))})]})})]}),c.jsxs("div",{className:"admin-section",children:[c.jsxs("h3",{children:["xPts Prediction Tracker (",o.length," predictions)"]}),o.length===0?c.jsx("p",{className:"admin-xpts-empty",children:"No xPts predictions recorded yet. Predictions are captured when users visit the Transfers tab."}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-xpts-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:o.length}),c.jsx("div",{className:"admin-stat-label",children:"Tracked"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsxs("div",{className:"admin-stat-value",children:[M,"%"]}),c.jsx("div",{className:"admin-stat-label",children:"Accuracy"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:Y}),c.jsx("div",{className:"admin-stat-label",children:"Correct"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:K}),c.jsx("div",{className:"admin-stat-label",children:"Pending"})]})]}),c.jsx("div",{className:"admin-table-wrapper",children:c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"User"}),c.jsx("th",{children:"GW"}),c.jsx("th",{children:"Player Out"}),c.jsx("th",{children:"Out xPts"}),c.jsx("th",{children:"Player In"}),c.jsx("th",{children:"In xPts"}),c.jsx("th",{children:"Actual Diff"}),c.jsx("th",{children:"Verdict"})]})}),c.jsx("tbody",{children:o.map(D=>{const $=`${D.uid}-${D.gameweek}-${D.playerIn.id}`,J=f[$],W=J?.actualDiff,ue=J?.verdict||"pending",Re=(D.playerOut.avgXpts||0)>(D.playerIn.avgXpts||0),De=(D.playerIn.avgXpts||0)>(D.playerOut.avgXpts||0);return c.jsxs("tr",{children:[c.jsx("td",{children:D.userName}),c.jsxs("td",{children:["GW",D.gameweek]}),c.jsxs("td",{children:[D.playerOut.name,c.jsxs("span",{className:"admin-xpts-club",children:[" ",D.playerOut.club]})]}),c.jsx("td",{className:Re?"admin-xpts-higher":"",children:D.playerOut.avgXpts??""}),c.jsxs("td",{children:[D.playerIn.name,c.jsxs("span",{className:"admin-xpts-club",children:[" ",D.playerIn.club]})]}),c.jsx("td",{className:De?"admin-xpts-higher":"",children:D.playerIn.avgXpts??""}),c.jsx("td",{className:W>0?"admin-xpts-correct":W<0?"admin-xpts-wrong":"",children:p?"...":W!=null?W>0?`+${W}`:W:""}),c.jsx("td",{children:c.jsx("span",{className:`admin-xpts-badge admin-xpts-badge-${ue}`,children:ue})})]},$)})})]})})]})]})]})}async function $R(s,t){const i=new Set;for(const m of s)for(let p=m.gameweek;p<=t;p++)i.add(p);const r={},o=[...i].sort((m,p)=>m-p),d=5;for(let m=0;m<o.length;m+=d){const p=o.slice(m,m+d),g=await Promise.all(p.map(y=>gc(y).catch(()=>null)));p.forEach((y,b)=>{g[b]&&(r[y]=g[b])})}const f={};for(const m of s){const p=`${m.uid}-${m.gameweek}-${m.playerIn.id}`;let g=0,y=0,b=!1;for(let U=m.gameweek;U<=t;U++){const Y=r[U];if(!Y)continue;const K=Y.elements.find(D=>D.id===m.playerIn.id),M=Y.elements.find(D=>D.id===m.playerOut.id);g+=K?.stats?.total_points||0,y+=M?.stats?.total_points||0,b=!0}if(!b){f[p]={actualDiff:null,verdict:"pending"};continue}const x=g-y,C=(m.playerIn.avgXpts||0)>=(m.playerOut.avgXpts||0),N=x>=0,P=C===N?"correct":"wrong";f[p]={actualDiff:x,verdict:P}}return f}const ZR=["All","GK","DEF","MID","FWD"];function JR(){const{fplCode:s,user:t}=fl(),{data:i,loading:r,error:o,reload:d}=Ts(WE,[s]),f=Z.useMemo(()=>i?.transfers||[],[i]),m=Z.useMemo(()=>i?.teams||{},[i]),[p,g]=Z.useState(null),[y,b]=Z.useState("All"),[x,C]=Z.useState(new Set),N=Z.useRef({});Z.useEffect(()=>{if(!f.length||!t)return;const F=Jt(en,`transferCache/${t.uid}`);async function V(){try{const q=(await fi(F)).val(),Q=new Set;if(q?.transfers){const ne=new Set(q.transfers.map(ae=>`${ae.gameweek}-${ae.playerIn.id}`));f.forEach((ae,E)=>{ne.has(`${ae.gameweek}-${ae.playerIn.id}`)||Q.add(E)}),Q.size>0&&C(Q)}await xa(F,{transfers:f.map(ne=>({gameweek:ne.gameweek,transferCost:ne.transferCost,netGain:ne.netGain,gameweeksCompared:ne.gameweeksCompared,playerIn:{id:ne.playerIn.id,name:ne.playerIn.name,position:ne.playerIn.position,club:ne.playerIn.club,pointsSinceTransfer:ne.playerIn.pointsSinceTransfer},playerOut:{id:ne.playerOut.id,name:ne.playerOut.name,position:ne.playerOut.position,club:ne.playerOut.club,pointsSinceTransfer:ne.playerOut.pointsSinceTransfer}})),updatedAt:new Date().toISOString()});for(const ne of Q){const ae=f[ne],E=`${ae.gameweek}-${ae.playerIn.id}`,A=Jt(en,`xptsSnapshots/${t.uid}/${E}`);if((await fi(A)).exists())continue;let H={avgXpts:null,topReasons:[]},ee={avgXpts:null,topReasons:[]};try{const re=ai(ae.playerIn,ae.playerIn.upcomingFixtures,m,3);H={avgXpts:re.avgXpts,topReasons:re.topReasons}}catch(re){console.warn("xPts calc failed for playerIn",ae.playerIn.name,re)}try{const re=ai(ae.playerOut,ae.playerOut.upcomingFixtures,m,3);ee={avgXpts:re.avgXpts,topReasons:re.topReasons}}catch(re){console.warn("xPts calc failed for playerOut",ae.playerOut.name,re)}await xa(A,{uid:t.uid,userName:t.displayName||"Unknown",capturedAt:new Date().toISOString(),gameweek:ae.gameweek,transferCost:ae.transferCost||0,playerOut:{id:ae.playerOut.id,name:ae.playerOut.name,position:ae.playerOut.position,club:ae.playerOut.club,avgXpts:ee.avgXpts,topReasons:ee.topReasons},playerIn:{id:ae.playerIn.id,name:ae.playerIn.name,position:ae.playerIn.position,club:ae.playerIn.club,avgXpts:H.avgXpts,topReasons:H.topReasons}})}}catch(I){console.error("Transfer cache sync error:",I)}}V()},[f,m,t]);const P=Z.useCallback(F=>{const V=N.current[F];V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),g(F),V.classList.add("transfer-highlight"),setTimeout(()=>V.classList.remove("transfer-highlight"),2e3))},[]);if(r)return c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Analysing your transfers..."})]});if(o)return c.jsxs("div",{className:"error-container",children:[c.jsxs("p",{children:["Failed to load transfers: ",o]}),c.jsx("button",{className:"btn btn-primary",onClick:d,children:"Retry"})]});if(f.length===0)return c.jsxs("div",{className:"transfers-empty",children:[c.jsx("div",{className:"empty-icon",children:c.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"17 1 21 5 17 9"}),c.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),c.jsx("polyline",{points:"7 23 3 19 7 15"}),c.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]})}),c.jsx("h3",{children:"No Transfers Yet"}),c.jsx("p",{children:"Your transfer history will appear here once you make transfers."})]});const U=y==="All"?f:f.filter(F=>F.playerIn.position===y||F.playerOut.position===y),Y=f.length,K=f.reduce((F,V)=>F+V.netGain,0),M=f.filter(F=>F.netGain>0).length,D=Y>0?Math.round(M/Y*100):0,$=f.reduce((F,V,I)=>V.netGain>f[F].netGain?I:F,0),J=f.reduce((F,V,I)=>V.netGain<f[F].netGain?I:F,0),W=f[$],ue=f[J],Re=f.reduce((F,V)=>F+(V.transferCost||0),0),De=[...f].sort((F,V)=>F.gameweek-V.gameweek),fe=[];let te=0;for(const F of De)te+=F.netGain,fe.push({gw:F.gameweek,total:te,name:`${F.playerOut.name}  ${F.playerIn.name}`});const oe=Math.max(...fe.map(F=>Math.abs(F.total)),1);return c.jsxs("div",{className:"transfer-tracker",children:[x.size>0&&c.jsxs("div",{className:"new-transfer-banner",children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),c.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),x.size," new transfer",x.size>1?"s":""," detected since last visit!",c.jsx("button",{className:"new-transfer-dismiss",onClick:()=>C(new Set),children:"Dismiss"})]}),c.jsxs("div",{className:"transfer-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"transfer-stat-value",children:Y}),c.jsx("div",{className:"transfer-stat-label",children:"Transfers Made"})]}),c.jsxs("div",{className:`stat-card ${K>=0?"stat-positive":"stat-negative"}`,children:[c.jsxs("div",{className:"transfer-stat-value",children:[K>=0?"+":"",K]}),c.jsx("div",{className:"transfer-stat-label",children:"Net Points Gain"})]}),c.jsxs("div",{className:`stat-card ${D>=50?"stat-positive":"stat-negative"}`,children:[c.jsxs("div",{className:"transfer-stat-value",children:[D,"%"]}),c.jsx("div",{className:"transfer-stat-label",children:"Success Rate"})]}),c.jsxs("div",{className:"stat-card clickable-stat stat-positive",onClick:()=>P($),children:[c.jsxs("div",{className:"transfer-stat-value",children:["+",W.netGain]}),c.jsx("div",{className:"transfer-stat-label",children:"Best Transfer "})]}),c.jsxs("div",{className:"stat-card clickable-stat stat-negative",onClick:()=>P(J),children:[c.jsx("div",{className:"transfer-stat-value",children:ue.netGain}),c.jsx("div",{className:"transfer-stat-label",children:"Worst Transfer "})]})]}),Re>0&&c.jsxs("div",{className:"transfer-cost-banner",children:["Total transfer costs: ",c.jsxs("strong",{children:["-",Re," pts"]})," (hits taken)"]}),fe.length>1&&c.jsxs("div",{className:"cumulative-section",children:[c.jsx("h3",{className:"section-title",children:"Cumulative Net Gain"}),c.jsxs("div",{className:"cumulative-chart",children:[c.jsx("div",{className:"chart-zero-line"}),fe.map((F,V)=>{const I=F.total>=0,q=Math.max(Math.abs(F.total)/oe*50,2);return c.jsxs("div",{className:"chart-bar-group",children:[c.jsx("div",{className:"chart-bar-area",children:I?c.jsxs("div",{className:"chart-bar-top",children:[c.jsxs("span",{className:"chart-bar-val",children:[F.total>=0?"+":"",F.total]}),c.jsx("div",{className:"chart-bar bar-positive",style:{height:`${q}%`}})]}):c.jsxs("div",{className:"chart-bar-bottom",children:[c.jsx("div",{className:"chart-bar bar-negative",style:{height:`${q}%`}}),c.jsx("span",{className:"chart-bar-val",children:F.total})]})}),c.jsxs("span",{className:"chart-bar-label",children:["GW",F.gw]})]},V)})]})]}),c.jsxs("div",{className:"transfer-filter-bar",children:[c.jsx("span",{className:"filter-label",children:"Filter:"}),ZR.map(F=>c.jsx("button",{className:`filter-btn ${y===F?"filter-active":""}`,onClick:()=>b(F),children:F},F)),c.jsxs("span",{className:"filter-count",children:[U.length," transfer",U.length!==1?"s":""]})]}),c.jsx("div",{className:"transfer-list",children:U.map(F=>{const V=f.indexOf(F),I=p===V,q=F.netGain>=0,Q=x.has(V);return c.jsxs("div",{ref:ne=>N.current[V]=ne,className:`transfer-card ${q?"transfer-positive":"transfer-negative"} ${Q?"transfer-new":""}`,onClick:()=>g(I?null:V),children:[Q&&c.jsx("div",{className:"new-badge",children:"NEW"}),c.jsxs("div",{className:"transfer-header",children:[c.jsxs("span",{className:"transfer-gw",children:["GW",F.gameweek]}),c.jsxs("div",{className:`transfer-net ${q?"net-positive":"net-negative"}`,children:[q?"+":"",F.netGain," pts"]})]}),c.jsxs("div",{className:"transfer-players",children:[c.jsxs("div",{className:"transfer-player out",children:[c.jsx("div",{className:"transfer-direction",children:"OUT"}),c.jsxs("div",{className:"transfer-player-info",children:[c.jsx("span",{className:"transfer-player-name",children:F.playerOut.name}),c.jsxs("span",{className:"transfer-player-meta",children:[F.playerOut.club,"  ",F.playerOut.position]})]}),c.jsxs("div",{className:"transfer-player-points",children:[F.playerOut.pointsSinceTransfer," pts"]})]}),c.jsx("div",{className:"transfer-arrow",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 5v14M5 12l7 7 7-7"})})}),c.jsxs("div",{className:"transfer-player in",children:[c.jsx("div",{className:"transfer-direction",children:"IN"}),c.jsxs("div",{className:"transfer-player-info",children:[c.jsx("span",{className:"transfer-player-name",children:F.playerIn.name}),c.jsxs("span",{className:"transfer-player-meta",children:[F.playerIn.club,"  ",F.playerIn.position]})]}),c.jsxs("div",{className:"transfer-player-points",children:[F.playerIn.pointsSinceTransfer," pts"]})]})]}),F.transferCost>0&&c.jsxs("div",{className:"transfer-hit",children:["-",F.transferCost," pt hit"]}),c.jsxs("div",{className:"transfer-meta",children:[F.gameweeksCompared," GW",F.gameweeksCompared!==1?"s":""," compared",c.jsx("span",{className:"expand-hint",children:I?"":""})]}),I&&c.jsxs("div",{className:"transfer-breakdown",children:[c.jsxs("div",{className:"breakdown-header",children:[c.jsx("span",{children:"GW"}),c.jsx("span",{children:F.playerOut.name}),c.jsx("span",{children:F.playerIn.name}),c.jsx("span",{children:"Diff"})]}),F.gwBreakdown.map(ne=>c.jsxs("div",{className:"breakdown-row",children:[c.jsx("span",{className:"breakdown-gw",children:ne.gw}),c.jsx("span",{className:"breakdown-pts",children:ne.outPts}),c.jsx("span",{className:"breakdown-pts",children:ne.inPts}),c.jsxs("span",{className:`breakdown-diff ${ne.diff>=0?"diff-positive":"diff-negative"}`,children:[ne.diff>=0?"+":"",ne.diff]})]},ne.gw)),c.jsxs("div",{className:"breakdown-row breakdown-total",children:[c.jsx("span",{className:"breakdown-gw",children:"Total"}),c.jsx("span",{className:"breakdown-pts",children:F.playerOut.pointsSinceTransfer}),c.jsx("span",{className:"breakdown-pts",children:F.playerIn.pointsSinceTransfer}),c.jsxs("span",{className:`breakdown-diff ${F.netGain>=0?"diff-positive":"diff-negative"}`,children:[F.netGain>=0?"+":"",F.netGain]})]})]})]},V)})})]})}const eD=[{id:"predicted",label:"Predicted"},{id:"recent",label:"This GW"},{id:"season",label:"Season"}];function tD(){const s=new Date,t=s.getFullYear(),i=new Date(t,2,31),r=new Date(t,2,31-i.getDay(),1,0),o=new Date(t,9,31),d=new Date(t,9,31-o.getDay(),1,0),m=s>=r&&s<d?3600*1e3:0,p=s.getTimezoneOffset()*60*1e3;return m+p}function nD(){const s=new Date,t=tD(),i=new Date(s.getTime()+t),r=new Date(i);return r.setHours(2,30,0,0),i.getHours()>=3&&r.setDate(r.getDate()+1),new Date(r.getTime()-t)}function xy(s){if(!s)return null;const t=new Date(s)-new Date;return t<=0?{label:"PASSED",d:0,h:0,m:0,s:0}:{d:Math.floor(t/864e5),h:Math.floor(t%864e5/36e5),m:Math.floor(t%36e5/6e4),s:Math.floor(t%6e4/1e3)}}function sD(s){return s?new Date(s).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"TBD"}function iD(s){const t=Math.abs(s);return t>=1e6?(s/1e6).toFixed(1)+"M":t>=1e3?(s/1e3).toFixed(1)+"k":s.toString()}function zo({value:s,label:t}){return c.jsxs("div",{className:"pc-cd-unit",children:[c.jsx("span",{className:"pc-cd-digits",children:String(s).padStart(2,"0")}),c.jsx("span",{className:"pc-cd-label",children:t})]})}function Sy({iso:s,accent:t}){const[i,r]=Z.useState(()=>xy(s));if(Z.useEffect(()=>{const d=setInterval(()=>r(xy(s)),1e3);return()=>clearInterval(d)},[s]),!i)return c.jsx("span",{className:"pc-cd-tbd",children:"--:--"});if(i.label==="PASSED")return c.jsx("span",{className:"pc-cd-passed",children:"PASSED"});const o=i.d===0&&i.h<6;return c.jsxs("div",{className:`pc-cd ${t} ${o?"pc-cd-urgent":""}`,children:[i.d>0&&c.jsxs(c.Fragment,{children:[c.jsx(zo,{value:i.d,label:"d"}),c.jsx("span",{className:"pc-cd-sep",children:":"})]}),c.jsx(zo,{value:i.h,label:"h"}),c.jsx("span",{className:"pc-cd-sep",children:":"}),c.jsx(zo,{value:i.m,label:"m"}),c.jsx("span",{className:"pc-cd-sep",children:":"}),c.jsx(zo,{value:i.s,label:"s"})]})}function aD({deadline:s,nextGw:t,currentGw:i}){const r=nD();return c.jsxs("div",{className:"pc-strip",children:[c.jsxs("div",{className:"pc-strip-cell",children:[c.jsx("span",{className:"pc-strip-label",children:"Next Price Change"}),c.jsx(Sy,{iso:r.toISOString(),accent:"pc-accent-amber"})]}),c.jsx("div",{className:"pc-strip-divider"}),c.jsxs("div",{className:"pc-strip-cell",children:[c.jsxs("span",{className:"pc-strip-label",children:["GW",t," Deadline",c.jsx("span",{className:"pc-strip-date",children:sD(s)})]}),c.jsx(Sy,{iso:s,accent:"pc-accent-red"})]}),c.jsx("div",{className:"pc-strip-divider"}),c.jsxs("div",{className:"pc-strip-cell pc-strip-cell-sm",children:[c.jsx("span",{className:"pc-strip-label",children:"Gameweek"}),c.jsx("span",{className:"pc-strip-gw",children:i})]})]})}function rD({value:s,max:t,direction:i}){const r=t>0?Math.min(Math.abs(s)/t*100,100):0;return c.jsx("div",{className:"pc-bar-track",children:c.jsx("div",{className:`pc-bar-fill ${i==="in"?"pc-bar-green":"pc-bar-red"}`,style:{width:`${r}%`}})})}function yh({player:s,rank:t,maxNet:i,direction:r,delay:o}){return c.jsxs("div",{className:"pc-row",style:{animationDelay:`${o}ms`},children:[c.jsx("span",{className:"pc-rank",children:t}),c.jsxs("div",{className:"pc-player-col",children:[c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),c.jsxs("div",{className:"pc-player-text",children:[c.jsx("span",{className:"pc-name",children:s.name}),c.jsxs("span",{className:"pc-meta",children:[s.clubShort,"  ",s.selectedByPercent,"%"]})]})]}),c.jsxs("div",{className:"pc-price-col",children:[c.jsxs("span",{className:"pc-price",children:["",s.price,"m"]}),s.costChangeEvent!==0&&c.jsxs("span",{className:`pc-delta ${s.costChangeEvent>0?"pc-up":"pc-down"}`,children:[s.costChangeEvent>0?"+":"",s.costChangeEvent.toFixed(1)]})]}),c.jsxs("div",{className:"pc-activity-col",children:[c.jsxs("span",{className:`pc-net ${r==="in"?"pc-up":"pc-down"}`,children:[s.netTransfersEvent>0?"+":"",iD(s.netTransfersEvent)]}),c.jsx(rD,{value:s.netTransfersEvent,max:i,direction:r})]}),c.jsx("div",{className:"pc-form-col",children:c.jsx("span",{className:"pc-form-val",children:s.form})}),c.jsx("span",{className:`pc-fix fixture-badge fdr-${s.nextDifficulty}`,children:s.nextFixture}),c.jsx("span",{className:`pc-signal ${r==="in"?"pc-signal-rise":"pc-signal-fall"} ${s.pricePressure==="rising"||s.pricePressure==="falling"?"pc-signal-strong":""}`,children:r==="in"?"":""})]})}function Ey({player:s,rank:t,type:i,delay:r}){const o=s.costChangeStart;return c.jsxs("div",{className:"pc-row",style:{animationDelay:`${r}ms`},children:[c.jsx("span",{className:"pc-rank",children:t}),c.jsxs("div",{className:"pc-player-col",children:[c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),c.jsxs("div",{className:"pc-player-text",children:[c.jsx("span",{className:"pc-name",children:s.name}),c.jsxs("span",{className:"pc-meta",children:[s.clubShort,"  ",s.totalPoints," pts"]})]})]}),c.jsxs("div",{className:"pc-price-col",children:[c.jsxs("span",{className:"pc-price",children:["",s.price,"m"]}),c.jsxs("span",{className:"pc-from",children:["was ",s.startPrice.toFixed(1)]})]}),c.jsx("div",{className:"pc-activity-col",children:c.jsxs("span",{className:`pc-season-delta ${o>0?"pc-up":"pc-down"}`,children:[o>0?"+":"","",o.toFixed(1),"m"]})}),c.jsx("div",{className:"pc-form-col",children:c.jsx("span",{className:"pc-form-val",children:s.form})}),c.jsx("span",{className:`pc-fix fixture-badge fdr-${s.nextDifficulty}`,children:s.nextFixture}),c.jsx("span",{className:`pc-signal ${i==="risers"?"pc-signal-rise":"pc-signal-fall"}`,children:i==="risers"?"":""})]})}function Dr({title:s,count:t,accent:i,hint:r,children:o}){return c.jsxs("div",{className:`pc-section ${i}`,children:[c.jsxs("div",{className:"pc-section-head",children:[c.jsx("div",{className:"pc-section-accent"}),c.jsx("h3",{children:s}),t!=null&&c.jsx("span",{className:"pc-count",children:t})]}),r&&c.jsx("p",{className:"pc-hint",children:r}),c.jsxs("div",{className:"pc-table-header",children:[c.jsx("span",{className:"pc-th pc-th-rank",children:"#"}),c.jsx("span",{className:"pc-th pc-th-player",children:"Player"}),c.jsx("span",{className:"pc-th pc-th-price",children:"Price"}),c.jsx("span",{className:"pc-th pc-th-activity",children:"Activity"}),c.jsx("span",{className:"pc-th pc-th-form",children:"Form"}),c.jsx("span",{className:"pc-th pc-th-fix",children:"Next"}),c.jsx("span",{className:"pc-th pc-th-signal"})]}),o]})}function lD(){const[s,t]=Z.useState("predicted"),{data:i,loading:r,error:o,reload:d}=Ts(XE,[],1800*1e3);function f(){TE(),d()}if(r)return c.jsx(gi,{message:"Loading price data..."});if(o)return c.jsx(Ea,{message:o,onRetry:f});const{rising:m,falling:p,recentChanges:g,biggestRisers:y,biggestFallers:b,currentGw:x,nextGw:C,deadline:N,lastUpdated:P}=i,U=m.length>0?Math.max(...m.map(M=>Math.abs(M.netTransfersEvent))):1,Y=p.length>0?Math.max(...p.map(M=>Math.abs(M.netTransfersEvent))):1,K=g.length>0?Math.max(...g.map(M=>Math.abs(M.netTransfersEvent))):1;return c.jsxs("div",{className:"price-changes",children:[c.jsxs("div",{className:"pc-header",children:[c.jsxs("div",{className:"pc-header-left",children:[c.jsxs("h2",{children:[c.jsx("span",{className:"pc-live-dot"}),"Price Tracker"]}),c.jsx("span",{className:"pc-updated",children:P})]}),c.jsxs("button",{className:"pc-refresh",onClick:f,children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"23 4 23 10 17 10"}),c.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),"Refresh"]})]}),c.jsx(aD,{deadline:N,nextGw:C,currentGw:x}),c.jsxs("div",{className:"pc-pills",children:[c.jsxs("div",{className:"pc-pill pc-pill-rise",children:[c.jsx("span",{className:"pc-pill-num",children:m.length}),c.jsx("span",{className:"pc-pill-label",children:"Rising"})]}),c.jsxs("div",{className:"pc-pill pc-pill-fall",children:[c.jsx("span",{className:"pc-pill-num",children:p.length}),c.jsx("span",{className:"pc-pill-label",children:"Falling"})]}),c.jsxs("div",{className:"pc-pill pc-pill-changed",children:[c.jsx("span",{className:"pc-pill-num",children:g.length}),c.jsx("span",{className:"pc-pill-label",children:"Changed"})]})]}),c.jsx("div",{className:"pc-views",children:eD.map(M=>c.jsx("button",{className:`pc-view-btn ${s===M.id?"active":""}`,onClick:()=>t(M.id),children:M.label},M.id))}),s==="predicted"&&c.jsxs(c.Fragment,{children:[c.jsx(Dr,{title:"Buy Before Rise",count:m.length,accent:"pc-sec-green",hint:"High transfer-in volume  price increase expected",children:m.length===0?c.jsx("p",{className:"pc-empty",children:"No predicted rises right now"}):m.map((M,D)=>c.jsx(yh,{player:M,rank:D+1,maxNet:U,direction:"in",delay:D*30},M.id))}),c.jsx(Dr,{title:"Sell Before Drop",count:p.length,accent:"pc-sec-red",hint:"Losing ownership fast  price drop expected",children:p.length===0?c.jsx("p",{className:"pc-empty",children:"No predicted drops right now"}):p.map((M,D)=>c.jsx(yh,{player:M,rank:D+1,maxNet:Y,direction:"out",delay:D*30},M.id))})]}),s==="recent"&&c.jsx(Dr,{title:"Price Changes This GW",count:g.length,accent:"pc-sec-neutral",children:g.length===0?c.jsx("p",{className:"pc-empty",children:"No price changes yet this gameweek"}):g.map((M,D)=>c.jsx(yh,{player:M,rank:D+1,maxNet:K,direction:M.costChangeEvent>0?"in":"out",delay:D*30},M.id))}),s==="season"&&c.jsxs(c.Fragment,{children:[c.jsx(Dr,{title:"Biggest Risers",accent:"pc-sec-green",children:y.map((M,D)=>c.jsx(Ey,{player:M,rank:D+1,type:"risers",delay:D*30},M.id))}),c.jsx(Dr,{title:"Biggest Fallers",accent:"pc-sec-red",children:b.map((M,D)=>c.jsx(Ey,{player:M,rank:D+1,type:"fallers",delay:D*30},M.id))})]})]})}function oD(){const{login:s,register:t}=fl(),[i,r]=Z.useState(!1),[o,d]=Z.useState({name:"",email:"",password:"",fplCode:""}),[f,m]=Z.useState(""),[p,g]=Z.useState(!1);function y(x){d(C=>({...C,[x.target.name]:x.target.value}))}async function b(x){x.preventDefault(),m(""),g(!0);try{if(i){if(!o.name.trim())throw new Error("Name is required.");if(!o.fplCode.trim())throw new Error("FPL kode is required.");await t(o.name.trim(),o.email,o.password,o.fplCode)}else await s(o.email,o.password)}catch(C){m(C.message||"Something went wrong.")}finally{g(!1)}}return c.jsx("div",{className:"auth-page",children:c.jsxs("div",{className:"auth-card",children:[c.jsxs("div",{className:"auth-brand",children:[c.jsx("div",{className:"brand-icon",children:"FF"}),c.jsxs("div",{children:[c.jsx("h1",{children:"My Football Fantasy"}),c.jsx("p",{className:"subtitle",children:"Season 2025/26"})]})]}),c.jsx("h2",{className:"auth-title",children:i?"Create account":"Sign in"}),c.jsxs("form",{onSubmit:b,className:"auth-form",children:[i&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"name",children:"Name"}),c.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:o.name,onChange:y,placeholder:"Your name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o.email,onChange:y,placeholder:"you@example.com"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"password",children:"Password"}),c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:i?"new-password":"current-password",required:!0,value:o.password,onChange:y,placeholder:""})]}),i&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"fplCode",children:"FPL kode"}),c.jsx("input",{id:"fplCode",name:"fplCode",type:"number",required:!0,value:o.fplCode,onChange:y,placeholder:"e.g. 5398119"})]}),f&&c.jsx("p",{className:"auth-error",children:f}),c.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:p,children:p?"Please wait...":i?"Create account":"Sign in"})]}),c.jsxs("p",{className:"auth-toggle",children:[i?"Already have an account?":"No account yet?"," ",c.jsx("button",{type:"button",className:"auth-toggle-btn",onClick:()=>{r(x=>!x),m("")},children:i?"Sign in":"Create account"})]})]})})}const Ny=[{id:"team",label:"My Team",icon:"shield"},{id:"formation",label:"Formation",icon:"formation"},{id:"points",label:"Points",icon:"chart"},{id:"trade",label:"Trade Analyzer",icon:"swap"},{id:"transfers",label:"Transfers",icon:"transfers"},{id:"prices",label:"Prices",icon:"prices"},{id:"fixtures",label:"Fixtures",icon:"calendar"}],cD={id:"admin",label:"Admin",icon:"admin"},uD={shield:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),chart:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),c.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),c.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),swap:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"17 1 21 5 17 9"}),c.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),c.jsx("polyline",{points:"7 23 3 19 7 15"}),c.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),calendar:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),c.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),c.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),formation:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2"}),c.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"7",cy:"10",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"17",cy:"10",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"8",cy:"16",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"16",cy:"16",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"12",cy:"21",r:"1.5",fill:"currentColor"})]}),prices:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),c.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),transfers:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2v20M2 12h20"}),c.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor",stroke:"none"}),c.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor",stroke:"none"}),c.jsx("path",{d:"M7 9l5-5 5 5M17 15l-5 5-5-5"})]}),admin:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 15c-3.87 0-7 1.57-7 3.5V21h14v-2.5c0-1.93-3.13-3.5-7-3.5z"}),c.jsx("circle",{cx:"12",cy:"8",r:"4"}),c.jsx("path",{d:"M19 8l1.5 1.5L22 8"})]})};function dD(){const{user:s,fplCode:t,isAdmin:i,logout:r}=fl(),[o,d]=Z.useState("team"),[f,m]=Z.useState("ff"),{data:p,loading:g,error:y,reload:b}=Ts(HE,[t]),x=i?[...Ny,cD]:Ny;return c.jsxs("div",{className:"app",children:[c.jsx("header",{className:"app-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{className:"brand",children:[c.jsx("div",{className:"brand-icon",children:"FF"}),c.jsxs("div",{children:[c.jsx("h1",{children:"My Football Fantasy"}),c.jsx("p",{className:"subtitle",children:"Season 2025/26"})]})]}),c.jsx("nav",{className:"nav-tabs",children:x.map(C=>c.jsxs("button",{className:`nav-tab ${o===C.id?"active":""}`,onClick:()=>d(C.id),children:[uD[C.icon],c.jsx("span",{children:C.label})]},C.id))}),c.jsxs("div",{className:"user-info",children:[c.jsx("span",{className:"user-name",children:s.displayName}),c.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Logout"})]})]})}),c.jsxs("main",{className:"app-main",children:[o==="team"&&c.jsx(JE,{teamData:p,teamLoading:g,teamError:y,teamReload:b}),o==="formation"&&c.jsx(KR,{teamData:p,teamLoading:g,teamError:y,teamReload:b}),o==="points"&&c.jsx(sN,{teamData:p,teamLoading:g,teamError:y,teamReload:b}),o==="trade"&&c.jsx(IR,{teamData:p,teamLoading:g,teamError:y,teamReload:b}),o==="prices"&&c.jsx(lD,{}),o==="transfers"&&c.jsx(JR,{}),o==="fixtures"&&c.jsx(BR,{}),o==="admin"&&i&&c.jsx(QR,{})]}),c.jsx("div",{className:"version-label",children:"v0.05"})]})}function hD(){const{user:s,loading:t}=fl();return t?c.jsx("div",{className:"app-loading",children:c.jsx("div",{className:"loading-spinner"})}):s?c.jsx(dD,{}):c.jsx(oD,{})}function fD(){return c.jsx(ER,{children:c.jsx(hD,{})})}xE.createRoot(document.getElementById("root")).render(c.jsx(Z.StrictMode,{children:c.jsx(fD,{})}));
