(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();var $d={exports:{}},Tr={};var Q_;function mN(){if(Q_)return Tr;Q_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Tr.Fragment=t,Tr.jsx=i,Tr.jsxs=i,Tr}var $_;function pN(){return $_||($_=1,$d.exports=mN()),$d.exports}var c=pN(),Zd={exports:{}},he={};var Z_;function gN(){if(Z_)return he;Z_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function C(N){return N===null||typeof N!="object"?null:(N=x&&N[x]||N["@@iterator"],typeof N=="function"?N:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,U={};function Y(N,j,A){this.props=N,this.context=j,this.refs=U,this.updater=A||E}Y.prototype.isReactComponent={},Y.prototype.setState=function(N,j){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,j,"setState")},Y.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function $(){}$.prototype=Y.prototype;function V(N,j,A){this.props=N,this.context=j,this.refs=U,this.updater=A||E}var z=V.prototype=new $;z.constructor=V,P(z,Y.prototype),z.isPureReactComponent=!0;var F=Array.isArray;function K(){}var Q={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function me(N,j,A){var L=A.ref;return{$$typeof:s,type:N,key:j,ref:L!==void 0?L:null,props:A}}function Ce(N,j){return me(N.type,j,N.props)}function we(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function re(N){var j={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(A){return j[A]})}var _e=/\/+/g;function J(N,j){return typeof N=="object"&&N!==null&&N.key!=null?re(""+N.key):j.toString(36)}function W(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(K,K):(N.status="pending",N.then(function(j){N.status==="pending"&&(N.status="fulfilled",N.value=j)},function(j){N.status==="pending"&&(N.status="rejected",N.reason=j)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function k(N,j,A,L,ee){var le=typeof N;(le==="undefined"||le==="boolean")&&(N=null);var ge=!1;if(N===null)ge=!0;else switch(le){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(N.$$typeof){case s:case t:ge=!0;break;case b:return ge=N._init,k(ge(N._payload),j,A,L,ee)}}if(ge)return ee=ee(N),ge=L===""?"."+J(N,0):L,F(ee)?(A="",ge!=null&&(A=ge.replace(_e,"$&/")+"/"),k(ee,j,A,"",function(Je){return Je})):ee!=null&&(we(ee)&&(ee=Ce(ee,A+(ee.key==null||N&&N.key===ee.key?"":(""+ee.key).replace(_e,"$&/")+"/")+ge)),j.push(ee)),1;ge=0;var Fe=L===""?".":L+":";if(F(N))for(var je=0;je<N.length;je++)L=N[je],le=Fe+J(L,je),ge+=k(L,j,A,le,ee);else if(je=C(N),typeof je=="function")for(N=je.call(N),je=0;!(L=N.next()).done;)L=L.value,le=Fe+J(L,je++),ge+=k(L,j,A,le,ee);else if(le==="object"){if(typeof N.then=="function")return k(W(N),j,A,L,ee);throw j=String(N),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return ge}function q(N,j,A){if(N==null)return N;var L=[],ee=0;return k(N,L,"","",function(le){return j.call(A,le,ee++)}),L}function R(N){if(N._status===-1){var j=N._result;j=j(),j.then(function(A){(N._status===0||N._status===-1)&&(N._status=1,N._result=A)},function(A){(N._status===0||N._status===-1)&&(N._status=2,N._result=A)}),N._status===-1&&(N._status=0,N._result=j)}if(N._status===1)return N._result.default;throw N._result}var te=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},de={map:q,forEach:function(N,j,A){q(N,function(){j.apply(this,arguments)},A)},count:function(N){var j=0;return q(N,function(){j++}),j},toArray:function(N){return q(N,function(j){return j})||[]},only:function(N){if(!we(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return he.Activity=y,he.Children=de,he.Component=Y,he.Fragment=i,he.Profiler=o,he.PureComponent=V,he.StrictMode=r,he.Suspense=g,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,he.__COMPILER_RUNTIME={__proto__:null,c:function(N){return Q.H.useMemoCache(N)}},he.cache=function(N){return function(){return N.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(N,j,A){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var L=P({},N.props),ee=N.key;if(j!=null)for(le in j.key!==void 0&&(ee=""+j.key),j)!se.call(j,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&j.ref===void 0||(L[le]=j[le]);var le=arguments.length-2;if(le===1)L.children=A;else if(1<le){for(var ge=Array(le),Fe=0;Fe<le;Fe++)ge[Fe]=arguments[Fe+2];L.children=ge}return me(N.type,ee,L)},he.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},he.createElement=function(N,j,A){var L,ee={},le=null;if(j!=null)for(L in j.key!==void 0&&(le=""+j.key),j)se.call(j,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(ee[L]=j[L]);var ge=arguments.length-2;if(ge===1)ee.children=A;else if(1<ge){for(var Fe=Array(ge),je=0;je<ge;je++)Fe[je]=arguments[je+2];ee.children=Fe}if(N&&N.defaultProps)for(L in ge=N.defaultProps,ge)ee[L]===void 0&&(ee[L]=ge[L]);return me(N,le,ee)},he.createRef=function(){return{current:null}},he.forwardRef=function(N){return{$$typeof:m,render:N}},he.isValidElement=we,he.lazy=function(N){return{$$typeof:b,_payload:{_status:-1,_result:N},_init:R}},he.memo=function(N,j){return{$$typeof:p,type:N,compare:j===void 0?null:j}},he.startTransition=function(N){var j=Q.T,A={};Q.T=A;try{var L=N(),ee=Q.S;ee!==null&&ee(A,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(K,te)}catch(le){te(le)}finally{j!==null&&A.types!==null&&(j.types=A.types),Q.T=j}},he.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},he.use=function(N){return Q.H.use(N)},he.useActionState=function(N,j,A){return Q.H.useActionState(N,j,A)},he.useCallback=function(N,j){return Q.H.useCallback(N,j)},he.useContext=function(N){return Q.H.useContext(N)},he.useDebugValue=function(){},he.useDeferredValue=function(N,j){return Q.H.useDeferredValue(N,j)},he.useEffect=function(N,j){return Q.H.useEffect(N,j)},he.useEffectEvent=function(N){return Q.H.useEffectEvent(N)},he.useId=function(){return Q.H.useId()},he.useImperativeHandle=function(N,j,A){return Q.H.useImperativeHandle(N,j,A)},he.useInsertionEffect=function(N,j){return Q.H.useInsertionEffect(N,j)},he.useLayoutEffect=function(N,j){return Q.H.useLayoutEffect(N,j)},he.useMemo=function(N,j){return Q.H.useMemo(N,j)},he.useOptimistic=function(N,j){return Q.H.useOptimistic(N,j)},he.useReducer=function(N,j,A){return Q.H.useReducer(N,j,A)},he.useRef=function(N){return Q.H.useRef(N)},he.useState=function(N){return Q.H.useState(N)},he.useSyncExternalStore=function(N,j,A){return Q.H.useSyncExternalStore(N,j,A)},he.useTransition=function(){return Q.H.useTransition()},he.version="19.2.4",he}var J_;function qh(){return J_||(J_=1,Zd.exports=gN()),Zd.exports}var Z=qh(),Jd={exports:{}},Cr={},eh={exports:{}},th={};var ev;function _N(){return ev||(ev=1,(function(s){function t(k,q){var R=k.length;k.push(q);e:for(;0<R;){var te=R-1>>>1,de=k[te];if(0<o(de,q))k[te]=q,k[R]=de,R=te;else break e}}function i(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var q=k[0],R=k.pop();if(R!==q){k[0]=R;e:for(var te=0,de=k.length,N=de>>>1;te<N;){var j=2*(te+1)-1,A=k[j],L=j+1,ee=k[L];if(0>o(A,R))L<de&&0>o(ee,A)?(k[te]=ee,k[L]=R,te=L):(k[te]=A,k[j]=R,te=j);else if(L<de&&0>o(ee,R))k[te]=ee,k[L]=R,te=L;else break e}}return q}function o(k,q){var R=k.sortIndex-q.sortIndex;return R!==0?R:k.id-q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var g=[],p=[],b=1,y=null,x=3,C=!1,E=!1,P=!1,U=!1,Y=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function z(k){for(var q=i(p);q!==null;){if(q.callback===null)r(p);else if(q.startTime<=k)r(p),q.sortIndex=q.expirationTime,t(g,q);else break;q=i(p)}}function F(k){if(P=!1,z(k),!E)if(i(g)!==null)E=!0,K||(K=!0,re());else{var q=i(p);q!==null&&W(F,q.startTime-k)}}var K=!1,Q=-1,se=5,me=-1;function Ce(){return U?!0:!(s.unstable_now()-me<se)}function we(){if(U=!1,K){var k=s.unstable_now();me=k;var q=!0;try{e:{E=!1,P&&(P=!1,$(Q),Q=-1),C=!0;var R=x;try{t:{for(z(k),y=i(g);y!==null&&!(y.expirationTime>k&&Ce());){var te=y.callback;if(typeof te=="function"){y.callback=null,x=y.priorityLevel;var de=te(y.expirationTime<=k);if(k=s.unstable_now(),typeof de=="function"){y.callback=de,z(k),q=!0;break t}y===i(g)&&r(g),z(k)}else r(g);y=i(g)}if(y!==null)q=!0;else{var N=i(p);N!==null&&W(F,N.startTime-k),q=!1}}break e}finally{y=null,x=R,C=!1}q=void 0}}finally{q?re():K=!1}}}var re;if(typeof V=="function")re=function(){V(we)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,J=_e.port2;_e.port1.onmessage=we,re=function(){J.postMessage(null)}}else re=function(){Y(we,0)};function W(k,q){Q=Y(function(){k(s.unstable_now())},q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(k){k.callback=null},s.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<k?Math.floor(1e3/k):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(k){switch(x){case 1:case 2:case 3:var q=3;break;default:q=x}var R=x;x=q;try{return k()}finally{x=R}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(k,q){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var R=x;x=k;try{return q()}finally{x=R}},s.unstable_scheduleCallback=function(k,q,R){var te=s.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?te+R:te):R=te,k){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=R+de,k={id:b++,callback:q,priorityLevel:k,startTime:R,expirationTime:de,sortIndex:-1},R>te?(k.sortIndex=R,t(p,k),i(g)===null&&k===i(p)&&(P?($(Q),Q=-1):P=!0,W(F,R-te))):(k.sortIndex=de,t(g,k),E||C||(E=!0,K||(K=!0,re()))),k},s.unstable_shouldYield=Ce,s.unstable_wrapCallback=function(k){var q=x;return function(){var R=x;x=q;try{return k.apply(this,arguments)}finally{x=R}}}})(th)),th}var tv;function vN(){return tv||(tv=1,eh.exports=_N()),eh.exports}var nh={exports:{}},yt={};var nv;function yN(){if(nv)return yt;nv=1;var s=qh();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:g,containerInfo:p,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yt.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,b)},yt.flushSync=function(g){var p=f.T,b=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=p,r.p=b,r.d.f()}},yt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},yt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},yt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,y=m(b,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:C}):b==="script"&&r.d.X(g,{crossOrigin:y,integrity:x,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},yt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},yt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,y=m(b,p.crossOrigin);r.d.L(g,b,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},yt.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},yt.requestFormReset=function(g){r.d.r(g)},yt.unstable_batchedUpdates=function(g,p){return g(p)},yt.useFormState=function(g,p,b){return f.H.useFormState(g,p,b)},yt.useFormStatus=function(){return f.H.useHostTransitionStatus()},yt.version="19.2.4",yt}var sv;function bN(){if(sv)return nh.exports;sv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),nh.exports=yN(),nh.exports}var iv;function xN(){if(iv)return Cr;iv=1;var s=vN(),t=qh(),i=bN();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function p(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,l=n;;){var d=a.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===a)return g(d),e;if(h===l)return g(d),n;h=h.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=h;else{for(var _=!1,v=d.child;v;){if(v===a){_=!0,a=d,l=h;break}if(v===l){_=!0,l=d,a=h;break}v=v.sibling}if(!_){for(v=h.child;v;){if(v===a){_=!0,a=h,l=d;break}if(v===l){_=!0,l=h,a=d;break}v=v.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),V=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),me=Symbol.for("react.activity"),Ce=Symbol.for("react.memo_cache_sentinel"),we=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=we&&e[we]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Symbol.for("react.client.reference");function J(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===_e?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case Y:return"Profiler";case U:return"StrictMode";case F:return"Suspense";case K:return"SuspenseList";case me:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case V:return e.displayName||"Context";case $:return(e._context.displayName||"Context")+".Consumer";case z:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return n=e.displayName||null,n!==null?n:J(e.type)||"Memo";case se:n=e._payload,e=e._init;try{return J(e(n))}catch{}}return null}var W=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},te=[],de=-1;function N(e){return{current:e}}function j(e){0>de||(e.current=te[de],te[de]=null,de--)}function A(e,n){de++,te[de]=e.current,e.current=n}var L=N(null),ee=N(null),le=N(null),ge=N(null);function Fe(e,n){switch(A(le,n),A(ee,e),A(L,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?y_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=y_(n),e=b_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(L),A(L,e)}function je(){j(L),j(ee),j(le)}function Je(e){e.memoizedState!==null&&A(ge,e);var n=L.current,a=b_(n,e.type);n!==a&&(A(ee,e),A(L,a))}function ml(e){ee.current===e&&(j(L),j(ee)),ge.current===e&&(j(ge),xr._currentValue=R)}var Ic,Kf;function Ls(e){if(Ic===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Ic=n&&n[1]||"",Kf=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ic+e+Kf}var kc=!1;function Mc(e,n){if(!e||kc)return"";kc=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(M){var I=M}Reflect.construct(e,[],G)}else{try{G.call()}catch(M){I=M}e.call(G.prototype)}}else{try{throw Error()}catch(M){I=M}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(M){if(M&&I&&typeof M.stack=="string")return[M.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),_=h[0],v=h[1];if(_&&v){var S=_.split(`
`),O=v.split(`
`);for(d=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;d<O.length&&!O[d].includes("DetermineComponentFrameRoot");)d++;if(l===S.length||d===O.length)for(l=S.length-1,d=O.length-1;1<=l&&0<=d&&S[l]!==O[d];)d--;for(;1<=l&&0<=d;l--,d--)if(S[l]!==O[d]){if(l!==1||d!==1)do if(l--,d--,0>d||S[l]!==O[d]){var B=`
`+S[l].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=l&&0<=d);break}}}finally{kc=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ls(a):""}function qb(e,n){switch(e.tag){case 26:case 27:case 5:return Ls(e.type);case 16:return Ls("Lazy");case 13:return e.child!==n&&n!==null?Ls("Suspense Fallback"):Ls("Suspense");case 19:return Ls("SuspenseList");case 0:case 15:return Mc(e.type,!1);case 11:return Mc(e.type.render,!1);case 1:return Mc(e.type,!0);case 31:return Ls("Activity");default:return""}}function Qf(e){try{var n="",a=null;do n+=qb(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Lc=Object.prototype.hasOwnProperty,Uc=s.unstable_scheduleCallback,Pc=s.unstable_cancelCallback,Yb=s.unstable_shouldYield,Wb=s.unstable_requestPaint,Ot=s.unstable_now,Xb=s.unstable_getCurrentPriorityLevel,$f=s.unstable_ImmediatePriority,Zf=s.unstable_UserBlockingPriority,pl=s.unstable_NormalPriority,Kb=s.unstable_LowPriority,Jf=s.unstable_IdlePriority,Qb=s.log,$b=s.unstable_setDisableYieldValue,Ia=null,It=null;function Xn(e){if(typeof Qb=="function"&&$b(e),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(Ia,e)}catch{}}var kt=Math.clz32?Math.clz32:ex,Zb=Math.log,Jb=Math.LN2;function ex(e){return e>>>=0,e===0?32:31-(Zb(e)/Jb|0)|0}var gl=256,_l=262144,vl=4194304;function Us(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function yl(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var v=l&134217727;return v!==0?(l=v&~h,l!==0?d=Us(l):(_&=v,_!==0?d=Us(_):a||(a=v&~e,a!==0&&(d=Us(a))))):(v=l&~h,v!==0?d=Us(v):_!==0?d=Us(_):a||(a=l&~e,a!==0&&(d=Us(a)))),d===0?0:n!==0&&n!==d&&(n&h)===0&&(h=d&-d,a=n&-n,h>=a||h===32&&(a&4194048)!==0)?n:d}function ka(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function tx(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function em(){var e=vl;return vl<<=1,(vl&62914560)===0&&(vl=4194304),e}function zc(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Ma(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function nx(e,n,a,l,d,h){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,S=e.expirationTimes,O=e.hiddenUpdates;for(a=_&~a;0<a;){var B=31-kt(a),G=1<<B;v[B]=0,S[B]=-1;var I=O[B];if(I!==null)for(O[B]=null,B=0;B<I.length;B++){var M=I[B];M!==null&&(M.lane&=-536870913)}a&=~G}l!==0&&tm(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(_&~n))}function tm(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-kt(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function nm(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-kt(a),d=1<<l;d&n|e[l]&n&&(e[l]|=n),a&=~d}}function sm(e,n){var a=n&-n;return a=(a&42)!==0?1:Bc(a),(a&(e.suspendedLanes|n))!==0?0:a}function Bc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function im(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:F_(e.type))}function am(e,n){var a=q.p;try{return q.p=e,n()}finally{q.p=a}}var Kn=Math.random().toString(36).slice(2),dt="__reactFiber$"+Kn,Et="__reactProps$"+Kn,bi="__reactContainer$"+Kn,Gc="__reactEvents$"+Kn,sx="__reactListeners$"+Kn,ix="__reactHandles$"+Kn,rm="__reactResources$"+Kn,La="__reactMarker$"+Kn;function Fc(e){delete e[dt],delete e[Et],delete e[Gc],delete e[sx],delete e[ix]}function xi(e){var n=e[dt];if(n)return n;for(var a=e.parentNode;a;){if(n=a[bi]||a[dt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=w_(e);e!==null;){if(a=e[dt])return a;e=w_(e)}return n}e=a,a=e.parentNode}return null}function Si(e){if(e=e[dt]||e[bi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Ua(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function Ni(e){var n=e[rm];return n||(n=e[rm]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function lt(e){e[La]=!0}var lm=new Set,om={};function Ps(e,n){Ei(e,n),Ei(e+"Capture",n)}function Ei(e,n){for(om[e]=n,e=0;e<n.length;e++)lm.add(n[e])}var ax=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cm={},um={};function rx(e){return Lc.call(um,e)?!0:Lc.call(cm,e)?!1:ax.test(e)?um[e]=!0:(cm[e]=!0,!1)}function bl(e,n,a){if(rx(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function xl(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function yn(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function Gt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dm(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function lx(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,h.call(this,_)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Vc(e){if(!e._valueTracker){var n=dm(e)?"checked":"value";e._valueTracker=lx(e,n,""+e[n])}}function hm(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=dm(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function Sl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ox=/[\n"\\]/g;function Ft(e){return e.replace(ox,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function qc(e,n,a,l,d,h,_,v){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Gt(n)):e.value!==""+Gt(n)&&(e.value=""+Gt(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?Yc(e,_,Gt(n)):a!=null?Yc(e,_,Gt(a)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Gt(v):e.removeAttribute("name")}function fm(e,n,a,l,d,h,_,v){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){Vc(e);return}a=a!=null?""+Gt(a):"",n=n!=null?""+Gt(n):a,v||n===e.value||(e.value=n),e.defaultValue=n}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=v?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Vc(e)}function Yc(e,n,a){n==="number"&&Sl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ti(e,n,a,l){if(e=e.options,n){n={};for(var d=0;d<a.length;d++)n["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=n.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Gt(a),n=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function mm(e,n,a){if(n!=null&&(n=""+Gt(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Gt(a):""}function pm(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(W(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Gt(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Vc(e)}function Ci(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var cx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gm(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||cx.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function _m(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in n)l=n[d],n.hasOwnProperty(d)&&a[d]!==l&&gm(e,d,l)}else for(var h in n)n.hasOwnProperty(h)&&gm(e,h,n[h])}function Wc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ux=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nl(e){return dx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function bn(){}var Xc=null;function Kc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wi=null,ji=null;function vm(e){var n=Si(e);if(n&&(e=n.stateNode)){var a=e[Et]||null;e:switch(e=n.stateNode,n.type){case"input":if(qc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ft(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var d=l[Et]||null;if(!d)throw Error(r(90));qc(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&hm(l)}break e;case"textarea":mm(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Ti(e,!!a.multiple,n,!1)}}}var Qc=!1;function ym(e,n,a){if(Qc)return e(n,a);Qc=!0;try{var l=e(n);return l}finally{if(Qc=!1,(wi!==null||ji!==null)&&(uo(),wi&&(n=wi,e=ji,ji=wi=null,vm(n),e)))for(n=0;n<e.length;n++)vm(e[n])}}function Pa(e,n){var a=e.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$c=!1;if(xn)try{var za={};Object.defineProperty(za,"passive",{get:function(){$c=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{$c=!1}var Qn=null,Zc=null,El=null;function bm(){if(El)return El;var e,n=Zc,a=n.length,l,d="value"in Qn?Qn.value:Qn.textContent,h=d.length;for(e=0;e<a&&n[e]===d[e];e++);var _=a-e;for(l=1;l<=_&&n[a-l]===d[h-l];l++);return El=d.slice(e,1<l?1-l:void 0)}function Tl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Cl(){return!0}function xm(){return!1}function Tt(e){function n(a,l,d,h,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=_,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Cl:xm,this.isPropagationStopped=xm,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),n}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wl=Tt(zs),Ba=y({},zs,{view:0,detail:0}),hx=Tt(Ba),Jc,eu,Ha,jl=y({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ha&&(Ha&&e.type==="mousemove"?(Jc=e.screenX-Ha.screenX,eu=e.screenY-Ha.screenY):eu=Jc=0,Ha=e),Jc)},movementY:function(e){return"movementY"in e?e.movementY:eu}}),Sm=Tt(jl),fx=y({},jl,{dataTransfer:0}),mx=Tt(fx),px=y({},Ba,{relatedTarget:0}),tu=Tt(px),gx=y({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),_x=Tt(gx),vx=y({},zs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yx=Tt(vx),bx=y({},zs,{data:0}),Nm=Tt(bx),xx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ex(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Nx[e])?!!n[e]:!1}function nu(){return Ex}var Tx=y({},Ba,{key:function(e){if(e.key){var n=xx[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Tl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(e){return e.type==="keypress"?Tl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cx=Tt(Tx),wx=y({},jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Em=Tt(wx),jx=y({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),Ax=Tt(jx),Rx=y({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dx=Tt(Rx),Ox=y({},jl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ix=Tt(Ox),kx=y({},zs,{newState:0,oldState:0}),Mx=Tt(kx),Lx=[9,13,27,32],su=xn&&"CompositionEvent"in window,Ga=null;xn&&"documentMode"in document&&(Ga=document.documentMode);var Ux=xn&&"TextEvent"in window&&!Ga,Tm=xn&&(!su||Ga&&8<Ga&&11>=Ga),Cm=" ",wm=!1;function jm(e,n){switch(e){case"keyup":return Lx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Am(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ai=!1;function Px(e,n){switch(e){case"compositionend":return Am(n);case"keypress":return n.which!==32?null:(wm=!0,Cm);case"textInput":return e=n.data,e===Cm&&wm?null:e;default:return null}}function zx(e,n){if(Ai)return e==="compositionend"||!su&&jm(e,n)?(e=bm(),El=Zc=Qn=null,Ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Tm&&n.locale!=="ko"?null:n.data;default:return null}}var Bx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Bx[e.type]:n==="textarea"}function Dm(e,n,a,l){wi?ji?ji.push(l):ji=[l]:wi=l,n=vo(n,"onChange"),0<n.length&&(a=new wl("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var Fa=null,Va=null;function Hx(e){f_(e,0)}function Al(e){var n=Ua(e);if(hm(n))return e}function Om(e,n){if(e==="change")return n}var Im=!1;if(xn){var iu;if(xn){var au="oninput"in document;if(!au){var km=document.createElement("div");km.setAttribute("oninput","return;"),au=typeof km.oninput=="function"}iu=au}else iu=!1;Im=iu&&(!document.documentMode||9<document.documentMode)}function Mm(){Fa&&(Fa.detachEvent("onpropertychange",Lm),Va=Fa=null)}function Lm(e){if(e.propertyName==="value"&&Al(Va)){var n=[];Dm(n,Va,e,Kc(e)),ym(Hx,n)}}function Gx(e,n,a){e==="focusin"?(Mm(),Fa=n,Va=a,Fa.attachEvent("onpropertychange",Lm)):e==="focusout"&&Mm()}function Fx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Al(Va)}function Vx(e,n){if(e==="click")return Al(n)}function qx(e,n){if(e==="input"||e==="change")return Al(n)}function Yx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Mt=typeof Object.is=="function"?Object.is:Yx;function qa(e,n){if(Mt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Lc.call(n,d)||!Mt(e[d],n[d]))return!1}return!0}function Um(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pm(e,n){var a=Um(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Um(a)}}function zm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?zm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Bm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Sl(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Sl(e.document)}return n}function ru(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Wx=xn&&"documentMode"in document&&11>=document.documentMode,Ri=null,lu=null,Ya=null,ou=!1;function Hm(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ou||Ri==null||Ri!==Sl(l)||(l=Ri,"selectionStart"in l&&ru(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ya&&qa(Ya,l)||(Ya=l,l=vo(lu,"onSelect"),0<l.length&&(n=new wl("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Ri)))}function Bs(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Di={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},cu={},Gm={};xn&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);function Hs(e){if(cu[e])return cu[e];if(!Di[e])return e;var n=Di[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Gm)return cu[e]=n[a];return e}var Fm=Hs("animationend"),Vm=Hs("animationiteration"),qm=Hs("animationstart"),Xx=Hs("transitionrun"),Kx=Hs("transitionstart"),Qx=Hs("transitioncancel"),Ym=Hs("transitionend"),Wm=new Map,uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uu.push("scrollEnd");function sn(e,n){Wm.set(e,n),Ps(n,[e])}var Rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Vt=[],Oi=0,du=0;function Dl(){for(var e=Oi,n=du=Oi=0;n<e;){var a=Vt[n];Vt[n++]=null;var l=Vt[n];Vt[n++]=null;var d=Vt[n];Vt[n++]=null;var h=Vt[n];if(Vt[n++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}h!==0&&Xm(a,d,h)}}function Ol(e,n,a,l){Vt[Oi++]=e,Vt[Oi++]=n,Vt[Oi++]=a,Vt[Oi++]=l,du|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function hu(e,n,a,l){return Ol(e,n,a,l),Il(e)}function Gs(e,n){return Ol(e,null,null,n),Il(e)}function Xm(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var d=!1,h=e.return;h!==null;)h.childLanes|=a,l=h.alternate,l!==null&&(l.childLanes|=a),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&n!==null&&(d=31-kt(a),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[n]:l.push(n),n.lane=a|536870912),h):null}function Il(e){if(50<mr)throw mr=0,xd=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ii={};function $x(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,n,a,l){return new $x(e,n,a,l)}function fu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sn(e,n){var a=e.alternate;return a===null?(a=Lt(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Km(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function kl(e,n,a,l,d,h){var _=0;if(l=e,typeof e=="function")fu(e)&&(_=1);else if(typeof e=="string")_=nN(e,a,L.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case me:return e=Lt(31,a,n,d),e.elementType=me,e.lanes=h,e;case P:return Fs(a.children,d,h,n);case U:_=8,d|=24;break;case Y:return e=Lt(12,a,n,d|2),e.elementType=Y,e.lanes=h,e;case F:return e=Lt(13,a,n,d),e.elementType=F,e.lanes=h,e;case K:return e=Lt(19,a,n,d),e.elementType=K,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:_=10;break e;case $:_=9;break e;case z:_=11;break e;case Q:_=14;break e;case se:_=16,l=null;break e}_=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=Lt(_,a,n,d),n.elementType=e,n.type=l,n.lanes=h,n}function Fs(e,n,a,l){return e=Lt(7,e,l,n),e.lanes=a,e}function mu(e,n,a){return e=Lt(6,e,null,n),e.lanes=a,e}function Qm(e){var n=Lt(18,null,null,0);return n.stateNode=e,n}function pu(e,n,a){return n=Lt(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var $m=new WeakMap;function qt(e,n){if(typeof e=="object"&&e!==null){var a=$m.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Qf(n)},$m.set(e,n),n)}return{value:e,source:n,stack:Qf(n)}}var ki=[],Mi=0,Ml=null,Wa=0,Yt=[],Wt=0,$n=null,hn=1,fn="";function Nn(e,n){ki[Mi++]=Wa,ki[Mi++]=Ml,Ml=e,Wa=n}function Zm(e,n,a){Yt[Wt++]=hn,Yt[Wt++]=fn,Yt[Wt++]=$n,$n=e;var l=hn;e=fn;var d=32-kt(l)-1;l&=~(1<<d),a+=1;var h=32-kt(n)+d;if(30<h){var _=d-d%5;h=(l&(1<<_)-1).toString(32),l>>=_,d-=_,hn=1<<32-kt(n)+d|a<<d|l,fn=h+e}else hn=1<<h|a<<d|l,fn=e}function gu(e){e.return!==null&&(Nn(e,1),Zm(e,1,0))}function _u(e){for(;e===Ml;)Ml=ki[--Mi],ki[Mi]=null,Wa=ki[--Mi],ki[Mi]=null;for(;e===$n;)$n=Yt[--Wt],Yt[Wt]=null,fn=Yt[--Wt],Yt[Wt]=null,hn=Yt[--Wt],Yt[Wt]=null}function Jm(e,n){Yt[Wt++]=hn,Yt[Wt++]=fn,Yt[Wt++]=$n,hn=n.id,fn=n.overflow,$n=e}var ht=null,Ve=null,Te=!1,Zn=null,Xt=!1,vu=Error(r(519));function Jn(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xa(qt(n,e)),vu}function ep(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[dt]=e,n[Et]=l,a){case"dialog":be("cancel",n),be("close",n);break;case"iframe":case"object":case"embed":be("load",n);break;case"video":case"audio":for(a=0;a<gr.length;a++)be(gr[a],n);break;case"source":be("error",n);break;case"img":case"image":case"link":be("error",n),be("load",n);break;case"details":be("toggle",n);break;case"input":be("invalid",n),fm(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":be("invalid",n);break;case"textarea":be("invalid",n),pm(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||__(n.textContent,a)?(l.popover!=null&&(be("beforetoggle",n),be("toggle",n)),l.onScroll!=null&&be("scroll",n),l.onScrollEnd!=null&&be("scrollend",n),l.onClick!=null&&(n.onclick=bn),n=!0):n=!1,n||Jn(e,!0)}function tp(e){for(ht=e.return;ht;)switch(ht.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:ht=ht.return}}function Li(e){if(e!==ht)return!1;if(!Te)return tp(e),Te=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ld(e.type,e.memoizedProps)),a=!a),a&&Ve&&Jn(e),tp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Ve=C_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Ve=C_(e)}else n===27?(n=Ve,fs(e.type)?(e=Hd,Hd=null,Ve=e):Ve=n):Ve=ht?Qt(e.stateNode.nextSibling):null;return!0}function Vs(){Ve=ht=null,Te=!1}function yu(){var e=Zn;return e!==null&&(At===null?At=e:At.push.apply(At,e),Zn=null),e}function Xa(e){Zn===null?Zn=[e]:Zn.push(e)}var bu=N(null),qs=null,En=null;function es(e,n,a){A(bu,n._currentValue),n._currentValue=a}function Tn(e){e._currentValue=bu.current,j(bu)}function xu(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function Su(e,n,a,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var _=d.child;h=h.firstContext;e:for(;h!==null;){var v=h;h=d;for(var S=0;S<n.length;S++)if(v.context===n[S]){h.lanes|=a,v=h.alternate,v!==null&&(v.lanes|=a),xu(h.return,a,e),l||(_=null);break e}h=v.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,h=_.alternate,h!==null&&(h.lanes|=a),xu(_,a,e),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===e){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Ui(e,n,a,l){e=null;for(var d=n,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var v=d.type;Mt(d.pendingProps.value,_.value)||(e!==null?e.push(v):e=[v])}}else if(d===ge.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(xr):e=[xr])}d=d.return}e!==null&&Su(n,e,a,l),n.flags|=262144}function Ll(e){for(e=e.firstContext;e!==null;){if(!Mt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ys(e){qs=e,En=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ft(e){return np(qs,e)}function Ul(e,n){return qs===null&&Ys(e),np(e,n)}function np(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},En===null){if(e===null)throw Error(r(308));En=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else En=En.next=n;return a}var Zx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Jx=s.unstable_scheduleCallback,eS=s.unstable_NormalPriority,et={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nu(){return{controller:new Zx,data:new Map,refCount:0}}function Ka(e){e.refCount--,e.refCount===0&&Jx(eS,function(){e.controller.abort()})}var Qa=null,Eu=0,Pi=0,zi=null;function tS(e,n){if(Qa===null){var a=Qa=[];Eu=0,Pi=wd(),zi={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Eu++,n.then(sp,sp),n}function sp(){if(--Eu===0&&Qa!==null){zi!==null&&(zi.status="fulfilled");var e=Qa;Qa=null,Pi=0,zi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function nS(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var d=0;d<a.length;d++)(0,a[d])(n)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var ip=k.S;k.S=function(e,n){Hg=Ot(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&tS(e,n),ip!==null&&ip(e,n)};var Ws=N(null);function Tu(){var e=Ws.current;return e!==null?e:Be.pooledCache}function Pl(e,n){n===null?A(Ws,Ws.current):A(Ws,n.pool)}function ap(){var e=Tu();return e===null?null:{parent:et._currentValue,pool:e}}var Bi=Error(r(460)),Cu=Error(r(474)),zl=Error(r(542)),Bl={then:function(){}};function rp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lp(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(bn,bn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cp(e),e;default:if(typeof n.status=="string")n.then(bn,bn);else{if(e=Be,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=l}},function(l){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,cp(e),e}throw Ks=n,Bi}}function Xs(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ks=a,Bi):a}}var Ks=null;function op(){if(Ks===null)throw Error(r(459));var e=Ks;return Ks=null,e}function cp(e){if(e===Bi||e===zl)throw Error(r(483))}var Hi=null,$a=0;function Hl(e){var n=$a;return $a+=1,Hi===null&&(Hi=[]),lp(Hi,e,n)}function Za(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Gl(e,n){throw n.$$typeof===x?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function up(e){function n(w,T){if(e){var D=w.deletions;D===null?(w.deletions=[T],w.flags|=16):D.push(T)}}function a(w,T){if(!e)return null;for(;T!==null;)n(w,T),T=T.sibling;return null}function l(w){for(var T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function d(w,T){return w=Sn(w,T),w.index=0,w.sibling=null,w}function h(w,T,D){return w.index=D,e?(D=w.alternate,D!==null?(D=D.index,D<T?(w.flags|=67108866,T):D):(w.flags|=67108866,T)):(w.flags|=1048576,T)}function _(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function v(w,T,D,H){return T===null||T.tag!==6?(T=mu(D,w.mode,H),T.return=w,T):(T=d(T,D),T.return=w,T)}function S(w,T,D,H){var ae=D.type;return ae===P?B(w,T,D.props.children,H,D.key):T!==null&&(T.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===se&&Xs(ae)===T.type)?(T=d(T,D.props),Za(T,D),T.return=w,T):(T=kl(D.type,D.key,D.props,null,w.mode,H),Za(T,D),T.return=w,T)}function O(w,T,D,H){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=pu(D,w.mode,H),T.return=w,T):(T=d(T,D.children||[]),T.return=w,T)}function B(w,T,D,H,ae){return T===null||T.tag!==7?(T=Fs(D,w.mode,H,ae),T.return=w,T):(T=d(T,D),T.return=w,T)}function G(w,T,D){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=mu(""+T,w.mode,D),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case C:return D=kl(T.type,T.key,T.props,null,w.mode,D),Za(D,T),D.return=w,D;case E:return T=pu(T,w.mode,D),T.return=w,T;case se:return T=Xs(T),G(w,T,D)}if(W(T)||re(T))return T=Fs(T,w.mode,D,null),T.return=w,T;if(typeof T.then=="function")return G(w,Hl(T),D);if(T.$$typeof===V)return G(w,Ul(w,T),D);Gl(w,T)}return null}function I(w,T,D,H){var ae=T!==null?T.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ae!==null?null:v(w,T,""+D,H);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case C:return D.key===ae?S(w,T,D,H):null;case E:return D.key===ae?O(w,T,D,H):null;case se:return D=Xs(D),I(w,T,D,H)}if(W(D)||re(D))return ae!==null?null:B(w,T,D,H,null);if(typeof D.then=="function")return I(w,T,Hl(D),H);if(D.$$typeof===V)return I(w,T,Ul(w,D),H);Gl(w,D)}return null}function M(w,T,D,H,ae){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return w=w.get(D)||null,v(T,w,""+H,ae);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case C:return w=w.get(H.key===null?D:H.key)||null,S(T,w,H,ae);case E:return w=w.get(H.key===null?D:H.key)||null,O(T,w,H,ae);case se:return H=Xs(H),M(w,T,D,H,ae)}if(W(H)||re(H))return w=w.get(D)||null,B(T,w,H,ae,null);if(typeof H.then=="function")return M(w,T,D,Hl(H),ae);if(H.$$typeof===V)return M(w,T,D,Ul(T,H),ae);Gl(T,H)}return null}function ne(w,T,D,H){for(var ae=null,Ae=null,ie=T,pe=T=0,Ne=null;ie!==null&&pe<D.length;pe++){ie.index>pe?(Ne=ie,ie=null):Ne=ie.sibling;var Re=I(w,ie,D[pe],H);if(Re===null){ie===null&&(ie=Ne);break}e&&ie&&Re.alternate===null&&n(w,ie),T=h(Re,T,pe),Ae===null?ae=Re:Ae.sibling=Re,Ae=Re,ie=Ne}if(pe===D.length)return a(w,ie),Te&&Nn(w,pe),ae;if(ie===null){for(;pe<D.length;pe++)ie=G(w,D[pe],H),ie!==null&&(T=h(ie,T,pe),Ae===null?ae=ie:Ae.sibling=ie,Ae=ie);return Te&&Nn(w,pe),ae}for(ie=l(ie);pe<D.length;pe++)Ne=M(ie,w,pe,D[pe],H),Ne!==null&&(e&&Ne.alternate!==null&&ie.delete(Ne.key===null?pe:Ne.key),T=h(Ne,T,pe),Ae===null?ae=Ne:Ae.sibling=Ne,Ae=Ne);return e&&ie.forEach(function(vs){return n(w,vs)}),Te&&Nn(w,pe),ae}function oe(w,T,D,H){if(D==null)throw Error(r(151));for(var ae=null,Ae=null,ie=T,pe=T=0,Ne=null,Re=D.next();ie!==null&&!Re.done;pe++,Re=D.next()){ie.index>pe?(Ne=ie,ie=null):Ne=ie.sibling;var vs=I(w,ie,Re.value,H);if(vs===null){ie===null&&(ie=Ne);break}e&&ie&&vs.alternate===null&&n(w,ie),T=h(vs,T,pe),Ae===null?ae=vs:Ae.sibling=vs,Ae=vs,ie=Ne}if(Re.done)return a(w,ie),Te&&Nn(w,pe),ae;if(ie===null){for(;!Re.done;pe++,Re=D.next())Re=G(w,Re.value,H),Re!==null&&(T=h(Re,T,pe),Ae===null?ae=Re:Ae.sibling=Re,Ae=Re);return Te&&Nn(w,pe),ae}for(ie=l(ie);!Re.done;pe++,Re=D.next())Re=M(ie,w,pe,Re.value,H),Re!==null&&(e&&Re.alternate!==null&&ie.delete(Re.key===null?pe:Re.key),T=h(Re,T,pe),Ae===null?ae=Re:Ae.sibling=Re,Ae=Re);return e&&ie.forEach(function(fN){return n(w,fN)}),Te&&Nn(w,pe),ae}function Ue(w,T,D,H){if(typeof D=="object"&&D!==null&&D.type===P&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case C:e:{for(var ae=D.key;T!==null;){if(T.key===ae){if(ae=D.type,ae===P){if(T.tag===7){a(w,T.sibling),H=d(T,D.props.children),H.return=w,w=H;break e}}else if(T.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===se&&Xs(ae)===T.type){a(w,T.sibling),H=d(T,D.props),Za(H,D),H.return=w,w=H;break e}a(w,T);break}else n(w,T);T=T.sibling}D.type===P?(H=Fs(D.props.children,w.mode,H,D.key),H.return=w,w=H):(H=kl(D.type,D.key,D.props,null,w.mode,H),Za(H,D),H.return=w,w=H)}return _(w);case E:e:{for(ae=D.key;T!==null;){if(T.key===ae)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){a(w,T.sibling),H=d(T,D.children||[]),H.return=w,w=H;break e}else{a(w,T);break}else n(w,T);T=T.sibling}H=pu(D,w.mode,H),H.return=w,w=H}return _(w);case se:return D=Xs(D),Ue(w,T,D,H)}if(W(D))return ne(w,T,D,H);if(re(D)){if(ae=re(D),typeof ae!="function")throw Error(r(150));return D=ae.call(D),oe(w,T,D,H)}if(typeof D.then=="function")return Ue(w,T,Hl(D),H);if(D.$$typeof===V)return Ue(w,T,Ul(w,D),H);Gl(w,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,T!==null&&T.tag===6?(a(w,T.sibling),H=d(T,D),H.return=w,w=H):(a(w,T),H=mu(D,w.mode,H),H.return=w,w=H),_(w)):a(w,T)}return function(w,T,D,H){try{$a=0;var ae=Ue(w,T,D,H);return Hi=null,ae}catch(ie){if(ie===Bi||ie===zl)throw ie;var Ae=Lt(29,ie,null,w.mode);return Ae.lanes=H,Ae.return=w,Ae}}}var Qs=up(!0),dp=up(!1),ts=!1;function wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ju(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ns(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Oe&2)!==0){var d=l.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),l.pending=n,n=Il(e),Xm(e,null,a),n}return Ol(e,l,n,a),Il(e)}function Ja(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,nm(e,a)}}function Au(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?d=h=_:h=h.next=_,a=a.next}while(a!==null);h===null?d=h=n:h=h.next=n}else d=h=n;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Ru=!1;function er(){if(Ru){var e=zi;if(e!==null)throw e}}function tr(e,n,a,l){Ru=!1;var d=e.updateQueue;ts=!1;var h=d.firstBaseUpdate,_=d.lastBaseUpdate,v=d.shared.pending;if(v!==null){d.shared.pending=null;var S=v,O=S.next;S.next=null,_===null?h=O:_.next=O,_=S;var B=e.alternate;B!==null&&(B=B.updateQueue,v=B.lastBaseUpdate,v!==_&&(v===null?B.firstBaseUpdate=O:v.next=O,B.lastBaseUpdate=S))}if(h!==null){var G=d.baseState;_=0,B=O=S=null,v=h;do{var I=v.lane&-536870913,M=I!==v.lane;if(M?(Se&I)===I:(l&I)===I){I!==0&&I===Pi&&(Ru=!0),B!==null&&(B=B.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var ne=e,oe=v;I=n;var Ue=a;switch(oe.tag){case 1:if(ne=oe.payload,typeof ne=="function"){G=ne.call(Ue,G,I);break e}G=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=oe.payload,I=typeof ne=="function"?ne.call(Ue,G,I):ne,I==null)break e;G=y({},G,I);break e;case 2:ts=!0}}I=v.callback,I!==null&&(e.flags|=64,M&&(e.flags|=8192),M=d.callbacks,M===null?d.callbacks=[I]:M.push(I))}else M={lane:I,tag:v.tag,payload:v.payload,callback:v.callback,next:null},B===null?(O=B=M,S=G):B=B.next=M,_|=I;if(v=v.next,v===null){if(v=d.shared.pending,v===null)break;M=v,v=M.next,M.next=null,d.lastBaseUpdate=M,d.shared.pending=null}}while(!0);B===null&&(S=G),d.baseState=S,d.firstBaseUpdate=O,d.lastBaseUpdate=B,h===null&&(d.shared.lanes=0),os|=_,e.lanes=_,e.memoizedState=G}}function hp(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function fp(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)hp(a[e],n)}var Gi=N(null),Fl=N(0);function mp(e,n){e=kn,A(Fl,e),A(Gi,n),kn=e|n.baseLanes}function Du(){A(Fl,kn),A(Gi,Gi.current)}function Ou(){kn=Fl.current,j(Gi),j(Fl)}var Ut=N(null),Kt=null;function is(e){var n=e.alternate;A($e,$e.current&1),A(Ut,e),Kt===null&&(n===null||Gi.current!==null||n.memoizedState!==null)&&(Kt=e)}function Iu(e){A($e,$e.current),A(Ut,e),Kt===null&&(Kt=e)}function pp(e){e.tag===22?(A($e,$e.current),A(Ut,e),Kt===null&&(Kt=e)):as()}function as(){A($e,$e.current),A(Ut,Ut.current)}function Pt(e){j(Ut),Kt===e&&(Kt=null),j($e)}var $e=N(0);function Vl(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||zd(a)||Bd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Cn=0,fe=null,Me=null,tt=null,ql=!1,Fi=!1,$s=!1,Yl=0,nr=0,Vi=null,sS=0;function We(){throw Error(r(321))}function ku(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Mt(e[a],n[a]))return!1;return!0}function Mu(e,n,a,l,d,h){return Cn=h,fe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?Zp:Qu,$s=!1,h=a(l,d),$s=!1,Fi&&(h=_p(n,a,l,d)),gp(e),h}function gp(e){k.H=ar;var n=Me!==null&&Me.next!==null;if(Cn=0,tt=Me=fe=null,ql=!1,nr=0,Vi=null,n)throw Error(r(300));e===null||nt||(e=e.dependencies,e!==null&&Ll(e)&&(nt=!0))}function _p(e,n,a,l){fe=e;var d=0;do{if(Fi&&(Vi=null),nr=0,Fi=!1,25<=d)throw Error(r(301));if(d+=1,tt=Me=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}k.H=Jp,h=n(a,l)}while(Fi);return h}function iS(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?sr(n):n,e=e.useState()[0],(Me!==null?Me.memoizedState:null)!==e&&(fe.flags|=1024),n}function Lu(){var e=Yl!==0;return Yl=0,e}function Uu(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Pu(e){if(ql){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ql=!1}Cn=0,tt=Me=fe=null,Fi=!1,nr=Yl=0,Vi=null}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?fe.memoizedState=tt=e:tt=tt.next=e,tt}function Ze(){if(Me===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var n=tt===null?fe.memoizedState:tt.next;if(n!==null)tt=n,Me=e;else{if(e===null)throw fe.alternate===null?Error(r(467)):Error(r(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},tt===null?fe.memoizedState=tt=e:tt=tt.next=e}return tt}function Wl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sr(e){var n=nr;return nr+=1,Vi===null&&(Vi=[]),e=lp(Vi,e,n),n=fe,(tt===null?n.memoizedState:tt.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?Zp:Qu),e}function Xl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return sr(e);if(e.$$typeof===V)return ft(e)}throw Error(r(438,String(e)))}function zu(e){var n=null,a=fe.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=fe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Wl(),fe.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=Ce;return n.index++,a}function wn(e,n){return typeof n=="function"?n(e):n}function Kl(e){var n=Ze();return Bu(n,Me,e)}function Bu(e,n,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var _=d.next;d.next=h.next,h.next=_}n.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{n=d.next;var v=_=null,S=null,O=n,B=!1;do{var G=O.lane&-536870913;if(G!==O.lane?(Se&G)===G:(Cn&G)===G){var I=O.revertLane;if(I===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),G===Pi&&(B=!0);else if((Cn&I)===I){O=O.next,I===Pi&&(B=!0);continue}else G={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},S===null?(v=S=G,_=h):S=S.next=G,fe.lanes|=I,os|=I;G=O.action,$s&&a(h,G),h=O.hasEagerState?O.eagerState:a(h,G)}else I={lane:G,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},S===null?(v=S=I,_=h):S=S.next=I,fe.lanes|=G,os|=G;O=O.next}while(O!==null&&O!==n);if(S===null?_=h:S.next=v,!Mt(h,e.memoizedState)&&(nt=!0,B&&(a=zi,a!==null)))throw a;e.memoizedState=h,e.baseState=_,e.baseQueue=S,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Hu(e){var n=Ze(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,h=n.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do h=e(h,_.action),_=_.next;while(_!==d);Mt(h,n.memoizedState)||(nt=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),a.lastRenderedState=h}return[h,l]}function vp(e,n,a){var l=fe,d=Ze(),h=Te;if(h){if(a===void 0)throw Error(r(407));a=a()}else a=n();var _=!Mt((Me||d).memoizedState,a);if(_&&(d.memoizedState=a,nt=!0),d=d.queue,Vu(xp.bind(null,l,d,e),[e]),d.getSnapshot!==n||_||tt!==null&&tt.memoizedState.tag&1){if(l.flags|=2048,qi(9,{destroy:void 0},bp.bind(null,l,d,a,n),null),Be===null)throw Error(r(349));h||(Cn&127)!==0||yp(l,n,a)}return a}function yp(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=fe.updateQueue,n===null?(n=Wl(),fe.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function bp(e,n,a,l){n.value=a,n.getSnapshot=l,Sp(n)&&Np(e)}function xp(e,n,a){return a(function(){Sp(n)&&Np(e)})}function Sp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Mt(e,a)}catch{return!0}}function Np(e){var n=Gs(e,2);n!==null&&Rt(n,e,2)}function Gu(e){var n=bt();if(typeof e=="function"){var a=e;if(e=a(),$s){Xn(!0);try{a()}finally{Xn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:e},n}function Ep(e,n,a,l){return e.baseState=a,Bu(e,Me,typeof l=="function"?l:wn)}function aS(e,n,a,l,d){if(Zl(e))throw Error(r(485));if(e=n.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){h.listeners.push(_)}};k.T!==null?a(!0):h.isTransition=!1,l(h),a=n.pending,a===null?(h.next=n.pending=h,Tp(n,h)):(h.next=a.next,n.pending=a.next=h)}}function Tp(e,n){var a=n.action,l=n.payload,d=e.state;if(n.isTransition){var h=k.T,_={};k.T=_;try{var v=a(d,l),S=k.S;S!==null&&S(_,v),Cp(e,n,v)}catch(O){Fu(e,n,O)}finally{h!==null&&_.types!==null&&(h.types=_.types),k.T=h}}else try{h=a(d,l),Cp(e,n,h)}catch(O){Fu(e,n,O)}}function Cp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){wp(e,n,l)},function(l){return Fu(e,n,l)}):wp(e,n,a)}function wp(e,n,a){n.status="fulfilled",n.value=a,jp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Tp(e,a)))}function Fu(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,jp(n),n=n.next;while(n!==l)}e.action=null}function jp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Ap(e,n){return n}function Rp(e,n){if(Te){var a=Be.formState;if(a!==null){e:{var l=fe;if(Te){if(Ve){t:{for(var d=Ve,h=Xt;d.nodeType!==8;){if(!h){d=null;break t}if(d=Qt(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Ve=Qt(d.nextSibling),l=d.data==="F!";break e}}Jn(l)}l=!1}l&&(n=a[0])}}return a=bt(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:n},a.queue=l,a=Kp.bind(null,fe,l),l.dispatch=a,l=Gu(!1),h=Ku.bind(null,fe,!1,l.queue),l=bt(),d={state:n,dispatch:null,action:e,pending:null},l.queue=d,a=aS.bind(null,fe,d,h,a),d.dispatch=a,l.memoizedState=e,[n,a,!1]}function Dp(e){var n=Ze();return Op(n,Me,e)}function Op(e,n,a){if(n=Bu(e,n,Ap)[0],e=Kl(wn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=sr(n)}catch(_){throw _===Bi?zl:_}else l=n;n=Ze();var d=n.queue,h=d.dispatch;return a!==n.memoizedState&&(fe.flags|=2048,qi(9,{destroy:void 0},rS.bind(null,d,a),null)),[l,h,e]}function rS(e,n){e.action=n}function Ip(e){var n=Ze(),a=Me;if(a!==null)return Op(n,a,e);Ze(),n=n.memoizedState,a=Ze();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function qi(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=fe.updateQueue,n===null&&(n=Wl(),fe.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function kp(){return Ze().memoizedState}function Ql(e,n,a,l){var d=bt();fe.flags|=e,d.memoizedState=qi(1|n,{destroy:void 0},a,l===void 0?null:l)}function $l(e,n,a,l){var d=Ze();l=l===void 0?null:l;var h=d.memoizedState.inst;Me!==null&&l!==null&&ku(l,Me.memoizedState.deps)?d.memoizedState=qi(n,h,a,l):(fe.flags|=e,d.memoizedState=qi(1|n,h,a,l))}function Mp(e,n){Ql(8390656,8,e,n)}function Vu(e,n){$l(2048,8,e,n)}function lS(e){fe.flags|=4;var n=fe.updateQueue;if(n===null)n=Wl(),fe.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Lp(e){var n=Ze().memoizedState;return lS({ref:n,nextImpl:e}),function(){if((Oe&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Up(e,n){return $l(4,2,e,n)}function Pp(e,n){return $l(4,4,e,n)}function zp(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Bp(e,n,a){a=a!=null?a.concat([e]):null,$l(4,4,zp.bind(null,n,e),a)}function qu(){}function Hp(e,n){var a=Ze();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&ku(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function Gp(e,n){var a=Ze();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&ku(n,l[1]))return l[0];if(l=e(),$s){Xn(!0);try{e()}finally{Xn(!1)}}return a.memoizedState=[l,n],l}function Yu(e,n,a){return a===void 0||(Cn&1073741824)!==0&&(Se&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Fg(),fe.lanes|=e,os|=e,a)}function Fp(e,n,a,l){return Mt(a,n)?a:Gi.current!==null?(e=Yu(e,a,l),Mt(e,n)||(nt=!0),e):(Cn&42)===0||(Cn&1073741824)!==0&&(Se&261930)===0?(nt=!0,e.memoizedState=a):(e=Fg(),fe.lanes|=e,os|=e,n)}function Vp(e,n,a,l,d){var h=q.p;q.p=h!==0&&8>h?h:8;var _=k.T,v={};k.T=v,Ku(e,!1,n,a);try{var S=d(),O=k.S;if(O!==null&&O(v,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var B=nS(S,l);ir(e,n,B,Ht(e))}else ir(e,n,l,Ht(e))}catch(G){ir(e,n,{then:function(){},status:"rejected",reason:G},Ht())}finally{q.p=h,_!==null&&v.types!==null&&(_.types=v.types),k.T=_}}function oS(){}function Wu(e,n,a,l){if(e.tag!==5)throw Error(r(476));var d=qp(e).queue;Vp(e,d,n,R,a===null?oS:function(){return Yp(e),a(l)})}function qp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:R},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Yp(e){var n=qp(e);n.next===null&&(n=e.alternate.memoizedState),ir(e,n.next.queue,{},Ht())}function Xu(){return ft(xr)}function Wp(){return Ze().memoizedState}function Xp(){return Ze().memoizedState}function cS(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Ht();e=ns(a);var l=ss(n,e,a);l!==null&&(Rt(l,n,a),Ja(l,n,a)),n={cache:Nu()},e.payload=n;return}n=n.return}}function uS(e,n,a){var l=Ht();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zl(e)?Qp(n,a):(a=hu(e,n,a,l),a!==null&&(Rt(a,e,l),$p(a,n,l)))}function Kp(e,n,a){var l=Ht();ir(e,n,a,l)}function ir(e,n,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zl(e))Qp(n,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var _=n.lastRenderedState,v=h(_,a);if(d.hasEagerState=!0,d.eagerState=v,Mt(v,_))return Ol(e,n,d,0),Be===null&&Dl(),!1}catch{}if(a=hu(e,n,d,l),a!==null)return Rt(a,e,l),$p(a,n,l),!0}return!1}function Ku(e,n,a,l){if(l={lane:2,revertLane:wd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zl(e)){if(n)throw Error(r(479))}else n=hu(e,a,l,2),n!==null&&Rt(n,e,2)}function Zl(e){var n=e.alternate;return e===fe||n!==null&&n===fe}function Qp(e,n){Fi=ql=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function $p(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,nm(e,a)}}var ar={readContext:ft,use:Xl,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};ar.useEffectEvent=We;var Zp={readContext:ft,use:Xl,useCallback:function(e,n){return bt().memoizedState=[e,n===void 0?null:n],e},useContext:ft,useEffect:Mp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Ql(4194308,4,zp.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Ql(4194308,4,e,n)},useInsertionEffect:function(e,n){Ql(4,2,e,n)},useMemo:function(e,n){var a=bt();n=n===void 0?null:n;var l=e();if($s){Xn(!0);try{e()}finally{Xn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=bt();if(a!==void 0){var d=a(n);if($s){Xn(!0);try{a(n)}finally{Xn(!1)}}}else d=n;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=uS.bind(null,fe,e),[l.memoizedState,e]},useRef:function(e){var n=bt();return e={current:e},n.memoizedState=e},useState:function(e){e=Gu(e);var n=e.queue,a=Kp.bind(null,fe,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:qu,useDeferredValue:function(e,n){var a=bt();return Yu(a,e,n)},useTransition:function(){var e=Gu(!1);return e=Vp.bind(null,fe,e.queue,!0,!1),bt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=fe,d=bt();if(Te){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),Be===null)throw Error(r(349));(Se&127)!==0||yp(l,n,a)}d.memoizedState=a;var h={value:a,getSnapshot:n};return d.queue=h,Mp(xp.bind(null,l,h,e),[e]),l.flags|=2048,qi(9,{destroy:void 0},bp.bind(null,l,h,a,n),null),a},useId:function(){var e=bt(),n=Be.identifierPrefix;if(Te){var a=fn,l=hn;a=(l&~(1<<32-kt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Yl++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=sS++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Xu,useFormState:Rp,useActionState:Rp,useOptimistic:function(e){var n=bt();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Ku.bind(null,fe,!0,a),a.dispatch=n,[e,n]},useMemoCache:zu,useCacheRefresh:function(){return bt().memoizedState=cS.bind(null,fe)},useEffectEvent:function(e){var n=bt(),a={impl:e};return n.memoizedState=a,function(){if((Oe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Qu={readContext:ft,use:Xl,useCallback:Hp,useContext:ft,useEffect:Vu,useImperativeHandle:Bp,useInsertionEffect:Up,useLayoutEffect:Pp,useMemo:Gp,useReducer:Kl,useRef:kp,useState:function(){return Kl(wn)},useDebugValue:qu,useDeferredValue:function(e,n){var a=Ze();return Fp(a,Me.memoizedState,e,n)},useTransition:function(){var e=Kl(wn)[0],n=Ze().memoizedState;return[typeof e=="boolean"?e:sr(e),n]},useSyncExternalStore:vp,useId:Wp,useHostTransitionStatus:Xu,useFormState:Dp,useActionState:Dp,useOptimistic:function(e,n){var a=Ze();return Ep(a,Me,e,n)},useMemoCache:zu,useCacheRefresh:Xp};Qu.useEffectEvent=Lp;var Jp={readContext:ft,use:Xl,useCallback:Hp,useContext:ft,useEffect:Vu,useImperativeHandle:Bp,useInsertionEffect:Up,useLayoutEffect:Pp,useMemo:Gp,useReducer:Hu,useRef:kp,useState:function(){return Hu(wn)},useDebugValue:qu,useDeferredValue:function(e,n){var a=Ze();return Me===null?Yu(a,e,n):Fp(a,Me.memoizedState,e,n)},useTransition:function(){var e=Hu(wn)[0],n=Ze().memoizedState;return[typeof e=="boolean"?e:sr(e),n]},useSyncExternalStore:vp,useId:Wp,useHostTransitionStatus:Xu,useFormState:Ip,useActionState:Ip,useOptimistic:function(e,n){var a=Ze();return Me!==null?Ep(a,Me,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:zu,useCacheRefresh:Xp};Jp.useEffectEvent=Lp;function $u(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Zu={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=Ht(),d=ns(l);d.payload=n,a!=null&&(d.callback=a),n=ss(e,d,l),n!==null&&(Rt(n,e,l),Ja(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=Ht(),d=ns(l);d.tag=1,d.payload=n,a!=null&&(d.callback=a),n=ss(e,d,l),n!==null&&(Rt(n,e,l),Ja(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Ht(),l=ns(a);l.tag=2,n!=null&&(l.callback=n),n=ss(e,l,a),n!==null&&(Rt(n,e,a),Ja(n,e,a))}};function eg(e,n,a,l,d,h,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,_):n.prototype&&n.prototype.isPureReactComponent?!qa(a,l)||!qa(d,h):!0}function tg(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Zu.enqueueReplaceState(n,n.state,null)}function Zs(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function ng(e){Rl(e)}function sg(e){console.error(e)}function ig(e){Rl(e)}function Jl(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function ag(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Ju(e,n,a){return a=ns(a),a.tag=3,a.payload={element:null},a.callback=function(){Jl(e,n)},a}function rg(e){return e=ns(e),e.tag=3,e}function lg(e,n,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){ag(n,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){ag(n,a,l),typeof d!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function dS(e,n,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ui(n,a,d,!0),a=Ut.current,a!==null){switch(a.tag){case 31:case 13:return Kt===null?ho():a.alternate===null&&Xe===0&&(Xe=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Bl?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Ed(e,l,d)),!1;case 22:return a.flags|=65536,l===Bl?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Ed(e,l,d)),!1}throw Error(r(435,a.tag))}return Ed(e,l,d),ho(),!1}if(Te)return n=Ut.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,l!==vu&&(e=Error(r(422),{cause:l}),Xa(qt(e,a)))):(l!==vu&&(n=Error(r(423),{cause:l}),Xa(qt(n,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=qt(l,a),d=Ju(e.stateNode,l,d),Au(e,d),Xe!==4&&(Xe=2)),!1;var h=Error(r(520),{cause:l});if(h=qt(h,a),fr===null?fr=[h]:fr.push(h),Xe!==4&&(Xe=2),n===null)return!0;l=qt(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Ju(a.stateNode,l,e),Au(a,e),!1;case 1:if(n=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(cs===null||!cs.has(h))))return a.flags|=65536,d&=-d,a.lanes|=d,d=rg(d),lg(d,e,a,l),Au(a,d),!1}a=a.return}while(a!==null);return!1}var ed=Error(r(461)),nt=!1;function mt(e,n,a,l){n.child=e===null?dp(n,null,a,l):Qs(n,e.child,a,l)}function og(e,n,a,l,d){a=a.render;var h=n.ref;if("ref"in l){var _={};for(var v in l)v!=="ref"&&(_[v]=l[v])}else _=l;return Ys(n),l=Mu(e,n,a,_,h,d),v=Lu(),e!==null&&!nt?(Uu(e,n,d),jn(e,n,d)):(Te&&v&&gu(n),n.flags|=1,mt(e,n,l,d),n.child)}function cg(e,n,a,l,d){if(e===null){var h=a.type;return typeof h=="function"&&!fu(h)&&h.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=h,ug(e,n,h,l,d)):(e=kl(a.type,null,l,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!od(e,d)){var _=h.memoizedProps;if(a=a.compare,a=a!==null?a:qa,a(_,l)&&e.ref===n.ref)return jn(e,n,d)}return n.flags|=1,e=Sn(h,l),e.ref=n.ref,e.return=n,n.child=e}function ug(e,n,a,l,d){if(e!==null){var h=e.memoizedProps;if(qa(h,l)&&e.ref===n.ref)if(nt=!1,n.pendingProps=l=h,od(e,d))(e.flags&131072)!==0&&(nt=!0);else return n.lanes=e.lanes,jn(e,n,d)}return td(e,n,a,l,d)}function dg(e,n,a,l){var d=l.children,h=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|a:a,e!==null){for(l=n.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~h}else l=0,n.child=null;return hg(e,n,h,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Pl(n,h!==null?h.cachePool:null),h!==null?mp(n,h):Du(),pp(n);else return l=n.lanes=536870912,hg(e,n,h!==null?h.baseLanes|a:a,a,l)}else h!==null?(Pl(n,h.cachePool),mp(n,h),as(),n.memoizedState=null):(e!==null&&Pl(n,null),Du(),as());return mt(e,n,d,a),n.child}function rr(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function hg(e,n,a,l,d){var h=Tu();return h=h===null?null:{parent:et._currentValue,pool:h},n.memoizedState={baseLanes:a,cachePool:h},e!==null&&Pl(n,null),Du(),pp(n),e!==null&&Ui(e,n,l,!0),n.childLanes=d,null}function eo(e,n){return n=no({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function fg(e,n,a){return Qs(n,e.child,null,a),e=eo(n,n.pendingProps),e.flags|=2,Pt(n),n.memoizedState=null,e}function hS(e,n,a){var l=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Te){if(l.mode==="hidden")return e=eo(n,l),n.lanes=536870912,rr(null,e);if(Iu(n),(e=Ve)?(e=T_(e,Xt),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:$n!==null?{id:hn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},a=Qm(e),a.return=n,n.child=a,ht=n,Ve=null)):e=null,e===null)throw Jn(n);return n.lanes=536870912,null}return eo(n,l)}var h=e.memoizedState;if(h!==null){var _=h.dehydrated;if(Iu(n),d)if(n.flags&256)n.flags&=-257,n=fg(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(nt||Ui(e,n,a,!1),d=(a&e.childLanes)!==0,nt||d){if(l=Be,l!==null&&(_=sm(l,a),_!==0&&_!==h.retryLane))throw h.retryLane=_,Gs(e,_),Rt(l,e,_),ed;ho(),n=fg(e,n,a)}else e=h.treeContext,Ve=Qt(_.nextSibling),ht=n,Te=!0,Zn=null,Xt=!1,e!==null&&Jm(n,e),n=eo(n,l),n.flags|=4096;return n}return e=Sn(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function to(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function td(e,n,a,l,d){return Ys(n),a=Mu(e,n,a,l,void 0,d),l=Lu(),e!==null&&!nt?(Uu(e,n,d),jn(e,n,d)):(Te&&l&&gu(n),n.flags|=1,mt(e,n,a,d),n.child)}function mg(e,n,a,l,d,h){return Ys(n),n.updateQueue=null,a=_p(n,l,a,d),gp(e),l=Lu(),e!==null&&!nt?(Uu(e,n,h),jn(e,n,h)):(Te&&l&&gu(n),n.flags|=1,mt(e,n,a,h),n.child)}function pg(e,n,a,l,d){if(Ys(n),n.stateNode===null){var h=Ii,_=a.contextType;typeof _=="object"&&_!==null&&(h=ft(_)),h=new a(l,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Zu,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=l,h.state=n.memoizedState,h.refs={},wu(n),_=a.contextType,h.context=typeof _=="object"&&_!==null?ft(_):Ii,h.state=n.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&($u(n,a,_,l),h.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(_=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),_!==h.state&&Zu.enqueueReplaceState(h,h.state,null),tr(n,l,h,d),er(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){h=n.stateNode;var v=n.memoizedProps,S=Zs(a,v);h.props=S;var O=h.context,B=a.contextType;_=Ii,typeof B=="object"&&B!==null&&(_=ft(B));var G=a.getDerivedStateFromProps;B=typeof G=="function"||typeof h.getSnapshotBeforeUpdate=="function",v=n.pendingProps!==v,B||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v||O!==_)&&tg(n,h,l,_),ts=!1;var I=n.memoizedState;h.state=I,tr(n,l,h,d),er(),O=n.memoizedState,v||I!==O||ts?(typeof G=="function"&&($u(n,a,G,l),O=n.memoizedState),(S=ts||eg(n,a,S,l,I,O,_))?(B||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=O),h.props=l,h.state=O,h.context=_,l=S):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{h=n.stateNode,ju(e,n),_=n.memoizedProps,B=Zs(a,_),h.props=B,G=n.pendingProps,I=h.context,O=a.contextType,S=Ii,typeof O=="object"&&O!==null&&(S=ft(O)),v=a.getDerivedStateFromProps,(O=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==G||I!==S)&&tg(n,h,l,S),ts=!1,I=n.memoizedState,h.state=I,tr(n,l,h,d),er();var M=n.memoizedState;_!==G||I!==M||ts||e!==null&&e.dependencies!==null&&Ll(e.dependencies)?(typeof v=="function"&&($u(n,a,v,l),M=n.memoizedState),(B=ts||eg(n,a,B,l,I,M,S)||e!==null&&e.dependencies!==null&&Ll(e.dependencies))?(O||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,M,S),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,M,S)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=M),h.props=l,h.state=M,h.context=S,l=B):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&I===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&I===e.memoizedState||(n.flags|=1024),l=!1)}return h=l,to(e,n),l=(n.flags&128)!==0,h||l?(h=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&l?(n.child=Qs(n,e.child,null,d),n.child=Qs(n,null,a,d)):mt(e,n,a,d),n.memoizedState=h.state,e=n.child):e=jn(e,n,d),e}function gg(e,n,a,l){return Vs(),n.flags|=256,mt(e,n,a,l),n.child}var nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sd(e){return{baseLanes:e,cachePool:ap()}}function id(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Bt),e}function _g(e,n,a){var l=n.pendingProps,d=!1,h=(n.flags&128)!==0,_;if((_=h)||(_=e!==null&&e.memoizedState===null?!1:($e.current&2)!==0),_&&(d=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if(Te){if(d?is(n):as(),(e=Ve)?(e=T_(e,Xt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:$n!==null?{id:hn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},a=Qm(e),a.return=n,n.child=a,ht=n,Ve=null)):e=null,e===null)throw Jn(n);return Bd(e)?n.lanes=32:n.lanes=536870912,null}var v=l.children;return l=l.fallback,d?(as(),d=n.mode,v=no({mode:"hidden",children:v},d),l=Fs(l,d,a,null),v.return=n,l.return=n,v.sibling=l,n.child=v,l=n.child,l.memoizedState=sd(a),l.childLanes=id(e,_,a),n.memoizedState=nd,rr(null,l)):(is(n),ad(n,v))}var S=e.memoizedState;if(S!==null&&(v=S.dehydrated,v!==null)){if(h)n.flags&256?(is(n),n.flags&=-257,n=rd(e,n,a)):n.memoizedState!==null?(as(),n.child=e.child,n.flags|=128,n=null):(as(),v=l.fallback,d=n.mode,l=no({mode:"visible",children:l.children},d),v=Fs(v,d,a,null),v.flags|=2,l.return=n,v.return=n,l.sibling=v,n.child=l,Qs(n,e.child,null,a),l=n.child,l.memoizedState=sd(a),l.childLanes=id(e,_,a),n.memoizedState=nd,n=rr(null,l));else if(is(n),Bd(v)){if(_=v.nextSibling&&v.nextSibling.dataset,_)var O=_.dgst;_=O,l=Error(r(419)),l.stack="",l.digest=_,Xa({value:l,source:null,stack:null}),n=rd(e,n,a)}else if(nt||Ui(e,n,a,!1),_=(a&e.childLanes)!==0,nt||_){if(_=Be,_!==null&&(l=sm(_,a),l!==0&&l!==S.retryLane))throw S.retryLane=l,Gs(e,l),Rt(_,e,l),ed;zd(v)||ho(),n=rd(e,n,a)}else zd(v)?(n.flags|=192,n.child=e.child,n=null):(e=S.treeContext,Ve=Qt(v.nextSibling),ht=n,Te=!0,Zn=null,Xt=!1,e!==null&&Jm(n,e),n=ad(n,l.children),n.flags|=4096);return n}return d?(as(),v=l.fallback,d=n.mode,S=e.child,O=S.sibling,l=Sn(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&65011712,O!==null?v=Sn(O,v):(v=Fs(v,d,a,null),v.flags|=2),v.return=n,l.return=n,l.sibling=v,n.child=l,rr(null,l),l=n.child,v=e.child.memoizedState,v===null?v=sd(a):(d=v.cachePool,d!==null?(S=et._currentValue,d=d.parent!==S?{parent:S,pool:S}:d):d=ap(),v={baseLanes:v.baseLanes|a,cachePool:d}),l.memoizedState=v,l.childLanes=id(e,_,a),n.memoizedState=nd,rr(e.child,l)):(is(n),a=e.child,e=a.sibling,a=Sn(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=a,n.memoizedState=null,a)}function ad(e,n){return n=no({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function no(e,n){return e=Lt(22,e,null,n),e.lanes=0,e}function rd(e,n,a){return Qs(n,e.child,null,a),e=ad(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function vg(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),xu(e.return,n,a)}function ld(e,n,a,l,d,h){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:h}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=d,_.treeForkCount=h)}function yg(e,n,a){var l=n.pendingProps,d=l.revealOrder,h=l.tail;l=l.children;var _=$e.current,v=(_&2)!==0;if(v?(_=_&1|2,n.flags|=128):_&=1,A($e,_),mt(e,n,l,a),l=Te?Wa:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vg(e,a,n);else if(e.tag===19)vg(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=n.child,d=null;a!==null;)e=a.alternate,e!==null&&Vl(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=n.child,n.child=null):(d=a.sibling,a.sibling=null),ld(n,!1,d,a,h,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&Vl(e)===null){n.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}ld(n,!0,a,null,h,l);break;case"together":ld(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function jn(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),os|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Ui(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=Sn(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Sn(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function od(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ll(e)))}function fS(e,n,a){switch(n.tag){case 3:Fe(n,n.stateNode.containerInfo),es(n,et,e.memoizedState.cache),Vs();break;case 27:case 5:Je(n);break;case 4:Fe(n,n.stateNode.containerInfo);break;case 10:es(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Iu(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(is(n),n.flags|=128,null):(a&n.child.childLanes)!==0?_g(e,n,a):(is(n),e=jn(e,n,a),e!==null?e.sibling:null);is(n);break;case 19:var d=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ui(e,n,a,!1),l=(a&n.childLanes)!==0),d){if(l)return yg(e,n,a);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),A($e,$e.current),l)break;return null;case 22:return n.lanes=0,dg(e,n,a,n.pendingProps);case 24:es(n,et,e.memoizedState.cache)}return jn(e,n,a)}function bg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)nt=!0;else{if(!od(e,a)&&(n.flags&128)===0)return nt=!1,fS(e,n,a);nt=(e.flags&131072)!==0}else nt=!1,Te&&(n.flags&1048576)!==0&&Zm(n,Wa,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=Xs(n.elementType),n.type=e,typeof e=="function")fu(e)?(l=Zs(e,l),n.tag=1,n=pg(null,n,e,l,a)):(n.tag=0,n=td(null,n,e,l,a));else{if(e!=null){var d=e.$$typeof;if(d===z){n.tag=11,n=og(null,n,e,l,a);break e}else if(d===Q){n.tag=14,n=cg(null,n,e,l,a);break e}}throw n=J(e)||e,Error(r(306,n,""))}}return n;case 0:return td(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,d=Zs(l,n.pendingProps),pg(e,n,l,d,a);case 3:e:{if(Fe(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var h=n.memoizedState;d=h.element,ju(e,n),tr(n,l,null,a);var _=n.memoizedState;if(l=_.cache,es(n,et,l),l!==h.cache&&Su(n,[et],a,!0),er(),l=_.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=gg(e,n,l,a);break e}else if(l!==d){d=qt(Error(r(424)),n),Xa(d),n=gg(e,n,l,a);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ve=Qt(e.firstChild),ht=n,Te=!0,Zn=null,Xt=!0,a=dp(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Vs(),l===d){n=jn(e,n,a);break e}mt(e,n,l,a)}n=n.child}return n;case 26:return to(e,n),e===null?(a=D_(n.type,null,n.pendingProps,null))?n.memoizedState=a:Te||(a=n.type,e=n.pendingProps,l=yo(le.current).createElement(a),l[dt]=n,l[Et]=e,pt(l,a,e),lt(l),n.stateNode=l):n.memoizedState=D_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Je(n),e===null&&Te&&(l=n.stateNode=j_(n.type,n.pendingProps,le.current),ht=n,Xt=!0,d=Ve,fs(n.type)?(Hd=d,Ve=Qt(l.firstChild)):Ve=d),mt(e,n,n.pendingProps.children,a),to(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Te&&((d=l=Ve)&&(l=FS(l,n.type,n.pendingProps,Xt),l!==null?(n.stateNode=l,ht=n,Ve=Qt(l.firstChild),Xt=!1,d=!0):d=!1),d||Jn(n)),Je(n),d=n.type,h=n.pendingProps,_=e!==null?e.memoizedProps:null,l=h.children,Ld(d,h)?l=null:_!==null&&Ld(d,_)&&(n.flags|=32),n.memoizedState!==null&&(d=Mu(e,n,iS,null,null,a),xr._currentValue=d),to(e,n),mt(e,n,l,a),n.child;case 6:return e===null&&Te&&((e=a=Ve)&&(a=VS(a,n.pendingProps,Xt),a!==null?(n.stateNode=a,ht=n,Ve=null,e=!0):e=!1),e||Jn(n)),null;case 13:return _g(e,n,a);case 4:return Fe(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Qs(n,null,l,a):mt(e,n,l,a),n.child;case 11:return og(e,n,n.type,n.pendingProps,a);case 7:return mt(e,n,n.pendingProps,a),n.child;case 8:return mt(e,n,n.pendingProps.children,a),n.child;case 12:return mt(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,es(n,n.type,l.value),mt(e,n,l.children,a),n.child;case 9:return d=n.type._context,l=n.pendingProps.children,Ys(n),d=ft(d),l=l(d),n.flags|=1,mt(e,n,l,a),n.child;case 14:return cg(e,n,n.type,n.pendingProps,a);case 15:return ug(e,n,n.type,n.pendingProps,a);case 19:return yg(e,n,a);case 31:return hS(e,n,a);case 22:return dg(e,n,a,n.pendingProps);case 24:return Ys(n),l=ft(et),e===null?(d=Tu(),d===null&&(d=Be,h=Nu(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=a),d=h),n.memoizedState={parent:l,cache:d},wu(n),es(n,et,d)):((e.lanes&a)!==0&&(ju(e,n),tr(n,null,null,a),er()),d=e.memoizedState,h=n.memoizedState,d.parent!==l?(d={parent:l,cache:l},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),es(n,et,l)):(l=h.cache,es(n,et,l),l!==d.cache&&Su(n,[et],a,!0))),mt(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function An(e){e.flags|=4}function cd(e,n,a,l,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Wg())e.flags|=8192;else throw Ks=Bl,Cu}else e.flags&=-16777217}function xg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!L_(n))if(Wg())e.flags|=8192;else throw Ks=Bl,Cu}function so(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?em():536870912,e.lanes|=n,Ki|=n)}function lr(e,n){if(!Te)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qe(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function mS(e,n,a){var l=n.pendingProps;switch(_u(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(n),null;case 1:return qe(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Tn(et),je(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Li(n)?An(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,yu())),qe(n),null;case 26:var d=n.type,h=n.memoizedState;return e===null?(An(n),h!==null?(qe(n),xg(n,h)):(qe(n),cd(n,d,null,l,a))):h?h!==e.memoizedState?(An(n),qe(n),xg(n,h)):(qe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&An(n),qe(n),cd(n,d,e,l,a)),null;case 27:if(ml(n),a=le.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&An(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return qe(n),null}e=L.current,Li(n)?ep(n):(e=j_(d,l,a),n.stateNode=e,An(n))}return qe(n),null;case 5:if(ml(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&An(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return qe(n),null}if(h=L.current,Li(n))ep(n);else{var _=yo(le.current);switch(h){case 1:h=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=_.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}h[dt]=n,h[Et]=l;e:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)h.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=h;e:switch(pt(h,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&An(n)}}return qe(n),cd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&An(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=le.current,Li(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,d=ht,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[dt]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||__(e.nodeValue,a)),e||Jn(n,!0)}else e=yo(e).createTextNode(l),e[dt]=n,n.stateNode=e}return qe(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=Li(n),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[dt]=n}else Vs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qe(n),e=!1}else a=yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Pt(n),n):(Pt(n),null);if((n.flags&128)!==0)throw Error(r(558))}return qe(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Li(n),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[dt]=n}else Vs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qe(n),d=!1}else d=yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Pt(n),n):(Pt(n),null)}return Pt(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),so(n,n.updateQueue),qe(n),null);case 4:return je(),e===null&&Dd(n.stateNode.containerInfo),qe(n),null;case 10:return Tn(n.type),qe(n),null;case 19:if(j($e),l=n.memoizedState,l===null)return qe(n),null;if(d=(n.flags&128)!==0,h=l.rendering,h===null)if(d)lr(l,!1);else{if(Xe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=Vl(e),h!==null){for(n.flags|=128,lr(l,!1),e=h.updateQueue,n.updateQueue=e,so(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Km(a,e),a=a.sibling;return A($e,$e.current&1|2),Te&&Nn(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Ot()>oo&&(n.flags|=128,d=!0,lr(l,!1),n.lanes=4194304)}else{if(!d)if(e=Vl(h),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,so(n,e),lr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!Te)return qe(n),null}else 2*Ot()-l.renderingStartTime>oo&&a!==536870912&&(n.flags|=128,d=!0,lr(l,!1),n.lanes=4194304);l.isBackwards?(h.sibling=n.child,n.child=h):(e=l.last,e!==null?e.sibling=h:n.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ot(),e.sibling=null,a=$e.current,A($e,d?a&1|2:a&1),Te&&Nn(n,l.treeForkCount),e):(qe(n),null);case 22:case 23:return Pt(n),Ou(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(qe(n),n.subtreeFlags&6&&(n.flags|=8192)):qe(n),a=n.updateQueue,a!==null&&so(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&j(Ws),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Tn(et),qe(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function pS(e,n){switch(_u(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Tn(et),je(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ml(n),null;case 31:if(n.memoizedState!==null){if(Pt(n),n.alternate===null)throw Error(r(340));Vs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Pt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Vs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return j($e),null;case 4:return je(),null;case 10:return Tn(n.type),null;case 22:case 23:return Pt(n),Ou(),e!==null&&j(Ws),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Tn(et),null;case 25:return null;default:return null}}function Sg(e,n){switch(_u(n),n.tag){case 3:Tn(et),je();break;case 26:case 27:case 5:ml(n);break;case 4:je();break;case 31:n.memoizedState!==null&&Pt(n);break;case 13:Pt(n);break;case 19:j($e);break;case 10:Tn(n.type);break;case 22:case 23:Pt(n),Ou(),e!==null&&j(Ws);break;case 24:Tn(et)}}function or(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&e)===e){l=void 0;var h=a.create,_=a.inst;l=h(),_.destroy=l}a=a.next}while(a!==d)}}catch(v){ke(n,n.return,v)}}function rs(e,n,a){try{var l=n.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var _=l.inst,v=_.destroy;if(v!==void 0){_.destroy=void 0,d=n;var S=a,O=v;try{O()}catch(B){ke(d,S,B)}}}l=l.next}while(l!==h)}}catch(B){ke(n,n.return,B)}}function Ng(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{fp(n,a)}catch(l){ke(e,e.return,l)}}}function Eg(e,n,a){a.props=Zs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ke(e,n,l)}}function cr(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(d){ke(e,n,d)}}function mn(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ke(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ke(e,n,d)}else a.current=null}function Tg(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ke(e,e.return,d)}}function ud(e,n,a){try{var l=e.stateNode;US(l,e.type,a,n),l[Et]=n}catch(d){ke(e,e.return,d)}}function Cg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fs(e.type)||e.tag===4}function dd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hd(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=bn));else if(l!==4&&(l===27&&fs(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(hd(e,n,a),e=e.sibling;e!==null;)hd(e,n,a),e=e.sibling}function io(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&fs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(io(e,n,a),e=e.sibling;e!==null;)io(e,n,a),e=e.sibling}function wg(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);pt(n,l,a),n[dt]=e,n[Et]=a}catch(h){ke(e,e.return,h)}}var Rn=!1,st=!1,fd=!1,jg=typeof WeakSet=="function"?WeakSet:Set,ot=null;function gS(e,n){if(e=e.containerInfo,kd=Co,e=Bm(e),ru(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var _=0,v=-1,S=-1,O=0,B=0,G=e,I=null;t:for(;;){for(var M;G!==a||d!==0&&G.nodeType!==3||(v=_+d),G!==h||l!==0&&G.nodeType!==3||(S=_+l),G.nodeType===3&&(_+=G.nodeValue.length),(M=G.firstChild)!==null;)I=G,G=M;for(;;){if(G===e)break t;if(I===a&&++O===d&&(v=_),I===h&&++B===l&&(S=_),(M=G.nextSibling)!==null)break;G=I,I=G.parentNode}G=M}a=v===-1||S===-1?null:{start:v,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Md={focusedElem:e,selectionRange:a},Co=!1,ot=n;ot!==null;)if(n=ot,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ot=e;else for(;ot!==null;){switch(n=ot,h=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,a=n,d=h.memoizedProps,h=h.memoizedState,l=a.stateNode;try{var ne=Zs(a.type,d);e=l.getSnapshotBeforeUpdate(ne,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(oe){ke(a,a.return,oe)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Pd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,ot=e;break}ot=n.return}}function Ag(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:On(e,a),l&4&&or(5,a);break;case 1:if(On(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(_){ke(a,a.return,_)}else{var d=Zs(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){ke(a,a.return,_)}}l&64&&Ng(a),l&512&&cr(a,a.return);break;case 3:if(On(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{fp(e,n)}catch(_){ke(a,a.return,_)}}break;case 27:n===null&&l&4&&wg(a);case 26:case 5:On(e,a),n===null&&l&4&&Tg(a),l&512&&cr(a,a.return);break;case 12:On(e,a);break;case 31:On(e,a),l&4&&Og(e,a);break;case 13:On(e,a),l&4&&Ig(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=TS.bind(null,a),qS(e,a))));break;case 22:if(l=a.memoizedState!==null||Rn,!l){n=n!==null&&n.memoizedState!==null||st,d=Rn;var h=st;Rn=l,(st=n)&&!h?In(e,a,(a.subtreeFlags&8772)!==0):On(e,a),Rn=d,st=h}break;case 30:break;default:On(e,a)}}function Rg(e){var n=e.alternate;n!==null&&(e.alternate=null,Rg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Fc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ye=null,Ct=!1;function Dn(e,n,a){for(a=a.child;a!==null;)Dg(e,n,a),a=a.sibling}function Dg(e,n,a){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Ia,a)}catch{}switch(a.tag){case 26:st||mn(a,n),Dn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:st||mn(a,n);var l=Ye,d=Ct;fs(a.type)&&(Ye=a.stateNode,Ct=!1),Dn(e,n,a),vr(a.stateNode),Ye=l,Ct=d;break;case 5:st||mn(a,n);case 6:if(l=Ye,d=Ct,Ye=null,Dn(e,n,a),Ye=l,Ct=d,Ye!==null)if(Ct)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(a.stateNode)}catch(h){ke(a,n,h)}else try{Ye.removeChild(a.stateNode)}catch(h){ke(a,n,h)}break;case 18:Ye!==null&&(Ct?(e=Ye,N_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),sa(e)):N_(Ye,a.stateNode));break;case 4:l=Ye,d=Ct,Ye=a.stateNode.containerInfo,Ct=!0,Dn(e,n,a),Ye=l,Ct=d;break;case 0:case 11:case 14:case 15:rs(2,a,n),st||rs(4,a,n),Dn(e,n,a);break;case 1:st||(mn(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Eg(a,n,l)),Dn(e,n,a);break;case 21:Dn(e,n,a);break;case 22:st=(l=st)||a.memoizedState!==null,Dn(e,n,a),st=l;break;default:Dn(e,n,a)}}function Og(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{sa(e)}catch(a){ke(n,n.return,a)}}}function Ig(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sa(e)}catch(a){ke(n,n.return,a)}}function _S(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new jg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new jg),n;default:throw Error(r(435,e.tag))}}function ao(e,n){var a=_S(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var d=CS.bind(null,e,l);l.then(d,d)}})}function wt(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],h=e,_=n,v=_;e:for(;v!==null;){switch(v.tag){case 27:if(fs(v.type)){Ye=v.stateNode,Ct=!1;break e}break;case 5:Ye=v.stateNode,Ct=!1;break e;case 3:case 4:Ye=v.stateNode.containerInfo,Ct=!0;break e}v=v.return}if(Ye===null)throw Error(r(160));Dg(h,_,d),Ye=null,Ct=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)kg(n,e),n=n.sibling}var an=null;function kg(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wt(n,e),jt(e),l&4&&(rs(3,e,e.return),or(3,e),rs(5,e,e.return));break;case 1:wt(n,e),jt(e),l&512&&(st||a===null||mn(a,a.return)),l&64&&Rn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=an;if(wt(n,e),jt(e),l&512&&(st||a===null||mn(a,a.return)),l&4){var h=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[La]||h[dt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),pt(h,l,a),h[dt]=e,lt(h),l=h;break e;case"link":var _=k_("link","href",d).get(l+(a.href||""));if(_){for(var v=0;v<_.length;v++)if(h=_[v],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(v,1);break t}}h=d.createElement(l),pt(h,l,a),d.head.appendChild(h);break;case"meta":if(_=k_("meta","content",d).get(l+(a.content||""))){for(v=0;v<_.length;v++)if(h=_[v],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(v,1);break t}}h=d.createElement(l),pt(h,l,a),d.head.appendChild(h);break;default:throw Error(r(468,l))}h[dt]=e,lt(h),l=h}e.stateNode=l}else M_(d,e.type,e.stateNode);else e.stateNode=I_(d,l,e.memoizedProps);else h!==l?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,l===null?M_(d,e.type,e.stateNode):I_(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ud(e,e.memoizedProps,a.memoizedProps)}break;case 27:wt(n,e),jt(e),l&512&&(st||a===null||mn(a,a.return)),a!==null&&l&4&&ud(e,e.memoizedProps,a.memoizedProps);break;case 5:if(wt(n,e),jt(e),l&512&&(st||a===null||mn(a,a.return)),e.flags&32){d=e.stateNode;try{Ci(d,"")}catch(ne){ke(e,e.return,ne)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,ud(e,d,a!==null?a.memoizedProps:d)),l&1024&&(fd=!0);break;case 6:if(wt(n,e),jt(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(ne){ke(e,e.return,ne)}}break;case 3:if(So=null,d=an,an=bo(n.containerInfo),wt(n,e),an=d,jt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{sa(n.containerInfo)}catch(ne){ke(e,e.return,ne)}fd&&(fd=!1,Mg(e));break;case 4:l=an,an=bo(e.stateNode.containerInfo),wt(n,e),jt(e),an=l;break;case 12:wt(n,e),jt(e);break;case 31:wt(n,e),jt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ao(e,l)));break;case 13:wt(n,e),jt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(lo=Ot()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ao(e,l)));break;case 22:d=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,O=Rn,B=st;if(Rn=O||d,st=B||S,wt(n,e),st=B,Rn=O,jt(e),l&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(a===null||S||Rn||st||Js(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){S=a=n;try{if(h=S.stateNode,d)_=h.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{v=S.stateNode;var G=S.memoizedProps.style,I=G!=null&&G.hasOwnProperty("display")?G.display:null;v.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(ne){ke(S,S.return,ne)}}}else if(n.tag===6){if(a===null){S=n;try{S.stateNode.nodeValue=d?"":S.memoizedProps}catch(ne){ke(S,S.return,ne)}}}else if(n.tag===18){if(a===null){S=n;try{var M=S.stateNode;d?E_(M,!0):E_(S.stateNode,!1)}catch(ne){ke(S,S.return,ne)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ao(e,a))));break;case 19:wt(n,e),jt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ao(e,l)));break;case 30:break;case 21:break;default:wt(n,e),jt(e)}}function jt(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(Cg(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,h=dd(e);io(e,h,d);break;case 5:var _=a.stateNode;a.flags&32&&(Ci(_,""),a.flags&=-33);var v=dd(e);io(e,v,_);break;case 3:case 4:var S=a.stateNode.containerInfo,O=dd(e);hd(e,O,S);break;default:throw Error(r(161))}}catch(B){ke(e,e.return,B)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Mg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Mg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function On(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ag(e,n.alternate,n),n=n.sibling}function Js(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:rs(4,n,n.return),Js(n);break;case 1:mn(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Eg(n,n.return,a),Js(n);break;case 27:vr(n.stateNode);case 26:case 5:mn(n,n.return),Js(n);break;case 22:n.memoizedState===null&&Js(n);break;case 30:Js(n);break;default:Js(n)}e=e.sibling}}function In(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,d=e,h=n,_=h.flags;switch(h.tag){case 0:case 11:case 15:In(d,h,a),or(4,h);break;case 1:if(In(d,h,a),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(O){ke(l,l.return,O)}if(l=h,d=l.updateQueue,d!==null){var v=l.stateNode;try{var S=d.shared.hiddenCallbacks;if(S!==null)for(d.shared.hiddenCallbacks=null,d=0;d<S.length;d++)hp(S[d],v)}catch(O){ke(l,l.return,O)}}a&&_&64&&Ng(h),cr(h,h.return);break;case 27:wg(h);case 26:case 5:In(d,h,a),a&&l===null&&_&4&&Tg(h),cr(h,h.return);break;case 12:In(d,h,a);break;case 31:In(d,h,a),a&&_&4&&Og(d,h);break;case 13:In(d,h,a),a&&_&4&&Ig(d,h);break;case 22:h.memoizedState===null&&In(d,h,a),cr(h,h.return);break;case 30:break;default:In(d,h,a)}n=n.sibling}}function md(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ka(a))}function pd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ka(e))}function rn(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Lg(e,n,a,l),n=n.sibling}function Lg(e,n,a,l){var d=n.flags;switch(n.tag){case 0:case 11:case 15:rn(e,n,a,l),d&2048&&or(9,n);break;case 1:rn(e,n,a,l);break;case 3:rn(e,n,a,l),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ka(e)));break;case 12:if(d&2048){rn(e,n,a,l),e=n.stateNode;try{var h=n.memoizedProps,_=h.id,v=h.onPostCommit;typeof v=="function"&&v(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){ke(n,n.return,S)}}else rn(e,n,a,l);break;case 31:rn(e,n,a,l);break;case 13:rn(e,n,a,l);break;case 23:break;case 22:h=n.stateNode,_=n.alternate,n.memoizedState!==null?h._visibility&2?rn(e,n,a,l):ur(e,n):h._visibility&2?rn(e,n,a,l):(h._visibility|=2,Yi(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),d&2048&&md(_,n);break;case 24:rn(e,n,a,l),d&2048&&pd(n.alternate,n);break;default:rn(e,n,a,l)}}function Yi(e,n,a,l,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=e,_=n,v=a,S=l,O=_.flags;switch(_.tag){case 0:case 11:case 15:Yi(h,_,v,S,d),or(8,_);break;case 23:break;case 22:var B=_.stateNode;_.memoizedState!==null?B._visibility&2?Yi(h,_,v,S,d):ur(h,_):(B._visibility|=2,Yi(h,_,v,S,d)),d&&O&2048&&md(_.alternate,_);break;case 24:Yi(h,_,v,S,d),d&&O&2048&&pd(_.alternate,_);break;default:Yi(h,_,v,S,d)}n=n.sibling}}function ur(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,d=l.flags;switch(l.tag){case 22:ur(a,l),d&2048&&md(l.alternate,l);break;case 24:ur(a,l),d&2048&&pd(l.alternate,l);break;default:ur(a,l)}n=n.sibling}}var dr=8192;function Wi(e,n,a){if(e.subtreeFlags&dr)for(e=e.child;e!==null;)Ug(e,n,a),e=e.sibling}function Ug(e,n,a){switch(e.tag){case 26:Wi(e,n,a),e.flags&dr&&e.memoizedState!==null&&sN(a,an,e.memoizedState,e.memoizedProps);break;case 5:Wi(e,n,a);break;case 3:case 4:var l=an;an=bo(e.stateNode.containerInfo),Wi(e,n,a),an=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=dr,dr=16777216,Wi(e,n,a),dr=l):Wi(e,n,a));break;default:Wi(e,n,a)}}function Pg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function hr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];ot=l,Bg(l,e)}Pg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zg(e),e=e.sibling}function zg(e){switch(e.tag){case 0:case 11:case 15:hr(e),e.flags&2048&&rs(9,e,e.return);break;case 3:hr(e);break;case 12:hr(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,ro(e)):hr(e);break;default:hr(e)}}function ro(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];ot=l,Bg(l,e)}Pg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:rs(8,n,n.return),ro(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,ro(n));break;default:ro(n)}e=e.sibling}}function Bg(e,n){for(;ot!==null;){var a=ot;switch(a.tag){case 0:case 11:case 15:rs(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ka(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ot=l;else e:for(a=e;ot!==null;){l=ot;var d=l.sibling,h=l.return;if(Rg(l),l===a){ot=null;break e}if(d!==null){d.return=h,ot=d;break e}ot=h}}}var vS={getCacheForType:function(e){var n=ft(et),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return ft(et).controller.signal}},yS=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Be=null,ye=null,Se=0,Ie=0,zt=null,ls=!1,Xi=!1,gd=!1,kn=0,Xe=0,os=0,ei=0,_d=0,Bt=0,Ki=0,fr=null,At=null,vd=!1,lo=0,Hg=0,oo=1/0,co=null,cs=null,it=0,us=null,Qi=null,Mn=0,yd=0,bd=null,Gg=null,mr=0,xd=null;function Ht(){return(Oe&2)!==0&&Se!==0?Se&-Se:k.T!==null?wd():im()}function Fg(){if(Bt===0)if((Se&536870912)===0||Te){var e=_l;_l<<=1,(_l&3932160)===0&&(_l=262144),Bt=e}else Bt=536870912;return e=Ut.current,e!==null&&(e.flags|=32),Bt}function Rt(e,n,a){(e===Be&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)&&($i(e,0),ds(e,Se,Bt,!1)),Ma(e,a),((Oe&2)===0||e!==Be)&&(e===Be&&((Oe&2)===0&&(ei|=a),Xe===4&&ds(e,Se,Bt,!1)),pn(e))}function Vg(e,n,a){if((Oe&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ka(e,n),d=l?SS(e,n):Nd(e,n,!0),h=l;do{if(d===0){Xi&&!l&&ds(e,n,0,!1);break}else{if(a=e.current.alternate,h&&!bS(a)){d=Nd(e,n,!1),h=!1;continue}if(d===2){if(h=n,e.errorRecoveryDisabledLanes&h)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var v=e;d=fr;var S=v.current.memoizedState.isDehydrated;if(S&&($i(v,_).flags|=256),_=Nd(v,_,!1),_!==2){if(gd&&!S){v.errorRecoveryDisabledLanes|=h,ei|=h,d=4;break e}h=At,At=d,h!==null&&(At===null?At=h:At.push.apply(At,h))}d=_}if(h=!1,d!==2)continue}}if(d===1){$i(e,0),ds(e,n,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:ds(l,n,Bt,!ls);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(d=lo+300-Ot(),10<d)){if(ds(l,n,Bt,!ls),yl(l,0,!0)!==0)break e;Mn=n,l.timeoutHandle=x_(qg.bind(null,l,a,At,co,vd,n,Bt,ei,Ki,ls,h,"Throttled",-0,0),d);break e}qg(l,a,At,co,vd,n,Bt,ei,Ki,ls,h,null,-0,0)}}break}while(!0);pn(e)}function qg(e,n,a,l,d,h,_,v,S,O,B,G,I,M){if(e.timeoutHandle=-1,G=n.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bn},Ug(n,h,G);var ne=(h&62914560)===h?lo-Ot():(h&4194048)===h?Hg-Ot():0;if(ne=iN(G,ne),ne!==null){Mn=h,e.cancelPendingCommit=ne(Jg.bind(null,e,n,h,a,l,d,_,v,S,B,G,null,I,M)),ds(e,h,_,!O);return}}Jg(e,n,h,a,l,d,_,v,S)}function bS(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],h=d.getSnapshot;d=d.value;try{if(!Mt(h(),d))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ds(e,n,a,l){n&=~_d,n&=~ei,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var d=n;0<d;){var h=31-kt(d),_=1<<h;l[h]=-1,d&=~_}a!==0&&tm(e,a,n)}function uo(){return(Oe&6)===0?(pr(0),!1):!0}function Sd(){if(ye!==null){if(Ie===0)var e=ye.return;else e=ye,En=qs=null,Pu(e),Hi=null,$a=0,e=ye;for(;e!==null;)Sg(e.alternate,e),e=e.return;ye=null}}function $i(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,BS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Mn=0,Sd(),Be=e,ye=a=Sn(e.current,null),Se=n,Ie=0,zt=null,ls=!1,Xi=ka(e,n),gd=!1,Ki=Bt=_d=ei=os=Xe=0,At=fr=null,vd=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var d=31-kt(l),h=1<<d;n|=e[d],l&=~h}return kn=n,Dl(),a}function Yg(e,n){fe=null,k.H=ar,n===Bi||n===zl?(n=op(),Ie=3):n===Cu?(n=op(),Ie=4):Ie=n===ed?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,zt=n,ye===null&&(Xe=1,Jl(e,qt(n,e.current)))}function Wg(){var e=Ut.current;return e===null?!0:(Se&4194048)===Se?Kt===null:(Se&62914560)===Se||(Se&536870912)!==0?e===Kt:!1}function Xg(){var e=k.H;return k.H=ar,e===null?ar:e}function Kg(){var e=k.A;return k.A=vS,e}function ho(){Xe=4,ls||(Se&4194048)!==Se&&Ut.current!==null||(Xi=!0),(os&134217727)===0&&(ei&134217727)===0||Be===null||ds(Be,Se,Bt,!1)}function Nd(e,n,a){var l=Oe;Oe|=2;var d=Xg(),h=Kg();(Be!==e||Se!==n)&&(co=null,$i(e,n)),n=!1;var _=Xe;e:do try{if(Ie!==0&&ye!==null){var v=ye,S=zt;switch(Ie){case 8:Sd(),_=6;break e;case 3:case 2:case 9:case 6:Ut.current===null&&(n=!0);var O=Ie;if(Ie=0,zt=null,Zi(e,v,S,O),a&&Xi){_=0;break e}break;default:O=Ie,Ie=0,zt=null,Zi(e,v,S,O)}}xS(),_=Xe;break}catch(B){Yg(e,B)}while(!0);return n&&e.shellSuspendCounter++,En=qs=null,Oe=l,k.H=d,k.A=h,ye===null&&(Be=null,Se=0,Dl()),_}function xS(){for(;ye!==null;)Qg(ye)}function SS(e,n){var a=Oe;Oe|=2;var l=Xg(),d=Kg();Be!==e||Se!==n?(co=null,oo=Ot()+500,$i(e,n)):Xi=ka(e,n);e:do try{if(Ie!==0&&ye!==null){n=ye;var h=zt;t:switch(Ie){case 1:Ie=0,zt=null,Zi(e,n,h,1);break;case 2:case 9:if(rp(h)){Ie=0,zt=null,$g(n);break}n=function(){Ie!==2&&Ie!==9||Be!==e||(Ie=7),pn(e)},h.then(n,n);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:rp(h)?(Ie=0,zt=null,$g(n)):(Ie=0,zt=null,Zi(e,n,h,7));break;case 5:var _=null;switch(ye.tag){case 26:_=ye.memoizedState;case 5:case 27:var v=ye;if(_?L_(_):v.stateNode.complete){Ie=0,zt=null;var S=v.sibling;if(S!==null)ye=S;else{var O=v.return;O!==null?(ye=O,fo(O)):ye=null}break t}}Ie=0,zt=null,Zi(e,n,h,5);break;case 6:Ie=0,zt=null,Zi(e,n,h,6);break;case 8:Sd(),Xe=6;break e;default:throw Error(r(462))}}NS();break}catch(B){Yg(e,B)}while(!0);return En=qs=null,k.H=l,k.A=d,Oe=a,ye!==null?0:(Be=null,Se=0,Dl(),Xe)}function NS(){for(;ye!==null&&!Yb();)Qg(ye)}function Qg(e){var n=bg(e.alternate,e,kn);e.memoizedProps=e.pendingProps,n===null?fo(e):ye=n}function $g(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=mg(a,n,n.pendingProps,n.type,void 0,Se);break;case 11:n=mg(a,n,n.pendingProps,n.type.render,n.ref,Se);break;case 5:Pu(n);default:Sg(a,n),n=ye=Km(n,kn),n=bg(a,n,kn)}e.memoizedProps=e.pendingProps,n===null?fo(e):ye=n}function Zi(e,n,a,l){En=qs=null,Pu(n),Hi=null,$a=0;var d=n.return;try{if(dS(e,d,n,a,Se)){Xe=1,Jl(e,qt(a,e.current)),ye=null;return}}catch(h){if(d!==null)throw ye=d,h;Xe=1,Jl(e,qt(a,e.current)),ye=null;return}n.flags&32768?(Te||l===1?e=!0:Xi||(Se&536870912)!==0?e=!1:(ls=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ut.current,l!==null&&l.tag===13&&(l.flags|=16384))),Zg(n,e)):fo(n)}function fo(e){var n=e;do{if((n.flags&32768)!==0){Zg(n,ls);return}e=n.return;var a=mS(n.alternate,n,kn);if(a!==null){ye=a;return}if(n=n.sibling,n!==null){ye=n;return}ye=n=e}while(n!==null);Xe===0&&(Xe=5)}function Zg(e,n){do{var a=pS(e.alternate,e);if(a!==null){a.flags&=32767,ye=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){ye=e;return}ye=e=a}while(e!==null);Xe=6,ye=null}function Jg(e,n,a,l,d,h,_,v,S){e.cancelPendingCommit=null;do mo();while(it!==0);if((Oe&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(h=n.lanes|n.childLanes,h|=du,nx(e,a,h,_,v,S),e===Be&&(ye=Be=null,Se=0),Qi=n,us=e,Mn=a,yd=h,bd=d,Gg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wS(pl,function(){return i_(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=k.T,k.T=null,d=q.p,q.p=2,_=Oe,Oe|=4;try{gS(e,n,a)}finally{Oe=_,q.p=d,k.T=l}}it=1,e_(),t_(),n_()}}function e_(){if(it===1){it=0;var e=us,n=Qi,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var l=q.p;q.p=2;var d=Oe;Oe|=4;try{kg(n,e);var h=Md,_=Bm(e.containerInfo),v=h.focusedElem,S=h.selectionRange;if(_!==v&&v&&v.ownerDocument&&zm(v.ownerDocument.documentElement,v)){if(S!==null&&ru(v)){var O=S.start,B=S.end;if(B===void 0&&(B=O),"selectionStart"in v)v.selectionStart=O,v.selectionEnd=Math.min(B,v.value.length);else{var G=v.ownerDocument||document,I=G&&G.defaultView||window;if(I.getSelection){var M=I.getSelection(),ne=v.textContent.length,oe=Math.min(S.start,ne),Ue=S.end===void 0?oe:Math.min(S.end,ne);!M.extend&&oe>Ue&&(_=Ue,Ue=oe,oe=_);var w=Pm(v,oe),T=Pm(v,Ue);if(w&&T&&(M.rangeCount!==1||M.anchorNode!==w.node||M.anchorOffset!==w.offset||M.focusNode!==T.node||M.focusOffset!==T.offset)){var D=G.createRange();D.setStart(w.node,w.offset),M.removeAllRanges(),oe>Ue?(M.addRange(D),M.extend(T.node,T.offset)):(D.setEnd(T.node,T.offset),M.addRange(D))}}}}for(G=[],M=v;M=M.parentNode;)M.nodeType===1&&G.push({element:M,left:M.scrollLeft,top:M.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<G.length;v++){var H=G[v];H.element.scrollLeft=H.left,H.element.scrollTop=H.top}}Co=!!kd,Md=kd=null}finally{Oe=d,q.p=l,k.T=a}}e.current=n,it=2}}function t_(){if(it===2){it=0;var e=us,n=Qi,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var l=q.p;q.p=2;var d=Oe;Oe|=4;try{Ag(e,n.alternate,n)}finally{Oe=d,q.p=l,k.T=a}}it=3}}function n_(){if(it===4||it===3){it=0,Wb();var e=us,n=Qi,a=Mn,l=Gg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?it=5:(it=0,Qi=us=null,s_(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(cs=null),Hc(a),n=n.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Ia,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=k.T,d=q.p,q.p=2,k.T=null;try{for(var h=e.onRecoverableError,_=0;_<l.length;_++){var v=l[_];h(v.value,{componentStack:v.stack})}}finally{k.T=n,q.p=d}}(Mn&3)!==0&&mo(),pn(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===xd?mr++:(mr=0,xd=e):mr=0,pr(0)}}function s_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ka(n)))}function mo(){return e_(),t_(),n_(),i_()}function i_(){if(it!==5)return!1;var e=us,n=yd;yd=0;var a=Hc(Mn),l=k.T,d=q.p;try{q.p=32>a?32:a,k.T=null,a=bd,bd=null;var h=us,_=Mn;if(it=0,Qi=us=null,Mn=0,(Oe&6)!==0)throw Error(r(331));var v=Oe;if(Oe|=4,zg(h.current),Lg(h,h.current,_,a),Oe=v,pr(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Ia,h)}catch{}return!0}finally{q.p=d,k.T=l,s_(e,n)}}function a_(e,n,a){n=qt(a,n),n=Ju(e.stateNode,n,2),e=ss(e,n,2),e!==null&&(Ma(e,2),pn(e))}function ke(e,n,a){if(e.tag===3)a_(e,e,a);else for(;n!==null;){if(n.tag===3){a_(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(cs===null||!cs.has(l))){e=qt(a,e),a=rg(2),l=ss(n,a,2),l!==null&&(lg(a,l,n,e),Ma(l,2),pn(l));break}}n=n.return}}function Ed(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new yS;var d=new Set;l.set(n,d)}else d=l.get(n),d===void 0&&(d=new Set,l.set(n,d));d.has(a)||(gd=!0,d.add(a),e=ES.bind(null,e,n,a),n.then(e,e))}function ES(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Be===e&&(Se&a)===a&&(Xe===4||Xe===3&&(Se&62914560)===Se&&300>Ot()-lo?(Oe&2)===0&&$i(e,0):_d|=a,Ki===Se&&(Ki=0)),pn(e)}function r_(e,n){n===0&&(n=em()),e=Gs(e,n),e!==null&&(Ma(e,n),pn(e))}function TS(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),r_(e,a)}function CS(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),r_(e,a)}function wS(e,n){return Uc(e,n)}var po=null,Ji=null,Td=!1,go=!1,Cd=!1,hs=0;function pn(e){e!==Ji&&e.next===null&&(Ji===null?po=Ji=e:Ji=Ji.next=e),go=!0,Td||(Td=!0,AS())}function pr(e,n){if(!Cd&&go){Cd=!0;do for(var a=!1,l=po;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var _=l.suspendedLanes,v=l.pingedLanes;h=(1<<31-kt(42|e)+1)-1,h&=d&~(_&~v),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,u_(l,h))}else h=Se,h=yl(l,l===Be?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||ka(l,h)||(a=!0,u_(l,h));l=l.next}while(a);Cd=!1}}function jS(){l_()}function l_(){go=Td=!1;var e=0;hs!==0&&zS()&&(e=hs);for(var n=Ot(),a=null,l=po;l!==null;){var d=l.next,h=o_(l,n);h===0?(l.next=null,a===null?po=d:a.next=d,d===null&&(Ji=a)):(a=l,(e!==0||(h&3)!==0)&&(go=!0)),l=d}it!==0&&it!==5||pr(e),hs!==0&&(hs=0)}function o_(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var _=31-kt(h),v=1<<_,S=d[_];S===-1?((v&a)===0||(v&l)!==0)&&(d[_]=tx(v,n)):S<=n&&(e.expiredLanes|=v),h&=~v}if(n=Be,a=Se,a=yl(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(Ie===2||Ie===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Pc(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ka(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&Pc(l),Hc(a)){case 2:case 8:a=Zf;break;case 32:a=pl;break;case 268435456:a=Jf;break;default:a=pl}return l=c_.bind(null,e),a=Uc(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&Pc(l),e.callbackPriority=2,e.callbackNode=null,2}function c_(e,n){if(it!==0&&it!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(mo()&&e.callbackNode!==a)return null;var l=Se;return l=yl(e,e===Be?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Vg(e,l,n),o_(e,Ot()),e.callbackNode!=null&&e.callbackNode===a?c_.bind(null,e):null)}function u_(e,n){if(mo())return null;Vg(e,n,!0)}function AS(){HS(function(){(Oe&6)!==0?Uc($f,jS):l_()})}function wd(){if(hs===0){var e=Pi;e===0&&(e=gl,gl<<=1,(gl&261888)===0&&(gl=256)),hs=e}return hs}function d_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Nl(""+e)}function h_(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function RS(e,n,a,l,d){if(n==="submit"&&a&&a.stateNode===d){var h=d_((d[Et]||null).action),_=l.submitter;_&&(n=(n=_[Et]||null)?d_(n.formAction):_.getAttribute("formAction"),n!==null&&(h=n,_=null));var v=new wl("action","action",null,l,d);e.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(hs!==0){var S=_?h_(d,_):new FormData(d);Wu(a,{pending:!0,data:S,method:d.method,action:h},null,S)}}else typeof h=="function"&&(v.preventDefault(),S=_?h_(d,_):new FormData(d),Wu(a,{pending:!0,data:S,method:d.method,action:h},h,S))},currentTarget:d}]})}}for(var jd=0;jd<uu.length;jd++){var Ad=uu[jd],DS=Ad.toLowerCase(),OS=Ad[0].toUpperCase()+Ad.slice(1);sn(DS,"on"+OS)}sn(Fm,"onAnimationEnd"),sn(Vm,"onAnimationIteration"),sn(qm,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(Xx,"onTransitionRun"),sn(Kx,"onTransitionStart"),sn(Qx,"onTransitionCancel"),sn(Ym,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gr));function f_(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;e:{var h=void 0;if(n)for(var _=l.length-1;0<=_;_--){var v=l[_],S=v.instance,O=v.currentTarget;if(v=v.listener,S!==h&&d.isPropagationStopped())break e;h=v,d.currentTarget=O;try{h(d)}catch(B){Rl(B)}d.currentTarget=null,h=S}else for(_=0;_<l.length;_++){if(v=l[_],S=v.instance,O=v.currentTarget,v=v.listener,S!==h&&d.isPropagationStopped())break e;h=v,d.currentTarget=O;try{h(d)}catch(B){Rl(B)}d.currentTarget=null,h=S}}}}function be(e,n){var a=n[Gc];a===void 0&&(a=n[Gc]=new Set);var l=e+"__bubble";a.has(l)||(m_(n,e,2,!1),a.add(l))}function Rd(e,n,a){var l=0;n&&(l|=4),m_(a,e,l,n)}var _o="_reactListening"+Math.random().toString(36).slice(2);function Dd(e){if(!e[_o]){e[_o]=!0,lm.forEach(function(a){a!=="selectionchange"&&(IS.has(a)||Rd(a,!1,e),Rd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[_o]||(n[_o]=!0,Rd("selectionchange",!1,n))}}function m_(e,n,a,l){switch(F_(n)){case 2:var d=lN;break;case 8:d=oN;break;default:d=Yd}a=d.bind(null,n,a,e),d=void 0,!$c||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(n,a,{capture:!0,passive:d}):e.addEventListener(n,a,!0):d!==void 0?e.addEventListener(n,a,{passive:d}):e.addEventListener(n,a,!1)}function Od(e,n,a,l,d){var h=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var v=l.stateNode.containerInfo;if(v===d)break;if(_===4)for(_=l.return;_!==null;){var S=_.tag;if((S===3||S===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;v!==null;){if(_=xi(v),_===null)return;if(S=_.tag,S===5||S===6||S===26||S===27){l=h=_;continue e}v=v.parentNode}}l=l.return}ym(function(){var O=h,B=Kc(a),G=[];e:{var I=Wm.get(e);if(I!==void 0){var M=wl,ne=e;switch(e){case"keypress":if(Tl(a)===0)break e;case"keydown":case"keyup":M=Cx;break;case"focusin":ne="focus",M=tu;break;case"focusout":ne="blur",M=tu;break;case"beforeblur":case"afterblur":M=tu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Sm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=mx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=Ax;break;case Fm:case Vm:case qm:M=_x;break;case Ym:M=Dx;break;case"scroll":case"scrollend":M=hx;break;case"wheel":M=Ix;break;case"copy":case"cut":case"paste":M=yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Em;break;case"toggle":case"beforetoggle":M=Mx}var oe=(n&4)!==0,Ue=!oe&&(e==="scroll"||e==="scrollend"),w=oe?I!==null?I+"Capture":null:I;oe=[];for(var T=O,D;T!==null;){var H=T;if(D=H.stateNode,H=H.tag,H!==5&&H!==26&&H!==27||D===null||w===null||(H=Pa(T,w),H!=null&&oe.push(_r(T,H,D))),Ue)break;T=T.return}0<oe.length&&(I=new M(I,ne,null,a,B),G.push({event:I,listeners:oe}))}}if((n&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",M=e==="mouseout"||e==="pointerout",I&&a!==Xc&&(ne=a.relatedTarget||a.fromElement)&&(xi(ne)||ne[bi]))break e;if((M||I)&&(I=B.window===B?B:(I=B.ownerDocument)?I.defaultView||I.parentWindow:window,M?(ne=a.relatedTarget||a.toElement,M=O,ne=ne?xi(ne):null,ne!==null&&(Ue=u(ne),oe=ne.tag,ne!==Ue||oe!==5&&oe!==27&&oe!==6)&&(ne=null)):(M=null,ne=O),M!==ne)){if(oe=Sm,H="onMouseLeave",w="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(oe=Em,H="onPointerLeave",w="onPointerEnter",T="pointer"),Ue=M==null?I:Ua(M),D=ne==null?I:Ua(ne),I=new oe(H,T+"leave",M,a,B),I.target=Ue,I.relatedTarget=D,H=null,xi(B)===O&&(oe=new oe(w,T+"enter",ne,a,B),oe.target=D,oe.relatedTarget=Ue,H=oe),Ue=H,M&&ne)t:{for(oe=kS,w=M,T=ne,D=0,H=w;H;H=oe(H))D++;H=0;for(var ae=T;ae;ae=oe(ae))H++;for(;0<D-H;)w=oe(w),D--;for(;0<H-D;)T=oe(T),H--;for(;D--;){if(w===T||T!==null&&w===T.alternate){oe=w;break t}w=oe(w),T=oe(T)}oe=null}else oe=null;M!==null&&p_(G,I,M,oe,!1),ne!==null&&Ue!==null&&p_(G,Ue,ne,oe,!0)}}e:{if(I=O?Ua(O):window,M=I.nodeName&&I.nodeName.toLowerCase(),M==="select"||M==="input"&&I.type==="file")var Ae=Om;else if(Rm(I))if(Im)Ae=qx;else{Ae=Fx;var ie=Gx}else M=I.nodeName,!M||M.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?O&&Wc(O.elementType)&&(Ae=Om):Ae=Vx;if(Ae&&(Ae=Ae(e,O))){Dm(G,Ae,a,B);break e}ie&&ie(e,I,O),e==="focusout"&&O&&I.type==="number"&&O.memoizedProps.value!=null&&Yc(I,"number",I.value)}switch(ie=O?Ua(O):window,e){case"focusin":(Rm(ie)||ie.contentEditable==="true")&&(Ri=ie,lu=O,Ya=null);break;case"focusout":Ya=lu=Ri=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,Hm(G,a,B);break;case"selectionchange":if(Wx)break;case"keydown":case"keyup":Hm(G,a,B)}var pe;if(su)e:{switch(e){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Ai?jm(e,a)&&(Ne="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ne="onCompositionStart");Ne&&(Tm&&a.locale!=="ko"&&(Ai||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Ai&&(pe=bm()):(Qn=B,Zc="value"in Qn?Qn.value:Qn.textContent,Ai=!0)),ie=vo(O,Ne),0<ie.length&&(Ne=new Nm(Ne,e,null,a,B),G.push({event:Ne,listeners:ie}),pe?Ne.data=pe:(pe=Am(a),pe!==null&&(Ne.data=pe)))),(pe=Ux?Px(e,a):zx(e,a))&&(Ne=vo(O,"onBeforeInput"),0<Ne.length&&(ie=new Nm("onBeforeInput","beforeinput",null,a,B),G.push({event:ie,listeners:Ne}),ie.data=pe)),RS(G,e,O,a,B)}f_(G,n)})}function _r(e,n,a){return{instance:e,listener:n,currentTarget:a}}function vo(e,n){for(var a=n+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Pa(e,a),d!=null&&l.unshift(_r(e,d,h)),d=Pa(e,n),d!=null&&l.push(_r(e,d,h))),e.tag===3)return l;e=e.return}return[]}function kS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function p_(e,n,a,l,d){for(var h=n._reactName,_=[];a!==null&&a!==l;){var v=a,S=v.alternate,O=v.stateNode;if(v=v.tag,S!==null&&S===l)break;v!==5&&v!==26&&v!==27||O===null||(S=O,d?(O=Pa(a,h),O!=null&&_.unshift(_r(a,O,S))):d||(O=Pa(a,h),O!=null&&_.push(_r(a,O,S)))),a=a.return}_.length!==0&&e.push({event:n,listeners:_})}var MS=/\r\n?/g,LS=/\u0000|\uFFFD/g;function g_(e){return(typeof e=="string"?e:""+e).replace(MS,`
`).replace(LS,"")}function __(e,n){return n=g_(n),g_(e)===n}function Le(e,n,a,l,d,h){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Ci(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Ci(e,""+l);break;case"className":xl(e,"class",l);break;case"tabIndex":xl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xl(e,a,l);break;case"style":_m(e,l,h);break;case"data":if(n!=="object"){xl(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Nl(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(n!=="input"&&Le(e,n,"name",d.name,d,null),Le(e,n,"formEncType",d.formEncType,d,null),Le(e,n,"formMethod",d.formMethod,d,null),Le(e,n,"formTarget",d.formTarget,d,null)):(Le(e,n,"encType",d.encType,d,null),Le(e,n,"method",d.method,d,null),Le(e,n,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Nl(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=bn);break;case"onScroll":l!=null&&be("scroll",e);break;case"onScrollEnd":l!=null&&be("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Nl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":be("beforetoggle",e),be("toggle",e),bl(e,"popover",l);break;case"xlinkActuate":yn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":yn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":yn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":yn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":yn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":yn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":yn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":yn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":yn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":bl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ux.get(a)||a,bl(e,a,l))}}function Id(e,n,a,l,d,h){switch(a){case"style":_m(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Ci(e,l):(typeof l=="number"||typeof l=="bigint")&&Ci(e,""+l);break;case"onScroll":l!=null&&be("scroll",e);break;case"onScrollEnd":l!=null&&be("scrollend",e);break;case"onClick":l!=null&&(e.onclick=bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!om.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),n=a.slice(2,d?a.length-7:void 0),h=e[Et]||null,h=h!=null?h[a]:null,typeof h=="function"&&e.removeEventListener(n,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,d);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):bl(e,a,l)}}}function pt(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",e),be("load",e);var l=!1,d=!1,h;for(h in a)if(a.hasOwnProperty(h)){var _=a[h];if(_!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Le(e,n,h,_,a,null)}}d&&Le(e,n,"srcSet",a.srcSet,a,null),l&&Le(e,n,"src",a.src,a,null);return;case"input":be("invalid",e);var v=h=_=d=null,S=null,O=null;for(l in a)if(a.hasOwnProperty(l)){var B=a[l];if(B!=null)switch(l){case"name":d=B;break;case"type":_=B;break;case"checked":S=B;break;case"defaultChecked":O=B;break;case"value":h=B;break;case"defaultValue":v=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,n));break;default:Le(e,n,l,B,a,null)}}fm(e,h,v,S,O,_,d,!1);return;case"select":be("invalid",e),l=_=h=null;for(d in a)if(a.hasOwnProperty(d)&&(v=a[d],v!=null))switch(d){case"value":h=v;break;case"defaultValue":_=v;break;case"multiple":l=v;default:Le(e,n,d,v,a,null)}n=h,a=_,e.multiple=!!l,n!=null?Ti(e,!!l,n,!1):a!=null&&Ti(e,!!l,a,!0);return;case"textarea":be("invalid",e),h=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(v=a[_],v!=null))switch(_){case"value":l=v;break;case"defaultValue":d=v;break;case"children":h=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:Le(e,n,_,v,a,null)}pm(e,l,d,h);return;case"option":for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null)&&(S==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Le(e,n,S,l,a,null));return;case"dialog":be("beforetoggle",e),be("toggle",e),be("cancel",e),be("close",e);break;case"iframe":case"object":be("load",e);break;case"video":case"audio":for(l=0;l<gr.length;l++)be(gr[l],e);break;case"image":be("error",e),be("load",e);break;case"details":be("toggle",e);break;case"embed":case"source":case"link":be("error",e),be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Le(e,n,O,l,a,null)}return;default:if(Wc(n)){for(B in a)a.hasOwnProperty(B)&&(l=a[B],l!==void 0&&Id(e,n,B,l,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(l=a[v],l!=null&&Le(e,n,v,l,a,null))}function US(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,_=null,v=null,S=null,O=null,B=null;for(M in a){var G=a[M];if(a.hasOwnProperty(M)&&G!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":S=G;default:l.hasOwnProperty(M)||Le(e,n,M,null,l,G)}}for(var I in l){var M=l[I];if(G=a[I],l.hasOwnProperty(I)&&(M!=null||G!=null))switch(I){case"type":h=M;break;case"name":d=M;break;case"checked":O=M;break;case"defaultChecked":B=M;break;case"value":_=M;break;case"defaultValue":v=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,n));break;default:M!==G&&Le(e,n,I,M,l,G)}}qc(e,_,v,S,O,B,h,d);return;case"select":M=_=v=I=null;for(h in a)if(S=a[h],a.hasOwnProperty(h)&&S!=null)switch(h){case"value":break;case"multiple":M=S;default:l.hasOwnProperty(h)||Le(e,n,h,null,l,S)}for(d in l)if(h=l[d],S=a[d],l.hasOwnProperty(d)&&(h!=null||S!=null))switch(d){case"value":I=h;break;case"defaultValue":v=h;break;case"multiple":_=h;default:h!==S&&Le(e,n,d,h,l,S)}n=v,a=_,l=M,I!=null?Ti(e,!!a,I,!1):!!l!=!!a&&(n!=null?Ti(e,!!a,n,!0):Ti(e,!!a,a?[]:"",!1));return;case"textarea":M=I=null;for(v in a)if(d=a[v],a.hasOwnProperty(v)&&d!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Le(e,n,v,null,l,d)}for(_ in l)if(d=l[_],h=a[_],l.hasOwnProperty(_)&&(d!=null||h!=null))switch(_){case"value":I=d;break;case"defaultValue":M=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==h&&Le(e,n,_,d,l,h)}mm(e,I,M);return;case"option":for(var ne in a)I=a[ne],a.hasOwnProperty(ne)&&I!=null&&!l.hasOwnProperty(ne)&&(ne==="selected"?e.selected=!1:Le(e,n,ne,null,l,I));for(S in l)I=l[S],M=a[S],l.hasOwnProperty(S)&&I!==M&&(I!=null||M!=null)&&(S==="selected"?e.selected=I&&typeof I!="function"&&typeof I!="symbol":Le(e,n,S,I,l,M));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var oe in a)I=a[oe],a.hasOwnProperty(oe)&&I!=null&&!l.hasOwnProperty(oe)&&Le(e,n,oe,null,l,I);for(O in l)if(I=l[O],M=a[O],l.hasOwnProperty(O)&&I!==M&&(I!=null||M!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,n));break;default:Le(e,n,O,I,l,M)}return;default:if(Wc(n)){for(var Ue in a)I=a[Ue],a.hasOwnProperty(Ue)&&I!==void 0&&!l.hasOwnProperty(Ue)&&Id(e,n,Ue,void 0,l,I);for(B in l)I=l[B],M=a[B],!l.hasOwnProperty(B)||I===M||I===void 0&&M===void 0||Id(e,n,B,I,l,M);return}}for(var w in a)I=a[w],a.hasOwnProperty(w)&&I!=null&&!l.hasOwnProperty(w)&&Le(e,n,w,null,l,I);for(G in l)I=l[G],M=a[G],!l.hasOwnProperty(G)||I===M||I==null&&M==null||Le(e,n,G,I,l,M)}function v_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],h=d.transferSize,_=d.initiatorType,v=d.duration;if(h&&v&&v_(_)){for(_=0,v=d.responseEnd,l+=1;l<a.length;l++){var S=a[l],O=S.startTime;if(O>v)break;var B=S.transferSize,G=S.initiatorType;B&&v_(G)&&(S=S.responseEnd,_+=B*(S<v?1:(v-O)/(S-O)))}if(--l,n+=8*(h+_)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var kd=null,Md=null;function yo(e){return e.nodeType===9?e:e.ownerDocument}function y_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ld(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ud=null;function zS(){var e=window.event;return e&&e.type==="popstate"?e===Ud?!1:(Ud=e,!0):(Ud=null,!1)}var x_=typeof setTimeout=="function"?setTimeout:void 0,BS=typeof clearTimeout=="function"?clearTimeout:void 0,S_=typeof Promise=="function"?Promise:void 0,HS=typeof queueMicrotask=="function"?queueMicrotask:typeof S_<"u"?function(e){return S_.resolve(null).then(e).catch(GS)}:x_;function GS(e){setTimeout(function(){throw e})}function fs(e){return e==="head"}function N_(e,n){var a=n,l=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(d),sa(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")vr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,vr(a);for(var h=a.firstChild;h;){var _=h.nextSibling,v=h.nodeName;h[La]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&h.rel.toLowerCase()==="stylesheet"||a.removeChild(h),h=_}}else a==="body"&&vr(e.ownerDocument.body);a=d}while(a);sa(n)}function E_(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Pd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Pd(a),Fc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function FS(e,n,a,l){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[La])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Qt(e.nextSibling),e===null)break}return null}function VS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qt(e.nextSibling),e===null))return null;return e}function T_(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Qt(e.nextSibling),e===null))return null;return e}function zd(e){return e.data==="$?"||e.data==="$~"}function Bd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function qS(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Qt(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Hd=null;function C_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Qt(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function w_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function j_(e,n,a){switch(n=yo(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function vr(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Fc(e)}var $t=new Map,A_=new Set;function bo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ln=q.d;q.d={f:YS,r:WS,D:XS,C:KS,L:QS,m:$S,X:JS,S:ZS,M:eN};function YS(){var e=Ln.f(),n=uo();return e||n}function WS(e){var n=Si(e);n!==null&&n.tag===5&&n.type==="form"?Yp(n):Ln.r(e)}var ea=typeof document>"u"?null:document;function R_(e,n,a){var l=ea;if(l&&typeof n=="string"&&n){var d=Ft(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),A_.has(d)||(A_.add(d),e={rel:e,crossOrigin:a,href:n},l.querySelector(d)===null&&(n=l.createElement("link"),pt(n,"link",e),lt(n),l.head.appendChild(n)))}}function XS(e){Ln.D(e),R_("dns-prefetch",e,null)}function KS(e,n){Ln.C(e,n),R_("preconnect",e,n)}function QS(e,n,a){Ln.L(e,n,a);var l=ea;if(l&&e&&n){var d='link[rel="preload"][as="'+Ft(n)+'"]';n==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Ft(a.imageSizes)+'"]')):d+='[href="'+Ft(e)+'"]';var h=d;switch(n){case"style":h=ta(e);break;case"script":h=na(e)}$t.has(h)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),$t.set(h,e),l.querySelector(d)!==null||n==="style"&&l.querySelector(yr(h))||n==="script"&&l.querySelector(br(h))||(n=l.createElement("link"),pt(n,"link",e),lt(n),l.head.appendChild(n)))}}function $S(e,n){Ln.m(e,n);var a=ea;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+Ft(l)+'"][href="'+Ft(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=na(e)}if(!$t.has(h)&&(e=y({rel:"modulepreload",href:e},n),$t.set(h,e),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(br(h)))return}l=a.createElement("link"),pt(l,"link",e),lt(l),a.head.appendChild(l)}}}function ZS(e,n,a){Ln.S(e,n,a);var l=ea;if(l&&e){var d=Ni(l).hoistableStyles,h=ta(e);n=n||"default";var _=d.get(h);if(!_){var v={loading:0,preload:null};if(_=l.querySelector(yr(h)))v.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=$t.get(h))&&Gd(e,a);var S=_=l.createElement("link");lt(S),pt(S,"link",e),S._p=new Promise(function(O,B){S.onload=O,S.onerror=B}),S.addEventListener("load",function(){v.loading|=1}),S.addEventListener("error",function(){v.loading|=2}),v.loading|=4,xo(_,n,l)}_={type:"stylesheet",instance:_,count:1,state:v},d.set(h,_)}}}function JS(e,n){Ln.X(e,n);var a=ea;if(a&&e){var l=Ni(a).hoistableScripts,d=na(e),h=l.get(d);h||(h=a.querySelector(br(d)),h||(e=y({src:e,async:!0},n),(n=$t.get(d))&&Fd(e,n),h=a.createElement("script"),lt(h),pt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function eN(e,n){Ln.M(e,n);var a=ea;if(a&&e){var l=Ni(a).hoistableScripts,d=na(e),h=l.get(d);h||(h=a.querySelector(br(d)),h||(e=y({src:e,async:!0,type:"module"},n),(n=$t.get(d))&&Fd(e,n),h=a.createElement("script"),lt(h),pt(h,"link",e),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function D_(e,n,a,l){var d=(d=le.current)?bo(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=ta(a.href),a=Ni(d).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ta(a.href);var h=Ni(d).hoistableStyles,_=h.get(e);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,_),(h=d.querySelector(yr(e)))&&!h._p&&(_.instance=h,_.state.loading=5),$t.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$t.set(e,a),h||tN(d,e,a,_.state))),n&&l===null)throw Error(r(528,""));return _}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=na(a),a=Ni(d).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function ta(e){return'href="'+Ft(e)+'"'}function yr(e){return'link[rel="stylesheet"]['+e+"]"}function O_(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function tN(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),pt(n,"link",a),lt(n),e.head.appendChild(n))}function na(e){return'[src="'+Ft(e)+'"]'}function br(e){return"script[async]"+e}function I_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+Ft(a.href)+'"]');if(l)return n.instance=l,lt(l),l;var d=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),lt(l),pt(l,"style",d),xo(l,a.precedence,e),n.instance=l;case"stylesheet":d=ta(a.href);var h=e.querySelector(yr(d));if(h)return n.state.loading|=4,n.instance=h,lt(h),h;l=O_(a),(d=$t.get(d))&&Gd(l,d),h=(e.ownerDocument||e).createElement("link"),lt(h);var _=h;return _._p=new Promise(function(v,S){_.onload=v,_.onerror=S}),pt(h,"link",l),n.state.loading|=4,xo(h,a.precedence,e),n.instance=h;case"script":return h=na(a.src),(d=e.querySelector(br(h)))?(n.instance=d,lt(d),d):(l=a,(d=$t.get(h))&&(l=y({},a),Fd(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),lt(d),pt(d,"link",l),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,xo(l,a.precedence,e));return n.instance}function xo(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,_=0;_<l.length;_++){var v=l[_];if(v.dataset.precedence===n)h=v;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Gd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Fd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var So=null;function k_(e,n,a){if(So===null){var l=new Map,d=So=new Map;d.set(a,l)}else d=So,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var h=a[d];if(!(h[La]||h[dt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var _=h.getAttribute(n)||"";_=e+_;var v=l.get(_);v?v.push(h):l.set(_,[h])}}return l}function M_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function nN(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function L_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function sN(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=ta(l.href),h=n.querySelector(yr(d));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=No.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=h,lt(h);return}h=n.ownerDocument||n,l=O_(l),(d=$t.get(d))&&Gd(l,d),h=h.createElement("link"),lt(h);var _=h;_._p=new Promise(function(v,S){_.onload=v,_.onerror=S}),pt(h,"link",l),a.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=No.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Vd=0;function iN(e,n){return e.stylesheets&&e.count===0&&To(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&To(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+n);0<e.imgBytes&&Vd===0&&(Vd=62500*PS());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&To(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Vd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function No(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)To(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Eo=null;function To(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Eo=new Map,n.forEach(aN,e),Eo=null,No.call(e))}function aN(e,n){if(!(n.state.loading&4)){var a=Eo.get(e);if(a)var l=a.get(null);else{a=new Map,Eo.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var _=d[h];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=n.instance,_=d.getAttribute("data-precedence"),h=a.get(_)||l,h===l&&a.set(null,d),a.set(_,d),this.count++,l=No.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var xr={$$typeof:V,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function rN(e,n,a,l,d,h,_,v,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.hiddenUpdates=zc(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function U_(e,n,a,l,d,h,_,v,S,O,B,G){return e=new rN(e,n,a,_,S,O,B,G,v),n=1,h===!0&&(n|=24),h=Lt(3,null,null,n),e.current=h,h.stateNode=e,n=Nu(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:l,isDehydrated:a,cache:n},wu(h),e}function P_(e){return e?(e=Ii,e):Ii}function z_(e,n,a,l,d,h){d=P_(d),l.context===null?l.context=d:l.pendingContext=d,l=ns(n),l.payload={element:a},h=h===void 0?null:h,h!==null&&(l.callback=h),a=ss(e,l,n),a!==null&&(Rt(a,e,n),Ja(a,e,n))}function B_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function qd(e,n){B_(e,n),(e=e.alternate)&&B_(e,n)}function H_(e){if(e.tag===13||e.tag===31){var n=Gs(e,67108864);n!==null&&Rt(n,e,67108864),qd(e,67108864)}}function G_(e){if(e.tag===13||e.tag===31){var n=Ht();n=Bc(n);var a=Gs(e,n);a!==null&&Rt(a,e,n),qd(e,n)}}var Co=!0;function lN(e,n,a,l){var d=k.T;k.T=null;var h=q.p;try{q.p=2,Yd(e,n,a,l)}finally{q.p=h,k.T=d}}function oN(e,n,a,l){var d=k.T;k.T=null;var h=q.p;try{q.p=8,Yd(e,n,a,l)}finally{q.p=h,k.T=d}}function Yd(e,n,a,l){if(Co){var d=Wd(l);if(d===null)Od(e,n,l,wo,a),V_(e,l);else if(uN(d,e,n,a,l))l.stopPropagation();else if(V_(e,l),n&4&&-1<cN.indexOf(e)){for(;d!==null;){var h=Si(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var _=Us(h.pendingLanes);if(_!==0){var v=h;for(v.pendingLanes|=2,v.entangledLanes|=2;_;){var S=1<<31-kt(_);v.entanglements[1]|=S,_&=~S}pn(h),(Oe&6)===0&&(oo=Ot()+500,pr(0))}}break;case 31:case 13:v=Gs(h,2),v!==null&&Rt(v,h,2),uo(),qd(h,2)}if(h=Wd(l),h===null&&Od(e,n,l,wo,a),h===d)break;d=h}d!==null&&l.stopPropagation()}else Od(e,n,l,null,a)}}function Wd(e){return e=Kc(e),Xd(e)}var wo=null;function Xd(e){if(wo=null,e=xi(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=f(n),e!==null)return e;e=null}else if(a===31){if(e=m(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return wo=e,null}function F_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xb()){case $f:return 2;case Zf:return 8;case pl:case Kb:return 32;case Jf:return 268435456;default:return 32}default:return 32}}var Kd=!1,ms=null,ps=null,gs=null,Sr=new Map,Nr=new Map,_s=[],cN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V_(e,n){switch(e){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Sr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nr.delete(n.pointerId)}}function Er(e,n,a,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},n!==null&&(n=Si(n),n!==null&&H_(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function uN(e,n,a,l,d){switch(n){case"focusin":return ms=Er(ms,e,n,a,l,d),!0;case"dragenter":return ps=Er(ps,e,n,a,l,d),!0;case"mouseover":return gs=Er(gs,e,n,a,l,d),!0;case"pointerover":var h=d.pointerId;return Sr.set(h,Er(Sr.get(h)||null,e,n,a,l,d)),!0;case"gotpointercapture":return h=d.pointerId,Nr.set(h,Er(Nr.get(h)||null,e,n,a,l,d)),!0}return!1}function q_(e){var n=xi(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){e.blockedOn=n,am(e.priority,function(){G_(a)});return}}else if(n===31){if(n=m(a),n!==null){e.blockedOn=n,am(e.priority,function(){G_(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Wd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Xc=l,a.target.dispatchEvent(l),Xc=null}else return n=Si(a),n!==null&&H_(n),e.blockedOn=a,!1;n.shift()}return!0}function Y_(e,n,a){jo(e)&&a.delete(n)}function dN(){Kd=!1,ms!==null&&jo(ms)&&(ms=null),ps!==null&&jo(ps)&&(ps=null),gs!==null&&jo(gs)&&(gs=null),Sr.forEach(Y_),Nr.forEach(Y_)}function Ao(e,n){e.blockedOn===n&&(e.blockedOn=null,Kd||(Kd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,dN)))}var Ro=null;function W_(e){Ro!==e&&(Ro=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ro===e&&(Ro=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],d=e[n+2];if(typeof l!="function"){if(Xd(l||a)===null)continue;break}var h=Si(a);h!==null&&(e.splice(n,3),n-=3,Wu(h,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function sa(e){function n(S){return Ao(S,e)}ms!==null&&Ao(ms,e),ps!==null&&Ao(ps,e),gs!==null&&Ao(gs,e),Sr.forEach(n),Nr.forEach(n);for(var a=0;a<_s.length;a++){var l=_s[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<_s.length&&(a=_s[0],a.blockedOn===null);)q_(a),a.blockedOn===null&&_s.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],h=a[l+1],_=d[Et]||null;if(typeof h=="function")_||W_(a);else if(_){var v=null;if(h&&h.hasAttribute("formAction")){if(d=h,_=h[Et]||null)v=_.formAction;else if(Xd(d)!==null)continue}else v=_.action;typeof v=="function"?a[l+1]=v:(a.splice(l,3),l-=3),W_(a)}}}function X_(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function Qd(e){this._internalRoot=e}Do.prototype.render=Qd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Ht();z_(a,l,e,n,null,null)},Do.prototype.unmount=Qd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;z_(e.current,2,null,e,null,null),uo(),n[bi]=null}};function Do(e){this._internalRoot=e}Do.prototype.unstable_scheduleHydration=function(e){if(e){var n=im();e={blockedOn:null,target:e,priority:n};for(var a=0;a<_s.length&&n!==0&&n<_s[a].priority;a++);_s.splice(a,0,e),a===0&&q_(e)}};var K_=t.version;if(K_!=="19.2.4")throw Error(r(527,K_,"19.2.4"));q.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var hN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{Ia=Oo.inject(hN),It=Oo}catch{}}return Cr.createRoot=function(e,n){if(!o(e))throw Error(r(299));var a=!1,l="",d=ng,h=sg,_=ig;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=U_(e,1,!1,null,null,a,l,null,d,h,_,X_),e[bi]=n.current,Dd(e),new Qd(n)},Cr.hydrateRoot=function(e,n,a){if(!o(e))throw Error(r(299));var l=!1,d="",h=ng,_=sg,v=ig,S=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),n=U_(e,1,!0,n,a??null,l,d,S,h,_,v,X_),n.context=P_(null),a=n.current,l=Ht(),l=Bc(l),d=ns(l),d.callback=null,ss(a,d,l),a=l,n.current.lanes=a,Ma(n,a),pn(n),e[bi]=n.current,Dd(e),new Do(n)},Cr.version="19.2.4",Cr}var av;function SN(){if(av)return Jd.exports;av=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Jd.exports=xN(),Jd.exports}var NN=SN();const EN=()=>{};var rv={};const wy={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const X=function(s,t){if(!s)throw Sa(t)},Sa=function(s){return new Error("Firebase Database ("+wy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};const jy=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},TN=function(s){const t=[];let i=0,r=0;for(;i<s.length;){const o=s[i++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[i++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[i++],f=s[i++],m=s[i++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[i++],f=s[i++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},Yh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,m=f?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,b=u>>2,y=(u&3)<<4|m>>4;let x=(m&15)<<2|p>>6,C=p&63;g||(C=64,f||(x=64)),r.push(i[b],i[y],i[x],i[C])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(jy(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):TN(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=i[s.charAt(o++)],m=o<s.length?i[s.charAt(o)]:0;++o;const p=o<s.length?i[s.charAt(o)]:64;++o;const y=o<s.length?i[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||y==null)throw new CN;const x=u<<2|m>>4;if(r.push(x),p!==64){const C=m<<4&240|p>>2;if(r.push(C),y!==64){const E=p<<6&192|y;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class CN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ay=function(s){const t=jy(s);return Yh.encodeByteArray(t,!0)},Xo=function(s){return Ay(s).replace(/\./g,"")},Ko=function(s){try{return Yh.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function wN(s){return Ry(void 0,s)}function Ry(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!jN(i)||(s[i]=Ry(s[i],t[i]));return s}function jN(s){return s!=="__proto__"}function AN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const RN=()=>AN().__FIREBASE_DEFAULTS__,DN=()=>{if(typeof process>"u"||typeof rv>"u")return;const s=rv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},ON=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&Ko(s[1]);return t&&JSON.parse(t)},Wh=()=>{try{return EN()||RN()||DN()||ON()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Dy=s=>Wh()?.emulatorHosts?.[s],IN=s=>{const t=Dy(s);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Oy=()=>Wh()?.config,Iy=s=>Wh()?.[`_${s}`];class tl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}function Na(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ky(s){return(await fetch(s,{credentials:"include"})).ok}function kN(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Xo(JSON.stringify(i)),Xo(JSON.stringify(f)),""].join(".")}const Lr={};function MN(){const s={prod:[],emulator:[]};for(const t of Object.keys(Lr))Lr[t]?s.emulator.push(t):s.prod.push(t);return s}function LN(s){let t=document.getElementById(s),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),i=!0),{created:i,element:t}}let lv=!1;function My(s,t){if(typeof window>"u"||typeof document>"u"||!Na(window.location.host)||Lr[s]===t||Lr[s]||lv)return;Lr[s]=t;function i(x){return`__firebase__banner__${x}`}const r="__firebase__banner",u=MN().prod.length>0;function f(){const x=document.getElementById(r);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,C){x.setAttribute("width","24"),x.setAttribute("id",C),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{lv=!0,f()},x}function b(x,C){x.setAttribute("id",C),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=LN(r),C=i("text"),E=document.getElementById(C)||document.createElement("span"),P=i("learnmore"),U=document.getElementById(P)||document.createElement("a"),Y=i("preprendIcon"),$=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const V=x.element;m(V),b(U,P);const z=p();g($,Y),V.append($,E,U,z),document.body.appendChild(V)}u?(E.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function UN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PN(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Ly(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zN(){const s=Nt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function BN(){return wy.NODE_ADMIN===!0}function HN(){try{return typeof indexedDB=="object"}catch{return!1}}function GN(){return new Promise((s,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(i){t(i)}})}const FN="FirebaseError";class ks extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=FN,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nl.prototype.create)}}class nl{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?VN(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new ks(o,m,r)}}function VN(s,t){return s.replace(qN,(i,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const qN=/\{\$([^}]+)}/g;function Fr(s){return JSON.parse(s)}function rt(s){return JSON.stringify(s)}const Uy=function(s){let t={},i={},r={},o="";try{const u=s.split(".");t=Fr(Ko(u[0])||""),i=Fr(Ko(u[1])||""),o=u[2],r=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:r,signature:o}},YN=function(s){const t=Uy(s),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},WN=function(s){const t=Uy(s).claims;return typeof t=="object"&&t.admin===!0};function vn(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function fa(s,t){if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}function xh(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Qo(s,t,i){const r={};for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=t.call(i,s[o],o,s));return r}function ii(s,t){if(s===t)return!0;const i=Object.keys(s),r=Object.keys(t);for(const o of i){if(!r.includes(o))return!1;const u=s[o],f=t[o];if(ov(u)&&ov(f)){if(!ii(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function ov(s){return s!==null&&typeof s=="object"}function Ea(s){const t=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ir(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function kr(s){const t=s.indexOf("?");if(!t)return"";const i=s.indexOf("#",t);return s.substring(t,i>0?i:void 0)}class XN{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const r=this.W_;if(typeof t=="string")for(let y=0;y<16;y++)r[y]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let y=0;y<16;y++)r[y]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let y=16;y<80;y++){const x=r[y-3]^r[y-8]^r[y-14]^r[y-16];r[y]=(x<<1|x>>>31)&4294967295}let o=this.chain_[0],u=this.chain_[1],f=this.chain_[2],m=this.chain_[3],g=this.chain_[4],p,b;for(let y=0;y<80;y++){y<40?y<20?(p=m^u&(f^m),b=1518500249):(p=u^f^m,b=1859775393):y<60?(p=u&f|m&(u|f),b=2400959708):(p=u^f^m,b=3395469782);const x=(o<<5|o>>>27)+p+g+b+r[y]&4294967295;g=m,m=f,f=(u<<30|u>>>2)&4294967295,u=o,o=x}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const r=i-this.blockSize;let o=0;const u=this.buf_;let f=this.inbuf_;for(;o<i;){if(f===0)for(;o<=r;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<i;)if(u[f]=t.charCodeAt(o),++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}else for(;o<i;)if(u[f]=t[o],++f,++o,f===this.blockSize){this.compress_(u),f=0;break}}this.inbuf_=f,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let u=24;u>=0;u-=8)t[r]=this.chain_[o]>>u&255,++r;return t}}function KN(s,t){const i=new QN(s,t);return i.subscribe.bind(i)}class QN{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,r){let o;if(t===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");$N(t,["next","error","complete"])?o=t:o={next:t,error:i,complete:r},o.next===void 0&&(o.next=sh),o.error===void 0&&(o.error=sh),o.complete===void 0&&(o.complete=sh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $N(s,t){if(typeof s!="object"||s===null)return!1;for(const i of t)if(i in s&&typeof s[i]=="function")return!0;return!1}function sh(){}function _c(s,t){return`${s} failed: ${t} argument `}const ZN=function(s){const t=[];let i=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);if(o>=55296&&o<=56319){const u=o-55296;r++,X(r<s.length,"Surrogate pair missing trail surrogate.");const f=s.charCodeAt(r)-56320;o=65536+(u<<10)+f}o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):o<65536?(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},vc=function(s){let t=0;for(let i=0;i<s.length;i++){const r=s.charCodeAt(i);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,i++):t+=3}return t};function vt(s){return s&&s._delegate?s._delegate:s}class ai{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ti="[DEFAULT]";class JN{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new tl;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(tE(t))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=ti){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ti){return this.instances.has(t)}getOptions(t=ti){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(t,i){const r=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eE(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ti){return this.component?this.component.multipleInstances?t:ti:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eE(s){return s===ti?void 0:s}function tE(s){return s.instantiationMode==="EAGER"}class nE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new JN(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}var Pe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pe||(Pe={}));const sE={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},iE=Pe.INFO,aE={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},rE=(s,t,...i)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=aE[t];if(o)console[o](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Kh{constructor(t){this.name=t,this._logLevel=iE,this._logHandler=rE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...t),this._logHandler(this,Pe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...t),this._logHandler(this,Pe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...t),this._logHandler(this,Pe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...t),this._logHandler(this,Pe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...t),this._logHandler(this,Pe.ERROR,...t)}}const lE=(s,t)=>t.some(i=>s instanceof i);let cv,uv;function oE(){return cv||(cv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cE(){return uv||(uv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Py=new WeakMap,Sh=new WeakMap,zy=new WeakMap,ih=new WeakMap,Qh=new WeakMap;function uE(s){const t=new Promise((i,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{i(Ts(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&Py.set(i,s)}).catch(()=>{}),Qh.set(t,s),t}function dE(s){if(Sh.has(s))return;const t=new Promise((i,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{i(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});Sh.set(s,t)}let Nh={get(s,t,i){if(s instanceof IDBTransaction){if(t==="done")return Sh.get(s);if(t==="objectStoreNames")return s.objectStoreNames||zy.get(s);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Ts(s[t])},set(s,t,i){return s[t]=i,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function hE(s){Nh=s(Nh)}function fE(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=s.call(ah(this),t,...i);return zy.set(r,t.sort?t.sort():[t]),Ts(r)}:cE().includes(s)?function(...t){return s.apply(ah(this),t),Ts(Py.get(this))}:function(...t){return Ts(s.apply(ah(this),t))}}function mE(s){return typeof s=="function"?fE(s):(s instanceof IDBTransaction&&dE(s),lE(s,oE())?new Proxy(s,Nh):s)}function Ts(s){if(s instanceof IDBRequest)return uE(s);if(ih.has(s))return ih.get(s);const t=mE(s);return t!==s&&(ih.set(s,t),Qh.set(t,s)),t}const ah=s=>Qh.get(s);function pE(s,t,{blocked:i,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,t),m=Ts(f);return r&&f.addEventListener("upgradeneeded",g=>{r(Ts(f.result),g.oldVersion,g.newVersion,Ts(f.transaction),g)}),i&&f.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const gE=["get","getKey","getAll","getAllKeys","count"],_E=["put","add","delete","clear"],rh=new Map;function dv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(rh.get(t))return rh.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,o=_E.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||gE.includes(i)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[i](...m),o&&g.done]))[0]};return rh.set(t,u),u}hE(s=>({...s,get:(t,i,r)=>dv(t,i)||s.get(t,i,r),has:(t,i)=>!!dv(t,i)||s.has(t,i)}));class vE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(yE(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function yE(s){return s.getComponent()?.type==="VERSION"}const Eh="@firebase/app",hv="0.14.8";const Gn=new Kh("@firebase/app"),bE="@firebase/app-compat",xE="@firebase/analytics-compat",SE="@firebase/analytics",NE="@firebase/app-check-compat",EE="@firebase/app-check",TE="@firebase/auth",CE="@firebase/auth-compat",wE="@firebase/database",jE="@firebase/data-connect",AE="@firebase/database-compat",RE="@firebase/functions",DE="@firebase/functions-compat",OE="@firebase/installations",IE="@firebase/installations-compat",kE="@firebase/messaging",ME="@firebase/messaging-compat",LE="@firebase/performance",UE="@firebase/performance-compat",PE="@firebase/remote-config",zE="@firebase/remote-config-compat",BE="@firebase/storage",HE="@firebase/storage-compat",GE="@firebase/firestore",FE="@firebase/ai",VE="@firebase/firestore-compat",qE="firebase",YE="12.9.0";const Th="[DEFAULT]",WE={[Eh]:"fire-core",[bE]:"fire-core-compat",[SE]:"fire-analytics",[xE]:"fire-analytics-compat",[EE]:"fire-app-check",[NE]:"fire-app-check-compat",[TE]:"fire-auth",[CE]:"fire-auth-compat",[wE]:"fire-rtdb",[jE]:"fire-data-connect",[AE]:"fire-rtdb-compat",[RE]:"fire-fn",[DE]:"fire-fn-compat",[OE]:"fire-iid",[IE]:"fire-iid-compat",[kE]:"fire-fcm",[ME]:"fire-fcm-compat",[LE]:"fire-perf",[UE]:"fire-perf-compat",[PE]:"fire-rc",[zE]:"fire-rc-compat",[BE]:"fire-gcs",[HE]:"fire-gcs-compat",[GE]:"fire-fst",[VE]:"fire-fst-compat",[FE]:"fire-vertex","fire-js":"fire-js",[qE]:"fire-js-all"};const $o=new Map,XE=new Map,Ch=new Map;function fv(s,t){try{s.container.addComponent(t)}catch(i){Gn.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,i)}}function ma(s){const t=s.name;if(Ch.has(t))return Gn.debug(`There were multiple attempts to register component ${t}.`),!1;Ch.set(t,s);for(const i of $o.values())fv(i,s);for(const i of XE.values())fv(i,s);return!0}function $h(s,t){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(t)}function Zt(s){return s==null?!1:s.settings!==void 0}const KE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cs=new nl("app","Firebase",KE);class QE{constructor(t,i,r){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}const Ta=YE;function By(s,t={}){let i=s;typeof t!="object"&&(t={name:t});const r={name:Th,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw Cs.create("bad-app-name",{appName:String(o)});if(i||(i=Oy()),!i)throw Cs.create("no-options");const u=$o.get(o);if(u){if(ii(i,u.options)&&ii(r,u.config))return u;throw Cs.create("duplicate-app",{appName:o})}const f=new nE(o);for(const g of Ch.values())f.addComponent(g);const m=new QE(i,r,f);return $o.set(o,m),m}function Hy(s=Th){const t=$o.get(s);if(!t&&s===Th&&Oy())return By();if(!t)throw Cs.create("no-app",{appName:s});return t}function ws(s,t,i){let r=WE[s]??s;i&&(r+=`-${i}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${t}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gn.warn(f.join(" "));return}ma(new ai(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const $E="firebase-heartbeat-database",ZE=1,Vr="firebase-heartbeat-store";let lh=null;function Gy(){return lh||(lh=pE($E,ZE,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Vr)}catch(i){console.warn(i)}}}}).catch(s=>{throw Cs.create("idb-open",{originalErrorMessage:s.message})})),lh}async function JE(s){try{const i=(await Gy()).transaction(Vr),r=await i.objectStore(Vr).get(Fy(s));return await i.done,r}catch(t){if(t instanceof ks)Gn.warn(t.message);else{const i=Cs.create("idb-get",{originalErrorMessage:t?.message});Gn.warn(i.message)}}}async function mv(s,t){try{const r=(await Gy()).transaction(Vr,"readwrite");await r.objectStore(Vr).put(t,Fy(s)),await r.done}catch(i){if(i instanceof ks)Gn.warn(i.message);else{const r=Cs.create("idb-set",{originalErrorMessage:i?.message});Gn.warn(r.message)}}}function Fy(s){return`${s.name}!${s.options.appId}`}const e1=1024,t1=30;class n1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new i1(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>t1){const o=a1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Gn.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=pv(),{heartbeatsToSend:i,unsentEntries:r}=s1(this._heartbeatsCache.heartbeats),o=Xo(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Gn.warn(t),""}}}function pv(){return new Date().toISOString().substring(0,10)}function s1(s,t=e1){const i=[];let r=s.slice();for(const o of s){const u=i.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),gv(i)>t){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),gv(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class i1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HN()?GN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await JE(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return mv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return mv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function gv(s){return Xo(JSON.stringify({version:2,heartbeats:s})).length}function a1(s){if(s.length===0)return-1;let t=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,t=r);return t}function r1(s){ma(new ai("platform-logger",t=>new vE(t),"PRIVATE")),ma(new ai("heartbeat",t=>new n1(t),"PRIVATE")),ws(Eh,hv,s),ws(Eh,hv,"esm2020"),ws("fire-js","")}r1("");function Vy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l1=Vy,qy=new nl("auth","Firebase",Vy());const Zo=new Kh("@firebase/auth");function o1(s,...t){Zo.logLevel<=Pe.WARN&&Zo.warn(`Auth (${Ta}): ${s}`,...t)}function Bo(s,...t){Zo.logLevel<=Pe.ERROR&&Zo.error(`Auth (${Ta}): ${s}`,...t)}function dn(s,...t){throw Zh(s,...t)}function gn(s,...t){return Zh(s,...t)}function Yy(s,t,i){const r={...l1(),[t]:i};return new nl("auth","Firebase",r).create(t,{appName:s.name})}function Bn(s){return Yy(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zh(s,...t){if(typeof s!="string"){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return qy.create(s,...t)}function ce(s,t,...i){if(!s)throw Zh(t,...i)}function Un(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Bo(t),new Error(t)}function Fn(s,t){s||Un(t)}function wh(){return typeof self<"u"&&self.location?.href||""}function c1(){return _v()==="http:"||_v()==="https:"}function _v(){return typeof self<"u"&&self.location?.protocol||null}function u1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(c1()||PN()||"connection"in navigator)?navigator.onLine:!0}function d1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class sl{constructor(t,i){this.shortDelay=t,this.longDelay=i,Fn(i>t,"Short delay should be less than long delay!"),this.isMobile=Xh()||Ly()}get(){return u1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jh(s,t){Fn(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class Wy{static initialize(t,i,r){this.fetchImpl=t,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const h1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const f1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],m1=new sl(3e4,6e4);function Ms(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function qn(s,t,i,r,o={}){return Xy(s,o,async()=>{let u={},f={};r&&(t==="GET"?f=r:u={body:JSON.stringify(r)});const m=Ea({key:s.config.apiKey,...f}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:t,headers:g,...u};return UN()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Na(s.emulatorConfig.host)&&(p.credentials="include"),Wy.fetch()(await Ky(s,s.config.apiHost,i,m),p)})}async function Xy(s,t,i){s._canInitEmulator=!1;const r={...h1,...t};try{const o=new g1(s),u=await Promise.race([i(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Io(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Io(s,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Io(s,"email-already-in-use",f);if(g==="USER_DISABLED")throw Io(s,"user-disabled",f);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Yy(s,b,p);dn(s,b)}}catch(o){if(o instanceof ks)throw o;dn(s,"network-request-failed",{message:String(o)})}}async function il(s,t,i,r,o={}){const u=await qn(s,t,i,r,o);return"mfaPendingCredential"in u&&dn(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ky(s,t,i,r){const o=`${t}${i}?${r}`,u=s,f=u.config.emulator?Jh(s.config,o):`${s.config.apiScheme}://${o}`;return f1.includes(i)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function p1(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class g1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(gn(this.auth,"network-request-failed")),m1.get())})}}function Io(s,t,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const o=gn(s,t,r);return o.customData._tokenResponse=i,o}function vv(s){return s!==void 0&&s.enterprise!==void 0}class _1{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===t)return p1(i.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function v1(s,t){return qn(s,"GET","/v2/recaptchaConfig",Ms(s,t))}async function y1(s,t){return qn(s,"POST","/v1/accounts:delete",t)}async function Jo(s,t){return qn(s,"POST","/v1/accounts:lookup",t)}function Ur(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function b1(s,t=!1){const i=vt(s),r=await i.getIdToken(t),o=ef(r);ce(o&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:r,authTime:Ur(oh(o.auth_time)),issuedAtTime:Ur(oh(o.iat)),expirationTime:Ur(oh(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function oh(s){return Number(s)*1e3}function ef(s){const[t,i,r]=s.split(".");if(t===void 0||i===void 0||r===void 0)return Bo("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ko(i);return o?JSON.parse(o):(Bo("Failed to decode base64 JWT payload"),null)}catch(o){return Bo("Caught error parsing JWT payload as JSON",o?.toString()),null}}function yv(s){const t=ef(s);return ce(t,"internal-error"),ce(typeof t.exp<"u","internal-error"),ce(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function pa(s,t,i=!1){if(i)return t;try{return await t}catch(r){throw r instanceof ks&&x1(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function x1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class S1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class jh{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ur(this.lastLoginAt),this.creationTime=Ur(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ec(s){const t=s.auth,i=await s.getIdToken(),r=await pa(s,Jo(t,{idToken:i}));ce(r?.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?Qy(o.providerUserInfo):[],f=E1(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!f?.length,p=m?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new jh(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,b)}async function N1(s){const t=vt(s);await ec(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function E1(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function Qy(s){return s.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function T1(s,t){const i=await Xy(s,{},async()=>{const r=Ea({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await Ky(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Na(s.emulatorConfig.host)&&(g.credentials="include"),Wy.fetch()(f,g)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function C1(s,t){return qn(s,"POST","/v2/accounts:revokeToken",Ms(s,t))}class oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ce(t.idToken,"internal-error"),ce(typeof t.idToken<"u","internal-error"),ce(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):yv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){ce(t.length!==0,"internal-error");const i=yv(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:r,refreshToken:o,expiresIn:u}=await T1(t,i);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,i,r){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,i){const{refreshToken:r,accessToken:o,expirationTime:u}=i,f=new oa;return r&&(ce(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),o&&(ce(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(ce(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new oa,this.toJSON())}_performRefresh(){return Un("not implemented")}}function ys(s,t){ce(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class on{constructor({uid:t,auth:i,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new S1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jh(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const i=await pa(this,this.stsTokenManager.getToken(this.auth,t));return ce(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return b1(this,t)}reload(){return N1(this)}_assign(t){this!==t&&(ce(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new on({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),i&&await ec(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zt(this.auth.app))return Promise.reject(Bn(this.auth));const t=await this.getIdToken();return await pa(this,y1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const r=i.displayName??void 0,o=i.email??void 0,u=i.phoneNumber??void 0,f=i.photoURL??void 0,m=i.tenantId??void 0,g=i._redirectEventId??void 0,p=i.createdAt??void 0,b=i.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:C,providerData:E,stsTokenManager:P}=i;ce(y&&P,t,"internal-error");const U=oa.fromJSON(this.name,P);ce(typeof y=="string",t,"internal-error"),ys(r,t.name),ys(o,t.name),ce(typeof x=="boolean",t,"internal-error"),ce(typeof C=="boolean",t,"internal-error"),ys(u,t.name),ys(f,t.name),ys(m,t.name),ys(g,t.name),ys(p,t.name),ys(b,t.name);const Y=new on({uid:y,auth:t,email:o,emailVerified:x,displayName:r,isAnonymous:C,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:U,createdAt:p,lastLoginAt:b});return E&&Array.isArray(E)&&(Y.providerData=E.map($=>({...$}))),g&&(Y._redirectEventId=g),Y}static async _fromIdTokenResponse(t,i,r=!1){const o=new oa;o.updateFromServerResponse(i);const u=new on({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await ec(u),u}static async _fromGetAccountInfoResponse(t,i,r){const o=i.users[0];ce(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Qy(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new oa;m.updateFromIdToken(r);const g=new on({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:f}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new jh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const bv=new Map;function Pn(s){Fn(s instanceof Function,"Expected a class definition");let t=bv.get(s);return t?(Fn(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,bv.set(s,t),t)}class $y{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}$y.type="NONE";const xv=$y;function Ho(s,t,i){return`firebase:${s}:${t}:${i}`}class ca{constructor(t,i,r){this.persistence=t,this.auth=i,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Ho(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ho("persistence",o.apiKey,u),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Jo(this.auth,{idToken:t}).catch(()=>{});return i?on._fromGetAccountInfoResponse(this.auth,i,t):null}return on._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,r="authUser"){if(!i.length)return new ca(Pn(xv),t,r);const o=(await Promise.all(i.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Pn(xv);const f=Ho(r,t.config.apiKey,t.name);let m=null;for(const p of i)try{const b=await p._get(f);if(b){let y;if(typeof b=="string"){const x=await Jo(t,{idToken:b}).catch(()=>{});if(!x)break;y=await on._fromGetAccountInfoResponse(t,x,b)}else y=on._fromJSON(t,b);p!==u&&(m=y),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new ca(u,t,r):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(i.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new ca(u,t,r))}}function Sv(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(t0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zy(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(s0(t))return"Blackberry";if(i0(t))return"Webos";if(Jy(t))return"Safari";if((t.includes("chrome/")||e0(t))&&!t.includes("edge/"))return"Chrome";if(n0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function Zy(s=Nt()){return/firefox\//i.test(s)}function Jy(s=Nt()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function e0(s=Nt()){return/crios\//i.test(s)}function t0(s=Nt()){return/iemobile/i.test(s)}function n0(s=Nt()){return/android/i.test(s)}function s0(s=Nt()){return/blackberry/i.test(s)}function i0(s=Nt()){return/webos/i.test(s)}function tf(s=Nt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function w1(s=Nt()){return tf(s)&&!!window.navigator?.standalone}function j1(){return zN()&&document.documentMode===10}function a0(s=Nt()){return tf(s)||n0(s)||i0(s)||s0(s)||/windows phone/i.test(s)||t0(s)}function r0(s,t=[]){let i;switch(s){case"Browser":i=Sv(Nt());break;case"Worker":i=`${Sv(Nt())}-${s}`;break;default:i=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Ta}/${r}`}class A1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const r=u=>new Promise((f,m)=>{try{const g=t(u);f(g)}catch(g){m(g)}});r.onAbort=i,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const r of this.queue)await r(t),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const o of i)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function R1(s,t={}){return qn(s,"GET","/v2/passwordPolicy",Ms(s,t))}const D1=6;class O1{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??D1,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=t.length>=r),o&&(i.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,i,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class I1{constructor(t,i,r,o){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nv(this),this.idTokenSubscription=new Nv(this),this.beforeStateQueue=new A1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Pn(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ca.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Jo(this,{idToken:t}),r=await on._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Zt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=r?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===f)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await ec(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=d1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Zt(this.app))return Promise.reject(Bn(this));const i=t?vt(t):null;return i&&ce(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&ce(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Zt(this.app)?Promise.reject(Bn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Zt(this.app)?Promise.reject(Bn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pn(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await R1(this),i=new O1(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new nl("auth","Firebase",t())}onAuthStateChanged(t,i,r){return this.registerStateListener(this.authStateSubscription,t,i,r)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,r){return this.registerStateListener(this.idTokenSubscription,t,i,r)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await C1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const r=await this.getOrInitRedirectPersistenceManager(i);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Pn(t)||this._popupRedirectResolver;ce(i,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[Pn(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,r,o){if(this._deleted)return()=>{};const u=typeof i=="function"?i:i.next.bind(i);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof i=="function"){const g=t.addObserver(i,r,o);return()=>{f=!0,g()}}else{const g=t.addObserver(i);return()=>{f=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=r0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&o1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function mi(s){return vt(s)}class Nv{constructor(t){this.auth=t,this.observer=null,this.addObserver=KN(i=>this.observer=i)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k1(s){yc=s}function l0(s){return yc.loadJS(s)}function M1(){return yc.recaptchaEnterpriseScript}function L1(){return yc.gapiScript}function U1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class P1{constructor(){this.enterprise=new z1}ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}class z1{ready(t){t()}execute(t,i){return Promise.resolve("token")}render(t,i){return""}}const B1="recaptcha-enterprise",o0="NO_RECAPTCHA";class H1{constructor(t){this.type=B1,this.auth=mi(t)}async verify(t="verify",i=!1){async function r(u){if(!i){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{v1(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new _1(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,f(p.siteKey)}}).catch(g=>{m(g)})})}function o(u,f,m){const g=window.grecaptcha;vv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:t}).then(p=>{f(p)}).catch(()=>{f(o0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new P1().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(m=>{if(!i&&vv(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=M1();g.length!==0&&(g+=m),l0(g).then(()=>{o(m,u,f)}).catch(p=>{f(p)})}}).catch(m=>{f(m)})})}}async function Ev(s,t,i,r=!1,o=!1){const u=new H1(s);let f;if(o)f=o0;else try{f=await u.verify(i)}catch{f=await u.verify(i,!0)}const m={...t};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Ah(s,t,i,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Ev(s,t,i,i==="getOobCode");return r(s,u)}else return r(s,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Ev(s,t,i,i==="getOobCode");return r(s,f)}else return Promise.reject(u)})}function G1(s,t){const i=$h(s,"auth");if(i.isInitialized()){const o=i.getImmediate(),u=i.getOptions();if(ii(u,t??{}))return o;dn(o,"already-initialized")}return i.initialize({options:t})}function F1(s,t){const i=t?.persistence||[],r=(Array.isArray(i)?i:[i]).map(Pn);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function V1(s,t,i){const r=mi(s);ce(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=c0(t),{host:f,port:m}=q1(t),g=m===null?"":`:${m}`,p={url:`${u}//${f}${g}/`},b=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(ii(p,r.config.emulator)&&ii(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,Na(f)?(ky(`${u}//${f}${g}`),My("Auth",!0)):Y1()}function c0(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function q1(s){const t=c0(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:Tv(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:Tv(f)}}}function Tv(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function Y1(){function s(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class nf{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Un("not implemented")}_getIdTokenResponse(t){return Un("not implemented")}_linkToIdToken(t,i){return Un("not implemented")}_getReauthenticationResolver(t){return Un("not implemented")}}async function W1(s,t){return qn(s,"POST","/v1/accounts:signUp",t)}async function X1(s,t){return il(s,"POST","/v1/accounts:signInWithPassword",Ms(s,t))}async function K1(s,t){return il(s,"POST","/v1/accounts:signInWithEmailLink",Ms(s,t))}async function Q1(s,t){return il(s,"POST","/v1/accounts:signInWithEmailLink",Ms(s,t))}class qr extends nf{constructor(t,i,r,o=null){super("password",r),this._email=t,this._password=i,this._tenantId=o}static _fromEmailAndPassword(t,i){return new qr(t,i,"password")}static _fromEmailAndCode(t,i,r=null){return new qr(t,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(t,i,"signInWithPassword",X1);case"emailLink":return K1(t,{email:this._email,oobCode:this._password});default:dn(t,"internal-error")}}async _linkToIdToken(t,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(t,r,"signUpPassword",W1);case"emailLink":return Q1(t,{idToken:i,email:this._email,oobCode:this._password});default:dn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function ua(s,t){return il(s,"POST","/v1/accounts:signInWithIdp",Ms(s,t))}const $1="http://localhost";class ri extends nf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new ri(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):dn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...u}=i;if(!r||!o)return null;const f=new ri(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const i=this.buildRequest();return ua(t,i)}_linkToIdToken(t,i){const r=this.buildRequest();return r.idToken=i,ua(t,r)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,ua(t,i)}buildRequest(){const t={requestUri:$1,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Ea(i)}return t}}function Z1(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function J1(s){const t=Ir(kr(s)).link,i=t?Ir(kr(t)).deep_link_id:null,r=Ir(kr(s)).deep_link_id;return(r?Ir(kr(r)).link:null)||r||i||t||s}class sf{constructor(t){const i=Ir(kr(t)),r=i.apiKey??null,o=i.oobCode??null,u=Z1(i.mode??null);ce(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(t){const i=J1(t);try{return new sf(i)}catch{return null}}}class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(t,i){return qr._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=sf.parseLink(i);return ce(r,"argument-error"),qr._fromEmailAndCode(t,r.code,r.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class u0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class al extends u0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class bs extends al{constructor(){super("facebook.com")}static credential(t){return ri._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bs.credentialFromTaggedObject(t)}static credentialFromError(t){return bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bs.credential(t.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";class xs extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return ri._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return xs.credential(i,r)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";class Ss extends al{constructor(){super("github.com")}static credential(t){return ri._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ss.credentialFromTaggedObject(t)}static credentialFromError(t){return Ss.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ss.credential(t.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";class Ns extends al{constructor(){super("twitter.com")}static credential(t,i){return ri._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return Ns.credentialFromTaggedObject(t)}static credentialFromError(t){return Ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=t;if(!i||!r)return null;try{return Ns.credential(i,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";async function eT(s,t){return il(s,"POST","/v1/accounts:signUp",Ms(s,t))}class li{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,r,o=!1){const u=await on._fromIdTokenResponse(t,r,o),f=Cv(r);return new li({user:u,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(t,i,r){await t._updateTokensIfNecessary(r,!0);const o=Cv(r);return new li({user:t,providerId:o,_tokenResponse:r,operationType:i})}}function Cv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class tc extends ks{constructor(t,i,r,o){super(i.code,i.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,tc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,i,r,o){return new tc(t,i,r,o)}}function d0(s,t,i,r){return(t==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?tc._fromErrorAndOperation(s,u,t,r):u})}async function tT(s,t,i=!1){const r=await pa(s,t._linkToIdToken(s.auth,await s.getIdToken()),i);return li._forOperation(s,"link",r)}async function nT(s,t,i=!1){const{auth:r}=s;if(Zt(r.app))return Promise.reject(Bn(r));const o="reauthenticate";try{const u=await pa(s,d0(r,o,t,s),i);ce(u.idToken,r,"internal-error");const f=ef(u.idToken);ce(f,r,"internal-error");const{sub:m}=f;return ce(s.uid===m,r,"user-mismatch"),li._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&dn(r,"user-mismatch"),u}}async function h0(s,t,i=!1){if(Zt(s.app))return Promise.reject(Bn(s));const r="signIn",o=await d0(s,r,t),u=await li._fromIdTokenResponse(s,r,o);return i||await s._updateCurrentUser(u.user),u}async function sT(s,t){return h0(mi(s),t)}async function f0(s){const t=mi(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function iT(s,t,i){if(Zt(s.app))return Promise.reject(Bn(s));const r=mi(s),f=await Ah(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eT).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&f0(s),g}),m=await li._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function aT(s,t,i){return Zt(s.app)?Promise.reject(Bn(s)):sT(vt(s),Ca.credential(t,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&f0(s),r})}async function rT(s,t){return qn(s,"POST","/v1/accounts:update",t)}async function lT(s,{displayName:t,photoURL:i}){if(t===void 0&&i===void 0)return;const r=vt(s),u={idToken:await r.getIdToken(),displayName:t,photoUrl:i,returnSecureToken:!0},f=await pa(r,rT(r.auth,u));r.displayName=f.displayName||null,r.photoURL=f.photoUrl||null;const m=r.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(f)}function oT(s,t,i,r){return vt(s).onIdTokenChanged(t,i,r)}function cT(s,t,i){return vt(s).beforeAuthStateChanged(t,i)}function uT(s,t,i,r){return vt(s).onAuthStateChanged(t,i,r)}function dT(s){return vt(s).signOut()}const nc="__sak";class m0{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(nc,"1"),this.storage.removeItem(nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const hT=1e3,fT=10;class p0 extends m0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const r=t.key;i?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);j1()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,fT):o()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},hT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}p0.type="LOCAL";const mT=p0;class g0 extends m0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}g0.type="SESSION";const _0=g0;function pT(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}class bc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;const r=new bc(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:r,eventType:o,data:u}=i.data,f=this.handlersMap[o];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(f).map(async p=>p(i.origin,u)),g=await pT(m);i.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bc.receivers=[];function af(s="",t=10){let i="";for(let r=0;r<t;r++)i+=Math.floor(Math.random()*10);return s+i}class gT{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const p=af("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(y){const x=y;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:p,data:i},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function _n(){return window}function _T(s){_n().location.href=s}function v0(){return typeof _n().WorkerGlobalScope<"u"&&typeof _n().importScripts=="function"}async function vT(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yT(){return navigator?.serviceWorker?.controller||null}function bT(){return v0()?self:null}const y0="firebaseLocalStorageDb",xT=1,sc="firebaseLocalStorage",b0="fbase_key";class rl{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function xc(s,t){return s.transaction([sc],t?"readwrite":"readonly").objectStore(sc)}function ST(){const s=indexedDB.deleteDatabase(y0);return new rl(s).toPromise()}function Rh(){const s=indexedDB.open(y0,xT);return new Promise((t,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(sc,{keyPath:b0})}catch(o){i(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(sc)?t(r):(r.close(),await ST(),t(await Rh()))})})}async function wv(s,t,i){const r=xc(s,!0).put({[b0]:t,value:i});return new rl(r).toPromise()}async function NT(s,t){const i=xc(s,!1).get(t),r=await new rl(i).toPromise();return r===void 0?null:r.value}function jv(s,t){const i=xc(s,!0).delete(t);return new rl(i).toPromise()}const ET=800,TT=3;class x0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rh(),this.db)}async _withRetries(t){let i=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(i++>TT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bc._getInstance(bT()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vT(),!this.activeServiceWorker)return;this.sender=new gT(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||yT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Rh();return await wv(t,nc,"1"),await jv(t,nc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>wv(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(r=>NT(r,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>jv(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=xc(o,!1).getAll();return new rl(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),i.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),i.push(o));return i}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ET)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}x0.type="LOCAL";const CT=x0;new sl(3e4,6e4);function wT(s,t){return t?Pn(t):(ce(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class rf extends nf{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ua(t,this._buildIdpRequest())}_linkToIdToken(t,i){return ua(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return ua(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function jT(s){return h0(s.auth,new rf(s),s.bypassAuthState)}function AT(s){const{auth:t,user:i}=s;return ce(i,t,"internal-error"),nT(i,new rf(s),s.bypassAuthState)}async function RT(s){const{auth:t,user:i}=s;return ce(i,t,"internal-error"),tT(i,new rf(s),s.bypassAuthState)}class S0{constructor(t,i,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:r,postBody:o,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:i,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jT;case"linkViaPopup":case"linkViaRedirect":return RT;case"reauthViaPopup":case"reauthViaRedirect":return AT;default:dn(this.auth,"internal-error")}}resolve(t){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const DT=new sl(2e3,1e4);class ra extends S0{constructor(t,i,r,o,u){super(t,i,o,u),this.provider=r,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ce(t,this.auth,"internal-error"),t}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const t=af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,DT.get())};t()}}ra.currentPopupAction=null;const OT="pendingRedirect",Go=new Map;class IT extends S0{constructor(t,i,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let t=Go.get(this.auth._key());if(!t){try{const r=await kT(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(i){t=()=>Promise.reject(i)}Go.set(this.auth._key(),t)}return this.bypassAuthState||Go.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kT(s,t){const i=UT(t),r=LT(s);if(!await r._isAvailable())return!1;const o=await r._get(i)==="true";return await r._remove(i),o}function MT(s,t){Go.set(s._key(),t)}function LT(s){return Pn(s._redirectPersistence)}function UT(s){return Ho(OT,s.config.apiKey,s.name)}async function PT(s,t,i=!1){if(Zt(s.app))return Promise.reject(Bn(s));const r=mi(s),o=wT(r,t),f=await new IT(r,o,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}const zT=600*1e3;class BT{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(i=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!HT(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!N0(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";i.onError(gn(this.auth,r))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const r=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=zT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Av(t))}saveEventToCache(t){this.cachedEventUids.add(Av(t)),this.lastProcessedEventTime=Date.now()}}function Av(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function N0({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function HT(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N0(s);default:return!1}}async function GT(s,t={}){return qn(s,"GET","/v1/projects",t)}const FT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VT=/^https?/;async function qT(s){if(s.config.emulator)return;const{authorizedDomains:t}=await GT(s);for(const i of t)try{if(YT(i))return}catch{}dn(s,"unauthorized-domain")}function YT(s){const t=wh(),{protocol:i,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!VT.test(i))return!1;if(FT.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const WT=new sl(3e4,6e4);function Rv(){const s=_n().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function XT(s){return new Promise((t,i)=>{function r(){Rv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Rv(),i(gn(s,"network-request-failed"))},timeout:WT.get()})}if(_n().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(_n().gapi?.load)r();else{const o=U1("iframefcb");return _n()[o]=()=>{gapi.load?r():i(gn(s,"network-request-failed"))},l0(`${L1()}?onload=${o}`).catch(u=>i(u))}}).catch(t=>{throw Fo=null,t})}let Fo=null;function KT(s){return Fo=Fo||XT(s),Fo}const QT=new sl(5e3,15e3),$T="__/auth/iframe",ZT="emulator/auth/iframe",JT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tC(s){const t=s.config;ce(t.authDomain,s,"auth-domain-config-required");const i=t.emulator?Jh(t,ZT):`https://${s.config.authDomain}/${$T}`,r={apiKey:t.apiKey,appName:s.name,v:Ta},o=eC.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${i}?${Ea(r).slice(1)}`}async function nC(s){const t=await KT(s),i=_n().gapi;return ce(i,s,"internal-error"),t.open({where:document.body,url:tC(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JT,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=gn(s,"network-request-failed"),m=_n().setTimeout(()=>{u(f)},QT.get());function g(){_n().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(f)})}))}const sC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iC=500,aC=600,rC="_blank",lC="http://localhost";class Dv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oC(s,t,i,r=iC,o=aC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...sC,width:r.toString(),height:o.toString(),top:u,left:f},p=Nt().toLowerCase();i&&(m=e0(p)?rC:i),Zy(p)&&(t=t||lC,g.scrollbars="yes");const b=Object.entries(g).reduce((x,[C,E])=>`${x}${C}=${E},`,"");if(w1(p)&&m!=="_self")return cC(t||"",m),new Dv(null);const y=window.open(t||"",m,b);ce(y,s,"popup-blocked");try{y.focus()}catch{}return new Dv(y)}function cC(s,t){const i=document.createElement("a");i.href=s,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}const uC="__/auth/handler",dC="emulator/auth/handler",hC=encodeURIComponent("fac");async function Ov(s,t,i,r,o,u){ce(s.config.authDomain,s,"auth-domain-config-required"),ce(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:Ta,eventId:o};if(t instanceof u0){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",xh(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,y]of Object.entries({}))f[b]=y}if(t instanceof al){const b=t.getScopes().filter(y=>y!=="");b.length>0&&(f.scopes=b.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const g=await s._getAppCheckToken(),p=g?`#${hC}=${encodeURIComponent(g)}`:"";return`${fC(s)}?${Ea(m).slice(1)}${p}`}function fC({config:s}){return s.emulator?Jh(s,dC):`https://${s.authDomain}/${uC}`}const ch="webStorageSupport";class mC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_0,this._completeRedirectFn=PT,this._overrideRedirectResult=MT}async _openPopup(t,i,r,o){Fn(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Ov(t,i,r,wh(),o);return oC(t,u,af())}async _openRedirect(t,i,r,o){await this._originValidation(t);const u=await Ov(t,i,r,wh(),o);return _T(u),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:o,promise:u}=this.eventManagers[i];return o?Promise.resolve(o):(Fn(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(t){const i=await nC(t),r=new BT(t);return i.register("authEvent",o=>(ce(o?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=i,r}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(ch,{type:ch},o=>{const u=o?.[0]?.[ch];u!==void 0&&i(!!u),dn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=qT(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return a0()||Jy()||tf()}}const pC=mC;var Iv="@firebase/auth",kv="1.12.0";class gC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _C(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vC(s){ma(new ai("auth",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;ce(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r0(s)},p=new I1(r,o,u,g);return F1(p,i),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,r)=>{t.getProvider("auth-internal").initialize()})),ma(new ai("auth-internal",t=>{const i=mi(t.getProvider("auth").getImmediate());return(r=>new gC(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(Iv,kv,_C(s)),ws(Iv,kv,"esm2020")}const yC=300,bC=Iy("authIdTokenMaxAge")||yC;let Mv=null;const xC=s=>async t=>{const i=t&&await t.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>bC)return;const o=i?.token;Mv!==o&&(Mv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function SC(s=Hy()){const t=$h(s,"auth");if(t.isInitialized())return t.getImmediate();const i=G1(s,{popupRedirectResolver:pC,persistence:[CT,mT,_0]}),r=Iy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=xC(u.toString());cT(i,f,()=>f(i.currentUser)),oT(i,m=>f(m))}}const o=Dy("auth");return o&&V1(i,`http://${o}`),i}function NC(){return document.getElementsByTagName("head")?.[0]??document}k1({loadJS(s){return new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=gn("internal-error");u.customData=o,i(u)},r.type="text/javascript",r.charset="UTF-8",NC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vC("Browser");var Lv={};const Uv="@firebase/database",Pv="1.1.0";let E0="";function EC(s){E0=s}class TC{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),rt(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Fr(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class CC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return vn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const T0=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const t=window[s];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new TC(t)}}catch{}return new CC},si=T0("localStorage"),wC=T0("sessionStorage");const da=new Kh("@firebase/database"),jC=(function(){let s=1;return function(){return s++}})(),C0=function(s){const t=ZN(s),i=new XN;i.update(t);const r=i.digest();return Yh.encodeByteArray(r)},ll=function(...s){let t="";for(let i=0;i<s.length;i++){const r=s[i];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=ll.apply(null,r):typeof r=="object"?t+=rt(r):t+=r,t+=" "}return t};let Pr=null,zv=!0;const AC=function(s,t){X(!0,"Can't turn on custom loggers persistently."),da.logLevel=Pe.VERBOSE,Pr=da.log.bind(da)},gt=function(...s){if(zv===!0&&(zv=!1,Pr===null&&wC.get("logging_enabled")===!0&&AC()),Pr){const t=ll.apply(null,s);Pr(t)}},ol=function(s){return function(...t){gt(s,...t)}},Dh=function(...s){const t="FIREBASE INTERNAL ERROR: "+ll(...s);da.error(t)},Vn=function(...s){const t=`FIREBASE FATAL ERROR: ${ll(...s)}`;throw da.error(t),new Error(t)},St=function(...s){const t="FIREBASE WARNING: "+ll(...s);da.warn(t)},RC=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&St("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},lf=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},DC=function(s){if(document.readyState==="complete")s();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},ga="[MIN_NAME]",oi="[MAX_NAME]",pi=function(s,t){if(s===t)return 0;if(s===ga||t===oi)return-1;if(t===ga||s===oi)return 1;{const i=Bv(s),r=Bv(t);return i!==null?r!==null?i-r===0?s.length-t.length:i-r:-1:r!==null?1:s<t?-1:1}},OC=function(s,t){return s===t?0:s<t?-1:1},wr=function(s,t){if(t&&s in t)return t[s];throw new Error("Missing required key ("+s+") in object: "+rt(t))},of=function(s){if(typeof s!="object"||s===null)return rt(s);const t=[];for(const r in s)t.push(r);t.sort();let i="{";for(let r=0;r<t.length;r++)r!==0&&(i+=","),i+=rt(t[r]),i+=":",i+=of(s[t[r]]);return i+="}",i},w0=function(s,t){const i=s.length;if(i<=t)return[s];const r=[];for(let o=0;o<i;o+=t)o+t>i?r.push(s.substring(o,i)):r.push(s.substring(o,o+t));return r};function _t(s,t){for(const i in s)s.hasOwnProperty(i)&&t(i,s[i])}const j0=function(s){X(!lf(s),"Invalid JSON number");const t=11,i=52,r=(1<<t-1)-1;let o,u,f,m,g;s===0?(u=0,f=0,o=1/s===-1/0?1:0):(o=s<0,s=Math.abs(s),s>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(s)/Math.LN2),r),u=m+r,f=Math.round(s*Math.pow(2,i-m)-Math.pow(2,i))):(u=0,f=Math.round(s/Math.pow(2,1-r-i))));const p=[];for(g=i;g;g-=1)p.push(f%2?1:0),f=Math.floor(f/2);for(g=t;g;g-=1)p.push(u%2?1:0),u=Math.floor(u/2);p.push(o?1:0),p.reverse();const b=p.join("");let y="";for(g=0;g<64;g+=8){let x=parseInt(b.substr(g,8),2).toString(16);x.length===1&&(x="0"+x),y=y+x}return y.toLowerCase()},IC=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},kC=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function MC(s,t){let i="Unknown Error";s==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?i="Client doesn't have permission to access the desired data.":s==="unavailable"&&(i="The service is unavailable");const r=new Error(s+" at "+t._path.toString()+": "+i);return r.code=s.toUpperCase(),r}const LC=new RegExp("^-?(0*)\\d{1,10}$"),UC=-2147483648,PC=2147483647,Bv=function(s){if(LC.test(s)){const t=Number(s);if(t>=UC&&t<=PC)return t}return null},wa=function(s){try{s()}catch(t){setTimeout(()=>{const i=t.stack||"";throw St("Exception was thrown by user callback.",i),t},Math.floor(0))}},zC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zr=function(s,t){const i=setTimeout(s,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};class BC{constructor(t,i){this.appCheckProvider=i,this.appName=t.name,Zt(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=i?.getImmediate({optional:!0}),this.appCheck||i?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((i,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){St(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class HC{constructor(t,i,r){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,r):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',St(t)}}class Vo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Vo.OWNER="owner";const cf="5",A0="v",R0="s",D0="r",O0="f",I0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,k0="ls",M0="p",Oh="ac",L0="websocket",U0="long_polling";class P0{constructor(t,i,r,o,u=!1,f="",m=!1,g=!1,p=null){this.secure=i,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=f,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=g,this.emulatorOptions=p,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=si.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&si.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function GC(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function z0(s,t,i){X(typeof t=="string","typeof type must == string"),X(typeof i=="object","typeof params must == object");let r;if(t===L0)r=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(t===U0)r=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);GC(s)&&(i.ns=s.namespace);const o=[];return _t(i,(u,f)=>{o.push(u+"="+f)}),r+o.join("&")}class FC{constructor(){this.counters_={}}incrementCounter(t,i=1){vn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return wN(this.counters_)}}const uh={},dh={};function uf(s){const t=s.toString();return uh[t]||(uh[t]=new FC),uh[t]}function VC(s,t){const i=s.toString();return dh[i]||(dh[i]=t()),dh[i]}class qC{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&wa(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Hv="start",YC="close",WC="pLPCommand",XC="pRTLPCB",B0="id",H0="pw",G0="ser",KC="cb",QC="seg",$C="ts",ZC="d",JC="dframe",F0=1870,V0=30,ew=F0-V0,tw=25e3,nw=3e4;class la{constructor(t,i,r,o,u,f,m){this.connId=t,this.repoInfo=i,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=f,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ol(t),this.stats_=uf(i),this.urlFn=g=>(this.appCheckToken&&(g[Oh]=this.appCheckToken),z0(i,U0,g))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new qC(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nw)),DC(()=>{if(this.isClosed_)return;this.scriptTagHolder=new df((...u)=>{const[f,m,g,p,b]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===Hv)this.id=m,this.password=g;else if(f===YC)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...u)=>{const[f,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(f,m)},()=>{this.onClosed_()},this.urlFn);const r={};r[Hv]="t",r[G0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[KC]=this.scriptTagHolder.uniqueCallbackIdentifier),r[A0]=cf,this.transportSessionId&&(r[R0]=this.transportSessionId),this.lastSessionId&&(r[k0]=this.lastSessionId),this.applicationId&&(r[M0]=this.applicationId),this.appCheckToken&&(r[Oh]=this.appCheckToken),typeof location<"u"&&location.hostname&&I0.test(location.hostname)&&(r[D0]=O0);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){la.forceAllow_=!0}static forceDisallow(){la.forceDisallow_=!0}static isAvailable(){return la.forceAllow_?!0:!la.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!IC()&&!kC()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=rt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Ay(i),o=w0(r,ew);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const r={};r[JC]="t",r[B0]=t,r[H0]=i,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=rt(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class df{constructor(t,i,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=jC(),window[WC+this.uniqueCallbackIdentifier]=t,window[XC+this.uniqueCallbackIdentifier]=i,this.myIFrame=df.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(m){gt("frame writing exception"),m.stack&&gt(m.stack),gt(m)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||gt("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[B0]=this.myID,t[H0]=this.myPW,t[G0]=this.currentSerial;let i=this.urlFn(t),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+V0+r.length<=F0;){const f=this.pendingSegs.shift();r=r+"&"+QC+o+"="+f.seg+"&"+$C+o+"="+f.ts+"&"+ZC+o+"="+f.d,o++}return i=i+r,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,r){this.pendingSegs.push({seg:t,ts:i,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const r=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(r,Math.floor(tw)),u=()=>{clearTimeout(o),r()};this.addTag(t,u)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),i())},r.onerror=()=>{gt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}const sw=16384,iw=45e3;let ic=null;typeof MozWebSocket<"u"?ic=MozWebSocket:typeof WebSocket<"u"&&(ic=WebSocket);class ln{constructor(t,i,r,o,u,f,m){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ol(this.connId),this.stats_=uf(i),this.connURL=ln.connectionURL_(i,f,m,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,u){const f={};return f[A0]=cf,typeof location<"u"&&location.hostname&&I0.test(location.hostname)&&(f[D0]=O0),i&&(f[R0]=i),r&&(f[k0]=r),o&&(f[Oh]=o),u&&(f[M0]=u),z0(t,L0,f)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,si.set("previous_websocket_failure",!0);try{let r;BN(),this.mySock=new ic(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){ln.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&ic!==null&&!ln.forceDisallow_}static previouslyFailed(){return si.isInMemoryStorage||si.get("previous_websocket_failure")===!0}markConnectionHealthy(){si.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=Fr(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(X(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=rt(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=w0(i,sw);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(iw))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ln.responsesRequiredToBeHealthy=2;ln.healthyTimeout=3e4;class Yr{static get ALL_TRANSPORTS(){return[la,ln]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const i=ln&&ln.isAvailable();let r=i&&!ln.previouslyFailed();if(t.webSocketOnly&&(i||St("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ln];else{const o=this.transports_=[];for(const u of Yr.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);Yr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Yr.globalTransportInitialized_=!1;const aw=6e4,rw=5e3,lw=10*1024,ow=100*1024,hh="t",Gv="d",cw="s",Fv="r",uw="e",Vv="o",qv="a",Yv="n",Wv="p",dw="h";class hw{constructor(t,i,r,o,u,f,m,g,p,b){this.id=t,this.repoInfo_=i,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=f,this.onReady_=m,this.onDisconnect_=g,this.onKill_=p,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ol("c:"+this.id+":"),this.transportManager_=new Yr(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,r)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=zr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ow?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>lw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(hh in t){const i=t[hh];i===qv?this.upgradeIfSecondaryHealthy_():i===Fv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===Vv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=wr("t",t),r=wr("d",t);if(i==="c")this.onSecondaryControl_(r);else if(i==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Wv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Yv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=wr("t",t),r=wr("d",t);i==="c"?this.onControl_(r):i==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=wr(hh,t);if(Gv in t){const r=t[Gv];if(i===dw){const o={...r};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(i===Yv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===cw?this.onConnectionShutdown_(r):i===Fv?this.onReset_(r):i===uw?Dh("Server Error: "+r):i===Vv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dh("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,r=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),cf!==r&&St("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,r),zr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(aw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(rw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Wv,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(si.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class q0{put(t,i,r,o){}merge(t,i,r,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,r){}onDisconnectMerge(t,i,r){}onDisconnectCancel(t,i){}reportStats(t){}}class Y0{constructor(t){this.allowedEvents_=t,this.listeners_={},X(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,i)}}on(t,i,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:r});const o=this.getInitialEvent(t);o&&i.apply(r,o)}off(t,i,r){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let u=0;u<o.length;u++)if(o[u].callback===i&&(!r||r===o[u].context)){o.splice(u,1);return}}validateEventType_(t){X(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}class ac extends Y0{static getInstance(){return new ac}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Xh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return X(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const Xv=32,Kv=768;class ze{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function De(){return new ze("")}function Ee(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function Ds(s){return s.pieces_.length-s.pieceNum_}function Ge(s){let t=s.pieceNum_;return t<s.pieces_.length&&t++,new ze(s.pieces_,t)}function hf(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function fw(s){let t="";for(let i=s.pieceNum_;i<s.pieces_.length;i++)s.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(s.pieces_[i])));return t||"/"}function Wr(s,t=0){return s.pieces_.slice(s.pieceNum_+t)}function W0(s){if(s.pieceNum_>=s.pieces_.length)return null;const t=[];for(let i=s.pieceNum_;i<s.pieces_.length-1;i++)t.push(s.pieces_[i]);return new ze(t,0)}function Ke(s,t){const i=[];for(let r=s.pieceNum_;r<s.pieces_.length;r++)i.push(s.pieces_[r]);if(t instanceof ze)for(let r=t.pieceNum_;r<t.pieces_.length;r++)i.push(t.pieces_[r]);else{const r=t.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&i.push(r[o])}return new ze(i,0)}function xe(s){return s.pieceNum_>=s.pieces_.length}function xt(s,t){const i=Ee(s),r=Ee(t);if(i===null)return t;if(i===r)return xt(Ge(s),Ge(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+s+")")}function mw(s,t){const i=Wr(s,0),r=Wr(t,0);for(let o=0;o<i.length&&o<r.length;o++){const u=pi(i[o],r[o]);if(u!==0)return u}return i.length===r.length?0:i.length<r.length?-1:1}function X0(s,t){if(Ds(s)!==Ds(t))return!1;for(let i=s.pieceNum_,r=t.pieceNum_;i<=s.pieces_.length;i++,r++)if(s.pieces_[i]!==t.pieces_[r])return!1;return!0}function Jt(s,t){let i=s.pieceNum_,r=t.pieceNum_;if(Ds(s)>Ds(t))return!1;for(;i<s.pieces_.length;){if(s.pieces_[i]!==t.pieces_[r])return!1;++i,++r}return!0}class pw{constructor(t,i){this.errorPrefix_=i,this.parts_=Wr(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vc(this.parts_[r]);K0(this)}}function gw(s,t){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(t),s.byteLength_+=vc(t),K0(s)}function _w(s){const t=s.parts_.pop();s.byteLength_-=vc(t),s.parts_.length>0&&(s.byteLength_-=1)}function K0(s){if(s.byteLength_>Kv)throw new Error(s.errorPrefix_+"has a key path longer than "+Kv+" bytes ("+s.byteLength_+").");if(s.parts_.length>Xv)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Xv+") or object contains a cycle "+ni(s))}function ni(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}class ff extends Y0{static getInstance(){return new ff}constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return X(t==="visible","Unknown event type: "+t),[this.visible_]}}const jr=1e3,vw=300*1e3,Qv=30*1e3,yw=1.3,bw=3e4,xw="server_kill",$v=3;class Hn extends q0{constructor(t,i,r,o,u,f,m,g){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=g,this.id=Hn.nextPersistentConnectionId_++,this.log_=ol("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jr,this.maxReconnectDelay_=vw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ff.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ac.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const o=++this.requestNumber_,u={r:o,a:t,b:i};this.log_(rt(u)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const i=new tl,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;f.s==="ok"?i.resolve(m):i.reject(m)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),i.promise}listen(t,i,r,o){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),X(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(f).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const u={p:r},f="q";t.tag&&(u.q=i._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(f,u,m=>{const g=m.d,p=m.s;Hn.warnOnListenWarnings_(g,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",m),p!=="ok"&&this.removeListen_(r,o),t.onComplete&&t.onComplete(p,g))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&vn(t,"w")){const r=fa(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();St(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||WN(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Qv)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=YN(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const u=o.s,f=o.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),X(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);const u={p:t},f="n";o&&(u.q=r,u.t=o),this.sendRequest(f,u)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){const u={p:i,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,u){this.initConnection_();const f={p:i,d:r};u!==void 0&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:o}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){const u=r.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+rt(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):Dh("Unrecognized action received from server: "+rt(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>bw&&(this.reconnectDelay_=jr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*yw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Hn.nextConnectionId_++,u=this.lastSessionId;let f=!1,m=null;const g=function(){m?m.close():(f=!0,r())},p=function(y){X(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(y)};this.realtime_={close:g,sendRequest:p};const b=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,x]=await Promise.all([this.authTokenProvider_.getToken(b),this.appCheckTokenProvider_.getToken(b)]);f?gt("getToken() completed but was canceled"):(gt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=x&&x.token,m=new hw(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,C=>{St(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(xw)},u))}catch(y){this.log_("Failed to get token: "+y),f||(this.repoInfo_.nodeAdmin&&St(y),g())}}}interrupt(t){gt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){gt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],xh(this.interruptReasons_)&&(this.reconnectDelay_=jr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(u=>of(u)).join("$"):r="default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const r=new ze(t).toString();let o;if(this.listens.has(r)){const u=this.listens.get(r);o=u.get(i),u.delete(i),u.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){gt("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$v&&(this.reconnectDelay_=Qv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){gt("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$v&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+E0.replace(/\./g,"-")]=1,Xh()?t["framework.cordova"]=1:Ly()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ac.getInstance().currentlyOnline();return xh(this.interruptReasons_)&&t}}Hn.nextPersistentConnectionId_=0;Hn.nextConnectionId_=0;class ve{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new ve(t,i)}}class Sc{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const r=new ve(ga,t),o=new ve(ga,i);return this.compare(r,o)!==0}minPost(){return ve.MIN}}let ko;class Q0 extends Sc{static get __EMPTY_NODE(){return ko}static set __EMPTY_NODE(t){ko=t}compare(t,i){return pi(t.name,i.name)}isDefinedOn(t){throw Sa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return ve.MIN}maxPost(){return new ve(oi,ko)}makePost(t,i){return X(typeof t=="string","KeyIndex indexValue must always be a string."),new ve(t,ko)}toString(){return".key"}}const ha=new Q0;class Mo{constructor(t,i,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let f=1;for(;!t.isEmpty();)if(t=t,f=i?r(t.key,i):1,o&&(f*=-1),f<0)this.isReverse_?t=t.left:t=t.right;else if(f===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class ut{constructor(t,i,r,o,u){this.key=t,this.value=i,this.color=r??ut.RED,this.left=o??Dt.EMPTY_NODE,this.right=u??Dt.EMPTY_NODE}copy(t,i,r,o,u){return new ut(t??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const u=r(t,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(t,i,r),null):u===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return Dt.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}ut.RED=!0;ut.BLACK=!1;class Sw{copy(t,i,r,o,u){return this}insert(t,i,r){return new ut(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Dt{constructor(t,i=Dt.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new Dt(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,ut.BLACK,null,null))}remove(t){return new Dt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ut.BLACK,null,null))}get(t){let i,r=this.root_;for(;!r.isEmpty();){if(i=this.comparator_(t,r.key),i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}getPredecessorKey(t){let i,r=this.root_,o=null;for(;!r.isEmpty();)if(i=this.comparator_(t,r.key),i===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else i<0?r=r.left:i>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Mo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new Mo(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new Mo(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new Mo(this.root_,null,this.comparator_,!0,t)}}Dt.EMPTY_NODE=new Sw;function Nw(s,t){return pi(s.name,t.name)}function mf(s,t){return pi(s,t)}let Ih;function Ew(s){Ih=s}const $0=function(s){return typeof s=="number"?"number:"+j0(s):"string:"+s},Z0=function(s){if(s.isLeafNode()){const t=s.val();X(typeof t=="string"||typeof t=="number"||typeof t=="object"&&vn(t,".sv"),"Priority must be a string or number.")}else X(s===Ih||s.isEmpty(),"priority of unexpected type.");X(s===Ih||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Zv;class ct{static set __childrenNodeConstructor(t){Zv=t}static get __childrenNodeConstructor(){return Zv}constructor(t,i=ct.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Z0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new ct(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:ct.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return xe(t)?this:Ee(t)===".priority"?this.priorityNode_:ct.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:ct.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Ee(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(X(r!==".priority"||Ds(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ct.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ge(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+$0(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=j0(this.value_):t+=this.value_,this.lazyHash_=C0(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===ct.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ct.__childrenNodeConstructor?-1:(X(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,o=ct.VALUE_TYPE_ORDER.indexOf(i),u=ct.VALUE_TYPE_ORDER.indexOf(r);return X(o>=0,"Unknown leaf type: "+i),X(u>=0,"Unknown leaf type: "+r),o===u?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}ct.VALUE_TYPE_ORDER=["object","boolean","number","string"];let J0,eb;function Tw(s){J0=s}function Cw(s){eb=s}class ww extends Sc{compare(t,i){const r=t.node.getPriority(),o=i.node.getPriority(),u=r.compareTo(o);return u===0?pi(t.name,i.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(oi,new ct("[PRIORITY-POST]",eb))}makePost(t,i){const r=J0(t);return new ve(i,new ct("[PRIORITY-POST]",r))}toString(){return".priority"}}const Qe=new ww;const jw=Math.log(2);class Aw{constructor(t){const i=u=>parseInt(Math.log(u)/jw,10),r=u=>parseInt(Array(u+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const o=r(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const rc=function(s,t,i,r){s.sort(t);const o=function(g,p){const b=p-g;let y,x;if(b===0)return null;if(b===1)return y=s[g],x=i?i(y):y,new ut(x,y.node,ut.BLACK,null,null);{const C=parseInt(b/2,10)+g,E=o(g,C),P=o(C+1,p);return y=s[C],x=i?i(y):y,new ut(x,y.node,ut.BLACK,E,P)}},u=function(g){let p=null,b=null,y=s.length;const x=function(E,P){const U=y-E,Y=y;y-=E;const $=o(U+1,Y),V=s[U],z=i?i(V):V;C(new ut(z,V.node,P,null,$))},C=function(E){p?(p.left=E,p=E):(b=E,p=E)};for(let E=0;E<g.count;++E){const P=g.nextBitIsOne(),U=Math.pow(2,g.count-(E+1));P?x(U,ut.BLACK):(x(U,ut.BLACK),x(U,ut.RED))}return b},f=new Aw(s.length),m=u(f);return new Dt(r||t,m)};let fh;const ia={};class zn{static get Default(){return X(ia&&Qe,"ChildrenNode.ts has not been loaded"),fh=fh||new zn({".priority":ia},{".priority":Qe}),fh}constructor(t,i){this.indexes_=t,this.indexSet_=i}get(t){const i=fa(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof Dt?i:null}hasIndex(t){return vn(this.indexSet_,t.toString())}addIndex(t,i){X(t!==ha,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=i.getIterator(ve.Wrap);let f=u.getNext();for(;f;)o=o||t.isDefinedOn(f.node),r.push(f),f=u.getNext();let m;o?m=rc(r,t.getCompare()):m=ia;const g=t.toString(),p={...this.indexSet_};p[g]=t;const b={...this.indexes_};return b[g]=m,new zn(b,p)}addToIndexes(t,i){const r=Qo(this.indexes_,(o,u)=>{const f=fa(this.indexSet_,u);if(X(f,"Missing index implementation for "+u),o===ia)if(f.isDefinedOn(t.node)){const m=[],g=i.getIterator(ve.Wrap);let p=g.getNext();for(;p;)p.name!==t.name&&m.push(p),p=g.getNext();return m.push(t),rc(m,f.getCompare())}else return ia;else{const m=i.get(t.name);let g=o;return m&&(g=g.remove(new ve(t.name,m))),g.insert(t,t.node)}});return new zn(r,this.indexSet_)}removeFromIndexes(t,i){const r=Qo(this.indexes_,o=>{if(o===ia)return o;{const u=i.get(t.name);return u?o.remove(new ve(t.name,u)):o}});return new zn(r,this.indexSet_)}}let Ar;class ue{static get EMPTY_NODE(){return Ar||(Ar=new ue(new Dt(mf),null,zn.Default))}constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Z0(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ar}updatePriority(t){return this.children_.isEmpty()?this:new ue(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?Ar:i}}getChild(t){const i=Ee(t);return i===null?this:this.getImmediateChild(i).getChild(Ge(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(X(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const r=new ve(t,i);let o,u;i.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),u=this.indexMap_.addToIndexes(r,this.children_));const f=o.isEmpty()?Ar:this.priorityNode_;return new ue(o,f,u)}}updateChild(t,i){const r=Ee(t);if(r===null)return i;{X(Ee(t)!==".priority"||Ds(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Ge(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,o=0,u=!0;if(this.forEachChild(Qe,(f,m)=>{i[f]=m.val(t),r++,u&&ue.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):u=!1}),!t&&u&&o<2*r){const f=[];for(const m in i)f[m]=i[m];return f}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+$0(this.getPriority().val())+":"),this.forEachChild(Qe,(i,r)=>{const o=r.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":C0(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const o=this.resolveIndex_(r);if(o){const u=o.getPredecessorKey(new ve(t,i));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new ve(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new ve(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,ve.Wrap);let u=o.peek();for(;u!=null&&i.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,ve.Wrap);let u=o.peek();for(;u!=null&&i.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===cl?-1:0}withIndex(t){if(t===ha||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new ue(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===ha||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const r=this.getIterator(Qe),o=i.getIterator(Qe);let u=r.getNext(),f=o.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=r.getNext(),f=o.getNext()}return u===null&&f===null}else return!1;else return!1}}resolveIndex_(t){return t===ha?null:this.indexMap_.get(t.toString())}}ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Rw extends ue{constructor(){super(new Dt(mf),ue.EMPTY_NODE,zn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ue.EMPTY_NODE}isEmpty(){return!1}}const cl=new Rw;Object.defineProperties(ve,{MIN:{value:new ve(ga,ue.EMPTY_NODE)},MAX:{value:new ve(oi,cl)}});Q0.__EMPTY_NODE=ue.EMPTY_NODE;ct.__childrenNodeConstructor=ue;Ew(cl);Cw(cl);const Dw=!0;function at(s,t=null){if(s===null)return ue.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(t=s[".priority"]),X(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const i=s;return new ct(i,at(t))}if(!(s instanceof Array)&&Dw){const i=[];let r=!1;if(_t(s,(f,m)=>{if(f.substring(0,1)!=="."){const g=at(m);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),i.push(new ve(f,g)))}}),i.length===0)return ue.EMPTY_NODE;const u=rc(i,Nw,f=>f.name,mf);if(r){const f=rc(i,Qe.getCompare());return new ue(u,at(t),new zn({".priority":f},{".priority":Qe}))}else return new ue(u,at(t),zn.Default)}else{let i=ue.EMPTY_NODE;return _t(s,(r,o)=>{if(vn(s,r)&&r.substring(0,1)!=="."){const u=at(o);(u.isLeafNode()||!u.isEmpty())&&(i=i.updateImmediateChild(r,u))}}),i.updatePriority(at(t))}}Tw(at);class Ow extends Sc{constructor(t){super(),this.indexPath_=t,X(!xe(t)&&Ee(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const r=this.extractChild(t.node),o=this.extractChild(i.node),u=r.compareTo(o);return u===0?pi(t.name,i.name):u}makePost(t,i){const r=at(t),o=ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new ve(i,o)}maxPost(){const t=ue.EMPTY_NODE.updateChild(this.indexPath_,cl);return new ve(oi,t)}toString(){return Wr(this.indexPath_,0).join("/")}}class Iw extends Sc{compare(t,i){const r=t.node.compareTo(i.node);return r===0?pi(t.name,i.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(t,i){const r=at(t);return new ve(i,r)}toString(){return".value"}}const kw=new Iw;function tb(s){return{type:"value",snapshotNode:s}}function _a(s,t){return{type:"child_added",snapshotNode:t,childName:s}}function Xr(s,t){return{type:"child_removed",snapshotNode:t,childName:s}}function Kr(s,t,i){return{type:"child_changed",snapshotNode:t,childName:s,oldSnap:i}}function Mw(s,t){return{type:"child_moved",snapshotNode:t,childName:s}}class pf{constructor(t){this.index_=t}updateChild(t,i,r,o,u,f){X(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=t.getImmediateChild(i);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(f!=null&&(r.isEmpty()?t.hasChild(i)?f.trackChildChange(Xr(i,m)):X(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?f.trackChildChange(_a(i,r)):f.trackChildChange(Kr(i,r,m))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(i,r).withIndex(this.index_)}updateFullNode(t,i,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Qe,(o,u)=>{i.hasChild(o)||r.trackChildChange(Xr(o,u))}),i.isLeafNode()||i.forEachChild(Qe,(o,u)=>{if(t.hasChild(o)){const f=t.getImmediateChild(o);f.equals(u)||r.trackChildChange(Kr(o,u,f))}else r.trackChildChange(_a(o,u))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?ue.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Qr{constructor(t){this.indexedFilter_=new pf(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Qr.getStartPost_(t),this.endPost_=Qr.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return i&&r}updateChild(t,i,r,o,u,f){return this.matches(new ve(i,r))||(r=ue.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,r,o,u,f)}updateFullNode(t,i,r){i.isLeafNode()&&(i=ue.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(ue.EMPTY_NODE);const u=this;return i.forEachChild(Qe,(f,m)=>{u.matches(new ve(f,m))||(o=o.updateImmediateChild(f,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,r)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}class Lw{constructor(t){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=i=>{const r=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Qr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,i,r,o,u,f){return this.rangedFilter_.matches(new ve(i,r))||(r=ue.EMPTY_NODE),t.getImmediateChild(i).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,r,o,u,f):this.fullLimitUpdateChild_(t,i,r,u,f)}updateFullNode(t,i,r){let o;if(i.isLeafNode()||i.isEmpty())o=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=ue.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;u.hasNext()&&f<this.limit_;){const m=u.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))o=o.updateImmediateChild(m.name,m.node),f++;else break;else continue}}else{o=i.withIndex(this.index_),o=o.updatePriority(ue.EMPTY_NODE);let u;this.reverse_?u=o.getReverseIterator(this.index_):u=o.getIterator(this.index_);let f=0;for(;u.hasNext();){const m=u.getNext();f<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?f++:o=o.updateImmediateChild(m.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,r)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,r,o,u){let f;if(this.reverse_){const y=this.index_.getCompare();f=(x,C)=>y(C,x)}else f=this.index_.getCompare();const m=t;X(m.numChildren()===this.limit_,"");const g=new ve(i,r),p=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),b=this.rangedFilter_.matches(g);if(m.hasChild(i)){const y=m.getImmediateChild(i);let x=o.getChildAfterChild(this.index_,p,this.reverse_);for(;x!=null&&(x.name===i||m.hasChild(x.name));)x=o.getChildAfterChild(this.index_,x,this.reverse_);const C=x==null?1:f(x,g);if(b&&!r.isEmpty()&&C>=0)return u?.trackChildChange(Kr(i,r,y)),m.updateImmediateChild(i,r);{u?.trackChildChange(Xr(i,y));const P=m.updateImmediateChild(i,ue.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(u?.trackChildChange(_a(x.name,x.node)),P.updateImmediateChild(x.name,x.node)):P}}else return r.isEmpty()?t:b&&f(p,g)>=0?(u!=null&&(u.trackChildChange(Xr(p.name,p.node)),u.trackChildChange(_a(i,r))),m.updateImmediateChild(i,r).updateImmediateChild(p.name,ue.EMPTY_NODE)):t}}class gf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ga}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qe}copy(){const t=new gf;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Uw(s){return s.loadsAllData()?new pf(s.getIndex()):s.hasLimit()?new Lw(s):new Qr(s)}function Jv(s){const t={};if(s.isDefault())return t;let i;if(s.index_===Qe?i="$priority":s.index_===kw?i="$value":s.index_===ha?i="$key":(X(s.index_ instanceof Ow,"Unrecognized index type!"),i=s.index_.toString()),t.orderBy=rt(i),s.startSet_){const r=s.startAfterSet_?"startAfter":"startAt";t[r]=rt(s.indexStartValue_),s.startNameSet_&&(t[r]+=","+rt(s.indexStartName_))}if(s.endSet_){const r=s.endBeforeSet_?"endBefore":"endAt";t[r]=rt(s.indexEndValue_),s.endNameSet_&&(t[r]+=","+rt(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?t.limitToFirst=s.limit_:t.limitToLast=s.limit_),t}function ey(s){const t={};if(s.startSet_&&(t.sp=s.indexStartValue_,s.startNameSet_&&(t.sn=s.indexStartName_),t.sin=!s.startAfterSet_),s.endSet_&&(t.ep=s.indexEndValue_,s.endNameSet_&&(t.en=s.indexEndName_),t.ein=!s.endBeforeSet_),s.limitSet_){t.l=s.limit_;let i=s.viewFrom_;i===""&&(s.isViewFromLeft()?i="l":i="r"),t.vf=i}return s.index_!==Qe&&(t.i=s.index_.toString()),t}class lc extends q0{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(X(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,i,r,o){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=ol("p:rest:"),this.listens_={}}listen(t,i,r,o){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const f=lc.getListenId_(t,r),m={};this.listens_[f]=m;const g=Jv(t._queryParams);this.restRequest_(u+".json",g,(p,b)=>{let y=b;if(p===404&&(y=null,p=null),p===null&&this.onDataUpdate_(u,y,!1,r),fa(this.listens_,f)===m){let x;p?p===401?x="permission_denied":x="rest_error:"+p:x="ok",o(x,null)}})}unlisten(t,i){const r=lc.getListenId_(t,i);delete this.listens_[r]}get(t){const i=Jv(t._queryParams),r=t._path.toString(),o=new tl;return this.restRequest_(r+".json",i,(u,f)=>{let m=f;u===404&&(m=null,u=null),u===null?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(t){}restRequest_(t,i={},r){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(i.auth=o.accessToken),u&&u.token&&(i.ac=u.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ea(i);this.log_("Sending REST request for "+f);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&m.readyState===4){this.log_("REST Response for "+f+" received. status:",m.status,"response:",m.responseText);let g=null;if(m.status>=200&&m.status<300){try{g=Fr(m.responseText)}catch{St("Failed to parse JSON response for "+f+": "+m.responseText)}r(null,g)}else m.status!==401&&m.status!==404&&St("Got unsuccessful REST response for "+f+" Status: "+m.status),r(m.status);r=null}},m.open("GET",f,!0),m.send()})}}class Pw{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}function oc(){return{value:null,children:new Map}}function nb(s,t,i){if(xe(t))s.value=i,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(t,i);else{const r=Ee(t);s.children.has(r)||s.children.set(r,oc());const o=s.children.get(r);t=Ge(t),nb(o,t,i)}}function kh(s,t,i){s.value!==null?i(t,s.value):zw(s,(r,o)=>{const u=new ze(t.toString()+"/"+r);kh(o,u,i)})}function zw(s,t){s.children.forEach((i,r)=>{t(r,i)})}class Bw{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i={...t};return this.last_&&_t(this.last_,(r,o)=>{i[r]=i[r]-o}),this.last_=t,i}}const ty=10*1e3,Hw=30*1e3,Gw=300*1e3;class Fw{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new Bw(t);const r=ty+(Hw-ty)*Math.random();zr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),i={};let r=!1;_t(t,(o,u)=>{u>0&&vn(this.statsToReport_,o)&&(i[o]=u,r=!0)}),r&&this.server_.reportStats(i),zr(this.reportStats_.bind(this),Math.floor(Math.random()*2*Gw))}}var cn;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(cn||(cn={}));function _f(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function vf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function yf(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}class cc{constructor(t,i,r){this.path=t,this.affectedTree=i,this.revert=r,this.type=cn.ACK_USER_WRITE,this.source=_f()}operationForChild(t){if(xe(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new ze(t));return new cc(De(),i,this.revert)}}else return X(Ee(this.path)===t,"operationForChild called for unrelated child."),new cc(Ge(this.path),this.affectedTree,this.revert)}}class $r{constructor(t,i){this.source=t,this.path=i,this.type=cn.LISTEN_COMPLETE}operationForChild(t){return xe(this.path)?new $r(this.source,De()):new $r(this.source,Ge(this.path))}}class ci{constructor(t,i,r){this.source=t,this.path=i,this.snap=r,this.type=cn.OVERWRITE}operationForChild(t){return xe(this.path)?new ci(this.source,De(),this.snap.getImmediateChild(t)):new ci(this.source,Ge(this.path),this.snap)}}class va{constructor(t,i,r){this.source=t,this.path=i,this.children=r,this.type=cn.MERGE}operationForChild(t){if(xe(this.path)){const i=this.children.subtree(new ze(t));return i.isEmpty()?null:i.value?new ci(this.source,De(),i.value):new va(this.source,De(),i)}else return X(Ee(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new va(this.source,Ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Os{constructor(t,i,r){this.node_=t,this.fullyInitialized_=i,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(xe(t))return this.isFullyInitialized()&&!this.filtered_;const i=Ee(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Vw{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function qw(s,t,i,r){const o=[],u=[];return t.forEach(f=>{f.type==="child_changed"&&s.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&u.push(Mw(f.childName,f.snapshotNode))}),Rr(s,o,"child_removed",t,r,i),Rr(s,o,"child_added",t,r,i),Rr(s,o,"child_moved",u,r,i),Rr(s,o,"child_changed",t,r,i),Rr(s,o,"value",t,r,i),o}function Rr(s,t,i,r,o,u){const f=r.filter(m=>m.type===i);f.sort((m,g)=>Ww(s,m,g)),f.forEach(m=>{const g=Yw(s,m,u);o.forEach(p=>{p.respondsTo(m.type)&&t.push(p.createEvent(g,s.query_))})})}function Yw(s,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,s.index_)),t}function Ww(s,t,i){if(t.childName==null||i.childName==null)throw Sa("Should only compare child_ events.");const r=new ve(t.childName,t.snapshotNode),o=new ve(i.childName,i.snapshotNode);return s.index_.compare(r,o)}function Nc(s,t){return{eventCache:s,serverCache:t}}function Br(s,t,i,r){return Nc(new Os(t,i,r),s.serverCache)}function sb(s,t,i,r){return Nc(s.eventCache,new Os(t,i,r))}function uc(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function ui(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}let mh;const Xw=()=>(mh||(mh=new Dt(OC)),mh);class He{static fromObject(t){let i=new He(null);return _t(t,(r,o)=>{i=i.set(new ze(r),o)}),i}constructor(t,i=Xw()){this.value=t,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:De(),value:this.value};if(xe(t))return null;{const r=Ee(t),o=this.children.get(r);if(o!==null){const u=o.findRootMostMatchingPathAndValue(Ge(t),i);return u!=null?{path:Ke(new ze(r),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(xe(t))return this;{const i=Ee(t),r=this.children.get(i);return r!==null?r.subtree(Ge(t)):new He(null)}}set(t,i){if(xe(t))return new He(i,this.children);{const r=Ee(t),u=(this.children.get(r)||new He(null)).set(Ge(t),i),f=this.children.insert(r,u);return new He(this.value,f)}}remove(t){if(xe(t))return this.children.isEmpty()?new He(null):new He(null,this.children);{const i=Ee(t),r=this.children.get(i);if(r){const o=r.remove(Ge(t));let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),this.value===null&&u.isEmpty()?new He(null):new He(this.value,u)}else return this}}get(t){if(xe(t))return this.value;{const i=Ee(t),r=this.children.get(i);return r?r.get(Ge(t)):null}}setTree(t,i){if(xe(t))return i;{const r=Ee(t),u=(this.children.get(r)||new He(null)).setTree(Ge(t),i);let f;return u.isEmpty()?f=this.children.remove(r):f=this.children.insert(r,u),new He(this.value,f)}}fold(t){return this.fold_(De(),t)}fold_(t,i){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(Ke(t,o),i)}),i(t,this.value,r)}findOnPath(t,i){return this.findOnPath_(t,De(),i)}findOnPath_(t,i,r){const o=this.value?r(i,this.value):!1;if(o)return o;if(xe(t))return null;{const u=Ee(t),f=this.children.get(u);return f?f.findOnPath_(Ge(t),Ke(i,u),r):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,De(),i)}foreachOnPath_(t,i,r){if(xe(t))return this;{this.value&&r(i,this.value);const o=Ee(t),u=this.children.get(o);return u?u.foreachOnPath_(Ge(t),Ke(i,o),r):new He(null)}}foreach(t){this.foreach_(De(),t)}foreach_(t,i){this.children.inorderTraversal((r,o)=>{o.foreach_(Ke(t,r),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,r)=>{r.value&&t(i,r.value)})}}class un{constructor(t){this.writeTree_=t}static empty(){return new un(new He(null))}}function Hr(s,t,i){if(xe(t))return new un(new He(i));{const r=s.writeTree_.findRootMostValueAndPath(t);if(r!=null){const o=r.path;let u=r.value;const f=xt(o,t);return u=u.updateChild(f,i),new un(s.writeTree_.set(o,u))}else{const o=new He(i),u=s.writeTree_.setTree(t,o);return new un(u)}}}function Mh(s,t,i){let r=s;return _t(i,(o,u)=>{r=Hr(r,Ke(t,o),u)}),r}function ny(s,t){if(xe(t))return un.empty();{const i=s.writeTree_.setTree(t,new He(null));return new un(i)}}function Lh(s,t){return gi(s,t)!=null}function gi(s,t){const i=s.writeTree_.findRootMostValueAndPath(t);return i!=null?s.writeTree_.get(i.path).getChild(xt(i.path,t)):null}function sy(s){const t=[],i=s.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Qe,(r,o)=>{t.push(new ve(r,o))}):s.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&t.push(new ve(r,o.value))}),t}function js(s,t){if(xe(t))return s;{const i=gi(s,t);return i!=null?new un(new He(i)):new un(s.writeTree_.subtree(t))}}function Uh(s){return s.writeTree_.isEmpty()}function ya(s,t){return ib(De(),s.writeTree_,t)}function ib(s,t,i){if(t.value!=null)return i.updateChild(s,t.value);{let r=null;return t.children.inorderTraversal((o,u)=>{o===".priority"?(X(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):i=ib(Ke(s,o),u,i)}),!i.getChild(s).isEmpty()&&r!==null&&(i=i.updateChild(Ke(s,".priority"),r)),i}}function Ec(s,t){return ob(t,s)}function Kw(s,t,i,r,o){X(r>s.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),s.allWrites.push({path:t,snap:i,writeId:r,visible:o}),o&&(s.visibleWrites=Hr(s.visibleWrites,t,i)),s.lastWriteId=r}function Qw(s,t,i,r){X(r>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:t,children:i,writeId:r,visible:!0}),s.visibleWrites=Mh(s.visibleWrites,t,i),s.lastWriteId=r}function $w(s,t){for(let i=0;i<s.allWrites.length;i++){const r=s.allWrites[i];if(r.writeId===t)return r}return null}function Zw(s,t){const i=s.allWrites.findIndex(m=>m.writeId===t);X(i>=0,"removeWrite called with nonexistent writeId.");const r=s.allWrites[i];s.allWrites.splice(i,1);let o=r.visible,u=!1,f=s.allWrites.length-1;for(;o&&f>=0;){const m=s.allWrites[f];m.visible&&(f>=i&&Jw(m,r.path)?o=!1:Jt(r.path,m.path)&&(u=!0)),f--}if(o){if(u)return ej(s),!0;if(r.snap)s.visibleWrites=ny(s.visibleWrites,r.path);else{const m=r.children;_t(m,g=>{s.visibleWrites=ny(s.visibleWrites,Ke(r.path,g))})}return!0}else return!1}function Jw(s,t){if(s.snap)return Jt(s.path,t);for(const i in s.children)if(s.children.hasOwnProperty(i)&&Jt(Ke(s.path,i),t))return!0;return!1}function ej(s){s.visibleWrites=ab(s.allWrites,tj,De()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function tj(s){return s.visible}function ab(s,t,i){let r=un.empty();for(let o=0;o<s.length;++o){const u=s[o];if(t(u)){const f=u.path;let m;if(u.snap)Jt(i,f)?(m=xt(i,f),r=Hr(r,m,u.snap)):Jt(f,i)&&(m=xt(f,i),r=Hr(r,De(),u.snap.getChild(m)));else if(u.children){if(Jt(i,f))m=xt(i,f),r=Mh(r,m,u.children);else if(Jt(f,i))if(m=xt(f,i),xe(m))r=Mh(r,De(),u.children);else{const g=fa(u.children,Ee(m));if(g){const p=g.getChild(Ge(m));r=Hr(r,De(),p)}}}else throw Sa("WriteRecord should have .snap or .children")}}return r}function rb(s,t,i,r,o){if(!r&&!o){const u=gi(s.visibleWrites,t);if(u!=null)return u;{const f=js(s.visibleWrites,t);if(Uh(f))return i;if(i==null&&!Lh(f,De()))return null;{const m=i||ue.EMPTY_NODE;return ya(f,m)}}}else{const u=js(s.visibleWrites,t);if(!o&&Uh(u))return i;if(!o&&i==null&&!Lh(u,De()))return null;{const f=function(p){return(p.visible||o)&&(!r||!~r.indexOf(p.writeId))&&(Jt(p.path,t)||Jt(t,p.path))},m=ab(s.allWrites,f,t),g=i||ue.EMPTY_NODE;return ya(m,g)}}}function nj(s,t,i){let r=ue.EMPTY_NODE;const o=gi(s.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Qe,(u,f)=>{r=r.updateImmediateChild(u,f)}),r;if(i){const u=js(s.visibleWrites,t);return i.forEachChild(Qe,(f,m)=>{const g=ya(js(u,new ze(f)),m);r=r.updateImmediateChild(f,g)}),sy(u).forEach(f=>{r=r.updateImmediateChild(f.name,f.node)}),r}else{const u=js(s.visibleWrites,t);return sy(u).forEach(f=>{r=r.updateImmediateChild(f.name,f.node)}),r}}function sj(s,t,i,r,o){X(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=Ke(t,i);if(Lh(s.visibleWrites,u))return null;{const f=js(s.visibleWrites,u);return Uh(f)?o.getChild(i):ya(f,o.getChild(i))}}function ij(s,t,i,r){const o=Ke(t,i),u=gi(s.visibleWrites,o);if(u!=null)return u;if(r.isCompleteForChild(i)){const f=js(s.visibleWrites,o);return ya(f,r.getNode().getImmediateChild(i))}else return null}function aj(s,t){return gi(s.visibleWrites,t)}function rj(s,t,i,r,o,u,f){let m;const g=js(s.visibleWrites,t),p=gi(g,De());if(p!=null)m=p;else if(i!=null)m=ya(g,i);else return[];if(m=m.withIndex(f),!m.isEmpty()&&!m.isLeafNode()){const b=[],y=f.getCompare(),x=u?m.getReverseIteratorFrom(r,f):m.getIteratorFrom(r,f);let C=x.getNext();for(;C&&b.length<o;)y(C,r)!==0&&b.push(C),C=x.getNext();return b}else return[]}function lj(){return{visibleWrites:un.empty(),allWrites:[],lastWriteId:-1}}function dc(s,t,i,r){return rb(s.writeTree,s.treePath,t,i,r)}function bf(s,t){return nj(s.writeTree,s.treePath,t)}function iy(s,t,i,r){return sj(s.writeTree,s.treePath,t,i,r)}function hc(s,t){return aj(s.writeTree,Ke(s.treePath,t))}function oj(s,t,i,r,o,u){return rj(s.writeTree,s.treePath,t,i,r,o,u)}function xf(s,t,i){return ij(s.writeTree,s.treePath,t,i)}function lb(s,t){return ob(Ke(s.treePath,t),s.writeTree)}function ob(s,t){return{treePath:s,writeTree:t}}class cj{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,r=t.childName;X(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),X(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if(i==="child_added"&&u==="child_removed")this.changeMap.set(r,Kr(r,t.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(i==="child_removed"&&u==="child_changed")this.changeMap.set(r,Xr(r,o.oldSnap));else if(i==="child_changed"&&u==="child_added")this.changeMap.set(r,_a(r,t.snapshotNode));else if(i==="child_changed"&&u==="child_changed")this.changeMap.set(r,Kr(r,t.snapshotNode,o.oldSnap));else throw Sa("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}class uj{getCompleteChild(t){return null}getChildAfterChild(t,i,r){return null}}const cb=new uj;class Sf{constructor(t,i,r=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=r}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Os(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xf(this.writes_,t,r)}}getChildAfterChild(t,i,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ui(this.viewCache_),u=oj(this.writes_,o,i,1,r,t);return u.length===0?null:u[0]}}function dj(s){return{filter:s}}function hj(s,t){X(t.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),X(t.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function fj(s,t,i,r,o){const u=new cj;let f,m;if(i.type===cn.OVERWRITE){const p=i;p.source.fromUser?f=Ph(s,t,p.path,p.snap,r,o,u):(X(p.source.fromServer,"Unknown source."),m=p.source.tagged||t.serverCache.isFiltered()&&!xe(p.path),f=fc(s,t,p.path,p.snap,r,o,m,u))}else if(i.type===cn.MERGE){const p=i;p.source.fromUser?f=pj(s,t,p.path,p.children,r,o,u):(X(p.source.fromServer,"Unknown source."),m=p.source.tagged||t.serverCache.isFiltered(),f=zh(s,t,p.path,p.children,r,o,m,u))}else if(i.type===cn.ACK_USER_WRITE){const p=i;p.revert?f=vj(s,t,p.path,r,o,u):f=gj(s,t,p.path,p.affectedTree,r,o,u)}else if(i.type===cn.LISTEN_COMPLETE)f=_j(s,t,i.path,r,u);else throw Sa("Unknown operation type: "+i.type);const g=u.getChanges();return mj(t,f,g),{viewCache:f,changes:g}}function mj(s,t,i){const r=t.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=uc(s);(i.length>0||!s.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&i.push(tb(uc(t)))}}function ub(s,t,i,r,o,u){const f=t.eventCache;if(hc(r,i)!=null)return t;{let m,g;if(xe(i))if(X(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const p=ui(t),b=p instanceof ue?p:ue.EMPTY_NODE,y=bf(r,b);m=s.filter.updateFullNode(t.eventCache.getNode(),y,u)}else{const p=dc(r,ui(t));m=s.filter.updateFullNode(t.eventCache.getNode(),p,u)}else{const p=Ee(i);if(p===".priority"){X(Ds(i)===1,"Can't have a priority with additional path components");const b=f.getNode();g=t.serverCache.getNode();const y=iy(r,i,b,g);y!=null?m=s.filter.updatePriority(b,y):m=f.getNode()}else{const b=Ge(i);let y;if(f.isCompleteForChild(p)){g=t.serverCache.getNode();const x=iy(r,i,f.getNode(),g);x!=null?y=f.getNode().getImmediateChild(p).updateChild(b,x):y=f.getNode().getImmediateChild(p)}else y=xf(r,p,t.serverCache);y!=null?m=s.filter.updateChild(f.getNode(),p,y,b,o,u):m=f.getNode()}}return Br(t,m,f.isFullyInitialized()||xe(i),s.filter.filtersNodes())}}function fc(s,t,i,r,o,u,f,m){const g=t.serverCache;let p;const b=f?s.filter:s.filter.getIndexedFilter();if(xe(i))p=b.updateFullNode(g.getNode(),r,null);else if(b.filtersNodes()&&!g.isFiltered()){const C=g.getNode().updateChild(i,r);p=b.updateFullNode(g.getNode(),C,null)}else{const C=Ee(i);if(!g.isCompleteForPath(i)&&Ds(i)>1)return t;const E=Ge(i),U=g.getNode().getImmediateChild(C).updateChild(E,r);C===".priority"?p=b.updatePriority(g.getNode(),U):p=b.updateChild(g.getNode(),C,U,E,cb,null)}const y=sb(t,p,g.isFullyInitialized()||xe(i),b.filtersNodes()),x=new Sf(o,y,u);return ub(s,y,i,o,x,m)}function Ph(s,t,i,r,o,u,f){const m=t.eventCache;let g,p;const b=new Sf(o,t,u);if(xe(i))p=s.filter.updateFullNode(t.eventCache.getNode(),r,f),g=Br(t,p,!0,s.filter.filtersNodes());else{const y=Ee(i);if(y===".priority")p=s.filter.updatePriority(t.eventCache.getNode(),r),g=Br(t,p,m.isFullyInitialized(),m.isFiltered());else{const x=Ge(i),C=m.getNode().getImmediateChild(y);let E;if(xe(x))E=r;else{const P=b.getCompleteChild(y);P!=null?hf(x)===".priority"&&P.getChild(W0(x)).isEmpty()?E=P:E=P.updateChild(x,r):E=ue.EMPTY_NODE}if(C.equals(E))g=t;else{const P=s.filter.updateChild(m.getNode(),y,E,x,b,f);g=Br(t,P,m.isFullyInitialized(),s.filter.filtersNodes())}}}return g}function ay(s,t){return s.eventCache.isCompleteForChild(t)}function pj(s,t,i,r,o,u,f){let m=t;return r.foreach((g,p)=>{const b=Ke(i,g);ay(t,Ee(b))&&(m=Ph(s,m,b,p,o,u,f))}),r.foreach((g,p)=>{const b=Ke(i,g);ay(t,Ee(b))||(m=Ph(s,m,b,p,o,u,f))}),m}function ry(s,t,i){return i.foreach((r,o)=>{t=t.updateChild(r,o)}),t}function zh(s,t,i,r,o,u,f,m){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,p;xe(i)?p=r:p=new He(null).setTree(i,r);const b=t.serverCache.getNode();return p.children.inorderTraversal((y,x)=>{if(b.hasChild(y)){const C=t.serverCache.getNode().getImmediateChild(y),E=ry(s,C,x);g=fc(s,g,new ze(y),E,o,u,f,m)}}),p.children.inorderTraversal((y,x)=>{const C=!t.serverCache.isCompleteForChild(y)&&x.value===null;if(!b.hasChild(y)&&!C){const E=t.serverCache.getNode().getImmediateChild(y),P=ry(s,E,x);g=fc(s,g,new ze(y),P,o,u,f,m)}}),g}function gj(s,t,i,r,o,u,f){if(hc(o,i)!=null)return t;const m=t.serverCache.isFiltered(),g=t.serverCache;if(r.value!=null){if(xe(i)&&g.isFullyInitialized()||g.isCompleteForPath(i))return fc(s,t,i,g.getNode().getChild(i),o,u,m,f);if(xe(i)){let p=new He(null);return g.getNode().forEachChild(ha,(b,y)=>{p=p.set(new ze(b),y)}),zh(s,t,i,p,o,u,m,f)}else return t}else{let p=new He(null);return r.foreach((b,y)=>{const x=Ke(i,b);g.isCompleteForPath(x)&&(p=p.set(b,g.getNode().getChild(x)))}),zh(s,t,i,p,o,u,m,f)}}function _j(s,t,i,r,o){const u=t.serverCache,f=sb(t,u.getNode(),u.isFullyInitialized()||xe(i),u.isFiltered());return ub(s,f,i,r,cb,o)}function vj(s,t,i,r,o,u){let f;if(hc(r,i)!=null)return t;{const m=new Sf(r,t,o),g=t.eventCache.getNode();let p;if(xe(i)||Ee(i)===".priority"){let b;if(t.serverCache.isFullyInitialized())b=dc(r,ui(t));else{const y=t.serverCache.getNode();X(y instanceof ue,"serverChildren would be complete if leaf node"),b=bf(r,y)}b=b,p=s.filter.updateFullNode(g,b,u)}else{const b=Ee(i);let y=xf(r,b,t.serverCache);y==null&&t.serverCache.isCompleteForChild(b)&&(y=g.getImmediateChild(b)),y!=null?p=s.filter.updateChild(g,b,y,Ge(i),m,u):t.eventCache.getNode().hasChild(b)?p=s.filter.updateChild(g,b,ue.EMPTY_NODE,Ge(i),m,u):p=g,p.isEmpty()&&t.serverCache.isFullyInitialized()&&(f=dc(r,ui(t)),f.isLeafNode()&&(p=s.filter.updateFullNode(p,f,u)))}return f=t.serverCache.isFullyInitialized()||hc(r,De())!=null,Br(t,p,f,s.filter.filtersNodes())}}class yj{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new pf(r.getIndex()),u=Uw(r);this.processor_=dj(u);const f=i.serverCache,m=i.eventCache,g=o.updateFullNode(ue.EMPTY_NODE,f.getNode(),null),p=u.updateFullNode(ue.EMPTY_NODE,m.getNode(),null),b=new Os(g,f.isFullyInitialized(),o.filtersNodes()),y=new Os(p,m.isFullyInitialized(),u.filtersNodes());this.viewCache_=Nc(y,b),this.eventGenerator_=new Vw(this.query_)}get query(){return this.query_}}function bj(s){return s.viewCache_.serverCache.getNode()}function xj(s){return uc(s.viewCache_)}function Sj(s,t){const i=ui(s.viewCache_);return i&&(s.query._queryParams.loadsAllData()||!xe(t)&&!i.getImmediateChild(Ee(t)).isEmpty())?i.getChild(t):null}function ly(s){return s.eventRegistrations_.length===0}function Nj(s,t){s.eventRegistrations_.push(t)}function oy(s,t,i){const r=[];if(i){X(t==null,"A cancel should cancel all event registrations.");const o=s.query._path;s.eventRegistrations_.forEach(u=>{const f=u.createCancelEvent(i,o);f&&r.push(f)})}if(t){let o=[];for(let u=0;u<s.eventRegistrations_.length;++u){const f=s.eventRegistrations_[u];if(!f.matches(t))o.push(f);else if(t.hasAnyCallback()){o=o.concat(s.eventRegistrations_.slice(u+1));break}}s.eventRegistrations_=o}else s.eventRegistrations_=[];return r}function cy(s,t,i,r){t.type===cn.MERGE&&t.source.queryId!==null&&(X(ui(s.viewCache_),"We should always have a full cache before handling merges"),X(uc(s.viewCache_),"Missing event cache, even though we have a server cache"));const o=s.viewCache_,u=fj(s.processor_,o,t,i,r);return hj(s.processor_,u.viewCache),X(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=u.viewCache,db(s,u.changes,u.viewCache.eventCache.getNode(),null)}function Ej(s,t){const i=s.viewCache_.eventCache,r=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Qe,(u,f)=>{r.push(_a(u,f))}),i.isFullyInitialized()&&r.push(tb(i.getNode())),db(s,r,i.getNode(),t)}function db(s,t,i,r){const o=r?[r]:s.eventRegistrations_;return qw(s.eventGenerator_,t,i,o)}let mc;class hb{constructor(){this.views=new Map}}function Tj(s){X(!mc,"__referenceConstructor has already been defined"),mc=s}function Cj(){return X(mc,"Reference.ts has not been loaded"),mc}function wj(s){return s.views.size===0}function Nf(s,t,i,r){const o=t.source.queryId;if(o!==null){const u=s.views.get(o);return X(u!=null,"SyncTree gave us an op for an invalid query."),cy(u,t,i,r)}else{let u=[];for(const f of s.views.values())u=u.concat(cy(f,t,i,r));return u}}function fb(s,t,i,r,o){const u=t._queryIdentifier,f=s.views.get(u);if(!f){let m=dc(i,o?r:null),g=!1;m?g=!0:r instanceof ue?(m=bf(i,r),g=!1):(m=ue.EMPTY_NODE,g=!1);const p=Nc(new Os(m,g,!1),new Os(r,o,!1));return new yj(t,p)}return f}function jj(s,t,i,r,o,u){const f=fb(s,t,r,o,u);return s.views.has(t._queryIdentifier)||s.views.set(t._queryIdentifier,f),Nj(f,i),Ej(f,i)}function Aj(s,t,i,r){const o=t._queryIdentifier,u=[];let f=[];const m=Is(s);if(o==="default")for(const[g,p]of s.views.entries())f=f.concat(oy(p,i,r)),ly(p)&&(s.views.delete(g),p.query._queryParams.loadsAllData()||u.push(p.query));else{const g=s.views.get(o);g&&(f=f.concat(oy(g,i,r)),ly(g)&&(s.views.delete(o),g.query._queryParams.loadsAllData()||u.push(g.query)))}return m&&!Is(s)&&u.push(new(Cj())(t._repo,t._path)),{removed:u,events:f}}function mb(s){const t=[];for(const i of s.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function As(s,t){let i=null;for(const r of s.views.values())i=i||Sj(r,t);return i}function pb(s,t){if(t._queryParams.loadsAllData())return Tc(s);{const r=t._queryIdentifier;return s.views.get(r)}}function gb(s,t){return pb(s,t)!=null}function Is(s){return Tc(s)!=null}function Tc(s){for(const t of s.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let pc;function Rj(s){X(!pc,"__referenceConstructor has already been defined"),pc=s}function Dj(){return X(pc,"Reference.ts has not been loaded"),pc}let Oj=1;class uy{constructor(t){this.listenProvider_=t,this.syncPointTree_=new He(null),this.pendingWriteTree_=lj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _b(s,t,i,r,o){return Kw(s.pendingWriteTree_,t,i,r,o),o?ja(s,new ci(_f(),t,i)):[]}function Ij(s,t,i,r){Qw(s.pendingWriteTree_,t,i,r);const o=He.fromObject(i);return ja(s,new va(_f(),t,o))}function Es(s,t,i=!1){const r=$w(s.pendingWriteTree_,t);if(Zw(s.pendingWriteTree_,t)){let u=new He(null);return r.snap!=null?u=u.set(De(),!0):_t(r.children,f=>{u=u.set(new ze(f),!0)}),ja(s,new cc(r.path,u,i))}else return[]}function ul(s,t,i){return ja(s,new ci(vf(),t,i))}function kj(s,t,i){const r=He.fromObject(i);return ja(s,new va(vf(),t,r))}function Mj(s,t){return ja(s,new $r(vf(),t))}function Lj(s,t,i){const r=Tf(s,i);if(r){const o=Cf(r),u=o.path,f=o.queryId,m=xt(u,t),g=new $r(yf(f),m);return wf(s,u,g)}else return[]}function vb(s,t,i,r,o=!1){const u=t._path,f=s.syncPointTree_.get(u);let m=[];if(f&&(t._queryIdentifier==="default"||gb(f,t))){const g=Aj(f,t,i,r);wj(f)&&(s.syncPointTree_=s.syncPointTree_.remove(u));const p=g.removed;if(m=g.events,!o){const b=p.findIndex(x=>x._queryParams.loadsAllData())!==-1,y=s.syncPointTree_.findOnPath(u,(x,C)=>Is(C));if(b&&!y){const x=s.syncPointTree_.subtree(u);if(!x.isEmpty()){const C=Bj(x);for(let E=0;E<C.length;++E){const P=C[E],U=P.query,Y=Sb(s,P);s.listenProvider_.startListening(Gr(U),Zr(s,U),Y.hashFn,Y.onComplete)}}}!y&&p.length>0&&!r&&(b?s.listenProvider_.stopListening(Gr(t),null):p.forEach(x=>{const C=s.queryToTagMap.get(Cc(x));s.listenProvider_.stopListening(Gr(x),C)}))}Hj(s,p)}return m}function yb(s,t,i,r){const o=Tf(s,r);if(o!=null){const u=Cf(o),f=u.path,m=u.queryId,g=xt(f,t),p=new ci(yf(m),g,i);return wf(s,f,p)}else return[]}function Uj(s,t,i,r){const o=Tf(s,r);if(o){const u=Cf(o),f=u.path,m=u.queryId,g=xt(f,t),p=He.fromObject(i),b=new va(yf(m),g,p);return wf(s,f,b)}else return[]}function Pj(s,t,i,r=!1){const o=t._path;let u=null,f=!1;s.syncPointTree_.foreachOnPath(o,(x,C)=>{const E=xt(x,o);u=u||As(C,E),f=f||Is(C)});let m=s.syncPointTree_.get(o);m?(f=f||Is(m),u=u||As(m,De())):(m=new hb,s.syncPointTree_=s.syncPointTree_.set(o,m));let g;u!=null?g=!0:(g=!1,u=ue.EMPTY_NODE,s.syncPointTree_.subtree(o).foreachChild((C,E)=>{const P=As(E,De());P&&(u=u.updateImmediateChild(C,P))}));const p=gb(m,t);if(!p&&!t._queryParams.loadsAllData()){const x=Cc(t);X(!s.queryToTagMap.has(x),"View does not exist, but we have a tag");const C=Gj();s.queryToTagMap.set(x,C),s.tagToQueryMap.set(C,x)}const b=Ec(s.pendingWriteTree_,o);let y=jj(m,t,i,b,u,g);if(!p&&!f&&!r){const x=pb(m,t);y=y.concat(Fj(s,t,x))}return y}function Ef(s,t,i){const o=s.pendingWriteTree_,u=s.syncPointTree_.findOnPath(t,(f,m)=>{const g=xt(f,t),p=As(m,g);if(p)return p});return rb(o,t,u,i,!0)}function zj(s,t){const i=t._path;let r=null;s.syncPointTree_.foreachOnPath(i,(p,b)=>{const y=xt(p,i);r=r||As(b,y)});let o=s.syncPointTree_.get(i);o?r=r||As(o,De()):(o=new hb,s.syncPointTree_=s.syncPointTree_.set(i,o));const u=r!=null,f=u?new Os(r,!0,!1):null,m=Ec(s.pendingWriteTree_,t._path),g=fb(o,t,m,u?f.getNode():ue.EMPTY_NODE,u);return xj(g)}function ja(s,t){return bb(t,s.syncPointTree_,null,Ec(s.pendingWriteTree_,De()))}function bb(s,t,i,r){if(xe(s.path))return xb(s,t,i,r);{const o=t.get(De());i==null&&o!=null&&(i=As(o,De()));let u=[];const f=Ee(s.path),m=s.operationForChild(f),g=t.children.get(f);if(g&&m){const p=i?i.getImmediateChild(f):null,b=lb(r,f);u=u.concat(bb(m,g,p,b))}return o&&(u=u.concat(Nf(o,s,r,i))),u}}function xb(s,t,i,r){const o=t.get(De());i==null&&o!=null&&(i=As(o,De()));let u=[];return t.children.inorderTraversal((f,m)=>{const g=i?i.getImmediateChild(f):null,p=lb(r,f),b=s.operationForChild(f);b&&(u=u.concat(xb(b,m,g,p)))}),o&&(u=u.concat(Nf(o,s,r,i))),u}function Sb(s,t){const i=t.query,r=Zr(s,i);return{hashFn:()=>(bj(t)||ue.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?Lj(s,i._path,r):Mj(s,i._path);{const u=MC(o,i);return vb(s,i,null,u)}}}}function Zr(s,t){const i=Cc(t);return s.queryToTagMap.get(i)}function Cc(s){return s._path.toString()+"$"+s._queryIdentifier}function Tf(s,t){return s.tagToQueryMap.get(t)}function Cf(s){const t=s.indexOf("$");return X(t!==-1&&t<s.length-1,"Bad queryKey."),{queryId:s.substr(t+1),path:new ze(s.substr(0,t))}}function wf(s,t,i){const r=s.syncPointTree_.get(t);X(r,"Missing sync point for query tag that we're tracking");const o=Ec(s.pendingWriteTree_,t);return Nf(r,i,o,null)}function Bj(s){return s.fold((t,i,r)=>{if(i&&Is(i))return[Tc(i)];{let o=[];return i&&(o=mb(i)),_t(r,(u,f)=>{o=o.concat(f)}),o}})}function Gr(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(Dj())(s._repo,s._path):s}function Hj(s,t){for(let i=0;i<t.length;++i){const r=t[i];if(!r._queryParams.loadsAllData()){const o=Cc(r),u=s.queryToTagMap.get(o);s.queryToTagMap.delete(o),s.tagToQueryMap.delete(u)}}}function Gj(){return Oj++}function Fj(s,t,i){const r=t._path,o=Zr(s,t),u=Sb(s,i),f=s.listenProvider_.startListening(Gr(t),o,u.hashFn,u.onComplete),m=s.syncPointTree_.subtree(r);if(o)X(!Is(m.value),"If we're adding a query, it shouldn't be shadowed");else{const g=m.fold((p,b,y)=>{if(!xe(p)&&b&&Is(b))return[Tc(b).query];{let x=[];return b&&(x=x.concat(mb(b).map(C=>C.query))),_t(y,(C,E)=>{x=x.concat(E)}),x}});for(let p=0;p<g.length;++p){const b=g[p];s.listenProvider_.stopListening(Gr(b),Zr(s,b))}}return f}class jf{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new jf(i)}node(){return this.node_}}class Af{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=Ke(this.path_,t);return new Af(this.syncTree_,i)}node(){return Ef(this.syncTree_,this.path_)}}const Vj=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},dy=function(s,t,i){if(!s||typeof s!="object")return s;if(X(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return qj(s[".sv"],t,i);if(typeof s[".sv"]=="object")return Yj(s[".sv"],t);X(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},qj=function(s,t,i){if(s==="timestamp")return i.timestamp;X(!1,"Unexpected server value: "+s)},Yj=function(s,t,i){s.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const r=s.increment;typeof r!="number"&&X(!1,"Unexpected increment value: "+r);const o=t.node();if(X(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const f=o.getValue();return typeof f!="number"?r:f+r},Nb=function(s,t,i,r){return Rf(t,new Af(i,s),r)},Eb=function(s,t,i){return Rf(s,new jf(t),i)};function Rf(s,t,i){const r=s.getPriority().val(),o=dy(r,t.getImmediateChild(".priority"),i);let u;if(s.isLeafNode()){const f=s,m=dy(f.getValue(),t,i);return m!==f.getValue()||o!==f.getPriority().val()?new ct(m,at(o)):s}else{const f=s;return u=f,o!==f.getPriority().val()&&(u=u.updatePriority(new ct(o))),f.forEachChild(Qe,(m,g)=>{const p=Rf(g,t.getImmediateChild(m),i);p!==g&&(u=u.updateImmediateChild(m,p))}),u}}class Df{constructor(t="",i=null,r={children:{},childCount:0}){this.name=t,this.parent=i,this.node=r}}function Of(s,t){let i=t instanceof ze?t:new ze(t),r=s,o=Ee(i);for(;o!==null;){const u=fa(r.node.children,o)||{children:{},childCount:0};r=new Df(o,r,u),i=Ge(i),o=Ee(i)}return r}function Aa(s){return s.node.value}function Tb(s,t){s.node.value=t,Bh(s)}function Cb(s){return s.node.childCount>0}function Wj(s){return Aa(s)===void 0&&!Cb(s)}function wc(s,t){_t(s.node.children,(i,r)=>{t(new Df(i,s,r))})}function wb(s,t,i,r){i&&t(s),wc(s,o=>{wb(o,t,!0)})}function Xj(s,t,i){let r=s.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function dl(s){return new ze(s.parent===null?s.name:dl(s.parent)+"/"+s.name)}function Bh(s){s.parent!==null&&Kj(s.parent,s.name,s)}function Kj(s,t,i){const r=Wj(i),o=vn(s.node.children,t);r&&o?(delete s.node.children[t],s.node.childCount--,Bh(s)):!r&&!o&&(s.node.children[t]=i.node,s.node.childCount++,Bh(s))}const Qj=/[\[\].#$\/\u0000-\u001F\u007F]/,$j=/[\[\].#$\u0000-\u001F\u007F]/,ph=10*1024*1024,If=function(s){return typeof s=="string"&&s.length!==0&&!Qj.test(s)},jb=function(s){return typeof s=="string"&&s.length!==0&&!$j.test(s)},Zj=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),jb(s)},Jj=function(s){return s===null||typeof s=="string"||typeof s=="number"&&!lf(s)||s&&typeof s=="object"&&vn(s,".sv")},Ab=function(s,t,i,r){r&&t===void 0||jc(_c(s,"value"),t,i)},jc=function(s,t,i){const r=i instanceof ze?new pw(i,s):i;if(t===void 0)throw new Error(s+"contains undefined "+ni(r));if(typeof t=="function")throw new Error(s+"contains a function "+ni(r)+" with contents = "+t.toString());if(lf(t))throw new Error(s+"contains "+t.toString()+" "+ni(r));if(typeof t=="string"&&t.length>ph/3&&vc(t)>ph)throw new Error(s+"contains a string greater than "+ph+" utf8 bytes "+ni(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,u=!1;if(_t(t,(f,m)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(u=!0,!If(f)))throw new Error(s+" contains an invalid key ("+f+") "+ni(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);gw(r,f),jc(s,m,r),_w(r)}),o&&u)throw new Error(s+' contains ".value" child '+ni(r)+" in addition to actual children.")}},eA=function(s,t){let i,r;for(i=0;i<t.length;i++){r=t[i];const u=Wr(r);for(let f=0;f<u.length;f++)if(!(u[f]===".priority"&&f===u.length-1)){if(!If(u[f]))throw new Error(s+"contains an invalid key ("+u[f]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(mw);let o=null;for(i=0;i<t.length;i++){if(r=t[i],o!==null&&Jt(o,r))throw new Error(s+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}},tA=function(s,t,i,r){const o=_c(s,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const u=[];_t(t,(f,m)=>{const g=new ze(f);if(jc(o,m,Ke(i,g)),hf(g)===".priority"&&!Jj(m))throw new Error(o+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(g)}),eA(o,u)},Rb=function(s,t,i,r){if(!jb(i))throw new Error(_c(s,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},nA=function(s,t,i,r){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Rb(s,t,i)},kf=function(s,t){if(Ee(t)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},sA=function(s,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!If(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!Zj(i))throw new Error(_c(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class iA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Mf(s,t){let i=null;for(let r=0;r<t.length;r++){const o=t[r],u=o.getPath();i!==null&&!X0(u,i.path)&&(s.eventLists_.push(i),i=null),i===null&&(i={events:[],path:u}),i.events.push(o)}i&&s.eventLists_.push(i)}function nn(s,t,i){Mf(s,i),aA(s,r=>Jt(r,t)||Jt(t,r))}function aA(s,t){s.recursionDepth_++;let i=!0;for(let r=0;r<s.eventLists_.length;r++){const o=s.eventLists_[r];if(o){const u=o.path;t(u)?(rA(s.eventLists_[r]),s.eventLists_[r]=null):i=!1}}i&&(s.eventLists_=[]),s.recursionDepth_--}function rA(s){for(let t=0;t<s.events.length;t++){const i=s.events[t];if(i!==null){s.events[t]=null;const r=i.getEventRunner();Pr&&gt("event: "+i.toString()),wa(r)}}}const lA="repo_interrupt",oA=25;class cA{constructor(t,i,r,o){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new iA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oc(),this.transactionQueueTree_=new Df,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uA(s,t,i){if(s.stats_=uf(s.repoInfo_),s.forceRestClient_||zC())s.server_=new lc(s.repoInfo_,(r,o,u,f)=>{hy(s,r,o,u,f)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>fy(s,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{rt(i)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}s.persistentConnection_=new Hn(s.repoInfo_,t,(r,o,u,f)=>{hy(s,r,o,u,f)},r=>{fy(s,r)},r=>{dA(s,r)},s.authTokenProvider_,s.appCheckProvider_,i),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(r=>{s.server_.refreshAuthToken(r)}),s.appCheckProvider_.addTokenChangeListener(r=>{s.server_.refreshAppCheckToken(r.token)}),s.statsReporter_=VC(s.repoInfo_,()=>new Fw(s.stats_,s.server_)),s.infoData_=new Pw,s.infoSyncTree_=new uy({startListening:(r,o,u,f)=>{let m=[];const g=s.infoData_.getNode(r._path);return g.isEmpty()||(m=ul(s.infoSyncTree_,r._path,g),setTimeout(()=>{f("ok")},0)),m},stopListening:()=>{}}),Lf(s,"connected",!1),s.serverSyncTree_=new uy({startListening:(r,o,u,f)=>(s.server_.listen(r,u,o,(m,g)=>{const p=f(m,g);nn(s.eventQueue_,r._path,p)}),[]),stopListening:(r,o)=>{s.server_.unlisten(r,o)}})}function Db(s){const i=s.infoData_.getNode(new ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function Ac(s){return Vj({timestamp:Db(s)})}function hy(s,t,i,r,o){s.dataUpdateCount++;const u=new ze(t);i=s.interceptServerDataCallback_?s.interceptServerDataCallback_(t,i):i;let f=[];if(o)if(r){const g=Qo(i,p=>at(p));f=Uj(s.serverSyncTree_,u,g,o)}else{const g=at(i);f=yb(s.serverSyncTree_,u,g,o)}else if(r){const g=Qo(i,p=>at(p));f=kj(s.serverSyncTree_,u,g)}else{const g=at(i);f=ul(s.serverSyncTree_,u,g)}let m=u;f.length>0&&(m=ba(s,u)),nn(s.eventQueue_,m,f)}function fy(s,t){Lf(s,"connected",t),t===!1&&pA(s)}function dA(s,t){_t(t,(i,r)=>{Lf(s,i,r)})}function Lf(s,t,i){const r=new ze("/.info/"+t),o=at(i);s.infoData_.updateSnapshot(r,o);const u=ul(s.infoSyncTree_,r,o);nn(s.eventQueue_,r,u)}function Uf(s){return s.nextWriteId_++}function hA(s,t,i){const r=zj(s.serverSyncTree_,t);return r!=null?Promise.resolve(r):s.server_.get(t).then(o=>{const u=at(o).withIndex(t._queryParams.getIndex());Pj(s.serverSyncTree_,t,i,!0);let f;if(t._queryParams.loadsAllData())f=ul(s.serverSyncTree_,t._path,u);else{const m=Zr(s.serverSyncTree_,t);f=yb(s.serverSyncTree_,t._path,u,m)}return nn(s.eventQueue_,t._path,f),vb(s.serverSyncTree_,t,i,null,!0),u},o=>(hl(s,"get for query "+rt(t)+" failed: "+o),Promise.reject(new Error(o))))}function fA(s,t,i,r,o){hl(s,"set",{path:t.toString(),value:i,priority:r});const u=Ac(s),f=at(i,r),m=Ef(s.serverSyncTree_,t),g=Eb(f,m,u),p=Uf(s),b=_b(s.serverSyncTree_,t,g,p,!0);Mf(s.eventQueue_,b),s.server_.put(t.toString(),f.val(!0),(x,C)=>{const E=x==="ok";E||St("set at "+t+" failed: "+x);const P=Es(s.serverSyncTree_,p,!E);nn(s.eventQueue_,t,P),Hh(s,o,x,C)});const y=zf(s,t);ba(s,y),nn(s.eventQueue_,y,[])}function mA(s,t,i,r){hl(s,"update",{path:t.toString(),value:i});let o=!0;const u=Ac(s),f={};if(_t(i,(m,g)=>{o=!1,f[m]=Nb(Ke(t,m),at(g),s.serverSyncTree_,u)}),o)gt("update() called with empty data.  Don't do anything."),Hh(s,r,"ok",void 0);else{const m=Uf(s),g=Ij(s.serverSyncTree_,t,f,m);Mf(s.eventQueue_,g),s.server_.merge(t.toString(),i,(p,b)=>{const y=p==="ok";y||St("update at "+t+" failed: "+p);const x=Es(s.serverSyncTree_,m,!y),C=x.length>0?ba(s,t):t;nn(s.eventQueue_,C,x),Hh(s,r,p,b)}),_t(i,p=>{const b=zf(s,Ke(t,p));ba(s,b)}),nn(s.eventQueue_,t,[])}}function pA(s){hl(s,"onDisconnectEvents");const t=Ac(s),i=oc();kh(s.onDisconnect_,De(),(o,u)=>{const f=Nb(o,u,s.serverSyncTree_,t);nb(i,o,f)});let r=[];kh(i,De(),(o,u)=>{r=r.concat(ul(s.serverSyncTree_,o,u));const f=zf(s,o);ba(s,f)}),s.onDisconnect_=oc(),nn(s.eventQueue_,De(),r)}function gA(s){s.persistentConnection_&&s.persistentConnection_.interrupt(lA)}function hl(s,...t){let i="";s.persistentConnection_&&(i=s.persistentConnection_.id+":"),gt(i,...t)}function Hh(s,t,i,r){t&&wa(()=>{if(i==="ok")t(null);else{const o=(i||"error").toUpperCase();let u=o;r&&(u+=": "+r);const f=new Error(u);f.code=o,t(f)}})}function Ob(s,t,i){return Ef(s.serverSyncTree_,t,i)||ue.EMPTY_NODE}function Pf(s,t=s.transactionQueueTree_){if(t||Rc(s,t),Aa(t)){const i=kb(s,t);X(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&_A(s,dl(t),i)}else Cb(t)&&wc(t,i=>{Pf(s,i)})}function _A(s,t,i){const r=i.map(p=>p.currentWriteId),o=Ob(s,t,r);let u=o;const f=o.hash();for(let p=0;p<i.length;p++){const b=i[p];X(b.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const y=xt(t,b.path);u=u.updateChild(y,b.currentOutputSnapshotRaw)}const m=u.val(!0),g=t;s.server_.put(g.toString(),m,p=>{hl(s,"transaction put response",{path:g.toString(),status:p});let b=[];if(p==="ok"){const y=[];for(let x=0;x<i.length;x++)i[x].status=2,b=b.concat(Es(s.serverSyncTree_,i[x].currentWriteId)),i[x].onComplete&&y.push(()=>i[x].onComplete(null,!0,i[x].currentOutputSnapshotResolved)),i[x].unwatcher();Rc(s,Of(s.transactionQueueTree_,t)),Pf(s,s.transactionQueueTree_),nn(s.eventQueue_,t,b);for(let x=0;x<y.length;x++)wa(y[x])}else{if(p==="datastale")for(let y=0;y<i.length;y++)i[y].status===3?i[y].status=4:i[y].status=0;else{St("transaction at "+g.toString()+" failed: "+p);for(let y=0;y<i.length;y++)i[y].status=4,i[y].abortReason=p}ba(s,t)}},f)}function ba(s,t){const i=Ib(s,t),r=dl(i),o=kb(s,i);return vA(s,o,r),r}function vA(s,t,i){if(t.length===0)return;const r=[];let o=[];const f=t.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<t.length;m++){const g=t[m],p=xt(i,g.path);let b=!1,y;if(X(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)b=!0,y=g.abortReason,o=o.concat(Es(s.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=oA)b=!0,y="maxretry",o=o.concat(Es(s.serverSyncTree_,g.currentWriteId,!0));else{const x=Ob(s,g.path,f);g.currentInputSnapshot=x;const C=t[m].update(x.val());if(C!==void 0){jc("transaction failed: Data returned ",C,g.path);let E=at(C);typeof C=="object"&&C!=null&&vn(C,".priority")||(E=E.updatePriority(x.getPriority()));const U=g.currentWriteId,Y=Ac(s),$=Eb(E,x,Y);g.currentOutputSnapshotRaw=E,g.currentOutputSnapshotResolved=$,g.currentWriteId=Uf(s),f.splice(f.indexOf(U),1),o=o.concat(_b(s.serverSyncTree_,g.path,$,g.currentWriteId,g.applyLocally)),o=o.concat(Es(s.serverSyncTree_,U,!0))}else b=!0,y="nodata",o=o.concat(Es(s.serverSyncTree_,g.currentWriteId,!0))}nn(s.eventQueue_,i,o),o=[],b&&(t[m].status=2,(function(x){setTimeout(x,Math.floor(0))})(t[m].unwatcher),t[m].onComplete&&(y==="nodata"?r.push(()=>t[m].onComplete(null,!1,t[m].currentInputSnapshot)):r.push(()=>t[m].onComplete(new Error(y),!1,null))))}Rc(s,s.transactionQueueTree_);for(let m=0;m<r.length;m++)wa(r[m]);Pf(s,s.transactionQueueTree_)}function Ib(s,t){let i,r=s.transactionQueueTree_;for(i=Ee(t);i!==null&&Aa(r)===void 0;)r=Of(r,i),t=Ge(t),i=Ee(t);return r}function kb(s,t){const i=[];return Mb(s,t,i),i.sort((r,o)=>r.order-o.order),i}function Mb(s,t,i){const r=Aa(t);if(r)for(let o=0;o<r.length;o++)i.push(r[o]);wc(t,o=>{Mb(s,o,i)})}function Rc(s,t){const i=Aa(t);if(i){let r=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[r]=i[o],r++);i.length=r,Tb(t,i.length>0?i:void 0)}wc(t,r=>{Rc(s,r)})}function zf(s,t){const i=dl(Ib(s,t)),r=Of(s.transactionQueueTree_,t);return Xj(r,o=>{gh(s,o)}),gh(s,r),wb(r,o=>{gh(s,o)}),i}function gh(s,t){const i=Aa(t);if(i){const r=[];let o=[],u=-1;for(let f=0;f<i.length;f++)i[f].status===3||(i[f].status===1?(X(u===f-1,"All SENT items should be at beginning of queue."),u=f,i[f].status=3,i[f].abortReason="set"):(X(i[f].status===0,"Unexpected transaction status in abort"),i[f].unwatcher(),o=o.concat(Es(s.serverSyncTree_,i[f].currentWriteId,!0)),i[f].onComplete&&r.push(i[f].onComplete.bind(null,new Error("set"),!1,null))));u===-1?Tb(t,void 0):i.length=u+1,nn(s.eventQueue_,dl(t),o);for(let f=0;f<r.length;f++)wa(r[f])}}function yA(s){let t="";const i=s.split("/");for(let r=0;r<i.length;r++)if(i[r].length>0){let o=i[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function bA(s){const t={};s.charAt(0)==="?"&&(s=s.substring(1));for(const i of s.split("&")){if(i.length===0)continue;const r=i.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):St(`Invalid query segment '${i}' in query '${s}'`)}return t}const my=function(s,t){const i=xA(s),r=i.namespace;i.domain==="firebase.com"&&Vn(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&i.domain!=="localhost"&&Vn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||RC();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new P0(i.host,i.secure,r,o,t,"",r!==i.subdomain),path:new ze(i.pathString)}},xA=function(s){let t="",i="",r="",o="",u="",f=!0,m="https",g=443;if(typeof s=="string"){let p=s.indexOf("//");p>=0&&(m=s.substring(0,p-1),s=s.substring(p+2));let b=s.indexOf("/");b===-1&&(b=s.length);let y=s.indexOf("?");y===-1&&(y=s.length),t=s.substring(0,Math.min(b,y)),b<y&&(o=yA(s.substring(b,y)));const x=bA(s.substring(Math.min(s.length,y)));p=t.indexOf(":"),p>=0?(f=m==="https"||m==="wss",g=parseInt(t.substring(p+1),10)):p=t.length;const C=t.slice(0,p);if(C.toLowerCase()==="localhost")i="localhost";else if(C.split(".").length<=2)i=C;else{const E=t.indexOf(".");r=t.substring(0,E).toLowerCase(),i=t.substring(E+1),u=r}"ns"in x&&(u=x.ns)}return{host:t,port:g,domain:i,subdomain:r,secure:f,scheme:m,pathString:o,namespace:u}};const py="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",SA=(function(){let s=0;const t=[];return function(i){const r=i===s;s=i;let o;const u=new Array(8);for(o=7;o>=0;o--)u[o]=py.charAt(i%64),i=Math.floor(i/64);X(i===0,"Cannot push at time == 0");let f=u.join("");if(r){for(o=11;o>=0&&t[o]===63;o--)t[o]=0;t[o]++}else for(o=0;o<12;o++)t[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)f+=py.charAt(t[o]);return X(f.length===20,"nextPushId: Length should be 20."),f}})();class NA{constructor(t,i,r,o){this.eventType=t,this.eventRegistration=i,this.snapshot=r,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+rt(this.snapshot.exportVal())}}class EA{constructor(t,i,r){this.eventRegistration=t,this.error=i,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class TA{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Bf{constructor(t,i,r,o){this._repo=t,this._path=i,this._queryParams=r,this._orderByCalled=o}get key(){return xe(this._path)?null:hf(this._path)}get ref(){return new Yn(this._repo,this._path)}get _queryIdentifier(){const t=ey(this._queryParams),i=of(t);return i==="{}"?"default":i}get _queryObject(){return ey(this._queryParams)}isEqual(t){if(t=vt(t),!(t instanceof Bf))return!1;const i=this._repo===t._repo,r=X0(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return i&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+fw(this._path)}}class Yn extends Bf{constructor(t,i){super(t,i,new gf,!1)}get parent(){const t=W0(this._path);return t===null?null:new Yn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Jr{constructor(t,i,r){this._node=t,this.ref=i,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new ze(t),r=el(this.ref,t);return new Jr(this._node.getChild(i),r,Qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>t(new Jr(o,el(this.ref,r),Qe)))}hasChild(t){const i=new ze(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function en(s,t){return s=vt(s),s._checkNotDeleted("ref"),t!==void 0?el(s._root,t):s._root}function el(s,t){return s=vt(s),Ee(s._path)===null?nA("child","path",t):Rb("child","path",t),new Yn(s._repo,Ke(s._path,t))}function CA(s,t){s=vt(s),kf("push",s._path),Ab("push",t,s._path,!0);const i=Db(s._repo),r=SA(i),o=el(s,r),u=el(s,r);let f;return f=Promise.resolve(u),o.then=f.then.bind(f),o.catch=f.then.bind(f,void 0),o}function wA(s){return kf("remove",s._path),xa(s,null)}function xa(s,t){s=vt(s),kf("set",s._path),Ab("set",t,s._path,!1);const i=new tl;return fA(s._repo,s._path,t,null,i.wrapCallback(()=>{})),i.promise}function jA(s,t){tA("update",t,s._path);const i=new tl;return mA(s._repo,s._path,t,i.wrapCallback(()=>{})),i.promise}function di(s){s=vt(s);const t=new TA(()=>{}),i=new Hf(t);return hA(s._repo,s,i).then(r=>new Jr(r,new Yn(s._repo,s._path),s._queryParams.getIndex()))}class Hf{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const r=i._queryParams.getIndex();return new NA("value",this,new Jr(t.snapshotNode,new Yn(i._repo,i._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new EA(this,t,i):null}matches(t){return t instanceof Hf?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}Tj(Yn);Rj(Yn);const AA="FIREBASE_DATABASE_EMULATOR_HOST",Gh={};let RA=!1;function DA(s,t,i,r){const o=t.lastIndexOf(":"),u=t.substring(0,o),f=Na(u);s.repoInfo_=new P0(t,f,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,i),r&&(s.authTokenProvider_=r)}function OA(s,t,i,r,o){let u=r||s.options.databaseURL;u===void 0&&(s.options.projectId||Vn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gt("Using default host for project ",s.options.projectId),u=`${s.options.projectId}-default-rtdb.firebaseio.com`);let f=my(u,o),m=f.repoInfo,g;typeof process<"u"&&Lv&&(g=Lv[AA]),g?(u=`http://${g}?ns=${m.namespace}`,f=my(u,o),m=f.repoInfo):f.repoInfo.secure;const p=new HC(s.name,s.options,t);sA("Invalid Firebase Database URL",f),xe(f.path)||Vn("Database URL must point to the root of a Firebase Database (not including a child path).");const b=kA(m,s,p,new BC(s,i));return new MA(b,s)}function IA(s,t){const i=Gh[t];(!i||i[s.key]!==s)&&Vn(`Database ${t}(${s.repoInfo_}) has already been deleted.`),gA(s),delete i[s.key]}function kA(s,t,i,r){let o=Gh[t.name];o||(o={},Gh[t.name]=o);let u=o[s.toURLString()];return u&&Vn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new cA(s,RA,i,r),o[s.toURLString()]=u,u}class MA{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(uA(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yn(this._repo,De())),this._rootInternal}_delete(){return this._rootInternal!==null&&(IA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Vn("Cannot call "+t+" on a deleted database.")}}function LA(s=Hy(),t){const i=$h(s,"database").getImmediate({identifier:t});if(!i._instanceStarted){const r=IN("database");r&&UA(i,...r)}return i}function UA(s,t,i,r={}){s=vt(s),s._checkNotDeleted("useEmulator");const o=`${t}:${i}`,u=s._repoInternal;if(s._instanceStarted){if(o===s._repoInternal.repoInfo_.host&&ii(r,u.repoInfo_.emulatorOptions))return;Vn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(u.repoInfo_.nodeAdmin)r.mockUserToken&&Vn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new Vo(Vo.OWNER);else if(r.mockUserToken){const m=typeof r.mockUserToken=="string"?r.mockUserToken:kN(r.mockUserToken,s.app.options.projectId);f=new Vo(m)}Na(t)&&(ky(t),My("Database",!0)),DA(u,o,r,f)}function PA(s){EC(Ta),ma(new ai("database",(t,{instanceIdentifier:i})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return OA(r,o,u,i)},"PUBLIC").setMultipleInstances(!0)),ws(Uv,Pv,s),ws(Uv,Pv,"esm2020")}Hn.prototype.simpleListen=function(s,t){this.sendRequest("q",{p:s},t)};Hn.prototype.echo=function(s,t){this.sendRequest("echo",{d:s},t)};PA();var zA="firebase",BA="12.9.0";ws(zA,BA,"app");const HA={apiKey:"AIzaSyBhZ7XGKFde4UWy5H3i9NzVGYN-joVvoSY",authDomain:"pl-football-fantasy.firebaseapp.com",databaseURL:"https://pl-football-fantasy-default-rtdb.europe-west1.firebasedatabase.app",projectId:"pl-football-fantasy",storageBucket:"pl-football-fantasy.firebasestorage.app",messagingSenderId:"875638327100",appId:"1:875638327100:web:020b2630584c6d1e6dc039",measurementId:"G-FNBYMP2H7H"},Lb=By(HA),tn=LA(Lb),aa=SC(Lb),GA="https://fantasy.premierleague.com/api";let fl=5398119;function _h(s){fl=Number(s)}function FA(){return fl}let Mr=null,Fh=0;const VA=1800*1e3;let Lo=null;const Uo={},Ub=[s=>`https://corsproxy.io/?url=${encodeURIComponent(s)}`,s=>`https://api.allorigins.win/raw?url=${encodeURIComponent(s)}`,s=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(s)}`,s=>`https://thingproxy.freeboard.io/fetch/${s}`];let Po=-1,Dr=null;async function qo(s,t=8e3){const i=new AbortController,r=setTimeout(()=>i.abort(),t);try{const o=await fetch(s,{signal:i.signal});return clearTimeout(r),o}catch(o){throw clearTimeout(r),o}}async function gy(s,t){const i=Ub[s](t),r=await qo(i,6e3);if(!r.ok)throw new Error(`FPL API error (${r.status})`);const o=await r.json();return{index:s,data:o}}async function _i(s){try{const f=await qo(`/api/fpl-proxy?path=${encodeURIComponent(s)}`);if(f.ok)return await f.json()}catch{}const t={"bootstrap-static/":"bootstrap.json","fixtures/":"fixtures.json"},i=s.match(/^event\/(\d+)\/live\/$/),r=t[s]||(i?`live/gw${i[1]}.json`:null);if(r)try{const m=await qo(`/FF2026/data/${r}`,3e3);if(m.ok){const g=await m.json();if(g&&(Array.isArray(g)?g.length>0:Object.keys(g).length>0))return g}}catch{}if(Dr!==!1)try{const f=await qo(`/api/fpl-proxy?path=${encodeURIComponent(s)}`,Dr===null?3e3:6e3);if(f.ok){const m=await f.json();return Dr=!0,m}Dr=!1}catch{Dr=!1}const o=`${GA}/${s}`;if(Po>=0)try{const{data:f}=await gy(Po,o);return f}catch{Po=-1}const u=Ub.map((f,m)=>gy(m,o));try{const{index:f,data:m}=await Promise.any(u);return Po=f,m}catch{throw new Error('Unable to reach the FPL API. All proxy methods failed. Try refreshing or running the app locally with "npm run dev".')}}async function Wn(){const s=Date.now();return(!Mr||s-Fh>=VA)&&(Mr=_i("bootstrap-static/").catch(t=>{throw Mr=null,t}),Fh=s),Mr}function qA(){Mr=null,Fh=0}async function Gf(){return _i(`entry/${fl}/`)}async function Ff(){return _i(`entry/${fl}/history/`)}async function Vf(s){return _i(`entry/${fl}/event/${s}/picks/`)}async function Ra(){return Lo||(Lo=_i("fixtures/").catch(s=>{throw Lo=null,s})),Lo}async function Dc(s){return Uo[s]||(Uo[s]=_i(`event/${s}/live/`).catch(t=>{throw delete Uo[s],t})),Uo[s]}async function YA(s){return _i(`leagues-classic/${s}/standings/`)}const WA="maghovk@gmail.com",Pb=Z.createContext(null);function XA({children:s}){const[t,i]=Z.useState(null),[r,o]=Z.useState(null),[u,f]=Z.useState(!0),m=t?.email===WA;Z.useEffect(()=>uT(aa,async C=>{if(C){const U=(await di(en(tn,`users/${C.uid}`))).val()?.fplCode??null;U&&_h(U),o(U),i(C)}else i(null),o(null);f(!1)}),[]);async function g(x,C,E,P){const{user:U}=await iT(aa,C,E);await lT(U,{displayName:x}),await xa(en(tn,`users/${U.uid}`),{name:x,email:C,fplCode:Number(P),createdAt:new Date().toISOString()}),_h(Number(P)),o(Number(P))}async function p(x){if(!aa.currentUser)return;const C=Number(x);await jA(en(tn,`users/${aa.currentUser.uid}`),{fplCode:C}),_h(C),o(C)}async function b(x,C){await aT(aa,x,C)}async function y(){await dT(aa)}return c.jsx(Pb.Provider,{value:{user:t,fplCode:r,loading:u,isAdmin:m,register:g,login:b,logout:y,updateFplCode:p},children:s})}function Da(){return Z.useContext(Pb)}function Rs(s,t=[],i=null){const[r,o]=Z.useState(null),[u,f]=Z.useState(!0),[m,g]=Z.useState(null),p=Z.useCallback(async()=>{try{f(!0),g(null);const b=await s();o(b)}catch(b){g(b.message||"Failed to fetch data")}finally{f(!1)}},[s,...t]);return Z.useEffect(()=>{p()},[p]),Z.useEffect(()=>{if(!i)return;const b=setInterval(p,i);return()=>clearInterval(b)},[p,i]),{data:r,loading:u,error:m,reload:p}}let vh=null,yh=null;async function zb(s){try{const i=await fetch(`/FF2026/data/${s}`);return i.ok?await i.json():null}catch{return null}}async function qf(){return vh||(vh=zb("understat.json").then(s=>{if(!s||!Array.isArray(s))return{};const t={};for(const i of s){const r=Yo(i.name);t[r]=i}return t})),vh}function Bb(s,t){if(!s||!t)return null;const i=Yo(t.web_name||"");if(i&&s[i])return s[i];const r=Yo(t.second_name||"");if(r&&s[r])return s[r];const o=Yo(`${t.first_name||""} ${t.second_name||""}`);if(o&&s[o])return s[o];if(i.length>=4){for(const[u,f]of Object.entries(s))if(u.endsWith(i)||i.endsWith(u))return f}return null}async function Yf(){return yh||(yh=zb("odds.json").then(s=>s||{matches:[],teamStrength:{}})),yh}const KA={Arsenal:"ARS","Aston Villa":"AVL",Bournemouth:"BOU",Brentford:"BRE",Brighton:"BHA",Chelsea:"CHE","Crystal Palace":"CRY",Everton:"EVE",Fulham:"FUL",Ipswich:"IPS",Leicester:"LEI",Liverpool:"LIV","Man City":"MCI","Man United":"MUN",Newcastle:"NEW","Nott'm Forest":"NFO",Southampton:"SOU",Tottenham:"TOT","West Ham":"WHU",Wolves:"WOL"},QA=Object.fromEntries(Object.entries(KA).map(([s,t])=>[t,s]));function $A(s,t){const i=QA[t];return!i||!s?.teamStrength?.[i]?null:s.teamStrength[i].strength}function Yo(s){return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z\s]/g,"").trim()}const _y={ATK:{form:.18,ppg:.14,ict:.18,fdr:.14,homeAway:.1,teamStr:.12,availability:.09,bonus:.05},DEF:{form:.2,ppg:.16,ict:.1,fdr:.16,homeAway:.1,teamStr:.14,availability:.09,bonus:.05}};function ZA(s){return s==="GKP"||s==="DEF"?_y.DEF:_y.ATK}function hi(s,t,i){return Math.max(t,Math.min(i,s))}function vy(s){return hi(s/50,0,10)}function JA(s){return hi((5-s)*2.5,0,10)}function eR(s){return s==null||s===""?10:hi(s/10,0,10)}function tR(s,t){if(!t||t<=0)return 5;const i=s/t;return hi(i*3.3,0,10)}function nR(s,t,i){if(!s)return 5;const r=t==="GKP"||t==="DEF";let o;return r?o=i?s.strength_defence_home:s.strength_defence_away:o=i?s.strength_attack_home:s.strength_attack_away,o?hi((o-900)/60,0,10):5}function sR(s){return s?7.5:4.5}function iR(s){return s>=7?"In great form":s>=5?"Decent form":s>=3?"Average form":"Poor form"}function aR(s,t){const i=t||"";return s<=2?`Easy fixture ${i}`:s<=3?`Medium fixture ${i}`:`Tough fixture ${i}`}function rR(s){return s>=7?"High attacking threat":s>=4?"Moderate involvement":"Low attacking involvement"}function lR(s){return s==null||s===""||s>=100?"Fully available":s>=75?"Likely to play":s>=50?"Fitness doubt":s>=25?"Unlikely to play":"Expected to miss"}function gc(s,t,i){const r=ZA(s.position),o=t?.opponent?.includes("(H)")??!1,u=i?.[s.teamId]||null,f=s.appearances||(s.minutes?Math.round(s.minutes/70):0),m=[{name:"form",value:s.form||0,norm:hi(s.form||0,0,10),weight:r.form,label:iR(s.form||0)},{name:"ppg",value:s.pointsPerGame||0,norm:hi((s.pointsPerGame||0)*2,0,10),weight:r.ppg,label:`${(s.pointsPerGame||0).toFixed(1)} pts/game average`},{name:"ict",value:s.ictIndex||0,norm:vy(s.ictIndex||0),weight:r.ict,label:rR(vy(s.ictIndex||0))},{name:"fdr",value:t?.difficulty||3,norm:JA(t?.difficulty||3),weight:r.fdr,label:aR(t?.difficulty||3,t?.opponent)},{name:"homeAway",value:o?1:0,norm:sR(o),weight:r.homeAway,label:o?"Home advantage":"Away match"},{name:"teamStr",value:0,norm:nR(u,s.position,o),weight:r.teamStr,label:`Team ${s.position==="GKP"||s.position==="DEF"?"defence":"attack"} strength`},{name:"availability",value:s.chanceOfPlaying??100,norm:eR(s.chanceOfPlaying),weight:r.availability,label:lR(s.chanceOfPlaying)},{name:"bonus",value:s.bonus||0,norm:tR(s.bonus||0,f),weight:r.bonus,label:`${((s.bonus||0)/Math.max(f,1)).toFixed(1)} bonus/game`}];let g=0;for(const y of m)y.impact=+(y.norm*y.weight).toFixed(2),g+=y.impact;const p=+(g*.85).toFixed(1),b=m.filter(y=>y.impact>.5).sort((y,x)=>x.impact-y.impact).slice(0,3).map(y=>y.label);return{xpts:p,factors:m,topReasons:b}}function fi(s,t,i,r=3){const o=(t||[]).slice(0,r);if(o.length===0){const b=gc(s,{difficulty:3,opponent:"TBD"},i);return{totalXpts:+(b.xpts*r).toFixed(1),perGw:Array(r).fill(b),avgXpts:b.xpts,topReasons:b.topReasons}}const u=o.map(b=>gc(s,b,i)),f=+u.reduce((b,y)=>b+y.xpts,0).toFixed(1),m=+(f/u.length).toFixed(1),g={};for(const b of u)for(const y of b.topReasons)g[y]=(g[y]||0)+1;const p=Object.entries(g).sort((b,y)=>y[1]-b[1]).slice(0,3).map(([b])=>b);return{totalXpts:f,perGw:u,avgXpts:m,topReasons:p}}function Hb(s,t){const i=s.map(r=>{const{totalXpts:o,avgXpts:u,topReasons:f}=fi(r,r.upcomingFixtures,t,3);return{...r,xpts:u,totalXpts3:o,topReasons:f}});return i.sort((r,o)=>o.xpts-r.xpts),{ranked:i,captain:i[0]||null,viceCaptain:i[1]||null}}function yy(s,t,i=3){return s.map(r=>{const{totalXpts:o,avgXpts:u,topReasons:f}=fi(r,r.upcomingFixtures,t,i);return{...r,xpts:u,totalXpts:o,topReasons:f}}).sort((r,o)=>o.xpts-r.xpts)}function vi(s){const t={};for(const m of s.teams)t[m.id]=m;const i={};for(const m of s.element_types)i[m.id]=m.singular_name_short;const r={};for(const m of s.elements)r[m.id]=m;const o={};for(const m of s.events)o[m.id]=m;const u=s.events.find(m=>m.is_current),f=s.events.find(m=>m.is_next);return{teams:t,positionMap:i,players:r,events:o,currentEvent:u,nextEvent:f}}function Oc(s,t,i){const r={},o=s.filter(u=>u.event&&u.event>i&&!u.finished).sort((u,f)=>u.event-f.event);for(const u of o)r[u.team_h]||(r[u.team_h]=[]),r[u.team_h].length<5&&r[u.team_h].push({gw:u.event,opponent:`${t[u.team_a]?.short_name||"?"} (H)`,difficulty:u.team_h_difficulty}),r[u.team_a]||(r[u.team_a]=[]),r[u.team_a].length<5&&r[u.team_a].push({gw:u.event,opponent:`${t[u.team_h]?.short_name||"?"} (A)`,difficulty:u.team_a_difficulty});return r}function oR(s){let t=1;const i=new Set(s.chips.map(r=>r.event));for(const r of s.current){if(i.has(r.event)){t=Math.min(t+1,5);continue}r.event_transfers===0?t=Math.min(t+1,5):r.event_transfers_cost>0?t=1:t=Math.max(1,Math.min(t-r.event_transfers+1,5))}return t}function Gb(s){return{xG:parseFloat(s.expected_goals)||0,xA:parseFloat(s.expected_assists)||0,xGI:parseFloat(s.expected_goal_involvements)||0,xGC:parseFloat(s.expected_goals_conceded)||0,xG90:parseFloat(s.expected_goals_per_90)||0,xA90:parseFloat(s.expected_assists_per_90)||0,xGI90:parseFloat(s.expected_goal_involvements_per_90)||0,ictIndex:parseFloat(s.ict_index)||0,influence:parseFloat(s.influence)||0,creativity:parseFloat(s.creativity)||0,threat:parseFloat(s.threat)||0,pointsPerGame:parseFloat(s.points_per_game)||0,goalsScored:s.goals_scored||0,assists:s.assists||0,cleanSheets:s.clean_sheets||0,minutes:s.minutes||0,bonus:s.bonus||0,bps:s.bps||0,penaltiesOrder:s.penalties_order||null,cornersOrder:s.corners_and_indirect_freekicks_order||null,directFKOrder:s.direct_freekicks_order||null}}function Wf(s){const t=s.cost_change_event||0,i=s.cost_change_start||0,r=s.transfers_in_event||0,o=s.transfers_out_event||0,u=r-o;let f="stable";return u>5e4?f="rising":u>2e4?f="likely-rising":u<-5e4?f="falling":u<-2e4&&(f="likely-falling"),{costChangeEvent:t/10,costChangeStart:i/10,transfersInEvent:r,transfersOutEvent:o,netTransfersEvent:u,transfersIn:s.transfers_in||0,transfersOut:s.transfers_out||0,pricePressure:f,startPrice:(s.now_cost-i)/10}}function Xf(s,t,i,r,o){const u=parseFloat(s.form)||0,f=parseFloat(s.points_per_game)||0,m=parseFloat(s.expected_goal_involvements_per_90)||0,g=parseFloat(s.ict_index)||0,p=s.minutes||0,b=p>0?p/90:1,y=g/Math.max(b,1),x=Math.min(y/10,10);let C=u*.3+f*.25+m*8*.2+x*.15;if(i){const U=Bb(i,s);if(U&&U.games>0){const Y=(U.goals-U.xG)/U.games,$=U.npxG/U.games*(90/(U.time/U.games||90));C+=$*5*.1,C-=Y*.5}}let E=1;if(r&&o){const U=$A(r,o);U!==null?E=1.15-U*.5:E=1+(3-t)*.06}else E=1+(3-t)*.06;return Math.max(1,Math.round(C*E))}async function cR(){const s=Wn(),t=Gf(),i=Ra(),r=Ff(),o=qf(),u=Yf(),f=await s,{teams:m,positionMap:g,players:p,currentEvent:b}=vi(f),y=b?.id||1,[x,C,E,P,U,Y,$]=await Promise.all([t,i,r,Vf(y),Dc(y),o,u]),V={};for(const J of U.elements)V[J.id]=J.stats.total_points;const z=Oc(C,m,y);function F(J){const W=p[J.element],k=m[W.team],q=z[W.team]||[],R=q[0],te=parseFloat(W.form)||0;return{id:W.id,name:W.web_name,position:g[W.element_type],club:k?.name||"Unknown",clubShort:k?.short_name||"???",teamId:W.team,price:W.now_cost/10,totalPoints:W.total_points,gameweekPoints:V[W.id]??W.event_points??0,form:te,upcomingFixtures:q.slice(0,5),upcomingFixture:R?R.opponent:"TBD",fixtureDifficulty:R?R.difficulty:3,isCaptain:J.is_captain,isViceCaptain:J.is_vice_captain,benchOrder:J.position>11?J.position-11:0,ictIndex:parseFloat(W.ict_index)||0,pointsPerGame:parseFloat(W.points_per_game)||0,chanceOfPlaying:W.chance_of_playing_next_round,bonus:W.bonus||0,minutes:W.minutes||0}}const K=P.picks.filter(J=>J.position<=11).map(J=>{const W=p[J.element],k=m[W.team],q=z[W.team]||[],R=q[0],te=parseFloat(W.form)||0,de=Gb(W),N=Wf(W),j=Bb(Y,W),A=j?{xG:j.xG,xA:j.xA,npxG:j.npxG,xGChain:j.xGChain,xGBuildup:j.xGBuildup,shots:j.shots,keyPasses:j.key_passes}:null;return{id:W.id,name:W.web_name,position:g[W.element_type],club:k?.name||"Unknown",clubShort:k?.short_name||"???",price:W.now_cost/10,totalPoints:W.total_points,gameweekPoints:V[W.id]??W.event_points??0,form:te,...de,...N,understat:A,upcomingFixtures:q.slice(0,5),upcomingFixture:R?R.opponent:"TBD",fixtureDifficulty:R?R.difficulty:3,isCaptain:J.is_captain,isViceCaptain:J.is_vice_captain,pointsHistory:Array.from({length:5},()=>Math.max(1,Math.round(te+(Math.random()-.5)*4))),expectedPoints:q.slice(0,5).map(L=>{const ee=L.opponent?.match(/^(\w+)/)?.[1]||null;return Xf(W,L.difficulty,Y,$,ee)})}}),Q=P.picks.filter(J=>J.position>11).sort((J,W)=>J.position-W.position).map(F),se=P.picks.find(J=>J.is_captain),Ce=(se&&V[se.element]||0)*(se?.multiplier||2),we=new Set(E.chips.map(J=>J.name)),re=P.entry_history,_e={totalPoints:re.total_points,teamValue:re.value/10,moneyInBank:re.bank/10,overallRank:re.overall_rank||x.summary_overall_rank||0,gameweekRank:re.rank||0,currentGameweek:y,gameweekPoints:re.points,captainPoints:Ce,averagePoints:b?.average_entry_score||0,highestPoints:b?.highest_score||0,transfers:{made:re.event_transfers,cost:re.event_transfers_cost,available:oR(E)},chips:{wildcard:!we.has("wildcard"),benchBoost:!we.has("bboost"),tripleCaptain:!we.has("3xc"),freeHit:!we.has("freehit")}};return{players:K,bench:Q,summary:_e,teams:m}}async function uR(){const[s,t]=await Promise.all([Wn(),Ff()]),{events:i}=vi(s);return t.current.slice(-7).map(o=>({gw:o.event,points:o.points,average:i[o.event]?.average_entry_score||0,rank:o.overall_rank}))}async function dR(){const[s,t]=await Promise.all([Wn(),Ra()]),{currentEvent:i}=vi(s),r=i?.id||1,o=s.events.filter(m=>m.id>r).slice(0,5);if(o.length===0)return[{gw:r+1,projected:50,difficulty:"Medium"}];const u=s.events.filter(m=>m.finished),f=u.length>0?Math.round(u.reduce((m,g)=>m+(g.average_entry_score||0),0)/u.length):50;return o.map(m=>{const g=t.filter(C=>C.event===m.id),p=g.length>0?g.reduce((C,E)=>C+E.team_h_difficulty+E.team_a_difficulty,0)/(g.length*2):3,b=p<2.5?"Easy":p>3.5?"Hard":"Medium",y=p<3?1.1:p>3?.9:1,x=Math.round(f*y);return{gw:m.id,projected:x,difficulty:b}})}async function hR(){const[s,t,i,r,o]=await Promise.all([Wn(),Gf(),Ra(),qf(),Yf()]),{teams:u,positionMap:f,currentEvent:m}=vi(s),g=m?.id||t.current_event,p=await Vf(g),b=new Set(p.picks.map(E=>E.element)),y=Oc(i,u,g);return{candidates:s.elements.filter(E=>!b.has(E.id)&&E.minutes>0&&E.status==="a").sort((E,P)=>parseFloat(P.form)-parseFloat(E.form)).slice(0,150).map(E=>{const P=u[E.team],U=parseFloat(E.form)||0,Y=y[E.team]||[],$=Gb(E),V=Wf(E);return{id:E.id,name:E.web_name,position:f[E.element_type],club:P?.name||"Unknown",clubShort:P?.short_name||"???",teamId:E.team,price:E.now_cost/10,totalPoints:E.total_points,form:U,...$,...V,selectedByPercent:parseFloat(E.selected_by_percent)||0,upcomingFixtures:Y.slice(0,5),expectedPoints:Y.slice(0,5).map(z=>{const F=z.opponent?.match(/^(\w+)/)?.[1]||null;return Xf(E,z.difficulty,r,o,F)}),ictIndex:parseFloat(E.ict_index)||0,pointsPerGame:parseFloat(E.points_per_game)||0,chanceOfPlaying:E.chance_of_playing_next_round,bonus:E.bonus||0,minutes:E.minutes||0}}),teams:u}}async function fR(){const t=(await Gf()).leagues?.classic||[],i=t.find(o=>o.league_type==="x")||t.find(o=>o.max_entries&&o.max_entries<1e3)||t[0];if(!i)return{name:"No League Found",myPosition:0,totalMembers:0,standings:[]};const r=await YA(i.id);return{name:r.league.name,myPosition:i.entry_rank||0,totalMembers:i.entry_count||r.standings.results.length,standings:r.standings.results.slice(0,10).map((o,u)=>({rank:o.rank||u+1,name:o.entry_name,manager:o.entry===FA()?"You":o.player_name,points:o.total}))}}async function mR(){const[s,t,i,r]=await Promise.all([Wn(),Ra(),qf(),Yf()]),{teams:o,positionMap:u,currentEvent:f}=vi(s),m=f?.id||1,g=t.filter(E=>E.event&&E.event>m&&!E.finished).sort((E,P)=>E.event-P.event||E.kickoff_time?.localeCompare(P.kickoff_time||"")),p=[...new Set(g.map(E=>E.event))].slice(0,5),b={};for(const E of s.events)b[E.id]=E.deadline_time;const y={};for(const E of g)y[E.team_h]||(y[E.team_h]={}),y[E.team_h][E.event]={difficulty:E.team_h_difficulty,opponent:`${o[E.team_a]?.short_name||"?"} (H)`,opponentShort:o[E.team_a]?.short_name||null},y[E.team_a]||(y[E.team_a]={}),y[E.team_a][E.event]={difficulty:E.team_a_difficulty,opponent:`${o[E.team_h]?.short_name||"?"} (A)`,opponentShort:o[E.team_h]?.short_name||null};const x=s.elements.filter(E=>E.minutes>0&&E.status==="a"&&parseFloat(E.form)>0);function C(E){const P=x.filter($=>y[$.team]?.[E]).map($=>{const V=y[$.team][E],z=parseFloat($.form)||0,F=Xf($,V.difficulty,i,r,V.opponentShort);return{id:$.id,name:$.web_name,position:u[$.element_type],club:o[$.team]?.short_name||"???",price:$.now_cost/10,form:z,totalPoints:$.total_points,opponent:V.opponent,difficulty:V.difficulty,score:F}}).sort(($,V)=>V.score-$.score),U=[],Y={};for(const $ of P){const V=Y[$.position]||0;if(V<2&&(U.push($),Y[$.position]=V+1),U.length>=8)break}return U}return p.map(E=>({gw:E,deadline:b[E]||null,matches:g.filter(P=>P.event===E).map(P=>({id:P.id,kickoff:P.kickoff_time,homeTeam:o[P.team_h]?.name||"TBD",homeShort:o[P.team_h]?.short_name||"?",awayTeam:o[P.team_a]?.name||"TBD",awayShort:o[P.team_a]?.short_name||"?",homeDifficulty:P.team_h_difficulty,awayDifficulty:P.team_a_difficulty})),picks:C(E)}))}async function pR(){const[s,t]=await Promise.all([Wn(),Ra()]),{teams:i,positionMap:r,currentEvent:o,nextEvent:u}=vi(s),f=o?.id||1,m=Oc(t,i,f),g=u?.deadline_time||o?.deadline_time||null,p=u?.id||f+1,b=s.elements.filter(U=>U.minutes>0&&U.status==="a").map(U=>{const Y=i[U.team],$=Wf(U),z=(m[U.team]||[])[0];return{id:U.id,name:U.web_name,position:r[U.element_type],club:Y?.name||"Unknown",clubShort:Y?.short_name||"???",price:U.now_cost/10,form:parseFloat(U.form)||0,totalPoints:U.total_points,selectedByPercent:parseFloat(U.selected_by_percent)||0,...$,nextFixture:z?z.opponent:"TBD",nextDifficulty:z?z.difficulty:3}}),y=b.filter(U=>U.pricePressure==="rising"||U.pricePressure==="likely-rising").sort((U,Y)=>Y.netTransfersEvent-U.netTransfersEvent),x=b.filter(U=>U.pricePressure==="falling"||U.pricePressure==="likely-falling").sort((U,Y)=>U.netTransfersEvent-Y.netTransfersEvent),C=b.filter(U=>U.costChangeEvent!==0).sort((U,Y)=>Math.abs(Y.costChangeEvent)-Math.abs(U.costChangeEvent)),E=[...b].filter(U=>U.costChangeStart>0).sort((U,Y)=>Y.costChangeStart-U.costChangeStart).slice(0,10),P=[...b].filter(U=>U.costChangeStart<0).sort((U,Y)=>U.costChangeStart-Y.costChangeStart).slice(0,10);return{rising:y,falling:x,recentChanges:C,biggestRisers:E,biggestFallers:P,currentGw:f,nextGw:p,deadline:g,lastUpdated:new Date().toLocaleTimeString()}}async function gR(){const[s,t,i]=await Promise.all([Wn(),Ff(),Ra()]),{teams:r,positionMap:o,players:u,currentEvent:f}=vi(s),m={};for(const F of t.chips||[])m[F.event]=F.name;const g=new Set((t.chips||[]).filter(F=>F.name==="freehit").map(F=>F.event)),p=t.current.filter(F=>F.event_transfers>0||m[F.event]==="freehit"||m[F.event]==="wildcard");if(p.length===0)return{transfers:[],teams:r,chips:t.chips||[]};const b=f?.id||t.current[t.current.length-1]?.event||1,y=Oc(i,r,b),x=t.current.map(F=>F.event),C={},E=5;for(let F=0;F<x.length;F+=E){const K=x.slice(F,F+E),Q=await Promise.all(K.map(se=>Vf(se).catch(()=>null)));K.forEach((se,me)=>{Q[me]&&(C[se]=Q[me])})}const P=[];for(const F of p){const K=F.event,Q=x.indexOf(K);let se=null;if(m[K]==="freehit")se=Q>0?x[Q-1]:null;else for(let J=Q-1;J>=0;J--)if(!g.has(x[J])){se=x[J];break}if(!se||!C[se]||!C[K])continue;const me=new Set(C[se].picks.map(J=>J.element)),Ce=new Set(C[K].picks.map(J=>J.element)),we=[...Ce].filter(J=>!me.has(J)),re=[...me].filter(J=>!Ce.has(J)),_e=Math.min(we.length,re.length);for(let J=0;J<_e;J++){const W=u[we[J]],k=u[re[J]];!W||!k||P.push({gameweek:K,transferCost:m[K]?0:F.event_transfers_cost,chip:m[K]||null,playerIn:{id:W.id,name:W.web_name,position:o[W.element_type],club:r[W.team]?.short_name||"???",clubFull:r[W.team]?.name||"Unknown",price:W.now_cost/10,teamId:W.team,form:parseFloat(W.form)||0,ictIndex:parseFloat(W.ict_index)||0,pointsPerGame:parseFloat(W.points_per_game)||0,chanceOfPlaying:W.chance_of_playing_next_round,bonus:W.bonus||0,minutes:W.minutes||0,upcomingFixtures:(y[W.team]||[]).slice(0,5)},playerOut:{id:k.id,name:k.web_name,position:o[k.element_type],club:r[k.team]?.short_name||"???",clubFull:r[k.team]?.name||"Unknown",price:k.now_cost/10,teamId:k.team,form:parseFloat(k.form)||0,ictIndex:parseFloat(k.ict_index)||0,pointsPerGame:parseFloat(k.points_per_game)||0,chanceOfPlaying:k.chance_of_playing_next_round,bonus:k.bonus||0,minutes:k.minutes||0,upcomingFixtures:(y[k.team]||[]).slice(0,5)}})}}const U=Math.max(...x),Y=[...x].sort((F,K)=>F-K);for(const F of P){F.endGameweek=U;let K=F.gameweek;const Q=Y.indexOf(F.gameweek);for(let se=Q+1;se<Y.length;se++){const me=Y[se];if(C[me])if(C[me].picks.some(Ce=>Ce.element===F.playerIn.id))K=me;else{F.endGameweek=K;break}}}const $=new Set;for(const F of P)for(let K=F.gameweek;K<=F.endGameweek;K++)$.add(K);const V={},z=[...$].sort((F,K)=>F-K);for(let F=0;F<z.length;F+=E){const K=z.slice(F,F+E),Q=await Promise.all(K.map(se=>Dc(se).catch(()=>null)));K.forEach((se,me)=>{V[se]=Q[me]})}for(const F of P){let K=0,Q=0;const se=[];for(let me=F.gameweek;me<=F.endGameweek;me++){const Ce=V[me];if(!Ce)continue;const we=Ce.elements.find(W=>W.id===F.playerIn.id),re=Ce.elements.find(W=>W.id===F.playerOut.id),_e=we?.stats?.total_points||0,J=re?.stats?.total_points||0;K+=_e,Q+=J,se.push({gw:me,inPts:_e,outPts:J,diff:_e-J})}F.playerIn.pointsSinceTransfer=K,F.playerOut.pointsSinceTransfer=Q,F.netGain=K-Q,F.gwBreakdown=se,F.gameweeksCompared=se.length}return P.sort((F,K)=>K.gameweek-F.gameweek),{transfers:P,teams:r,chips:t.chips||[]}}function _R(s,t,i,r){const o=fi(s,s.upcomingFixtures,r,i),u=fi(t,t.upcomingFixtures,r,i),f=o.totalXpts,m=u.totalXpts,g=+(m-f).toFixed(1),p=(t.form||0)-(s.form||0),b=(t.price||0)-(s.price||0),y=t.xGI90||t.xGI||0,x=s.xGI90||s.xGI||0,C=y-x,E=t.upcomingFixtures?.length?t.upcomingFixtures.slice(0,i).reduce((K,Q)=>K+Q.difficulty,0)/i:3,U=(s.upcomingFixtures?.length?s.upcomingFixtures.slice(0,i).reduce((K,Q)=>K+Q.difficulty,0)/i:s.fixtureDifficulty||3)-E;let Y;Math.abs(g)<=2&&Math.abs(p)<1?Y="Low":Math.abs(g)>5||E>3.5?Y="High":Y="Medium";let $;if(g>3&&p>=0||g>3&&C>.1?$="Strong Buy":g<-2||p<-1.5?$="Avoid":$="Neutral",$==="Neutral"){const K=t.pricePressure==="rising"||t.pricePressure==="likely-rising",Q=s.pricePressure==="falling"||s.pricePressure==="likely-falling";K&&Q&&g>=0&&($="Strong Buy")}y>0&&x>0&&(`${t.name}`,C>0,`${C.toFixed(2)}${s.name}`),t.pricePressure==="rising"||t.pricePressure==="likely-rising"?`${t.name}${(t.netTransfersEvent||0).toLocaleString()}`:(s.pricePressure==="falling"||s.pricePressure==="likely-falling")&&`${s.name}`;const V=u.topReasons,z=o.topReasons,F={"Strong Buy":`${t.name} (${m} xPts) is projected to outscore ${s.name} (${f} xPts) over ${i} GW${i>1?"s":""}. Key factors: ${V.join(", ").toLowerCase()}.`,Neutral:`Sideways move. ${t.name} (${m} xPts) vs ${s.name} (${f} xPts) over ${i} GW${i>1?"s":""}. Consider saving the transfer.`,Avoid:`${s.name} (${f} xPts) is the better option. Key: ${z.join(", ").toLowerCase()}.`};return{pointsDiff:g,formDiff:p.toFixed(1),priceDiff:b.toFixed(1),fixtureDiff:U.toFixed(1),xgiDiff:C.toFixed(2),riskLevel:Y,recommendation:$,explanation:F[$],outProjected:f,inProjected:m,outReasons:z,inReasons:V,avgInDifficulty:E.toFixed(1)}}function yi({message:s="Loading..."}){return c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:s})]})}function Oa({message:s,onRetry:t}){return c.jsxs("div",{className:"error-container",children:[c.jsx("div",{className:"error-icon",children:"!"}),c.jsx("p",{children:s}),t&&c.jsx("button",{className:"btn btn-primary",onClick:t,children:"Try Again"})]})}const by={GKP:0,DEF:1,MID:2,FWD:3};function vR({player:s}){if(!s||!s.pricePressure||s.pricePressure==="stable")return null;const i={rising:{arrow:"",label:"Rising",className:"price-rising"},"likely-rising":{arrow:"",label:"Likely rising",className:"price-likely-rising"},falling:{arrow:"",label:"Falling",className:"price-falling"},"likely-falling":{arrow:"",label:"Likely falling",className:"price-likely-falling"}}[s.pricePressure];return i?c.jsx("span",{className:`price-indicator ${i.className}`,title:i.label,children:i.arrow}):null}function yR({player:s,isExpanded:t,onToggle:i}){const r=s.form>=7?"positive":s.form<=4?"negative":"",o=s.upcomingFixtures||[];return c.jsxs("div",{className:`player-card ${t?"expanded":""}`,onClick:i,children:[c.jsxs("div",{className:"player-card-header",children:[c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),c.jsx("span",{className:"player-club",children:s.clubShort}),s.isCaptain&&c.jsx("span",{className:"badge captain",children:"C"}),s.isViceCaptain&&c.jsx("span",{className:"badge vice-captain",children:"V"})]}),c.jsx("div",{className:"player-name",children:s.name}),c.jsx("div",{className:"player-club-full",children:s.club}),c.jsxs("div",{className:"player-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Price"}),c.jsxs("span",{className:"stat-value",children:["",s.price,"m",c.jsx(vR,{player:s})]})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Points"}),c.jsx("span",{className:"stat-value",children:s.totalPoints})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Form"}),c.jsx("span",{className:`stat-value ${r}`,children:s.form})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"GW Pts"}),c.jsx("span",{className:"stat-value highlight",children:s.gameweekPoints})]})]}),c.jsxs("div",{className:"player-fixture",children:[c.jsx("span",{className:"fixture-label",children:"Next:"}),c.jsx("span",{className:`fixture-value fdr-${s.fixtureDifficulty}`,children:s.upcomingFixture}),c.jsx("span",{className:`expand-arrow ${t?"open":""}`,children:c.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),t&&c.jsxs("div",{className:"player-expanded",onClick:u=>u.stopPropagation(),children:[o.length>0&&c.jsxs("div",{className:"expanded-fixtures",children:[c.jsx("div",{className:"expanded-section-title",children:"Upcoming Fixtures"}),c.jsx("div",{className:"expanded-fixture-list",children:o.map(u=>c.jsxs("div",{className:"expanded-fixture-row",children:[c.jsxs("span",{className:"ef-gw",children:["GW",u.gw]}),c.jsx("span",{className:`ef-opponent fdr-${u.difficulty}`,children:u.opponent}),c.jsx("span",{className:"ef-diff-dots",children:[1,2,3,4,5].map(f=>c.jsx("span",{className:`ef-dot ${f<=u.difficulty?"filled":""}`},f))})]},u.gw))})]}),c.jsxs("div",{className:"expanded-stats",children:[c.jsx("div",{className:"expanded-section-title",children:"Season Stats"}),c.jsxs("div",{className:"expanded-stats-grid",children:[c.jsxs("div",{className:"es-item",children:[c.jsx("span",{className:"es-value",children:s.totalPoints}),c.jsx("span",{className:"es-label",children:"Total Pts"})]}),c.jsxs("div",{className:"es-item",children:[c.jsx("span",{className:"es-value",children:s.gameweekPoints}),c.jsx("span",{className:"es-label",children:"GW Pts"})]}),c.jsxs("div",{className:"es-item",children:[c.jsx("span",{className:`es-value ${r}`,children:s.form}),c.jsx("span",{className:"es-label",children:"Form"})]}),c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:"es-value",children:["",s.price,"m"]}),c.jsx("span",{className:"es-label",children:"Price"})]})]})]}),(s.costChangeEvent!==void 0&&s.costChangeEvent!==0||s.pricePressure&&s.pricePressure!=="stable")&&c.jsxs("div",{className:"expanded-price-info",children:[c.jsx("div",{className:"expanded-section-title",children:"Price Movement"}),c.jsxs("div",{className:"expanded-stats-grid",children:[c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:`es-value ${s.costChangeStart>0?"positive":s.costChangeStart<0?"negative":""}`,children:[s.costChangeStart>0?"+":"",(s.costChangeStart||0).toFixed(1)]}),c.jsx("span",{className:"es-label",children:"Season"})]}),c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:`es-value ${s.costChangeEvent>0?"positive":s.costChangeEvent<0?"negative":""}`,children:[s.costChangeEvent>0?"+":"",(s.costChangeEvent||0).toFixed(1)]}),c.jsx("span",{className:"es-label",children:"This GW"})]}),c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:"es-value",children:[((s.netTransfersEvent||0)/1e3).toFixed(0),"k"]}),c.jsx("span",{className:"es-label",children:"Net Xfers"})]}),c.jsxs("div",{className:"es-item",children:[c.jsxs("span",{className:"es-value",children:["",(s.startPrice||s.price).toFixed(1),"m"]}),c.jsx("span",{className:"es-label",children:"Start Price"})]})]})]})]})]})}function bR({summary:s}){return c.jsxs("div",{className:"team-summary",children:[c.jsxs("h3",{children:["Team Summary  GW",s.currentGameweek]}),c.jsxs("div",{className:"summary-grid",children:[c.jsxs("div",{className:"summary-item featured",children:[c.jsx("span",{className:"summary-value",children:s.gameweekPoints}),c.jsx("span",{className:"summary-label",children:"GW Points"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"summary-value",children:s.totalPoints}),c.jsx("span",{className:"summary-label",children:"Total Points"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsxs("span",{className:"summary-value",children:["",s.teamValue,"m"]}),c.jsx("span",{className:"summary-label",children:"Team Value"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsxs("span",{className:"summary-value",children:["",s.moneyInBank,"m"]}),c.jsx("span",{className:"summary-label",children:"In Bank"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"summary-value",children:s.overallRank.toLocaleString()}),c.jsx("span",{className:"summary-label",children:"Overall Rank"})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"summary-value",children:s.transfers.available}),c.jsx("span",{className:"summary-label",children:"Free Transfers"})]})]}),c.jsxs("div",{className:"chips-section",children:[c.jsx("span",{className:"chips-label",children:"Chips Available:"}),c.jsxs("div",{className:"chips-list",children:[s.chips.wildcard&&c.jsx("span",{className:"chip available",children:"Wildcard"}),s.chips.benchBoost&&c.jsx("span",{className:"chip available",children:"Bench Boost"}),s.chips.tripleCaptain&&c.jsx("span",{className:"chip available",children:"Triple Captain"}),s.chips.freeHit&&c.jsx("span",{className:"chip available",children:"Free Hit"}),!s.chips.tripleCaptain&&c.jsx("span",{className:"chip used",children:"Triple Captain"})]})]})]})}function xR({teamData:s,teamLoading:t,teamError:i,teamReload:r}){const[o,u]=Z.useState(null);if(t)return c.jsx(yi,{message:"Loading your team..."});if(i)return c.jsx(Oa,{message:i,onRetry:r});const{players:f,summary:m}=s,g=[...f].sort((p,b)=>by[p.position]-by[b.position]);return c.jsxs("div",{className:"my-team",children:[c.jsx(bR,{summary:m}),c.jsxs("div",{className:"players-section",children:[c.jsx("h3",{children:"Your Squad"}),c.jsx("div",{className:"players-grid",children:g.map(p=>c.jsx(yR,{player:p,isExpanded:o===p.id,onToggle:()=>u(o===p.id?null:p.id)},p.id))})]})]})}function SR({data:s,maxValue:t,labelKey:i,valueKey:r,compareKey:o}){return c.jsx("div",{className:"bar-chart",children:s.map((u,f)=>c.jsxs("div",{className:"bar-group",children:[c.jsxs("div",{className:"bar-container",children:[o&&c.jsx("div",{className:"bar bar-compare",style:{height:`${u[o]/t*100}%`},title:`Avg: ${u[o]}`}),c.jsx("div",{className:"bar bar-primary",style:{height:`${u[r]/t*100}%`},title:`${u[r]} pts`,children:c.jsx("span",{className:"bar-value",children:u[r]})})]}),c.jsx("span",{className:"bar-label",children:u[i]})]},f))})}function NR({projections:s}){return c.jsxs("div",{className:"projections-table",children:[c.jsxs("div",{className:"table-header",children:[c.jsx("span",{children:"GW"}),c.jsx("span",{children:"Projected"}),c.jsx("span",{children:"Difficulty"})]}),s.map(t=>c.jsxs("div",{className:"table-row",children:[c.jsxs("span",{children:["GW",t.gw]}),c.jsx("span",{className:"projected-value",children:t.projected}),c.jsx("span",{className:`difficulty difficulty-${t.difficulty.toLowerCase()}`,children:t.difficulty})]},t.gw))]})}function ER({league:s}){return c.jsxs("div",{className:"league-standings",children:[c.jsxs("div",{className:"table-header league-header",children:[c.jsx("span",{children:"#"}),c.jsx("span",{children:"Team"}),c.jsx("span",{children:"Pts"})]}),s.standings.map(t=>c.jsxs("div",{className:`table-row league-row ${t.manager==="You"?"my-row":""}`,children:[c.jsx("span",{className:"rank",children:t.rank}),c.jsxs("span",{className:"team-name",children:[t.name,c.jsx("small",{children:t.manager})]}),c.jsx("span",{className:"league-points",children:t.points})]},t.rank))]})}function TR({teamData:s,teamLoading:t,teamError:i,teamReload:r}){const{data:o,loading:u,error:f,reload:m}=Rs(uR),{data:g,loading:p,error:b}=Rs(dR),{data:y,loading:x,error:C}=Rs(fR),E=u||p||t||x,P=f||b||i||C;if(E)return c.jsx(yi,{message:"Loading performance data..."});if(P)return c.jsx(Oa,{message:P,onRetry:m});const{summary:U}=s,Y=Math.max(...o.map(F=>Math.max(F.points,F.average)))+10,$=o.reduce((F,K)=>F+K.points,0),V=o.reduce((F,K)=>F+K.average,0),z=$-V;return c.jsxs("div",{className:"points-performance",children:[c.jsxs("div",{className:"metrics-row",children:[c.jsxs("div",{className:"metric-card featured",children:[c.jsx("span",{className:"metric-value",children:U.gameweekPoints}),c.jsxs("span",{className:"metric-label",children:["GW",U.currentGameweek," Points"]})]}),c.jsxs("div",{className:"metric-card",children:[c.jsx("span",{className:"metric-value",children:U.totalPoints}),c.jsx("span",{className:"metric-label",children:"Total Points"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsx("span",{className:"metric-value",children:U.captainPoints}),c.jsx("span",{className:"metric-label",children:"Captain Bonus"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsxs("span",{className:`metric-value ${z>0?"positive":"negative"}`,children:[z>0?"+":"",z]}),c.jsx("span",{className:"metric-label",children:"vs League Avg"})]})]}),c.jsxs("div",{className:"panels-grid",children:[c.jsxs("div",{className:"panel",children:[c.jsx("h3",{children:"Gameweek Trend"}),c.jsxs("div",{className:"chart-legend",children:[c.jsxs("span",{className:"legend-item",children:[c.jsx("span",{className:"legend-dot primary"})," You"]}),c.jsxs("span",{className:"legend-item",children:[c.jsx("span",{className:"legend-dot compare"})," Average"]})]}),c.jsx(SR,{data:o,maxValue:Y,labelKey:"gw",valueKey:"points",compareKey:"average"})]}),c.jsxs("div",{className:"panel",children:[c.jsx("h3",{children:"Upcoming Projections"}),c.jsx(NR,{projections:g})]}),c.jsxs("div",{className:"panel",children:[c.jsx("h3",{children:y.name}),c.jsx(ER,{league:y})]}),c.jsxs("div",{className:"panel",children:[c.jsx("h3",{children:"Rank Progression"}),c.jsx("div",{className:"rank-trend",children:o.map((F,K)=>{const se=(K>0?o[K-1].rank:F.rank)-F.rank;return c.jsxs("div",{className:"rank-item",children:[c.jsxs("span",{className:"rank-gw",children:["GW",F.gw]}),c.jsx("span",{className:"rank-number",children:F.rank.toLocaleString()}),c.jsx("span",{className:`rank-change ${se>0?"positive":se<0?"negative":""}`,children:se>0?`+${se.toLocaleString()}`:se<0?se.toLocaleString():"-"})]},F.gw)})})]})]})]})}const CR=["All","GKP","DEF","MID","FWD"],wR=[{value:"xpts",label:"xPts"},{value:"form",label:"Form"},{value:"totalPoints",label:"Total Pts"},{value:"price-asc",label:"Price (low)"},{value:"price-desc",label:"Price (high)"},{value:"selectedByPercent",label:"Ownership %"},{value:"netTransfersEvent",label:"Transfer Activity"}];function xy({label:s,players:t,selected:i,onChange:r,disabledId:o,groups:u}){return c.jsxs("div",{className:"selector",children:[c.jsx("label",{children:s}),c.jsxs("select",{value:i||"",onChange:f=>r(Number(f.target.value)||null),children:[c.jsx("option",{value:"",children:"Select a player..."}),u?u.map(f=>c.jsx("optgroup",{label:f.label,children:f.players.filter(m=>m.id!==o).map(m=>c.jsxs("option",{value:m.id,children:[m.name," (",m.position,") - ",m.clubShort," - ",m.price,"m"]},m.id))},f.label)):t.filter(f=>f.id!==o).map(f=>c.jsxs("option",{value:f.id,children:[f.name," (",f.position,") - ",f.clubShort," - ",f.price,"m"]},f.id))]})]})}function jR({player:s}){const t=s?.pricePressure;if(!t||t==="stable")return c.jsxs("span",{children:["",s.price,"m"]});const i=t.includes("rising"),r=i?"":"",o=i?"positive":"negative";return c.jsxs("span",{children:["",s.price,"m ",c.jsx("span",{className:o,style:{fontSize:"0.65rem"},children:r})]})}function Sy({player:s,label:t,teams:i}){const r=Z.useMemo(()=>s?fi(s,s.upcomingFixtures,i,3):null,[s,i]);if(!s)return null;const o=s.upcomingFixtures?.[0];return c.jsxs("div",{className:"player-stat-card",children:[c.jsxs("div",{className:"stat-card-header",children:[c.jsx("span",{className:"stat-card-label",children:t}),c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position})]}),c.jsx("div",{className:"stat-card-name",children:s.name}),c.jsx("div",{className:"stat-card-club",children:s.club}),c.jsxs("div",{className:"stat-card-stats",children:[c.jsxs("div",{className:"stat-card-item",children:[c.jsx("span",{className:"sc-value",children:s.totalPoints}),c.jsx("span",{className:"sc-label",children:"Pts"})]}),c.jsxs("div",{className:"stat-card-item",children:[c.jsx("span",{className:"sc-value",children:s.form}),c.jsx("span",{className:"sc-label",children:"Form"})]}),c.jsxs("div",{className:"stat-card-item",children:[c.jsx("span",{className:"sc-value",children:c.jsx(jR,{player:s})}),c.jsx("span",{className:"sc-label",children:"Price"})]}),c.jsxs("div",{className:"stat-card-item",children:[r?c.jsx("span",{className:"sc-value trade-xpts-value",children:r.avgXpts}):c.jsx("span",{className:"sc-value",children:"-"}),c.jsx("span",{className:"sc-label",children:"xPts"})]}),c.jsxs("div",{className:"stat-card-item",children:[o?c.jsx("span",{className:`sc-value fixture-badge fdr-${o.difficulty}`,children:o.opponent}):c.jsx("span",{className:"sc-value",children:"-"}),c.jsx("span",{className:"sc-label",children:"Next"})]})]}),r?.topReasons?.length>0&&c.jsx("div",{className:"trade-xpts-reasons",children:r.topReasons.map((u,f)=>c.jsx("span",{className:"trade-reason-chip",children:u},f))})]})}function AR({playerOut:s,playerIn:t,gameweeks:i}){const r=s.upcomingFixtures?.slice(0,i)||[],o=t.upcomingFixtures?.slice(0,i)||[],u=[...new Set([...r.map(g=>g.gw),...o.map(g=>g.gw)])].sort((g,p)=>g-p),f=Object.fromEntries(r.map(g=>[g.gw,g])),m=Object.fromEntries(o.map(g=>[g.gw,g]));return c.jsxs("div",{className:"fixture-comparison",children:[c.jsx("h4",{children:"Fixture Comparison"}),c.jsxs("div",{className:"fixture-table",children:[c.jsxs("div",{className:"fixture-row header three-col",children:[c.jsx("span",{children:s.name}),c.jsx("span",{children:"GW"}),c.jsx("span",{children:t.name})]}),u.map(g=>{const p=f[g],b=m[g];return c.jsxs("div",{className:"fixture-row three-col",children:[c.jsx("span",{className:p?`fixture-badge fdr-${p.difficulty}`:"fixture-blank",children:p?p.opponent:"-"}),c.jsxs("span",{className:"fixture-gw",children:["GW",g]}),c.jsx("span",{className:b?`fixture-badge fdr-${b.difficulty}`:"fixture-blank",children:b?b.opponent:"-"})]},g)})]})]})}function RR({result:s,playerOut:t,playerIn:i}){const r=s.recommendation==="Strong Buy"?"strong-buy":s.recommendation==="Avoid"?"avoid":"neutral";return c.jsxs("div",{className:"trade-result",children:[c.jsx("div",{className:`recommendation-badge ${r}`,children:s.recommendation}),c.jsxs("div",{className:"result-metrics",children:[c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Projected xPts Diff"}),c.jsxs("span",{className:`result-value ${s.pointsDiff>0?"positive":s.pointsDiff<0?"negative":""}`,children:[s.pointsDiff>0?"+":"",s.pointsDiff]})]}),c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Form Comparison"}),c.jsxs("span",{className:`result-value ${Number(s.formDiff)>0?"positive":Number(s.formDiff)<0?"negative":""}`,children:[Number(s.formDiff)>0?"+":"",s.formDiff]})]}),c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Price Impact"}),c.jsxs("span",{className:`result-value ${Number(s.priceDiff)<0?"positive":Number(s.priceDiff)>0?"negative":""}`,children:[Number(s.priceDiff)>0?"+":"","",s.priceDiff,"m"]})]}),c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Fixture Swing"}),c.jsxs("span",{className:`result-value ${Number(s.fixtureDiff)>0?"positive":Number(s.fixtureDiff)<0?"negative":""}`,children:[Number(s.fixtureDiff)>0?"+":"",s.fixtureDiff]})]}),c.jsxs("div",{className:"result-metric",children:[c.jsx("span",{className:"result-label",children:"Risk Rating"}),c.jsx("span",{className:`risk-badge risk-${s.riskLevel.toLowerCase()}`,children:s.riskLevel})]})]}),(i.pricePressure==="rising"||i.pricePressure==="likely-rising")&&c.jsxs("div",{className:"urgency-alert urgency-rising",children:[c.jsx("span",{className:"urgency-icon",children:""}),c.jsxs("span",{className:"urgency-text",children:[i.name," has ",(i.netTransfersEvent||0).toLocaleString()," net transfers in this GW",i.pricePressure==="rising"?"  price rise imminent, act now!":"  trending toward a price rise."]})]}),(t.pricePressure==="falling"||t.pricePressure==="likely-falling")&&c.jsxs("div",{className:"urgency-alert urgency-falling",children:[c.jsx("span",{className:"urgency-icon",children:""}),c.jsxs("span",{className:"urgency-text",children:[t.name," is losing ",Math.abs(t.netTransfersEvent||0).toLocaleString()," net transfers",t.pricePressure==="falling"?"  price drop imminent, sell before value loss!":"  trending toward a price drop."]})]}),c.jsxs("div",{className:"points-projection",children:[c.jsxs("div",{className:"projection-bar",children:[c.jsx("span",{className:"proj-label",children:t.name}),c.jsx("div",{className:"proj-track",children:c.jsxs("div",{className:"proj-fill out",style:{width:`${s.outProjected/Math.max(s.outProjected,s.inProjected)*100}%`},children:[s.outProjected," xPts"]})})]}),c.jsxs("div",{className:"projection-bar",children:[c.jsx("span",{className:"proj-label",children:i.name}),c.jsx("div",{className:"proj-track",children:c.jsxs("div",{className:"proj-fill in",style:{width:`${s.inProjected/Math.max(s.outProjected,s.inProjected)*100}%`},children:[s.inProjected," xPts"]})})]})]}),(s.inReasons?.length>0||s.outReasons?.length>0)&&c.jsxs("div",{className:"trade-reasons-section",children:[s.inReasons?.length>0&&c.jsxs("div",{className:"trade-reasons-group",children:[c.jsx("span",{className:"trade-reasons-label",children:i.name}),c.jsx("div",{className:"trade-reasons-chips",children:s.inReasons.map((o,u)=>c.jsx("span",{className:"trade-reason-chip positive",children:o},u))})]}),s.outReasons?.length>0&&c.jsxs("div",{className:"trade-reasons-group",children:[c.jsx("span",{className:"trade-reasons-label",children:t.name}),c.jsx("div",{className:"trade-reasons-chips",children:s.outReasons.map((o,u)=>c.jsx("span",{className:"trade-reason-chip",children:o},u))})]})]}),c.jsxs("div",{className:"ai-explanation",children:[c.jsx("div",{className:"explanation-header",children:"Analysis"}),c.jsx("p",{children:s.explanation})]})]})}function DR({uid:s}){const[t,i]=Z.useState([]),[r,o]=Z.useState(!0),[u,f]=Z.useState(!1),[m,g]=Z.useState(null),p=Z.useCallback(async()=>{o(!0);try{const[C,E]=await Promise.all([di(en(tn,`users/${s}/tradeAnalyses`)),Wn()]),P=E.events.find(V=>V.is_current)?.id||1;g(P);const U=C.val();if(!U){i([]);return}const Y=Object.entries(U).map(([V,z])=>({key:V,...z}));Y.sort((V,z)=>new Date(z.savedAt)-new Date(V.savedAt)),i(Y);const $=Y.filter(V=>!V.outcome&&P>V.gameweek+V.gameweeksToTrack);if($.length>0){f(!0),await OR($,P,s);const z=(await di(en(tn,`users/${s}/tradeAnalyses`))).val();if(z){const F=Object.entries(z).map(([K,Q])=>({key:K,...Q})).sort((K,Q)=>new Date(Q.savedAt)-new Date(K.savedAt));i(F)}f(!1)}}catch(C){console.error("Failed to load history:",C)}finally{o(!1)}},[s]);Z.useEffect(()=>{p()},[p]);async function b(C){await wA(en(tn,`users/${s}/tradeAnalyses/${C}`)),i(E=>E.filter(P=>P.key!==C))}if(r)return c.jsx(yi,{message:"Loading saved analyses..."});if(t.length===0)return c.jsxs("div",{className:"ta-history-empty",children:[c.jsx("div",{className:"placeholder-icon",children:""}),c.jsx("p",{children:"No saved analyses yet"}),c.jsx("p",{className:"ta-history-hint",children:'Analyze a transfer and click "Save Analysis" to track its accuracy over time.'})]});const y=t.filter(C=>C.outcome),x=y.filter(C=>C.outcome?.verdict==="correct").length;return c.jsxs("div",{className:"ta-history",children:[u&&c.jsx("p",{className:"ta-resolving",children:"Calculating outcomes..."}),y.length>0&&c.jsxs("div",{className:"ta-history-stats",children:[c.jsxs("div",{className:"ta-hstat",children:[c.jsx("span",{className:"ta-hstat-num",children:t.length}),c.jsx("span",{className:"ta-hstat-label",children:"Saved"})]}),c.jsxs("div",{className:"ta-hstat",children:[c.jsx("span",{className:"ta-hstat-num",children:y.length}),c.jsx("span",{className:"ta-hstat-label",children:"Completed"})]}),c.jsxs("div",{className:"ta-hstat",children:[c.jsx("span",{className:"ta-hstat-num ta-hstat-pos",children:x}),c.jsx("span",{className:"ta-hstat-label",children:"Correct"})]}),c.jsxs("div",{className:"ta-hstat",children:[c.jsx("span",{className:"ta-hstat-num ta-hstat-neg",children:y.length-x}),c.jsx("span",{className:"ta-hstat-label",children:"Wrong"})]}),c.jsxs("div",{className:"ta-hstat",children:[c.jsxs("span",{className:"ta-hstat-num",children:[y.length>0?Math.round(x/y.length*100):0,"%"]}),c.jsx("span",{className:"ta-hstat-label",children:"Accuracy"})]})]}),c.jsx("div",{className:"ta-history-list",children:t.map(C=>c.jsx(IR,{entry:C,currentGw:m,onDelete:()=>b(C.key)},C.key))})]})}async function OR(s,t,i){const r=new Set;for(const m of s){const g=m.gameweek+1,p=m.gameweek+m.gameweeksToTrack;for(let b=g;b<=Math.min(p,t);b++)r.add(b)}const o={},u=[...r],f=5;for(let m=0;m<u.length;m+=f){const g=u.slice(m,m+f),p=await Promise.all(g.map(b=>Dc(b).catch(()=>null)));g.forEach((b,y)=>{p[y]&&(o[b]=p[y])})}for(const m of s){const g=m.gameweek+1,p=m.gameweek+m.gameweeksToTrack;let b=0,y=0;const x=[];for(let U=g;U<=p;U++){const Y=o[U];if(!Y)continue;const $=Y.elements.find(K=>K.id===m.playerIn.id),V=Y.elements.find(K=>K.id===m.playerOut.id),z=$?.stats?.total_points||0,F=V?.stats?.total_points||0;b+=z,y+=F,x.push({gw:U,inPts:z,outPts:F})}const C=m.analysis.recommendation;let E;C==="Strong Buy"?E=b>=y?"correct":"wrong":C==="Avoid"?E=y>=b?"correct":"wrong":E=b>=y?"correct":"wrong";const P={inActual:b,outActual:y,verdict:E,gwBreakdown:x};await xa(en(tn,`users/${i}/tradeAnalyses/${m.key}/outcome`),P)}}function IR({entry:s,currentGw:t,onDelete:i}){const r=s,o=r.gameweek+r.gameweeksToTrack,u=!r.outcome&&t<=o,f=u?o-t+1:0,m=r.analysis.recommendation==="Strong Buy"?"strong-buy":r.analysis.recommendation==="Avoid"?"avoid":"neutral",g=r.outcome?.verdict==="correct"?"ta-verdict-correct":"ta-verdict-wrong",p=new Date(r.savedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short"});return c.jsxs("div",{className:`ta-hcard ${r.outcome?g:"ta-verdict-pending"}`,children:[c.jsxs("div",{className:"ta-hcard-top",children:[c.jsxs("div",{className:"ta-hcard-meta",children:[c.jsxs("span",{className:"ta-hcard-date",children:[p,"  GW",r.gameweek]}),c.jsxs("span",{className:"ta-hcard-tracking",children:[r.gameweeksToTrack," GW window"]})]}),c.jsxs("div",{className:"ta-hcard-actions",children:[c.jsx("span",{className:`recommendation-badge ${m}`,children:r.analysis.recommendation}),c.jsx("button",{className:"ta-hcard-delete",onClick:i,title:"Delete",children:""})]})]}),c.jsxs("div",{className:"ta-hcard-players",children:[c.jsxs("div",{className:"ta-hcard-player ta-hcard-out",children:[c.jsx("span",{className:"ta-hcard-dir",children:"OUT"}),c.jsx("span",{className:`position-badge position-${r.playerOut.position}`,children:r.playerOut.position}),c.jsx("span",{className:"ta-hcard-name",children:r.playerOut.name}),c.jsx("span",{className:"ta-hcard-club",children:r.playerOut.clubShort})]}),c.jsx("span",{className:"ta-hcard-arrow",children:""}),c.jsxs("div",{className:"ta-hcard-player ta-hcard-in",children:[c.jsx("span",{className:"ta-hcard-dir",children:"IN"}),c.jsx("span",{className:`position-badge position-${r.playerIn.position}`,children:r.playerIn.position}),c.jsx("span",{className:"ta-hcard-name",children:r.playerIn.name}),c.jsx("span",{className:"ta-hcard-club",children:r.playerIn.clubShort})]})]}),c.jsxs("div",{className:"ta-hcard-comparison",children:[c.jsxs("div",{className:"ta-hcard-col",children:[c.jsx("span",{className:"ta-hcard-col-label",children:"Projected"}),c.jsxs("div",{className:"ta-hcard-pts-row",children:[c.jsxs("span",{className:"ta-hcard-pts",children:[r.analysis.outProjected," xPts"]}),c.jsx("span",{className:"ta-hcard-vs",children:"vs"}),c.jsxs("span",{className:"ta-hcard-pts",children:[r.analysis.inProjected," xPts"]})]}),c.jsxs("span",{className:`ta-hcard-diff ${r.analysis.pointsDiff>0?"positive":r.analysis.pointsDiff<0?"negative":""}`,children:[r.analysis.pointsDiff>0?"+":"",r.analysis.pointsDiff," diff"]})]}),r.outcome?c.jsxs("div",{className:"ta-hcard-col",children:[c.jsx("span",{className:"ta-hcard-col-label",children:"Actual"}),c.jsxs("div",{className:"ta-hcard-pts-row",children:[c.jsxs("span",{className:"ta-hcard-pts",children:[r.outcome.outActual," pts"]}),c.jsx("span",{className:"ta-hcard-vs",children:"vs"}),c.jsxs("span",{className:"ta-hcard-pts",children:[r.outcome.inActual," pts"]})]}),c.jsxs("span",{className:`ta-hcard-diff ${r.outcome.inActual-r.outcome.outActual>0?"positive":r.outcome.inActual-r.outcome.outActual<0?"negative":""}`,children:[r.outcome.inActual-r.outcome.outActual>0?"+":"",r.outcome.inActual-r.outcome.outActual," diff"]})]}):c.jsxs("div",{className:"ta-hcard-col ta-hcard-pending",children:[c.jsx("span",{className:"ta-hcard-col-label",children:"Actual"}),c.jsx("span",{className:"ta-hcard-pending-text",children:u?`${f} GW${f>1?"s":""} left`:"Resolving..."})]})]}),r.outcome&&c.jsx("div",{className:`ta-hcard-verdict ${g}`,children:r.outcome.verdict==="correct"?"Prediction Correct":"Prediction Wrong"}),r.outcome?.gwBreakdown?.length>0&&c.jsx("div",{className:"ta-hcard-breakdown",children:r.outcome.gwBreakdown.map(b=>c.jsxs("div",{className:"ta-hcard-gw",children:[c.jsxs("span",{className:"ta-hcard-gw-label",children:["GW",b.gw]}),c.jsx("span",{className:b.outPts>b.inPts?"negative":b.inPts>b.outPts?"positive":"",children:b.outPts}),c.jsx("span",{className:"ta-hcard-gw-sep",children:"vs"}),c.jsx("span",{className:b.inPts>b.outPts?"positive":b.outPts>b.inPts?"negative":"",children:b.inPts})]},b.gw))})]})}function kR({picks:s,onSelect:t}){return!s||s.length===0?null:c.jsxs("div",{className:"trade-top-picks",children:[c.jsx("h4",{children:"Top Picks by xPts"}),c.jsx("div",{className:"top-picks-grid",children:s.map(i=>c.jsxs("button",{className:"top-pick-card",onClick:()=>t(i.id),children:[c.jsxs("div",{className:"top-pick-header",children:[c.jsx("span",{className:`position-badge position-${i.position}`,children:i.position}),c.jsxs("span",{className:"top-pick-xpts",children:[i.xpts," xPts"]})]}),c.jsx("div",{className:"top-pick-name",children:i.name}),c.jsxs("div",{className:"top-pick-meta",children:[i.clubShort,"  ",i.price,"m  ",i.form," form"]}),i.topReasons?.length>0&&c.jsx("div",{className:"top-pick-reasons",children:i.topReasons.slice(0,2).map((r,o)=>c.jsx("span",{className:"trade-reason-chip small",children:r},o))})]},i.id))})]})}function MR({teamData:s,teamLoading:t,teamError:i,teamReload:r}){const{user:o}=Da(),[u,f]=Z.useState("analyze"),[m,g]=Z.useState(null),[p,b]=Z.useState(null),[y,x]=Z.useState(3),[C,E]=Z.useState("All"),[P,U]=Z.useState(""),[Y,$]=Z.useState("xpts"),[V,z]=Z.useState(!1),[F,K]=Z.useState(null),{data:Q,loading:se,error:me}=Rs(hR),Ce=t||se,we=i||me,re=Z.useMemo(()=>Q?.candidates||[],[Q]),_e=Z.useMemo(()=>Q?.teams||s?.teams||{},[Q,s]),J=Z.useMemo(()=>[...s?.players||[],...s?.bench||[]],[s]),W=Z.useMemo(()=>J.find(j=>j.id===m),[J,m]),k=Z.useMemo(()=>{if(!re.length)return[];let j=re;if(C!=="All"&&(j=j.filter(L=>L.position===C)),P){const L=parseFloat(P);isNaN(L)||(j=j.filter(ee=>ee.price<=L))}const A=[...j];switch(Y){case"xpts":return yy(A,_e,y);case"form":A.sort((L,ee)=>ee.form-L.form);break;case"totalPoints":A.sort((L,ee)=>ee.totalPoints-L.totalPoints);break;case"price-asc":A.sort((L,ee)=>L.price-ee.price);break;case"price-desc":A.sort((L,ee)=>ee.price-L.price);break;case"selectedByPercent":A.sort((L,ee)=>ee.selectedByPercent-L.selectedByPercent);break;case"netTransfersEvent":A.sort((L,ee)=>(ee.netTransfersEvent||0)-(L.netTransfersEvent||0));break}return A},[re,C,P,Y,_e,y]),q=Z.useMemo(()=>re.find(j=>j.id===p),[re,p]),R=Z.useMemo(()=>!W||!q?null:_R(W,q,y,_e),[W,q,y,_e]),te=Z.useMemo(()=>{if(!re.length)return[];let j=re;return C!=="All"&&(j=j.filter(A=>A.position===C)),yy(j,_e,y).slice(0,3)},[re,C,_e,y]);function de(j){if(g(j),j){const A=J.find(L=>L.id===j);A&&E(A.position)}}async function N(){if(!(!o||!R||!W||!q)){z(!0),K(null);try{const j=CA(en(tn,`users/${o.uid}/tradeAnalyses`));await xa(j,{savedAt:new Date().toISOString(),gameweek:s.summary.currentGameweek,gameweeksToTrack:y,playerOut:{id:W.id,name:W.name,position:W.position,club:W.club,clubShort:W.clubShort,price:W.price},playerIn:{id:q.id,name:q.name,position:q.position,club:q.club,clubShort:q.clubShort,price:q.price},analysis:{recommendation:R.recommendation,pointsDiff:R.pointsDiff,outProjected:R.outProjected,inProjected:R.inProjected,riskLevel:R.riskLevel,explanation:R.explanation}}),K("Saved! Track it in the History tab."),setTimeout(()=>K(null),3e3)}catch(j){console.error("Save failed:",j),K("Failed to save.")}finally{z(!1)}}}return Ce?c.jsx(yi,{message:"Loading trade data..."}):we?c.jsx(Oa,{message:we,onRetry:r}):c.jsxs("div",{className:"trade-analyzer",children:[c.jsxs("div",{className:"ta-tabs",children:[c.jsx("button",{className:`ta-tab ${u==="analyze"?"active":""}`,onClick:()=>f("analyze"),children:"Analyze"}),c.jsx("button",{className:`ta-tab ${u==="history"?"active":""}`,onClick:()=>f("history"),children:"History"})]}),u==="history"&&o&&c.jsx(DR,{uid:o.uid}),u==="history"&&!o&&c.jsx("div",{className:"ta-history-empty",children:c.jsx("p",{children:"Log in to save and track analyses."})}),u==="analyze"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"trade-controls",children:[c.jsxs("div",{className:"controls-card",children:[c.jsx("h3",{children:"Transfer Setup"}),c.jsx(xy,{label:"Transfer Out",players:J,selected:m,onChange:de,groups:[{label:"Starting XI",players:s.players||[]},{label:"Bench",players:s.bench||[]}]}),c.jsxs("div",{className:"filter-bar",children:[c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{children:"Position"}),c.jsx("div",{className:"filter-buttons",children:CR.map(j=>c.jsx("button",{className:`filter-btn ${C===j?"active":""}`,onClick:()=>E(j),children:j},j))})]}),c.jsxs("div",{className:"filter-row",children:[c.jsxs("div",{className:"filter-group filter-group-sm",children:[c.jsx("label",{children:"Max Price"}),c.jsx("input",{type:"number",className:"filter-input",placeholder:"e.g. 8.0",step:"0.5",min:"3.5",max:"15",value:P,onChange:j=>U(j.target.value)})]}),c.jsxs("div",{className:"filter-group filter-group-sm",children:[c.jsx("label",{children:"Sort By"}),c.jsx("select",{className:"filter-select",value:Y,onChange:j=>$(j.target.value),children:wR.map(j=>c.jsx("option",{value:j.value,children:j.label},j.value))})]})]})]}),c.jsx(xy,{label:`Transfer In (${k.length} players)`,players:k,selected:p,onChange:b}),c.jsxs("div",{className:"gameweeks-selector",children:[c.jsx("label",{children:"Gameweeks to Analyze"}),c.jsx("div",{className:"gw-buttons",children:[1,2,3,4,5].map(j=>c.jsx("button",{className:`gw-btn ${y===j?"active":""}`,onClick:()=>x(j),children:j},j))})]})]}),c.jsx("div",{className:"stat-cards-column",children:W||q?c.jsxs(c.Fragment,{children:[c.jsx(Sy,{player:W,label:"OUT",teams:_e}),W&&q&&c.jsx("div",{className:"versus-icon",children:"vs"}),c.jsx(Sy,{player:q,label:"IN",teams:_e})]}):c.jsxs("div",{className:"versus-card",children:[c.jsx("div",{className:"placeholder-icon",children:""}),c.jsx("p",{className:"versus-detail",children:"Select players to compare stats"})]})})]}),R&&c.jsxs("div",{className:"trade-results",children:[c.jsxs("div",{children:[c.jsx(RR,{result:R,playerOut:W,playerIn:q}),o&&c.jsxs("div",{className:"ta-save-row",children:[c.jsx("button",{className:"ta-save-btn",onClick:N,disabled:V,children:V?"Saving...":"Save Analysis"}),F&&c.jsx("span",{className:"ta-save-msg",children:F})]})]}),c.jsx(AR,{playerOut:W,playerIn:q,gameweeks:y})]}),!m&&!p&&c.jsxs(c.Fragment,{children:[c.jsx(kR,{picks:te,onSelect:b}),c.jsxs("div",{className:"trade-placeholder",children:[c.jsx("div",{className:"placeholder-icon",children:""}),c.jsx("p",{children:"Select players above to analyze a potential transfer"})]})]})]})]})}function LR(s){return s?new Date(s).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""}function UR(s){return s?new Date(s).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"TBD"}function PR({match:s}){return c.jsxs("div",{className:"match-row",children:[c.jsxs("div",{className:"match-team home",children:[c.jsx("span",{className:"team-full",children:s.homeTeam}),c.jsx("span",{className:"team-short",children:s.homeShort}),c.jsx("span",{className:`fdr-badge fdr-${s.homeDifficulty}`,children:s.homeDifficulty})]}),c.jsx("div",{className:"match-vs",children:"vs"}),c.jsxs("div",{className:"match-team away",children:[c.jsx("span",{className:`fdr-badge fdr-${s.awayDifficulty}`,children:s.awayDifficulty}),c.jsx("span",{className:"team-full",children:s.awayTeam}),c.jsx("span",{className:"team-short",children:s.awayShort})]}),c.jsx("div",{className:"match-kickoff",children:UR(s.kickoff)})]})}function zR({pick:s}){return c.jsxs("div",{className:"pick-card",children:[c.jsxs("div",{className:"pick-top",children:[c.jsx("span",{className:`pick-pos position-badge position-${s.position}`,children:s.position}),c.jsxs("span",{className:"pick-price",children:["",s.price,"m"]})]}),c.jsx("div",{className:"pick-name",children:s.name}),c.jsx("div",{className:"pick-club",children:s.club}),c.jsxs("div",{className:"pick-details",children:[c.jsxs("div",{className:"pick-stat",children:[c.jsx("span",{className:"pick-stat-value",children:s.form}),c.jsx("span",{className:"pick-stat-label",children:"Form"})]}),c.jsxs("div",{className:"pick-stat",children:[c.jsx("span",{className:"pick-stat-value",children:s.totalPoints}),c.jsx("span",{className:"pick-stat-label",children:"Pts"})]}),c.jsxs("div",{className:"pick-stat",children:[c.jsx("span",{className:`pick-stat-value fixture-badge fdr-${s.difficulty}`,children:s.opponent}),c.jsx("span",{className:"pick-stat-label",children:"Fix"})]})]})]})}function BR({picks:s}){return!s||s.length===0?null:c.jsxs("div",{className:"picks-section",children:[c.jsxs("div",{className:"picks-header",children:[c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),c.jsx("span",{children:"Recommended Picks"})]}),c.jsx("div",{className:"picks-grid",children:s.map(t=>c.jsx(zR,{pick:t},t.id))})]})}function HR({gw:s,isActive:t,onToggle:i}){return c.jsxs("div",{className:`gw-card ${t?"expanded":""}`,children:[c.jsxs("button",{className:"gw-card-header",onClick:i,children:[c.jsxs("div",{className:"gw-title",children:[c.jsxs("span",{className:"gw-number",children:["GW",s.gw]}),c.jsxs("span",{className:"gw-match-count",children:[s.matches.length," match",s.matches.length!==1?"es":""]})]}),c.jsxs("div",{className:"gw-meta",children:[s.deadline&&c.jsxs("span",{className:"gw-deadline",children:["Deadline: ",LR(s.deadline)]}),c.jsx("span",{className:`gw-chevron ${t?"open":""}`,children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),t&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"gw-matches",children:s.matches.map(r=>c.jsx(PR,{match:r},r.id))}),c.jsx(BR,{picks:s.picks})]})]})}function GR(){const{data:s,loading:t,error:i,reload:r}=Rs(mR),[o,u]=Z.useState(null);if(t)return c.jsx(yi,{message:"Loading fixtures..."});if(i)return c.jsx(Oa,{message:i,onRetry:r});const f=o??s[0]?.gw;return c.jsxs("div",{className:"fixtures",children:[c.jsxs("div",{className:"fixtures-header",children:[c.jsx("h3",{children:"Upcoming Fixtures"}),c.jsxs("div",{className:"fdr-legend",children:[c.jsx("span",{className:"legend-label",children:"FDR:"}),[1,2,3,4,5].map(m=>c.jsx("span",{className:`fdr-badge fdr-${m}`,children:m},m))]})]}),c.jsx("div",{className:"gw-list",children:s.map(m=>c.jsx(HR,{gw:m,isActive:f===m.gw,onToggle:()=>u(f===m.gw?null:m.gw)},m.gw))})]})}function FR(s){const t={DEF:0,MID:0,FWD:0};for(const i of s)t[i.position]!==void 0&&t[i.position]++;return`${t.DEF}-${t.MID}-${t.FWD}`}function Fb(s){const t={GKP:[],DEF:[],MID:[],FWD:[]};for(const i of s)t[i.position]?.push(i);return t}const Vb=[[3,4,3],[3,5,2],[4,3,3],[4,4,2],[4,5,1],[5,3,2],[5,4,1]];function VR(s,t){const{ranked:i}=Hb(s,t),r=Fb(i);for(const g of Object.keys(r))r[g].sort((p,b)=>(b.xpts||0)-(p.xpts||0));let o=null,u=-1/0,f=null,m=null;for(const[g,p,b]of Vb){if(r.GKP.length<1||r.DEF.length<g||r.MID.length<p||r.FWD.length<b)continue;const y=[r.GKP[0],...r.DEF.slice(0,g),...r.MID.slice(0,p),...r.FWD.slice(0,b)],x=new Set(y.map(P=>P.id)),C=s.filter(P=>!x.has(P.id)),E=y.reduce((P,U)=>P+(U.xpts||0),0);E>u&&(u=E,o=`${g}-${p}-${b}`,f=y,m=C)}return{formation:o,xi:f,bench:m,score:u}}function qR({fixtures:s}){return!s||s.length===0?null:c.jsx("div",{className:"formation-fdr-dots",children:s.slice(0,3).map((t,i)=>c.jsx("span",{className:`formation-fdr-dot fdr-dot-${t.difficulty}`,title:`GW${t.gw}: ${t.opponent} (FDR ${t.difficulty})`},i))})}function YR(s){const t={DEF:0,MID:0,FWD:0,GKP:0};for(const r of s)t[r.position]!==void 0&&t[r.position]++;return t.GKP!==1?{valid:!1,reason:"Must have exactly 1 goalkeeper in the XI"}:Vb.some(([r,o,u])=>t.DEF===r&&t.MID===o&&t.FWD===u)?{valid:!0}:{valid:!1,reason:`${t.DEF}-${t.MID}-${t.FWD} is not a valid formation`}}function WR({player:s,isSelected:t,isCompareSelected:i,isSwapSource:r,onSelect:o,compareMode:u,isSuggested:f,xpts:m}){const g=()=>o(s),p=["pitch-player",t?"selected":"",i?"compare-selected":"",r?"swap-source":"",f?"suggested-glow":""].filter(Boolean).join(" ");return c.jsxs("div",{className:p,onClick:g,children:[c.jsxs("div",{className:`pitch-shirt position-shirt-${s.position}`,children:[s.isCaptain&&c.jsx("span",{className:"pitch-armband",children:"C"}),s.isViceCaptain&&c.jsx("span",{className:"pitch-armband vc",children:"V"}),u&&i&&c.jsx("span",{className:"pitch-compare-badge",children:"VS"}),m!=null&&c.jsx("span",{className:"pitch-xpts-badge",title:`xPts: ${m}`,children:m})]}),c.jsx("div",{className:"pitch-player-name",children:s.name}),c.jsxs("div",{className:"pitch-player-pts",children:[s.gameweekPoints," pts"]}),c.jsx(qR,{fixtures:s.upcomingFixtures})]})}function XR({player:s,xptsData:t,onClose:i}){if(!s)return null;const r=s.form>=7?"positive":s.form<=4?"negative":"";return c.jsxs("div",{className:"formation-detail",children:[c.jsxs("div",{className:"formation-detail-header",children:[c.jsxs("div",{children:[c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),c.jsx("span",{className:"detail-player-name",children:s.name}),s.isCaptain&&c.jsx("span",{className:"badge captain",children:"C"}),s.isViceCaptain&&c.jsx("span",{className:"badge vice-captain",children:"V"})]}),c.jsx("button",{className:"detail-close",onClick:i,children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsx("div",{className:"detail-club",children:s.club}),c.jsxs("div",{className:"detail-stats-grid",children:[c.jsxs("div",{className:"detail-stat",children:[c.jsx("span",{className:"detail-stat-value highlight",children:s.gameweekPoints}),c.jsx("span",{className:"detail-stat-label",children:"GW Pts"})]}),c.jsxs("div",{className:"detail-stat",children:[c.jsx("span",{className:"detail-stat-value",children:s.totalPoints}),c.jsx("span",{className:"detail-stat-label",children:"Total"})]}),c.jsxs("div",{className:"detail-stat",children:[c.jsx("span",{className:`detail-stat-value ${r}`,children:s.form}),c.jsx("span",{className:"detail-stat-label",children:"Form"})]}),c.jsxs("div",{className:"detail-stat",children:[c.jsxs("span",{className:"detail-stat-value",children:["",s.price,"m"]}),c.jsx("span",{className:"detail-stat-label",children:"Price"})]}),t&&c.jsxs("div",{className:"detail-stat",children:[c.jsx("span",{className:"detail-stat-value highlight",children:t.xpts}),c.jsx("span",{className:"detail-stat-label",children:"xPts"})]})]}),t?.topReasons?.length>0&&c.jsx("div",{className:"detail-xpts-reasons",children:t.topReasons.map((o,u)=>c.jsx("span",{className:"xpts-reason-chip",children:o},u))}),s.upcomingFixtures?.length>0&&c.jsxs("div",{className:"detail-fixtures",children:[c.jsx("div",{className:"detail-fixtures-label",children:"Upcoming"}),c.jsx("div",{className:"detail-fixture-chips",children:s.upcomingFixtures.slice(0,5).map(o=>c.jsx("span",{className:`detail-fixture-chip fdr-${o.difficulty}`,children:o.opponent},o.gw))})]})]})}function KR({players:s,onClose:t}){if(s.length<2)return null;const[i,r]=s,o=[{label:"GW Pts",valA:i.gameweekPoints,valB:r.gameweekPoints},{label:"Total",valA:i.totalPoints,valB:r.totalPoints},{label:"Form",valA:i.form,valB:r.form},{label:"Price",valA:`${i.price}m`,valB:`${r.price}m`,isText:!0}],u=f=>{const m=f.upcomingFixtures||[];return m.length===0?3:(m.slice(0,3).reduce((g,p)=>g+p.difficulty,0)/Math.min(m.length,3)).toFixed(1)};return o.push({label:"Avg FDR",valA:u(i),valB:u(r),lowerBetter:!0}),c.jsxs("div",{className:"formation-compare",children:[c.jsxs("div",{className:"compare-header",children:[c.jsx("h4",{children:"Player Comparison"}),c.jsx("button",{className:"detail-close",onClick:t,children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),c.jsxs("div",{className:"compare-names",children:[c.jsxs("div",{className:"compare-player-label",children:[c.jsx("span",{className:`position-badge position-${i.position}`,children:i.position}),c.jsx("span",{children:i.name})]}),c.jsx("span",{className:"compare-vs",children:"VS"}),c.jsxs("div",{className:"compare-player-label",children:[c.jsx("span",{className:`position-badge position-${r.position}`,children:r.position}),c.jsx("span",{children:r.name})]})]}),c.jsx("div",{className:"compare-table",children:o.map(f=>{const m=parseFloat(f.valA),g=parseFloat(f.valB);let p="",b="";return!f.isText&&!isNaN(m)&&!isNaN(g)&&(f.lowerBetter?m<g?p="compare-win":g<m&&(b="compare-win"):m>g?p="compare-win":g>m&&(b="compare-win")),c.jsxs("div",{className:"compare-row",children:[c.jsx("span",{className:`compare-val ${p}`,children:f.valA}),c.jsx("span",{className:"compare-label",children:f.label}),c.jsx("span",{className:`compare-val ${b}`,children:f.valB})]},f.label)})}),c.jsxs("div",{className:"compare-fixtures",children:[c.jsx("div",{className:"compare-fix-col",children:(i.upcomingFixtures||[]).slice(0,5).map(f=>c.jsx("span",{className:`detail-fixture-chip fdr-${f.difficulty}`,children:f.opponent},f.gw))}),c.jsx("span",{className:"compare-fix-label",children:"Fixtures"}),c.jsx("div",{className:"compare-fix-col",children:(r.upcomingFixtures||[]).slice(0,5).map(f=>c.jsx("span",{className:`detail-fixture-chip fdr-${f.difficulty}`,children:f.opponent},f.gw))})]})]})}function QR({suggestion:s,currentFormation:t,captainPick:i,onClose:r}){if(!s)return null;const o=s.formation===t;return c.jsxs("div",{className:"formation-suggested-panel",children:[c.jsxs("div",{className:"compare-header",children:[c.jsx("h4",{children:"Suggested Formation"}),c.jsx("button",{className:"detail-close",onClick:r,children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),o?c.jsxs("p",{className:"suggested-verdict suggested-good",children:["Your current ",t," is already optimal based on xPts analysis."]}):c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"suggested-verdict suggested-change",children:["Consider switching from ",c.jsx("strong",{children:t})," to ",c.jsx("strong",{children:s.formation})," to maximise expected points."]}),c.jsxs("div",{className:"suggested-changes",children:[c.jsx("div",{className:"suggested-changes-label",children:"Move to bench:"}),s.bench.filter(u=>u.benchOrder===0).slice(0,3).map(u=>c.jsxs("span",{className:"suggested-chip bench-chip",children:[u.name," ",c.jsx("span",{className:"suggested-chip-pos",children:u.position}),u.xpts!=null&&c.jsxs("span",{className:"suggested-chip-xpts",children:[u.xpts," xPts"]})]},u.id)),c.jsx("div",{className:"suggested-changes-label",style:{marginTop:"0.5rem"},children:"Bring into XI:"}),s.xi.filter(u=>u.benchOrder>0).slice(0,3).map(u=>c.jsxs("span",{className:"suggested-chip start-chip",children:[u.name," ",c.jsx("span",{className:"suggested-chip-pos",children:u.position}),u.xpts!=null&&c.jsxs("span",{className:"suggested-chip-xpts",children:[u.xpts," xPts"]})]},u.id))]})]}),i&&c.jsxs("div",{className:"suggested-captain",children:[c.jsx("div",{className:"suggested-changes-label",style:{marginTop:"0.75rem"},children:"Recommended captain:"}),c.jsxs("div",{className:"captain-suggestion",children:[c.jsx("span",{className:`position-badge position-${i.position}`,children:i.position}),c.jsx("strong",{children:i.name}),c.jsxs("span",{className:"xpts-reason-badge",children:[i.xpts," xPts"]}),i.topReasons?.length>0&&c.jsx("span",{className:"captain-reasons",children:i.topReasons.join("  ")})]})]})]})}function $R({teamData:s,teamLoading:t,teamError:i,teamReload:r}){const[o,u]=Z.useState(null),[f,m]=Z.useState(!1),[g,p]=Z.useState([]),[b,y]=Z.useState(!1),[x,C]=Z.useState(!1),[E,P]=Z.useState(null),[U,Y]=Z.useState([]),[$,V]=Z.useState(null);Z.useEffect(()=>{if(!$)return;const A=setTimeout(()=>V(null),2500);return()=>clearTimeout(A)},[$]);const z=Z.useMemo(()=>s?.teams||{},[s]),F=Z.useMemo(()=>{if(!s)return null;const A=[...s.players,...s.bench||[]];return VR(A,z)},[s,z]),K=Z.useMemo(()=>{if(!s)return{};const A=[...s.players,...s.bench||[]],L={};for(const ee of A){const le=ee.upcomingFixtures?.[0]||{difficulty:3,opponent:"TBD"},ge=gc(ee,le,z);L[ee.id]=ge.xpts}return L},[s,z]),Q=Z.useMemo(()=>{if(!s)return null;const A=[...s.players,...s.bench||[]],{captain:L}=Hb(A,z);return L},[s,z]),{players:se,bench:me,hasSwaps:Ce}=Z.useMemo(()=>{if(!s)return{players:[],bench:[],hasSwaps:!1};let A=[...s.players],L=[...s.bench||[]];for(const[ee,le]of U){const ge=A.findIndex(je=>je.id===ee),Fe=L.findIndex(je=>je.id===le);ge===-1||Fe===-1||([A[ge],L[Fe]]=[L[Fe],A[ge]])}return{players:A,bench:L,hasSwaps:U.length>0}},[s,U]);if(t)return c.jsx(yi,{message:"Loading formation..."});if(i)return c.jsx(Oa,{message:i,onRetry:r});const{summary:we}=s,re=FR(se),_e=Fb(se),J=b&&F?new Set(F.xi.map(A=>A.id)):new Set,W=new Set(se.map(A=>A.id));function k(A){if(x){q(A);return}f?p(L=>L.find(le=>le.id===A.id)?L.filter(le=>le.id!==A.id):L.length>=2?[L[1],A]:[...L,A]):u(L=>L?.id===A.id?null:A)}function q(A){if(!E){P(A);return}if(E.id===A.id){P(null);return}const L=W.has(E.id),ee=W.has(A.id);if(L===ee){P(A);return}const le=L?E:A,ge=L?A:E,Fe=se.map(Je=>Je.id===le.id?ge:Je),je=YR(Fe);if(!je.valid){V(je.reason),P(null);return}Y(Je=>[...Je,[le.id,ge.id]]),P(null)}function R(){const A=!x;C(A),P(null),V(null),A&&(m(!1),p([]),u(null))}function te(){const A=!f;m(A),p([]),u(null),A&&(C(!1),P(null))}function de(){y(A=>!A)}function N(){Y([]),P(null),V(null)}const j=A=>c.jsx(WR,{player:A,isSelected:o?.id===A.id,isCompareSelected:g.some(L=>L.id===A.id),isSwapSource:E?.id===A.id,onSelect:k,compareMode:f,isSuggested:b&&J.has(A.id),xpts:K[A.id]},A.id);return c.jsxs("div",{className:"formation-view",children:[c.jsxs("div",{className:"formation-header",children:[c.jsxs("h3",{children:["Formation  ",re]}),c.jsxs("div",{className:"formation-header-actions",children:[c.jsxs("button",{className:`formation-action-btn ${x?"active":""}`,onClick:R,title:"Swap players between XI and bench",children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"17 1 21 5 17 9"}),c.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),c.jsx("polyline",{points:"7 23 3 19 7 15"}),c.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),c.jsx("span",{children:"Swap"})]}),Ce&&c.jsxs("button",{className:"formation-action-btn formation-reset-btn",onClick:N,title:"Reset to original lineup",children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"1 4 1 10 7 10"}),c.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),c.jsx("span",{children:"Reset"})]}),c.jsxs("button",{className:`formation-action-btn ${f?"active":""}`,onClick:te,title:"Compare two players",children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),c.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),c.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),c.jsx("span",{children:"Compare"})]}),c.jsxs("button",{className:`formation-action-btn ${b?"active":""}`,onClick:de,title:"Suggest optimal formation",children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),c.jsx("path",{d:"M2 17l10 5 10-5"}),c.jsx("path",{d:"M2 12l10 5 10-5"})]}),c.jsx("span",{children:"Suggest"})]}),c.jsxs("span",{className:"formation-gw",children:["GW",we.currentGameweek]})]})]}),f&&c.jsx("div",{className:"formation-compare-hint",children:"Tap any 2 players to compare them side-by-side"}),x&&c.jsx("div",{className:"formation-swap-hint",children:E?c.jsxs(c.Fragment,{children:["Tap a ",W.has(E.id)?"bench":"starting"," player to swap with ",c.jsx("strong",{children:E.name})]}):"Tap a player, then tap another to swap them"}),$&&c.jsx("div",{className:"swap-invalid-msg",children:$}),c.jsxs("div",{className:"pitch",children:[c.jsxs("div",{className:"pitch-surface",children:[c.jsx("div",{className:"pitch-marking center-circle"}),c.jsx("div",{className:"pitch-marking center-line"}),c.jsx("div",{className:"pitch-marking penalty-box top"}),c.jsx("div",{className:"pitch-marking penalty-box bottom"}),c.jsx("div",{className:"pitch-row fwd-row",children:_e.FWD.map(j)}),c.jsx("div",{className:"pitch-row mid-row",children:_e.MID.map(j)}),c.jsx("div",{className:"pitch-row def-row",children:_e.DEF.map(j)}),c.jsx("div",{className:"pitch-row gk-row",children:_e.GKP.map(j)})]}),me.length>0&&c.jsxs("div",{className:"formation-bench",children:[c.jsx("div",{className:"formation-bench-label",children:"Bench"}),c.jsx("div",{className:"formation-bench-row",children:me.map((A,L)=>c.jsxs("div",{className:"formation-bench-player",children:[c.jsx("span",{className:"bench-order",children:L+1}),j(A)]},A.id))})]})]}),f&&g.length===2&&c.jsx(KR,{players:g,onClose:()=>p([])}),!f&&!x&&o&&c.jsx(XR,{player:o,xptsData:gc(o,o.upcomingFixtures?.[0]||{difficulty:3,opponent:"TBD"},z),onClose:()=>u(null)}),b&&c.jsx(QR,{suggestion:F,currentFormation:re,captainPick:Q,onClose:()=>y(!1)})]})}function ZR(){const[s,t]=Z.useState([]),[i,r]=Z.useState(!0),[o,u]=Z.useState([]),[f,m]=Z.useState({}),[g,p]=Z.useState(!1);if(Z.useEffect(()=>{async function z(){try{const[F,K,Q]=await Promise.all([di(en(tn,"users")),di(en(tn,"xptsSnapshots")),Wn()]),se=F.val();if(se){const Ce=Object.entries(se).map(([we,re])=>({uid:we,name:re.name||"Unknown",email:re.email||"N/A",fplCode:re.fplCode||"N/A",createdAt:re.createdAt||null}));Ce.sort((we,re)=>(re.createdAt||"").localeCompare(we.createdAt||"")),t(Ce)}const me=K.val();if(me){const Ce=[];for(const[,_e]of Object.entries(me))for(const[,J]of Object.entries(_e))Ce.push(J);Ce.sort((_e,J)=>J.gameweek-_e.gameweek),u(Ce);const re=Q.events.find(_e=>_e.is_current)?.id||1;if(Ce.length>0){p(!0);const _e=await JR(Ce,re);m(_e),p(!1)}}}catch(F){console.error("Failed to load admin data:",F)}finally{r(!1)}}z()},[]),i)return c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Loading admin data..."})]});const b=s.length,y=s.filter(z=>z.fplCode&&z.fplCode!=="N/A").length,x=s.filter(z=>z.createdAt?Date.now()-new Date(z.createdAt).getTime()<10080*60*1e3:!1).length,C={};s.forEach(z=>{if(!z.createdAt)return;const F=z.createdAt.slice(0,10);C[F]=(C[F]||0)+1});const E=Object.keys(C).sort(),P=Math.max(...Object.values(C),1),U=o.filter(z=>{const F=`${z.uid}-${z.gameweek}-${z.playerIn.id}`;return f[F]&&f[F].verdict!=="pending"}),Y=U.filter(z=>{const F=`${z.uid}-${z.gameweek}-${z.playerIn.id}`;return f[F]?.verdict==="correct"}).length,$=o.length-U.length,V=U.length>0?Math.round(Y/U.length*100):0;return c.jsxs("div",{className:"admin-page",children:[c.jsx("h2",{className:"admin-title",children:"Admin Dashboard"}),c.jsxs("div",{className:"admin-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:b}),c.jsx("div",{className:"admin-stat-label",children:"Total Users"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:y}),c.jsx("div",{className:"admin-stat-label",children:"With FPL Code"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:x}),c.jsx("div",{className:"admin-stat-label",children:"New This Week"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsxs("div",{className:"admin-stat-value",children:[b>0?Math.round(y/b*100):0,"%"]}),c.jsx("div",{className:"admin-stat-label",children:"FPL Linked"})]})]}),E.length>0&&c.jsxs("div",{className:"admin-section",children:[c.jsx("h3",{children:"Registrations Over Time"}),c.jsx("div",{className:"reg-chart",children:E.map(z=>c.jsxs("div",{className:"reg-bar-group",children:[c.jsx("div",{className:"reg-bar-wrapper",children:c.jsx("div",{className:"reg-bar",style:{height:`${C[z]/P*100}%`},children:c.jsx("span",{className:"reg-bar-count",children:C[z]})})}),c.jsx("span",{className:"reg-bar-label",children:new Date(z+"T00:00:00").toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},z))})]}),c.jsxs("div",{className:"admin-section",children:[c.jsxs("h3",{children:["All Users (",b,")"]}),c.jsx("div",{className:"admin-table-wrapper",children:c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Name"}),c.jsx("th",{children:"Email"}),c.jsx("th",{children:"FPL Code"}),c.jsx("th",{children:"Registered"})]})}),c.jsx("tbody",{children:s.map(z=>c.jsxs("tr",{children:[c.jsx("td",{children:z.name}),c.jsx("td",{children:z.email}),c.jsx("td",{className:"mono",children:z.fplCode}),c.jsx("td",{children:z.createdAt?new Date(z.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"N/A"})]},z.uid))})]})})]}),c.jsxs("div",{className:"admin-section",children:[c.jsxs("h3",{children:["xPts Prediction Tracker (",o.length," predictions)"]}),o.length===0?c.jsx("p",{className:"admin-xpts-empty",children:"No xPts predictions recorded yet. Predictions are captured when users visit the Transfers tab."}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"admin-xpts-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:o.length}),c.jsx("div",{className:"admin-stat-label",children:"Tracked"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsxs("div",{className:"admin-stat-value",children:[V,"%"]}),c.jsx("div",{className:"admin-stat-label",children:"Accuracy"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:Y}),c.jsx("div",{className:"admin-stat-label",children:"Correct"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"admin-stat-value",children:$}),c.jsx("div",{className:"admin-stat-label",children:"Pending"})]})]}),c.jsx("div",{className:"admin-table-wrapper",children:c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"User"}),c.jsx("th",{children:"GW"}),c.jsx("th",{children:"Player Out"}),c.jsx("th",{children:"Out xPts"}),c.jsx("th",{children:"Player In"}),c.jsx("th",{children:"In xPts"}),c.jsx("th",{children:"Actual Diff"}),c.jsx("th",{children:"Verdict"})]})}),c.jsx("tbody",{children:o.map(z=>{const F=`${z.uid}-${z.gameweek}-${z.playerIn.id}`,K=f[F],Q=K?.actualDiff,se=K?.verdict||"pending",me=(z.playerOut.avgXpts||0)>(z.playerIn.avgXpts||0),Ce=(z.playerIn.avgXpts||0)>(z.playerOut.avgXpts||0);return c.jsxs("tr",{children:[c.jsx("td",{children:z.userName}),c.jsxs("td",{children:["GW",z.gameweek]}),c.jsxs("td",{children:[z.playerOut.name,c.jsxs("span",{className:"admin-xpts-club",children:[" ",z.playerOut.club]})]}),c.jsx("td",{className:me?"admin-xpts-higher":"",children:z.playerOut.avgXpts??""}),c.jsxs("td",{children:[z.playerIn.name,c.jsxs("span",{className:"admin-xpts-club",children:[" ",z.playerIn.club]})]}),c.jsx("td",{className:Ce?"admin-xpts-higher":"",children:z.playerIn.avgXpts??""}),c.jsx("td",{className:Q>0?"admin-xpts-correct":Q<0?"admin-xpts-wrong":"",children:g?"...":Q!=null?Q>0?`+${Q}`:Q:""}),c.jsx("td",{children:c.jsx("span",{className:`admin-xpts-badge admin-xpts-badge-${se}`,children:se})})]},F)})})]})})]})]})]})}async function JR(s,t){const i=new Set;for(const m of s)for(let g=m.gameweek;g<=t;g++)i.add(g);const r={},o=[...i].sort((m,g)=>m-g),u=5;for(let m=0;m<o.length;m+=u){const g=o.slice(m,m+u),p=await Promise.all(g.map(b=>Dc(b).catch(()=>null)));g.forEach((b,y)=>{p[y]&&(r[b]=p[y])})}const f={};for(const m of s){const g=`${m.uid}-${m.gameweek}-${m.playerIn.id}`;let p=0,b=0,y=!1;for(let U=m.gameweek;U<=t;U++){const Y=r[U];if(!Y)continue;const $=Y.elements.find(z=>z.id===m.playerIn.id),V=Y.elements.find(z=>z.id===m.playerOut.id);p+=$?.stats?.total_points||0,b+=V?.stats?.total_points||0,y=!0}if(!y){f[g]={actualDiff:null,verdict:"pending"};continue}const x=p-b,C=(m.playerIn.avgXpts||0)>=(m.playerOut.avgXpts||0),E=x>=0,P=C===E?"correct":"wrong";f[g]={actualDiff:x,verdict:P}}return f}function eD({onLogin:s}){const{login:t,register:i}=Da(),[r,o]=Z.useState(!1),[u,f]=Z.useState({name:"",email:"",password:"",fplCode:"",destination:"ff"}),[m,g]=Z.useState(""),[p,b]=Z.useState(!1);function y(C){f(E=>({...E,[C.target.name]:C.target.value}))}async function x(C){C.preventDefault(),g(""),b(!0);try{if(r){if(!u.name.trim())throw new Error("Name is required.");if(!u.fplCode.trim())throw new Error("FPL kode is required.");await i(u.name.trim(),u.email,u.password,u.fplCode)}else await t(u.email,u.password);s?.(u.destination)}catch(E){g(E.message||"Something went wrong.")}finally{b(!1)}}return c.jsx("div",{className:"auth-page",children:c.jsxs("div",{className:"auth-card",children:[c.jsxs("div",{className:"auth-brand",children:[c.jsx("div",{className:"brand-icon",children:"FF"}),c.jsxs("div",{children:[c.jsx("h1",{children:"My Football Fantasy"}),c.jsx("p",{className:"subtitle",children:"Season 2025/26"})]})]}),c.jsx("h2",{className:"auth-title",children:r?"Create account":"Sign in"}),c.jsxs("form",{onSubmit:x,className:"auth-form",children:[r&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"name",children:"Name"}),c.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:u.name,onChange:y,placeholder:"Your name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:u.email,onChange:y,placeholder:"you@example.com"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"password",children:"Password"}),c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:r?"new-password":"current-password",required:!0,value:u.password,onChange:y,placeholder:""})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"destination",children:"Where do you want to go?"}),c.jsxs("select",{id:"destination",name:"destination",value:u.destination,onChange:y,children:[c.jsx("option",{value:"ff",children:"Football Fantasy"}),c.jsx("option",{value:"room3d",children:"Room 3D"})]})]}),r&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"fplCode",children:"FPL kode"}),c.jsx("input",{id:"fplCode",name:"fplCode",type:"number",required:!0,value:u.fplCode,onChange:y,placeholder:"e.g. 5398119"})]}),m&&c.jsx("p",{className:"auth-error",children:m}),c.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:p,children:p?"Please wait...":r?"Create account":"Sign in"})]}),c.jsxs("p",{className:"auth-toggle",children:[r?"Already have an account?":"No account yet?"," ",c.jsx("button",{type:"button",className:"auth-toggle-btn",onClick:()=>{o(C=>!C),g("")},children:r?"Sign in":"Create account"})]})]})})}function tD({onSwitchApp:s}){const{user:t,logout:i}=Da();return c.jsxs("div",{className:"app",children:[c.jsx("header",{className:"app-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{className:"brand",children:[c.jsx("div",{className:"brand-icon room3d-icon",children:"3D"}),c.jsxs("div",{children:[c.jsx("h1",{children:"Room 3D"}),c.jsx("p",{className:"subtitle",children:"Sketch to 3D Model"})]})]}),c.jsxs("div",{className:"user-info",children:[c.jsx("span",{className:"user-name",children:t.displayName}),c.jsx("button",{className:"btn btn-secondary app-switcher",onClick:s,children:"Football Fantasy"}),c.jsx("button",{className:"btn btn-secondary",onClick:i,children:"Logout"})]})]})}),c.jsx("main",{className:"app-main",children:c.jsxs("div",{className:"room3d-placeholder",children:[c.jsx("div",{className:"room3d-placeholder-icon",children:c.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M2 12l10-7 10 7"}),c.jsx("path",{d:"M4 10v10h16V10"}),c.jsx("rect",{x:"9",y:"14",width:"6",height:"6"})]})}),c.jsx("h2",{children:"Coming Soon"}),c.jsx("p",{children:"Upload a photo of your hand-drawn room sketch, and we'll generate an interactive 3D model you can explore and export."})]})})]})}const nD=["All","GK","DEF","MID","FWD"],Wo={freehit:"FH",wildcard:"WC",bboost:"BB","3xc":"TC"},Vh={freehit:"Free Hit",wildcard:"Wildcard",bboost:"Bench Boost","3xc":"Triple Captain"};function sD(){const{fplCode:s,user:t}=Da(),{data:i,loading:r,error:o,reload:u}=Rs(gR,[s]),f=Z.useMemo(()=>i?.transfers||[],[i]),m=Z.useMemo(()=>i?.teams||{},[i]),g=Z.useMemo(()=>i?.chips||[],[i]),[p,b]=Z.useState(null),[y,x]=Z.useState("All"),[C,E]=Z.useState("weekly"),[P,U]=Z.useState(new Set),Y=Z.useRef({});Z.useEffect(()=>{if(!f.length||!t)return;const R=en(tn,`transferCache/${t.uid}`);async function te(){try{const N=(await di(R)).val(),j=new Set;if(N?.transfers){const A=new Set(N.transfers.map(L=>`${L.gameweek}-${L.playerIn.id}`));f.forEach((L,ee)=>{A.has(`${L.gameweek}-${L.playerIn.id}`)||j.add(ee)}),j.size>0&&U(j)}await xa(R,{transfers:f.map(A=>({gameweek:A.gameweek,transferCost:A.transferCost,chip:A.chip||null,netGain:A.netGain,gameweeksCompared:A.gameweeksCompared,playerIn:{id:A.playerIn.id,name:A.playerIn.name,position:A.playerIn.position,club:A.playerIn.club,pointsSinceTransfer:A.playerIn.pointsSinceTransfer},playerOut:{id:A.playerOut.id,name:A.playerOut.name,position:A.playerOut.position,club:A.playerOut.club,pointsSinceTransfer:A.playerOut.pointsSinceTransfer}})),updatedAt:new Date().toISOString()});for(const A of j){const L=f[A],ee=`${L.gameweek}-${L.playerIn.id}`,le=en(tn,`xptsSnapshots/${t.uid}/${ee}`);if((await di(le)).exists())continue;let Fe={avgXpts:null,topReasons:[]},je={avgXpts:null,topReasons:[]};try{const Je=fi(L.playerIn,L.playerIn.upcomingFixtures,m,3);Fe={avgXpts:Je.avgXpts,topReasons:Je.topReasons}}catch(Je){console.warn("xPts calc failed for playerIn",L.playerIn.name,Je)}try{const Je=fi(L.playerOut,L.playerOut.upcomingFixtures,m,3);je={avgXpts:Je.avgXpts,topReasons:Je.topReasons}}catch(Je){console.warn("xPts calc failed for playerOut",L.playerOut.name,Je)}await xa(le,{uid:t.uid,userName:t.displayName||"Unknown",capturedAt:new Date().toISOString(),gameweek:L.gameweek,transferCost:L.transferCost||0,playerOut:{id:L.playerOut.id,name:L.playerOut.name,position:L.playerOut.position,club:L.playerOut.club,avgXpts:je.avgXpts,topReasons:je.topReasons},playerIn:{id:L.playerIn.id,name:L.playerIn.name,position:L.playerIn.position,club:L.playerIn.club,avgXpts:Fe.avgXpts,topReasons:Fe.topReasons}})}}catch(de){console.error("Transfer cache sync error:",de)}}te()},[f,m,t]);const $=Z.useCallback(R=>{const te=Y.current[R];te&&(te.scrollIntoView({behavior:"smooth",block:"center"}),b(R),te.classList.add("transfer-highlight"),setTimeout(()=>te.classList.remove("transfer-highlight"),2e3))},[]);if(r)return c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Analysing your transfers..."})]});if(o)return c.jsxs("div",{className:"error-container",children:[c.jsxs("p",{children:["Failed to load transfers: ",o]}),c.jsx("button",{className:"btn btn-primary",onClick:u,children:"Retry"})]});if(f.length===0)return c.jsxs("div",{className:"transfers-empty",children:[c.jsx("div",{className:"empty-icon",children:c.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"17 1 21 5 17 9"}),c.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),c.jsx("polyline",{points:"7 23 3 19 7 15"}),c.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]})}),c.jsx("h3",{children:"No Transfers Yet"}),c.jsx("p",{children:"Your transfer history will appear here once you make transfers."})]});const V=y==="All"?f:f.filter(R=>R.playerIn.position===y||R.playerOut.position===y),z=f.length,F=f.reduce((R,te)=>R+te.netGain,0),K=f.filter(R=>R.netGain>0).length,Q=z>0?Math.round(K/z*100):0,se=f.reduce((R,te,de)=>te.netGain>f[R].netGain?de:R,0),me=f.reduce((R,te,de)=>te.netGain<f[R].netGain?de:R,0),Ce=f[se],we=f[me],re=f.reduce((R,te)=>R+(te.transferCost||0),0),_e=[...f].sort((R,te)=>R.gameweek-te.gameweek),J=[];let W=0;for(const R of _e)W+=R.netGain,J.push({gw:R.gameweek,total:W,name:`${R.playerOut.name}  ${R.playerIn.name}`,chip:R.chip});const k=new Set(J.map(R=>R.gw));for(const R of g)if((R.name==="bboost"||R.name==="3xc")&&!k.has(R.event)){const te=J.filter(de=>de.gw<R.event).pop();J.push({gw:R.event,total:te?.total||0,name:Vh[R.name],chip:R.name,chipOnly:!0})}J.sort((R,te)=>R.gw-te.gw);const q=Math.max(...J.map(R=>Math.abs(R.total)),1);return c.jsxs("div",{className:"transfer-tracker",children:[P.size>0&&c.jsxs("div",{className:"new-transfer-banner",children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),c.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),P.size," new transfer",P.size>1?"s":""," detected since last visit!",c.jsx("button",{className:"new-transfer-dismiss",onClick:()=>U(new Set),children:"Dismiss"})]}),c.jsxs("div",{className:"transfer-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"transfer-stat-value",children:z}),c.jsx("div",{className:"transfer-stat-label",children:"Transfers Made"})]}),c.jsxs("div",{className:`stat-card ${F>=0?"stat-positive":"stat-negative"}`,children:[c.jsxs("div",{className:"transfer-stat-value",children:[F>=0?"+":"",F]}),c.jsx("div",{className:"transfer-stat-label",children:"Net Points Gain"})]}),c.jsxs("div",{className:`stat-card ${Q>=50?"stat-positive":"stat-negative"}`,children:[c.jsxs("div",{className:"transfer-stat-value",children:[Q,"%"]}),c.jsx("div",{className:"transfer-stat-label",children:"Success Rate"})]}),c.jsxs("div",{className:"stat-card clickable-stat stat-positive",onClick:()=>$(se),children:[c.jsxs("div",{className:"transfer-stat-value",children:["+",Ce.netGain]}),c.jsx("div",{className:"transfer-stat-label",children:"Best Transfer "})]}),c.jsxs("div",{className:"stat-card clickable-stat stat-negative",onClick:()=>$(me),children:[c.jsx("div",{className:"transfer-stat-value",children:we.netGain}),c.jsx("div",{className:"transfer-stat-label",children:"Worst Transfer "})]})]}),re>0&&c.jsxs("div",{className:"transfer-cost-banner",children:["Total transfer costs: ",c.jsxs("strong",{children:["-",re," pts"]})," (hits taken)"]}),J.length>1&&c.jsxs("div",{className:"cumulative-section",children:[c.jsx("h3",{className:"section-title",children:"Cumulative Net Gain"}),c.jsxs("div",{className:"cumulative-chart",children:[c.jsx("div",{className:"chart-zero-line"}),J.map((R,te)=>{const de=R.total>=0,N=R.chipOnly?0:Math.max(Math.abs(R.total)/q*50,2),j=R.chip?Wo[R.chip]:null;return c.jsxs("div",{className:`chart-bar-group ${R.chip?"chart-bar-chip":""}`,children:[j&&c.jsx("span",{className:`chart-chip-tag chip-${R.chip}`,children:j}),c.jsx("div",{className:"chart-bar-area",children:R.chipOnly?c.jsx("div",{className:"chart-bar-top",children:c.jsx("span",{className:"chart-bar-val chart-chip-marker",children:Wo[R.chip]})}):de?c.jsxs("div",{className:"chart-bar-top",children:[c.jsxs("span",{className:"chart-bar-val",children:[R.total>=0?"+":"",R.total]}),c.jsx("div",{className:`chart-bar bar-positive ${R.chip?`bar-chip-${R.chip}`:""}`,style:{height:`${N}%`}})]}):c.jsxs("div",{className:"chart-bar-bottom",children:[c.jsx("div",{className:`chart-bar bar-negative ${R.chip?`bar-chip-${R.chip}`:""}`,style:{height:`${N}%`}}),c.jsx("span",{className:"chart-bar-val",children:R.total})]})}),c.jsxs("span",{className:"chart-bar-label",children:["GW",R.gw]})]},te)})]})]}),c.jsxs("div",{className:"transfer-filter-bar",children:[c.jsxs("div",{className:"view-toggle",children:[c.jsx("button",{className:`view-toggle-btn ${C==="weekly"?"view-active":""}`,onClick:()=>E("weekly"),children:"Weekly"}),c.jsx("button",{className:`view-toggle-btn ${C==="individual"?"view-active":""}`,onClick:()=>E("individual"),children:"Individual"})]}),c.jsx("span",{className:"filter-label",children:"Filter:"}),nD.map(R=>c.jsx("button",{className:`filter-btn ${y===R?"filter-active":""}`,onClick:()=>x(R),children:R},R)),c.jsxs("span",{className:"filter-count",children:[V.length," transfer",V.length!==1?"s":""]})]}),C==="individual"&&c.jsx("div",{className:"transfer-list",children:V.map(R=>{const te=f.indexOf(R),de=p===te,N=R.netGain>=0,j=P.has(te);return c.jsxs("div",{ref:A=>Y.current[te]=A,className:`transfer-card ${N?"transfer-positive":"transfer-negative"} ${j?"transfer-new":""}`,onClick:()=>b(de?null:te),children:[j&&c.jsx("div",{className:"new-badge",children:"NEW"}),c.jsxs("div",{className:"transfer-header",children:[c.jsxs("div",{className:"transfer-gw-row",children:[c.jsxs("span",{className:"transfer-gw",children:["GW",R.gameweek]}),R.chip&&c.jsxs("span",{className:`transfer-chip-badge chip-${R.chip}`,children:[Wo[R.chip],"  ",Vh[R.chip]]})]}),c.jsxs("div",{className:`transfer-net ${N?"net-positive":"net-negative"}`,children:[N?"+":"",R.netGain," pts"]})]}),c.jsxs("div",{className:"transfer-players",children:[c.jsxs("div",{className:"transfer-player out",children:[c.jsx("div",{className:"transfer-direction",children:"OUT"}),c.jsxs("div",{className:"transfer-player-info",children:[c.jsx("span",{className:"transfer-player-name",children:R.playerOut.name}),c.jsxs("span",{className:"transfer-player-meta",children:[R.playerOut.club,"  ",R.playerOut.position]})]}),c.jsxs("div",{className:"transfer-player-points",children:[R.playerOut.pointsSinceTransfer," pts"]})]}),c.jsx("div",{className:"transfer-arrow",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M12 5v14M5 12l7 7 7-7"})})}),c.jsxs("div",{className:"transfer-player in",children:[c.jsx("div",{className:"transfer-direction",children:"IN"}),c.jsxs("div",{className:"transfer-player-info",children:[c.jsx("span",{className:"transfer-player-name",children:R.playerIn.name}),c.jsxs("span",{className:"transfer-player-meta",children:[R.playerIn.club,"  ",R.playerIn.position]})]}),c.jsxs("div",{className:"transfer-player-points",children:[R.playerIn.pointsSinceTransfer," pts"]})]})]}),R.transferCost>0&&c.jsxs("div",{className:"transfer-hit",children:["-",R.transferCost," pt hit"]}),c.jsxs("div",{className:"transfer-meta",children:[R.gameweeksCompared," GW",R.gameweeksCompared!==1?"s":""," compared",c.jsx("span",{className:"expand-hint",children:de?"":""})]}),de&&c.jsxs("div",{className:"transfer-breakdown",children:[c.jsxs("div",{className:"breakdown-header",children:[c.jsx("span",{children:"GW"}),c.jsx("span",{children:R.playerOut.name}),c.jsx("span",{children:R.playerIn.name}),c.jsx("span",{children:"Diff"})]}),R.gwBreakdown.map(A=>c.jsxs("div",{className:"breakdown-row",children:[c.jsx("span",{className:"breakdown-gw",children:A.gw}),c.jsx("span",{className:"breakdown-pts",children:A.outPts}),c.jsx("span",{className:"breakdown-pts",children:A.inPts}),c.jsxs("span",{className:`breakdown-diff ${A.diff>=0?"diff-positive":"diff-negative"}`,children:[A.diff>=0?"+":"",A.diff]})]},A.gw)),c.jsxs("div",{className:"breakdown-row breakdown-total",children:[c.jsx("span",{className:"breakdown-gw",children:"Total"}),c.jsx("span",{className:"breakdown-pts",children:R.playerOut.pointsSinceTransfer}),c.jsx("span",{className:"breakdown-pts",children:R.playerIn.pointsSinceTransfer}),c.jsxs("span",{className:`breakdown-diff ${R.netGain>=0?"diff-positive":"diff-negative"}`,children:[R.netGain>=0?"+":"",R.netGain]})]})]})]},te)})}),C==="weekly"&&c.jsx(iD,{transfers:V,expandedId:p,setExpandedId:b})]})}function iD({transfers:s,expandedId:t,setExpandedId:i}){const r=Z.useMemo(()=>{const o={};for(const u of s)o[u.gameweek]||(o[u.gameweek]={gameweek:u.gameweek,chip:u.chip,transfers:[],totalNetGain:0,transferCost:u.transferCost||0}),o[u.gameweek].transfers.push(u),o[u.gameweek].totalNetGain+=u.netGain;return Object.values(o).sort((u,f)=>f.gameweek-u.gameweek)},[s]);return c.jsx("div",{className:"transfer-list",children:r.map(o=>{const u=`gw-${o.gameweek}`,f=t===u,m=o.totalNetGain>=0,g=o.transfers.length;return c.jsxs("div",{className:`transfer-card weekly-card ${m?"transfer-positive":"transfer-negative"}`,onClick:()=>i(f?null:u),children:[c.jsxs("div",{className:"transfer-header",children:[c.jsxs("div",{className:"transfer-gw-row",children:[c.jsxs("span",{className:"transfer-gw",children:["GW",o.gameweek]}),o.chip&&c.jsxs("span",{className:`transfer-chip-badge chip-${o.chip}`,children:[Wo[o.chip],"  ",Vh[o.chip]]}),c.jsxs("span",{className:"weekly-count",children:[g," transfer",g!==1?"s":""]})]}),c.jsxs("div",{className:`transfer-net ${m?"net-positive":"net-negative"}`,children:[m?"+":"",o.totalNetGain," pts"]})]}),c.jsx("div",{className:"weekly-transfers",children:o.transfers.map((p,b)=>{const y=p.netGain>=0;return c.jsxs("div",{className:"weekly-transfer-row",children:[c.jsxs("div",{className:"weekly-player out",children:[c.jsx("span",{className:"weekly-player-name",children:p.playerOut.name}),c.jsx("span",{className:"weekly-player-meta",children:p.playerOut.club})]}),c.jsx("div",{className:"weekly-arrow",children:c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:c.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})}),c.jsxs("div",{className:"weekly-player in",children:[c.jsx("span",{className:"weekly-player-name",children:p.playerIn.name}),c.jsx("span",{className:"weekly-player-meta",children:p.playerIn.club})]}),c.jsxs("div",{className:`weekly-diff ${y?"diff-positive":"diff-negative"}`,children:[y?"+":"",p.netGain]})]},b)})}),o.transferCost>0&&c.jsxs("div",{className:"transfer-hit",children:["-",o.transferCost," pt hit"]}),c.jsx("div",{className:"transfer-meta",children:c.jsx("span",{className:"expand-hint",children:f?" Hide details":" Show details"})}),f&&c.jsx("div",{className:"weekly-expanded",children:o.transfers.map((p,b)=>c.jsxs("div",{className:"weekly-detail-card",children:[c.jsxs("div",{className:"weekly-detail-header",children:[c.jsxs("span",{className:"weekly-detail-names",children:[p.playerOut.name,"  ",p.playerIn.name]}),c.jsxs("span",{className:`weekly-detail-net ${p.netGain>=0?"diff-positive":"diff-negative"}`,children:[p.netGain>=0?"+":"",p.netGain," pts"]})]}),c.jsxs("div",{className:"weekly-detail-meta",children:[p.playerOut.position,"  ",p.gameweeksCompared," GW",p.gameweeksCompared!==1?"s":""," compared"]}),p.gwBreakdown&&c.jsxs("div",{className:"transfer-breakdown",children:[c.jsxs("div",{className:"breakdown-header",children:[c.jsx("span",{children:"GW"}),c.jsx("span",{children:p.playerOut.name}),c.jsx("span",{children:p.playerIn.name}),c.jsx("span",{children:"Diff"})]}),p.gwBreakdown.map(y=>c.jsxs("div",{className:"breakdown-row",children:[c.jsx("span",{className:"breakdown-gw",children:y.gw}),c.jsx("span",{className:"breakdown-pts",children:y.outPts}),c.jsx("span",{className:"breakdown-pts",children:y.inPts}),c.jsxs("span",{className:`breakdown-diff ${y.diff>=0?"diff-positive":"diff-negative"}`,children:[y.diff>=0?"+":"",y.diff]})]},y.gw)),c.jsxs("div",{className:"breakdown-row breakdown-total",children:[c.jsx("span",{className:"breakdown-gw",children:"Total"}),c.jsx("span",{className:"breakdown-pts",children:p.playerOut.pointsSinceTransfer}),c.jsx("span",{className:"breakdown-pts",children:p.playerIn.pointsSinceTransfer}),c.jsxs("span",{className:`breakdown-diff ${p.netGain>=0?"diff-positive":"diff-negative"}`,children:[p.netGain>=0?"+":"",p.netGain]})]})]})]},b))})]},u)})})}const aD=[{id:"predicted",label:"Predicted"},{id:"recent",label:"This GW"},{id:"season",label:"Season"}];function rD(){const s=new Date,t=s.getFullYear(),i=new Date(t,2,31),r=new Date(t,2,31-i.getDay(),1,0),o=new Date(t,9,31),u=new Date(t,9,31-o.getDay(),1,0),m=s>=r&&s<u?3600*1e3:0,g=s.getTimezoneOffset()*60*1e3;return m+g}function lD(){const s=new Date,t=rD(),i=new Date(s.getTime()+t),r=new Date(i);return r.setHours(2,30,0,0),i.getHours()>=3&&r.setDate(r.getDate()+1),new Date(r.getTime()-t)}function Ny(s){if(!s)return null;const t=new Date(s)-new Date;return t<=0?{label:"PASSED",d:0,h:0,m:0,s:0}:{d:Math.floor(t/864e5),h:Math.floor(t%864e5/36e5),m:Math.floor(t%36e5/6e4),s:Math.floor(t%6e4/1e3)}}function oD(s){return s?new Date(s).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"TBD"}function cD(s){const t=Math.abs(s);return t>=1e6?(s/1e6).toFixed(1)+"M":t>=1e3?(s/1e3).toFixed(1)+"k":s.toString()}function zo({value:s,label:t}){return c.jsxs("div",{className:"pc-cd-unit",children:[c.jsx("span",{className:"pc-cd-digits",children:String(s).padStart(2,"0")}),c.jsx("span",{className:"pc-cd-label",children:t})]})}function Ey({iso:s,accent:t}){const[i,r]=Z.useState(()=>Ny(s));if(Z.useEffect(()=>{const u=setInterval(()=>r(Ny(s)),1e3);return()=>clearInterval(u)},[s]),!i)return c.jsx("span",{className:"pc-cd-tbd",children:"--:--"});if(i.label==="PASSED")return c.jsx("span",{className:"pc-cd-passed",children:"PASSED"});const o=i.d===0&&i.h<6;return c.jsxs("div",{className:`pc-cd ${t} ${o?"pc-cd-urgent":""}`,children:[i.d>0&&c.jsxs(c.Fragment,{children:[c.jsx(zo,{value:i.d,label:"d"}),c.jsx("span",{className:"pc-cd-sep",children:":"})]}),c.jsx(zo,{value:i.h,label:"h"}),c.jsx("span",{className:"pc-cd-sep",children:":"}),c.jsx(zo,{value:i.m,label:"m"}),c.jsx("span",{className:"pc-cd-sep",children:":"}),c.jsx(zo,{value:i.s,label:"s"})]})}function uD({deadline:s,nextGw:t,currentGw:i}){const r=lD();return c.jsxs("div",{className:"pc-strip",children:[c.jsxs("div",{className:"pc-strip-cell",children:[c.jsx("span",{className:"pc-strip-label",children:"Next Price Change"}),c.jsx(Ey,{iso:r.toISOString(),accent:"pc-accent-amber"})]}),c.jsx("div",{className:"pc-strip-divider"}),c.jsxs("div",{className:"pc-strip-cell",children:[c.jsxs("span",{className:"pc-strip-label",children:["GW",t," Deadline",c.jsx("span",{className:"pc-strip-date",children:oD(s)})]}),c.jsx(Ey,{iso:s,accent:"pc-accent-red"})]}),c.jsx("div",{className:"pc-strip-divider"}),c.jsxs("div",{className:"pc-strip-cell pc-strip-cell-sm",children:[c.jsx("span",{className:"pc-strip-label",children:"Gameweek"}),c.jsx("span",{className:"pc-strip-gw",children:i})]})]})}function dD({value:s,max:t,direction:i}){const r=t>0?Math.min(Math.abs(s)/t*100,100):0;return c.jsx("div",{className:"pc-bar-track",children:c.jsx("div",{className:`pc-bar-fill ${i==="in"?"pc-bar-green":"pc-bar-red"}`,style:{width:`${r}%`}})})}function bh({player:s,rank:t,maxNet:i,direction:r,delay:o}){return c.jsxs("div",{className:"pc-row",style:{animationDelay:`${o}ms`},children:[c.jsx("span",{className:"pc-rank",children:t}),c.jsxs("div",{className:"pc-player-col",children:[c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),c.jsxs("div",{className:"pc-player-text",children:[c.jsx("span",{className:"pc-name",children:s.name}),c.jsxs("span",{className:"pc-meta",children:[s.clubShort,"  ",s.selectedByPercent,"%"]})]})]}),c.jsxs("div",{className:"pc-price-col",children:[c.jsxs("span",{className:"pc-price",children:["",s.price,"m"]}),s.costChangeEvent!==0&&c.jsxs("span",{className:`pc-delta ${s.costChangeEvent>0?"pc-up":"pc-down"}`,children:[s.costChangeEvent>0?"+":"",s.costChangeEvent.toFixed(1)]})]}),c.jsxs("div",{className:"pc-activity-col",children:[c.jsxs("span",{className:`pc-net ${r==="in"?"pc-up":"pc-down"}`,children:[s.netTransfersEvent>0?"+":"",cD(s.netTransfersEvent)]}),c.jsx(dD,{value:s.netTransfersEvent,max:i,direction:r})]}),c.jsx("div",{className:"pc-form-col",children:c.jsx("span",{className:"pc-form-val",children:s.form})}),c.jsx("span",{className:`pc-fix fixture-badge fdr-${s.nextDifficulty}`,children:s.nextFixture}),c.jsx("span",{className:`pc-signal ${r==="in"?"pc-signal-rise":"pc-signal-fall"} ${s.pricePressure==="rising"||s.pricePressure==="falling"?"pc-signal-strong":""}`,children:r==="in"?"":""})]})}function Ty({player:s,rank:t,type:i,delay:r}){const o=s.costChangeStart;return c.jsxs("div",{className:"pc-row",style:{animationDelay:`${r}ms`},children:[c.jsx("span",{className:"pc-rank",children:t}),c.jsxs("div",{className:"pc-player-col",children:[c.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),c.jsxs("div",{className:"pc-player-text",children:[c.jsx("span",{className:"pc-name",children:s.name}),c.jsxs("span",{className:"pc-meta",children:[s.clubShort,"  ",s.totalPoints," pts"]})]})]}),c.jsxs("div",{className:"pc-price-col",children:[c.jsxs("span",{className:"pc-price",children:["",s.price,"m"]}),c.jsxs("span",{className:"pc-from",children:["was ",s.startPrice.toFixed(1)]})]}),c.jsx("div",{className:"pc-activity-col",children:c.jsxs("span",{className:`pc-season-delta ${o>0?"pc-up":"pc-down"}`,children:[o>0?"+":"","",o.toFixed(1),"m"]})}),c.jsx("div",{className:"pc-form-col",children:c.jsx("span",{className:"pc-form-val",children:s.form})}),c.jsx("span",{className:`pc-fix fixture-badge fdr-${s.nextDifficulty}`,children:s.nextFixture}),c.jsx("span",{className:`pc-signal ${i==="risers"?"pc-signal-rise":"pc-signal-fall"}`,children:i==="risers"?"":""})]})}function Or({title:s,count:t,accent:i,hint:r,children:o}){return c.jsxs("div",{className:`pc-section ${i}`,children:[c.jsxs("div",{className:"pc-section-head",children:[c.jsx("div",{className:"pc-section-accent"}),c.jsx("h3",{children:s}),t!=null&&c.jsx("span",{className:"pc-count",children:t})]}),r&&c.jsx("p",{className:"pc-hint",children:r}),c.jsxs("div",{className:"pc-table-header",children:[c.jsx("span",{className:"pc-th pc-th-rank",children:"#"}),c.jsx("span",{className:"pc-th pc-th-player",children:"Player"}),c.jsx("span",{className:"pc-th pc-th-price",children:"Price"}),c.jsx("span",{className:"pc-th pc-th-activity",children:"Activity"}),c.jsx("span",{className:"pc-th pc-th-form",children:"Form"}),c.jsx("span",{className:"pc-th pc-th-fix",children:"Next"}),c.jsx("span",{className:"pc-th pc-th-signal"})]}),o]})}function hD(){const[s,t]=Z.useState("predicted"),{data:i,loading:r,error:o,reload:u}=Rs(pR,[],1800*1e3);function f(){qA(),u()}if(r)return c.jsx(yi,{message:"Loading price data..."});if(o)return c.jsx(Oa,{message:o,onRetry:f});const{rising:m,falling:g,recentChanges:p,biggestRisers:b,biggestFallers:y,currentGw:x,nextGw:C,deadline:E,lastUpdated:P}=i,U=m.length>0?Math.max(...m.map(V=>Math.abs(V.netTransfersEvent))):1,Y=g.length>0?Math.max(...g.map(V=>Math.abs(V.netTransfersEvent))):1,$=p.length>0?Math.max(...p.map(V=>Math.abs(V.netTransfersEvent))):1;return c.jsxs("div",{className:"price-changes",children:[c.jsxs("div",{className:"pc-header",children:[c.jsxs("div",{className:"pc-header-left",children:[c.jsxs("h2",{children:[c.jsx("span",{className:"pc-live-dot"}),"Price Tracker"]}),c.jsx("span",{className:"pc-updated",children:P})]}),c.jsxs("button",{className:"pc-refresh",onClick:f,children:[c.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"23 4 23 10 17 10"}),c.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),"Refresh"]})]}),c.jsx(uD,{deadline:E,nextGw:C,currentGw:x}),c.jsxs("div",{className:"pc-pills",children:[c.jsxs("div",{className:"pc-pill pc-pill-rise",children:[c.jsx("span",{className:"pc-pill-num",children:m.length}),c.jsx("span",{className:"pc-pill-label",children:"Rising"})]}),c.jsxs("div",{className:"pc-pill pc-pill-fall",children:[c.jsx("span",{className:"pc-pill-num",children:g.length}),c.jsx("span",{className:"pc-pill-label",children:"Falling"})]}),c.jsxs("div",{className:"pc-pill pc-pill-changed",children:[c.jsx("span",{className:"pc-pill-num",children:p.length}),c.jsx("span",{className:"pc-pill-label",children:"Changed"})]})]}),c.jsx("div",{className:"pc-views",children:aD.map(V=>c.jsx("button",{className:`pc-view-btn ${s===V.id?"active":""}`,onClick:()=>t(V.id),children:V.label},V.id))}),s==="predicted"&&c.jsxs(c.Fragment,{children:[c.jsx(Or,{title:"Buy Before Rise",count:m.length,accent:"pc-sec-green",hint:"High transfer-in volume  price increase expected",children:m.length===0?c.jsx("p",{className:"pc-empty",children:"No predicted rises right now"}):m.map((V,z)=>c.jsx(bh,{player:V,rank:z+1,maxNet:U,direction:"in",delay:z*30},V.id))}),c.jsx(Or,{title:"Sell Before Drop",count:g.length,accent:"pc-sec-red",hint:"Losing ownership fast  price drop expected",children:g.length===0?c.jsx("p",{className:"pc-empty",children:"No predicted drops right now"}):g.map((V,z)=>c.jsx(bh,{player:V,rank:z+1,maxNet:Y,direction:"out",delay:z*30},V.id))})]}),s==="recent"&&c.jsx(Or,{title:"Price Changes This GW",count:p.length,accent:"pc-sec-neutral",children:p.length===0?c.jsx("p",{className:"pc-empty",children:"No price changes yet this gameweek"}):p.map((V,z)=>c.jsx(bh,{player:V,rank:z+1,maxNet:$,direction:V.costChangeEvent>0?"in":"out",delay:z*30},V.id))}),s==="season"&&c.jsxs(c.Fragment,{children:[c.jsx(Or,{title:"Biggest Risers",accent:"pc-sec-green",children:b.map((V,z)=>c.jsx(Ty,{player:V,rank:z+1,type:"risers",delay:z*30},V.id))}),c.jsx(Or,{title:"Biggest Fallers",accent:"pc-sec-red",children:y.map((V,z)=>c.jsx(Ty,{player:V,rank:z+1,type:"fallers",delay:z*30},V.id))})]})]})}const Cy=[{id:"team",label:"My Team",icon:"shield"},{id:"formation",label:"Formation",icon:"formation"},{id:"points",label:"Points",icon:"chart"},{id:"trade",label:"Trade Analyzer",icon:"swap"},{id:"transfers",label:"Transfers",icon:"transfers"},{id:"prices",label:"Prices",icon:"prices"},{id:"fixtures",label:"Fixtures",icon:"calendar"}],fD={id:"admin",label:"Admin",icon:"admin"},mD={shield:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),chart:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),c.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),c.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),swap:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"17 1 21 5 17 9"}),c.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),c.jsx("polyline",{points:"7 23 3 19 7 15"}),c.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),calendar:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),c.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),c.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),formation:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2"}),c.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"7",cy:"10",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"17",cy:"10",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"8",cy:"16",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"16",cy:"16",r:"1.5",fill:"currentColor"}),c.jsx("circle",{cx:"12",cy:"21",r:"1.5",fill:"currentColor"})]}),prices:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),c.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),transfers:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2v20M2 12h20"}),c.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor",stroke:"none"}),c.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor",stroke:"none"}),c.jsx("path",{d:"M7 9l5-5 5 5M17 15l-5 5-5-5"})]}),admin:c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 15c-3.87 0-7 1.57-7 3.5V21h14v-2.5c0-1.93-3.13-3.5-7-3.5z"}),c.jsx("circle",{cx:"12",cy:"8",r:"4"}),c.jsx("path",{d:"M19 8l1.5 1.5L22 8"})]})};function pD({onSwitchApp:s}){const{user:t,fplCode:i,isAdmin:r,logout:o}=Da(),[u,f]=Z.useState("team"),{data:m,loading:g,error:p,reload:b}=Rs(cR,[i]),y=r?[...Cy,fD]:Cy;return c.jsxs("div",{className:"app",children:[c.jsx("header",{className:"app-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{className:"brand",children:[c.jsx("div",{className:"brand-icon",children:"FF"}),c.jsxs("div",{children:[c.jsx("h1",{children:"My Football Fantasy"}),c.jsx("p",{className:"subtitle",children:"Season 2025/26"})]})]}),c.jsx("nav",{className:"nav-tabs",children:y.map(x=>c.jsxs("button",{className:`nav-tab ${u===x.id?"active":""}`,onClick:()=>f(x.id),children:[mD[x.icon],c.jsx("span",{children:x.label})]},x.id))}),c.jsxs("div",{className:"user-info",children:[c.jsx("span",{className:"user-name",children:t.displayName}),c.jsx("button",{className:"btn btn-secondary app-switcher",onClick:s,children:"Room 3D"}),c.jsx("button",{className:"btn btn-secondary",onClick:o,children:"Logout"})]})]})}),c.jsxs("main",{className:"app-main",children:[u==="team"&&c.jsx(xR,{teamData:m,teamLoading:g,teamError:p,teamReload:b}),u==="formation"&&c.jsx($R,{teamData:m,teamLoading:g,teamError:p,teamReload:b}),u==="points"&&c.jsx(TR,{teamData:m,teamLoading:g,teamError:p,teamReload:b}),u==="trade"&&c.jsx(MR,{teamData:m,teamLoading:g,teamError:p,teamReload:b}),u==="prices"&&c.jsx(hD,{}),u==="transfers"&&c.jsx(sD,{}),u==="fixtures"&&c.jsx(GR,{}),u==="admin"&&r&&c.jsx(ZR,{})]}),c.jsx("div",{className:"version-label",children:"v0.07"})]})}function gD(){const{user:s,loading:t}=Da(),[i,r]=Z.useState("ff");return t?c.jsx("div",{className:"app-loading",children:c.jsx("div",{className:"loading-spinner"})}):s?i==="room3d"?c.jsx(tD,{onSwitchApp:()=>r("ff")}):c.jsx(pD,{onSwitchApp:()=>r("room3d")}):c.jsx(eD,{onLogin:r})}function _D(){return c.jsx(XA,{children:c.jsx(gD,{})})}NN.createRoot(document.getElementById("root")).render(c.jsx(Z.StrictMode,{children:c.jsx(_D,{})}));
