(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();var qd={exports:{}},yr={};var G_;function nx(){if(G_)return yr;G_=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:r,key:h,ref:o!==void 0?o:null,props:u}}return yr.Fragment=t,yr.jsx=s,yr.jsxs=s,yr}var F_;function ix(){return F_||(F_=1,qd.exports=nx()),qd.exports}var f=ix(),Vd={exports:{}},me={};var q_;function sx(){if(q_)return me;q_=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function w(x){return x===null||typeof x!="object"?null:(x=S&&x[S]||x["@@iterator"],typeof x=="function"?x:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,q={};function Z(x,I,M){this.props=x,this.context=I,this.refs=q,this.updater=M||N}Z.prototype.isReactComponent={},Z.prototype.setState=function(x,I){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,I,"setState")},Z.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function H(){}H.prototype=Z.prototype;function X(x,I,M){this.props=x,this.context=I,this.refs=q,this.updater=M||N}var B=X.prototype=new H;B.constructor=X,P(B,Z.prototype),B.isPureReactComponent=!0;var K=Array.isArray;function te(){}var Q={H:null,A:null,T:null,S:null},he=Object.prototype.hasOwnProperty;function Ce(x,I,M){var G=M.ref;return{$$typeof:i,type:x,key:I,ref:G!==void 0?G:null,props:M}}function pe(x,I){return Ce(x.type,I,x.props)}function ue(x){return typeof x=="object"&&x!==null&&x.$$typeof===i}function ie(x){var I={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(M){return I[M]})}var se=/\/+/g;function L(x,I){return typeof x=="object"&&x!==null&&x.key!=null?ie(""+x.key):I.toString(36)}function F(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(te,te):(x.status="pending",x.then(function(I){x.status==="pending"&&(x.status="fulfilled",x.value=I)},function(I){x.status==="pending"&&(x.status="rejected",x.reason=I)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function j(x,I,M,G,re){var ae=typeof x;(ae==="undefined"||ae==="boolean")&&(x=null);var ve=!1;if(x===null)ve=!0;else switch(ae){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(x.$$typeof){case i:case t:ve=!0;break;case y:return ve=x._init,j(ve(x._payload),I,M,G,re)}}if(ve)return re=re(x),ve=G===""?"."+L(x,0):G,K(re)?(M="",ve!=null&&(M=ve.replace(se,"$&/")+"/"),j(re,I,M,"",function(cn){return cn})):re!=null&&(ue(re)&&(re=pe(re,M+(re.key==null||x&&x.key===re.key?"":(""+re.key).replace(se,"$&/")+"/")+ve)),I.push(re)),1;ve=0;var We=G===""?".":G+":";if(K(x))for(var Me=0;Me<x.length;Me++)G=x[Me],ae=We+L(G,Me),ve+=j(G,I,M,ae,re);else if(Me=w(x),typeof Me=="function")for(x=Me.call(x),Me=0;!(G=x.next()).done;)G=G.value,ae=We+L(G,Me++),ve+=j(G,I,M,ae,re);else if(ae==="object"){if(typeof x.then=="function")return j(F(x),I,M,G,re);throw I=String(x),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ve}function V(x,I,M){if(x==null)return x;var G=[],re=0;return j(x,G,"","",function(ae){return I.call(M,ae,re++)}),G}function W(x){if(x._status===-1){var I=x._result;I=I(),I.then(function(M){(x._status===0||x._status===-1)&&(x._status=1,x._result=M)},function(M){(x._status===0||x._status===-1)&&(x._status=2,x._result=M)}),x._status===-1&&(x._status=0,x._result=I)}if(x._status===1)return x._result.default;throw x._result}var J=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},le={map:V,forEach:function(x,I,M){V(x,function(){I.apply(this,arguments)},M)},count:function(x){var I=0;return V(x,function(){I++}),I},toArray:function(x){return V(x,function(I){return I})||[]},only:function(x){if(!ue(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return me.Activity=b,me.Children=le,me.Component=Z,me.Fragment=s,me.Profiler=o,me.PureComponent=X,me.StrictMode=r,me.Suspense=g,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,me.__COMPILER_RUNTIME={__proto__:null,c:function(x){return Q.H.useMemoCache(x)}},me.cache=function(x){return function(){return x.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(x,I,M){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var G=P({},x.props),re=x.key;if(I!=null)for(ae in I.key!==void 0&&(re=""+I.key),I)!he.call(I,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&I.ref===void 0||(G[ae]=I[ae]);var ae=arguments.length-2;if(ae===1)G.children=M;else if(1<ae){for(var ve=Array(ae),We=0;We<ae;We++)ve[We]=arguments[We+2];G.children=ve}return Ce(x.type,re,G)},me.createContext=function(x){return x={$$typeof:h,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:u,_context:x},x},me.createElement=function(x,I,M){var G,re={},ae=null;if(I!=null)for(G in I.key!==void 0&&(ae=""+I.key),I)he.call(I,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(re[G]=I[G]);var ve=arguments.length-2;if(ve===1)re.children=M;else if(1<ve){for(var We=Array(ve),Me=0;Me<ve;Me++)We[Me]=arguments[Me+2];re.children=We}if(x&&x.defaultProps)for(G in ve=x.defaultProps,ve)re[G]===void 0&&(re[G]=ve[G]);return Ce(x,ae,re)},me.createRef=function(){return{current:null}},me.forwardRef=function(x){return{$$typeof:m,render:x}},me.isValidElement=ue,me.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:W}},me.memo=function(x,I){return{$$typeof:_,type:x,compare:I===void 0?null:I}},me.startTransition=function(x){var I=Q.T,M={};Q.T=M;try{var G=x(),re=Q.S;re!==null&&re(M,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(te,J)}catch(ae){J(ae)}finally{I!==null&&M.types!==null&&(I.types=M.types),Q.T=I}},me.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},me.use=function(x){return Q.H.use(x)},me.useActionState=function(x,I,M){return Q.H.useActionState(x,I,M)},me.useCallback=function(x,I){return Q.H.useCallback(x,I)},me.useContext=function(x){return Q.H.useContext(x)},me.useDebugValue=function(){},me.useDeferredValue=function(x,I){return Q.H.useDeferredValue(x,I)},me.useEffect=function(x,I){return Q.H.useEffect(x,I)},me.useEffectEvent=function(x){return Q.H.useEffectEvent(x)},me.useId=function(){return Q.H.useId()},me.useImperativeHandle=function(x,I,M){return Q.H.useImperativeHandle(x,I,M)},me.useInsertionEffect=function(x,I){return Q.H.useInsertionEffect(x,I)},me.useLayoutEffect=function(x,I){return Q.H.useLayoutEffect(x,I)},me.useMemo=function(x,I){return Q.H.useMemo(x,I)},me.useOptimistic=function(x,I){return Q.H.useOptimistic(x,I)},me.useReducer=function(x,I,M){return Q.H.useReducer(x,I,M)},me.useRef=function(x){return Q.H.useRef(x)},me.useState=function(x){return Q.H.useState(x)},me.useSyncExternalStore=function(x,I,M){return Q.H.useSyncExternalStore(x,I,M)},me.useTransition=function(){return Q.H.useTransition()},me.version="19.2.4",me}var V_;function zf(){return V_||(V_=1,Vd.exports=sx()),Vd.exports}var ee=zf(),Yd={exports:{}},br={},Xd={exports:{}},Kd={};var Y_;function ax(){return Y_||(Y_=1,(function(i){function t(j,V){var W=j.length;j.push(V);e:for(;0<W;){var J=W-1>>>1,le=j[J];if(0<o(le,V))j[J]=V,j[W]=le,W=J;else break e}}function s(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var V=j[0],W=j.pop();if(W!==V){j[0]=W;e:for(var J=0,le=j.length,x=le>>>1;J<x;){var I=2*(J+1)-1,M=j[I],G=I+1,re=j[G];if(0>o(M,W))G<le&&0>o(re,M)?(j[J]=re,j[G]=W,J=G):(j[J]=M,j[I]=W,J=I);else if(G<le&&0>o(re,W))j[J]=re,j[G]=W,J=G;else break e}}return V}function o(j,V){var W=j.sortIndex-V.sortIndex;return W!==0?W:j.id-V.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var g=[],_=[],y=1,b=null,S=3,w=!1,N=!1,P=!1,q=!1,Z=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function B(j){for(var V=s(_);V!==null;){if(V.callback===null)r(_);else if(V.startTime<=j)r(_),V.sortIndex=V.expirationTime,t(g,V);else break;V=s(_)}}function K(j){if(P=!1,B(j),!N)if(s(g)!==null)N=!0,te||(te=!0,ie());else{var V=s(_);V!==null&&F(K,V.startTime-j)}}var te=!1,Q=-1,he=5,Ce=-1;function pe(){return q?!0:!(i.unstable_now()-Ce<he)}function ue(){if(q=!1,te){var j=i.unstable_now();Ce=j;var V=!0;try{e:{N=!1,P&&(P=!1,H(Q),Q=-1),w=!0;var W=S;try{t:{for(B(j),b=s(g);b!==null&&!(b.expirationTime>j&&pe());){var J=b.callback;if(typeof J=="function"){b.callback=null,S=b.priorityLevel;var le=J(b.expirationTime<=j);if(j=i.unstable_now(),typeof le=="function"){b.callback=le,B(j),V=!0;break t}b===s(g)&&r(g),B(j)}else r(g);b=s(g)}if(b!==null)V=!0;else{var x=s(_);x!==null&&F(K,x.startTime-j),V=!1}}break e}finally{b=null,S=W,w=!1}V=void 0}}finally{V?ie():te=!1}}}var ie;if(typeof X=="function")ie=function(){X(ue)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,L=se.port2;se.port1.onmessage=ue,ie=function(){L.postMessage(null)}}else ie=function(){Z(ue,0)};function F(j,V){Q=Z(function(){j(i.unstable_now())},V)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(j){switch(S){case 1:case 2:case 3:var V=3;break;default:V=S}var W=S;S=V;try{return j()}finally{S=W}},i.unstable_requestPaint=function(){q=!0},i.unstable_runWithPriority=function(j,V){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var W=S;S=j;try{return V()}finally{S=W}},i.unstable_scheduleCallback=function(j,V,W){var J=i.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,j){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=W+le,j={id:y++,callback:V,priorityLevel:j,startTime:W,expirationTime:le,sortIndex:-1},W>J?(j.sortIndex=W,t(_,j),s(g)===null&&j===s(_)&&(P?(H(Q),Q=-1):P=!0,F(K,W-J))):(j.sortIndex=le,t(g,j),N||w||(N=!0,te||(te=!0,ie()))),j},i.unstable_shouldYield=pe,i.unstable_wrapCallback=function(j){var V=S;return function(){var W=S;S=V;try{return j.apply(this,arguments)}finally{S=W}}}})(Kd)),Kd}var X_;function rx(){return X_||(X_=1,Xd.exports=ax()),Xd.exports}var Qd={exports:{}},_t={};var K_;function lx(){if(K_)return _t;K_=1;var i=zf();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)_+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:y}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_t.createPortal=function(g,_){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,y)},_t.flushSync=function(g){var _=h.T,y=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=_,r.p=y,r.d.f()}},_t.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},_t.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},_t.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var y=_.as,b=m(y,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,w=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;y==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:w}):y==="script"&&r.d.X(g,{crossOrigin:b,integrity:S,fetchPriority:w,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},_t.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var y=m(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},_t.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var y=_.as,b=m(y,_.crossOrigin);r.d.L(g,y,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},_t.preloadModule=function(g,_){if(typeof g=="string")if(_){var y=m(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:y,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},_t.requestFormReset=function(g){r.d.r(g)},_t.unstable_batchedUpdates=function(g,_){return g(_)},_t.useFormState=function(g,_,y){return h.H.useFormState(g,_,y)},_t.useFormStatus=function(){return h.H.useHostTransitionStatus()},_t.version="19.2.4",_t}var Q_;function ox(){if(Q_)return Qd.exports;Q_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Qd.exports=lx(),Qd.exports}var W_;function cx(){if(W_)return br;W_=1;var i=rx(),t=zf(),s=ox();function r(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function h(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function _(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(r(188));return n!==e?null:e}for(var a=e,l=n;;){var c=a.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===a)return g(c),e;if(d===l)return g(c),n;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=c,l=d;else{for(var p=!1,v=c.child;v;){if(v===a){p=!0,a=c,l=d;break}if(v===l){p=!0,l=c,a=d;break}v=v.sibling}if(!p){for(v=d.child;v;){if(v===a){p=!0,a=d,l=c;break}if(v===l){p=!0,l=d,a=c;break}v=v.sibling}if(!p)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),X=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),Ce=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=ue&&e[ue]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function L(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case Z:return"Profiler";case q:return"StrictMode";case K:return"Suspense";case te:return"SuspenseList";case Ce:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case X:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case B:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return n=e.displayName||null,n!==null?n:L(e.type)||"Memo";case he:n=e._payload,e=e._init;try{return L(e(n))}catch{}}return null}var F=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},J=[],le=-1;function x(e){return{current:e}}function I(e){0>le||(e.current=J[le],J[le]=null,le--)}function M(e,n){le++,J[le]=e.current,e.current=n}var G=x(null),re=x(null),ae=x(null),ve=x(null);function We(e,n){switch(M(ae,n),M(re,e),M(G,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?d_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=d_(n),e=f_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(G),M(G,e)}function Me(){I(G),I(re),I(ae)}function cn(e){e.memoizedState!==null&&M(ve,e);var n=G.current,a=f_(n,e.type);n!==a&&(M(re,e),M(G,a))}function cl(e){re.current===e&&(I(G),I(re)),ve.current===e&&(I(ve),pr._currentValue=W)}var Cc,Hh;function Di(e){if(Cc===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Cc=n&&n[1]||"",Hh=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cc+e+Hh}var wc=!1;function Ac(e,n){if(!e||wc)return"";wc=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var z=function(){throw Error()};if(Object.defineProperty(z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(z,[])}catch(D){var O=D}Reflect.construct(e,[],z)}else{try{z.call()}catch(D){O=D}e.call(z.prototype)}}else{try{throw Error()}catch(D){O=D}(z=e())&&typeof z.catch=="function"&&z.catch(function(){})}}catch(D){if(D&&O&&typeof D.stack=="string")return[D.stack,O.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),p=d[0],v=d[1];if(p&&v){var E=p.split(`
`),R=v.split(`
`);for(c=l=0;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;for(;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;if(l===E.length||c===R.length)for(l=E.length-1,c=R.length-1;1<=l&&0<=c&&E[l]!==R[c];)c--;for(;1<=l&&0<=c;l--,c--)if(E[l]!==R[c]){if(l!==1||c!==1)do if(l--,c--,0>c||E[l]!==R[c]){var k=`
`+E[l].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=l&&0<=c);break}}}finally{wc=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Di(a):""}function Ib(e,n){switch(e.tag){case 26:case 27:case 5:return Di(e.type);case 16:return Di("Lazy");case 13:return e.child!==n&&n!==null?Di("Suspense Fallback"):Di("Suspense");case 19:return Di("SuspenseList");case 0:case 15:return Ac(e.type,!1);case 11:return Ac(e.type.render,!1);case 1:return Ac(e.type,!0);case 31:return Di("Activity");default:return""}}function Gh(e){try{var n="",a=null;do n+=Ib(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Rc=Object.prototype.hasOwnProperty,jc=i.unstable_scheduleCallback,Oc=i.unstable_cancelCallback,Mb=i.unstable_shouldYield,kb=i.unstable_requestPaint,Ot=i.unstable_now,Lb=i.unstable_getCurrentPriorityLevel,Fh=i.unstable_ImmediatePriority,qh=i.unstable_UserBlockingPriority,ul=i.unstable_NormalPriority,Ub=i.unstable_LowPriority,Vh=i.unstable_IdlePriority,zb=i.log,Pb=i.unstable_setDisableYieldValue,wa=null,Dt=null;function Vn(e){if(typeof zb=="function"&&Pb(e),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(wa,e)}catch{}}var It=Math.clz32?Math.clz32:Gb,Bb=Math.log,Hb=Math.LN2;function Gb(e){return e>>>=0,e===0?32:31-(Bb(e)/Hb|0)|0}var dl=256,fl=262144,hl=4194304;function Ii(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ml(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var c=0,d=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var v=l&134217727;return v!==0?(l=v&~d,l!==0?c=Ii(l):(p&=v,p!==0?c=Ii(p):a||(a=v&~e,a!==0&&(c=Ii(a))))):(v=l&~d,v!==0?c=Ii(v):p!==0?c=Ii(p):a||(a=l&~e,a!==0&&(c=Ii(a)))),c===0?0:n!==0&&n!==c&&(n&d)===0&&(d=c&-c,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:c}function Aa(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Fb(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yh(){var e=hl;return hl<<=1,(hl&62914560)===0&&(hl=4194304),e}function Dc(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Ra(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qb(e,n,a,l,c,d){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,E=e.expirationTimes,R=e.hiddenUpdates;for(a=p&~a;0<a;){var k=31-It(a),z=1<<k;v[k]=0,E[k]=-1;var O=R[k];if(O!==null)for(R[k]=null,k=0;k<O.length;k++){var D=O[k];D!==null&&(D.lane&=-536870913)}a&=~z}l!==0&&Xh(e,l,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(p&~n))}function Xh(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-It(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Kh(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-It(a),c=1<<l;c&n|e[l]&n&&(e[l]|=n),a&=~c}}function Qh(e,n){var a=n&-n;return a=(a&42)!==0?1:Ic(a),(a&(e.suspendedLanes|n))!==0?0:a}function Ic(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Mc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wh(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:k_(e.type))}function $h(e,n){var a=V.p;try{return V.p=e,n()}finally{V.p=a}}var Yn=Math.random().toString(36).slice(2),ut="__reactFiber$"+Yn,xt="__reactProps$"+Yn,_s="__reactContainer$"+Yn,kc="__reactEvents$"+Yn,Vb="__reactListeners$"+Yn,Yb="__reactHandles$"+Yn,Zh="__reactResources$"+Yn,ja="__reactMarker$"+Yn;function Lc(e){delete e[ut],delete e[xt],delete e[kc],delete e[Vb],delete e[Yb]}function vs(e){var n=e[ut];if(n)return n;for(var a=e.parentNode;a;){if(n=a[_s]||a[ut]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=y_(e);e!==null;){if(a=e[ut])return a;e=y_(e)}return n}e=a,a=e.parentNode}return null}function ys(e){if(e=e[ut]||e[_s]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Oa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(r(33))}function bs(e){var n=e[Zh];return n||(n=e[Zh]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function rt(e){e[ja]=!0}var Jh=new Set,em={};function Mi(e,n){Ss(e,n),Ss(e+"Capture",n)}function Ss(e,n){for(em[e]=n,e=0;e<n.length;e++)Jh.add(n[e])}var Xb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tm={},nm={};function Kb(e){return Rc.call(nm,e)?!0:Rc.call(tm,e)?!1:Xb.test(e)?nm[e]=!0:(tm[e]=!0,!1)}function pl(e,n,a){if(Kb(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function gl(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function _n(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function Ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function im(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Qb(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,d=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(p){a=""+p,d.call(this,p)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Uc(e){if(!e._valueTracker){var n=im(e)?"checked":"value";e._valueTracker=Qb(e,n,""+e[n])}}function sm(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=im(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function _l(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wb=/[\n"\\]/g;function Gt(e){return e.replace(Wb,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function zc(e,n,a,l,c,d,p,v){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),n!=null?p==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ht(n)):e.value!==""+Ht(n)&&(e.value=""+Ht(n)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),n!=null?Pc(e,p,Ht(n)):a!=null?Pc(e,p,Ht(a)):l!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Ht(v):e.removeAttribute("name")}function am(e,n,a,l,c,d,p,v){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){Uc(e);return}a=a!=null?""+Ht(a):"",n=n!=null?""+Ht(n):a,v||n===e.value||(e.value=n),e.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=v?e.checked:!!l,e.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Uc(e)}function Pc(e,n,a){n==="number"&&_l(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Es(e,n,a,l){if(e=e.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=n.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ht(a),n=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function rm(e,n,a){if(n!=null&&(n=""+Ht(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Ht(a):""}function lm(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(F(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Ht(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Uc(e)}function xs(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var $b=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function om(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||$b.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function cm(e,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&a[c]!==l&&om(e,c,l)}else for(var d in n)n.hasOwnProperty(d)&&om(e,d,n[d])}function Bc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vl(e){return Jb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function vn(){}var Hc=null;function Gc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ts=null,Ns=null;function um(e){var n=ys(e);if(n&&(e=n.stateNode)){var a=e[xt]||null;e:switch(e=n.stateNode,n.type){case"input":if(zc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gt(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var c=l[xt]||null;if(!c)throw Error(r(90));zc(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&sm(l)}break e;case"textarea":rm(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Es(e,!!a.multiple,n,!1)}}}var Fc=!1;function dm(e,n,a){if(Fc)return e(n,a);Fc=!0;try{var l=e(n);return l}finally{if(Fc=!1,(Ts!==null||Ns!==null)&&(ao(),Ts&&(n=Ts,e=Ns,Ns=Ts=null,um(n),e)))for(n=0;n<e.length;n++)um(e[n])}}function Da(e,n){var a=e.stateNode;if(a===null)return null;var l=a[xt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=!1;if(yn)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){qc=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{qc=!1}var Xn=null,Vc=null,yl=null;function fm(){if(yl)return yl;var e,n=Vc,a=n.length,l,c="value"in Xn?Xn.value:Xn.textContent,d=c.length;for(e=0;e<a&&n[e]===c[e];e++);var p=a-e;for(l=1;l<=p&&n[a-l]===c[d-l];l++);return yl=c.slice(e,1<l?1-l:void 0)}function bl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Sl(){return!0}function hm(){return!1}function Tt(e){function n(a,l,c,d,p){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Sl:hm,this.isPropagationStopped=hm,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),n}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},El=Tt(ki),Ma=b({},ki,{view:0,detail:0}),eS=Tt(Ma),Yc,Xc,ka,xl=b({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ka&&(ka&&e.type==="mousemove"?(Yc=e.screenX-ka.screenX,Xc=e.screenY-ka.screenY):Xc=Yc=0,ka=e),Yc)},movementY:function(e){return"movementY"in e?e.movementY:Xc}}),mm=Tt(xl),tS=b({},xl,{dataTransfer:0}),nS=Tt(tS),iS=b({},Ma,{relatedTarget:0}),Kc=Tt(iS),sS=b({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),aS=Tt(sS),rS=b({},ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lS=Tt(rS),oS=b({},ki,{data:0}),pm=Tt(oS),cS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fS(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=dS[e])?!!n[e]:!1}function Qc(){return fS}var hS=b({},Ma,{key:function(e){if(e.key){var n=cS[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qc,charCode:function(e){return e.type==="keypress"?bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mS=Tt(hS),pS=b({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gm=Tt(pS),gS=b({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qc}),_S=Tt(gS),vS=b({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),yS=Tt(vS),bS=b({},xl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),SS=Tt(bS),ES=b({},ki,{newState:0,oldState:0}),xS=Tt(ES),TS=[9,13,27,32],Wc=yn&&"CompositionEvent"in window,La=null;yn&&"documentMode"in document&&(La=document.documentMode);var NS=yn&&"TextEvent"in window&&!La,_m=yn&&(!Wc||La&&8<La&&11>=La),vm=" ",ym=!1;function bm(e,n){switch(e){case"keyup":return TS.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cs=!1;function CS(e,n){switch(e){case"compositionend":return Sm(n);case"keypress":return n.which!==32?null:(ym=!0,vm);case"textInput":return e=n.data,e===vm&&ym?null:e;default:return null}}function wS(e,n){if(Cs)return e==="compositionend"||!Wc&&bm(e,n)?(e=fm(),yl=Vc=Xn=null,Cs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _m&&n.locale!=="ko"?null:n.data;default:return null}}var AS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!AS[e.type]:n==="textarea"}function xm(e,n,a,l){Ts?Ns?Ns.push(l):Ns=[l]:Ts=l,n=ho(n,"onChange"),0<n.length&&(a=new El("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var Ua=null,za=null;function RS(e){a_(e,0)}function Tl(e){var n=Oa(e);if(sm(n))return e}function Tm(e,n){if(e==="change")return n}var Nm=!1;if(yn){var $c;if(yn){var Zc="oninput"in document;if(!Zc){var Cm=document.createElement("div");Cm.setAttribute("oninput","return;"),Zc=typeof Cm.oninput=="function"}$c=Zc}else $c=!1;Nm=$c&&(!document.documentMode||9<document.documentMode)}function wm(){Ua&&(Ua.detachEvent("onpropertychange",Am),za=Ua=null)}function Am(e){if(e.propertyName==="value"&&Tl(za)){var n=[];xm(n,za,e,Gc(e)),dm(RS,n)}}function jS(e,n,a){e==="focusin"?(wm(),Ua=n,za=a,Ua.attachEvent("onpropertychange",Am)):e==="focusout"&&wm()}function OS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tl(za)}function DS(e,n){if(e==="click")return Tl(n)}function IS(e,n){if(e==="input"||e==="change")return Tl(n)}function MS(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Mt=typeof Object.is=="function"?Object.is:MS;function Pa(e,n){if(Mt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!Rc.call(n,c)||!Mt(e[c],n[c]))return!1}return!0}function Rm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jm(e,n){var a=Rm(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rm(a)}}function Om(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Om(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Dm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=_l(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=_l(e.document)}return n}function Jc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var kS=yn&&"documentMode"in document&&11>=document.documentMode,ws=null,eu=null,Ba=null,tu=!1;function Im(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;tu||ws==null||ws!==_l(l)||(l=ws,"selectionStart"in l&&Jc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ba&&Pa(Ba,l)||(Ba=l,l=ho(eu,"onSelect"),0<l.length&&(n=new El("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=ws)))}function Li(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var As={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionrun:Li("Transition","TransitionRun"),transitionstart:Li("Transition","TransitionStart"),transitioncancel:Li("Transition","TransitionCancel"),transitionend:Li("Transition","TransitionEnd")},nu={},Mm={};yn&&(Mm=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function Ui(e){if(nu[e])return nu[e];if(!As[e])return e;var n=As[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Mm)return nu[e]=n[a];return e}var km=Ui("animationend"),Lm=Ui("animationiteration"),Um=Ui("animationstart"),LS=Ui("transitionrun"),US=Ui("transitionstart"),zS=Ui("transitioncancel"),zm=Ui("transitionend"),Pm=new Map,iu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");iu.push("scrollEnd");function en(e,n){Pm.set(e,n),Mi(n,[e])}var Nl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ft=[],Rs=0,su=0;function Cl(){for(var e=Rs,n=su=Rs=0;n<e;){var a=Ft[n];Ft[n++]=null;var l=Ft[n];Ft[n++]=null;var c=Ft[n];Ft[n++]=null;var d=Ft[n];if(Ft[n++]=null,l!==null&&c!==null){var p=l.pending;p===null?c.next=c:(c.next=p.next,p.next=c),l.pending=c}d!==0&&Bm(a,c,d)}}function wl(e,n,a,l){Ft[Rs++]=e,Ft[Rs++]=n,Ft[Rs++]=a,Ft[Rs++]=l,su|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function au(e,n,a,l){return wl(e,n,a,l),Al(e)}function zi(e,n){return wl(e,null,null,n),Al(e)}function Bm(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var c=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&n!==null&&(c=31-It(a),e=d.hiddenUpdates,l=e[c],l===null?e[c]=[n]:l.push(n),n.lane=a|536870912),d):null}function Al(e){if(50<or)throw or=0,md=null,Error(r(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var js={};function PS(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,n,a,l){return new PS(e,n,a,l)}function ru(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bn(e,n){var a=e.alternate;return a===null?(a=kt(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Hm(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Rl(e,n,a,l,c,d){var p=0;if(l=e,typeof e=="function")ru(e)&&(p=1);else if(typeof e=="string")p=qE(e,a,G.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ce:return e=kt(31,a,n,c),e.elementType=Ce,e.lanes=d,e;case P:return Pi(a.children,c,d,n);case q:p=8,c|=24;break;case Z:return e=kt(12,a,n,c|2),e.elementType=Z,e.lanes=d,e;case K:return e=kt(13,a,n,c),e.elementType=K,e.lanes=d,e;case te:return e=kt(19,a,n,c),e.elementType=te,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:p=10;break e;case H:p=9;break e;case B:p=11;break e;case Q:p=14;break e;case he:p=16,l=null;break e}p=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return n=kt(p,a,n,c),n.elementType=e,n.type=l,n.lanes=d,n}function Pi(e,n,a,l){return e=kt(7,e,l,n),e.lanes=a,e}function lu(e,n,a){return e=kt(6,e,null,n),e.lanes=a,e}function Gm(e){var n=kt(18,null,null,0);return n.stateNode=e,n}function ou(e,n,a){return n=kt(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Fm=new WeakMap;function qt(e,n){if(typeof e=="object"&&e!==null){var a=Fm.get(e);return a!==void 0?a:(n={value:e,source:n,stack:Gh(n)},Fm.set(e,n),n)}return{value:e,source:n,stack:Gh(n)}}var Os=[],Ds=0,jl=null,Ha=0,Vt=[],Yt=0,Kn=null,un=1,dn="";function Sn(e,n){Os[Ds++]=Ha,Os[Ds++]=jl,jl=e,Ha=n}function qm(e,n,a){Vt[Yt++]=un,Vt[Yt++]=dn,Vt[Yt++]=Kn,Kn=e;var l=un;e=dn;var c=32-It(l)-1;l&=~(1<<c),a+=1;var d=32-It(n)+c;if(30<d){var p=c-c%5;d=(l&(1<<p)-1).toString(32),l>>=p,c-=p,un=1<<32-It(n)+c|a<<c|l,dn=d+e}else un=1<<d|a<<c|l,dn=e}function cu(e){e.return!==null&&(Sn(e,1),qm(e,1,0))}function uu(e){for(;e===jl;)jl=Os[--Ds],Os[Ds]=null,Ha=Os[--Ds],Os[Ds]=null;for(;e===Kn;)Kn=Vt[--Yt],Vt[Yt]=null,dn=Vt[--Yt],Vt[Yt]=null,un=Vt[--Yt],Vt[Yt]=null}function Vm(e,n){Vt[Yt++]=un,Vt[Yt++]=dn,Vt[Yt++]=Kn,un=n.id,dn=n.overflow,Kn=e}var dt=null,Fe=null,we=!1,Qn=null,Xt=!1,du=Error(r(519));function Wn(e){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ga(qt(n,e)),du}function Ym(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[ut]=e,n[xt]=l,a){case"dialog":Se("cancel",n),Se("close",n);break;case"iframe":case"object":case"embed":Se("load",n);break;case"video":case"audio":for(a=0;a<ur.length;a++)Se(ur[a],n);break;case"source":Se("error",n);break;case"img":case"image":case"link":Se("error",n),Se("load",n);break;case"details":Se("toggle",n);break;case"input":Se("invalid",n),am(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Se("invalid",n);break;case"textarea":Se("invalid",n),lm(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||c_(n.textContent,a)?(l.popover!=null&&(Se("beforetoggle",n),Se("toggle",n)),l.onScroll!=null&&Se("scroll",n),l.onScrollEnd!=null&&Se("scrollend",n),l.onClick!=null&&(n.onclick=vn),n=!0):n=!1,n||Wn(e,!0)}function Xm(e){for(dt=e.return;dt;)switch(dt.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:dt=dt.return}}function Is(e){if(e!==dt)return!1;if(!we)return Xm(e),we=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Rd(e.type,e.memoizedProps)),a=!a),a&&Fe&&Wn(e),Xm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Fe=v_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));Fe=v_(e)}else n===27?(n=Fe,ui(e.type)?(e=Md,Md=null,Fe=e):Fe=n):Fe=dt?Qt(e.stateNode.nextSibling):null;return!0}function Bi(){Fe=dt=null,we=!1}function fu(){var e=Qn;return e!==null&&(At===null?At=e:At.push.apply(At,e),Qn=null),e}function Ga(e){Qn===null?Qn=[e]:Qn.push(e)}var hu=x(null),Hi=null,En=null;function $n(e,n,a){M(hu,n._currentValue),n._currentValue=a}function xn(e){e._currentValue=hu.current,I(hu)}function mu(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function pu(e,n,a,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var p=c.child;d=d.firstContext;e:for(;d!==null;){var v=d;d=c;for(var E=0;E<n.length;E++)if(v.context===n[E]){d.lanes|=a,v=d.alternate,v!==null&&(v.lanes|=a),mu(d.return,a,e),l||(p=null);break e}d=v.next}}else if(c.tag===18){if(p=c.return,p===null)throw Error(r(341));p.lanes|=a,d=p.alternate,d!==null&&(d.lanes|=a),mu(p,a,e),p=null}else p=c.child;if(p!==null)p.return=c;else for(p=c;p!==null;){if(p===e){p=null;break}if(c=p.sibling,c!==null){c.return=p.return,p=c;break}p=p.return}c=p}}function Ms(e,n,a,l){e=null;for(var c=n,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var p=c.alternate;if(p===null)throw Error(r(387));if(p=p.memoizedProps,p!==null){var v=c.type;Mt(c.pendingProps.value,p.value)||(e!==null?e.push(v):e=[v])}}else if(c===ve.current){if(p=c.alternate,p===null)throw Error(r(387));p.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(pr):e=[pr])}c=c.return}e!==null&&pu(n,e,a,l),n.flags|=262144}function Ol(e){for(e=e.firstContext;e!==null;){if(!Mt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Gi(e){Hi=e,En=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ft(e){return Km(Hi,e)}function Dl(e,n){return Hi===null&&Gi(e),Km(e,n)}function Km(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},En===null){if(e===null)throw Error(r(308));En=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else En=En.next=n;return a}var BS=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},HS=i.unstable_scheduleCallback,GS=i.unstable_NormalPriority,Je={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gu(){return{controller:new BS,data:new Map,refCount:0}}function Fa(e){e.refCount--,e.refCount===0&&HS(GS,function(){e.controller.abort()})}var qa=null,_u=0,ks=0,Ls=null;function FS(e,n){if(qa===null){var a=qa=[];_u=0,ks=bd(),Ls={status:"pending",value:void 0,then:function(l){a.push(l)}}}return _u++,n.then(Qm,Qm),n}function Qm(){if(--_u===0&&qa!==null){Ls!==null&&(Ls.status="fulfilled");var e=qa;qa=null,ks=0,Ls=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function qS(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var Wm=j.S;j.S=function(e,n){Ig=Ot(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&FS(e,n),Wm!==null&&Wm(e,n)};var Fi=x(null);function vu(){var e=Fi.current;return e!==null?e:Be.pooledCache}function Il(e,n){n===null?M(Fi,Fi.current):M(Fi,n.pool)}function $m(){var e=vu();return e===null?null:{parent:Je._currentValue,pool:e}}var Us=Error(r(460)),yu=Error(r(474)),Ml=Error(r(542)),kl={then:function(){}};function Zm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jm(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(vn,vn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,tp(e),e;default:if(typeof n.status=="string")n.then(vn,vn);else{if(e=Be,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,tp(e),e}throw Vi=n,Us}}function qi(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Vi=a,Us):a}}var Vi=null;function ep(){if(Vi===null)throw Error(r(459));var e=Vi;return Vi=null,e}function tp(e){if(e===Us||e===Ml)throw Error(r(483))}var zs=null,Va=0;function Ll(e){var n=Va;return Va+=1,zs===null&&(zs=[]),Jm(zs,e,n)}function Ya(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Ul(e,n){throw n.$$typeof===S?Error(r(525)):(e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function np(e){function n(C,T){if(e){var A=C.deletions;A===null?(C.deletions=[T],C.flags|=16):A.push(T)}}function a(C,T){if(!e)return null;for(;T!==null;)n(C,T),T=T.sibling;return null}function l(C){for(var T=new Map;C!==null;)C.key!==null?T.set(C.key,C):T.set(C.index,C),C=C.sibling;return T}function c(C,T){return C=bn(C,T),C.index=0,C.sibling=null,C}function d(C,T,A){return C.index=A,e?(A=C.alternate,A!==null?(A=A.index,A<T?(C.flags|=67108866,T):A):(C.flags|=67108866,T)):(C.flags|=1048576,T)}function p(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function v(C,T,A,U){return T===null||T.tag!==6?(T=lu(A,C.mode,U),T.return=C,T):(T=c(T,A),T.return=C,T)}function E(C,T,A,U){var oe=A.type;return oe===P?k(C,T,A.props.children,U,A.key):T!==null&&(T.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===he&&qi(oe)===T.type)?(T=c(T,A.props),Ya(T,A),T.return=C,T):(T=Rl(A.type,A.key,A.props,null,C.mode,U),Ya(T,A),T.return=C,T)}function R(C,T,A,U){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=ou(A,C.mode,U),T.return=C,T):(T=c(T,A.children||[]),T.return=C,T)}function k(C,T,A,U,oe){return T===null||T.tag!==7?(T=Pi(A,C.mode,U,oe),T.return=C,T):(T=c(T,A),T.return=C,T)}function z(C,T,A){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=lu(""+T,C.mode,A),T.return=C,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case w:return A=Rl(T.type,T.key,T.props,null,C.mode,A),Ya(A,T),A.return=C,A;case N:return T=ou(T,C.mode,A),T.return=C,T;case he:return T=qi(T),z(C,T,A)}if(F(T)||ie(T))return T=Pi(T,C.mode,A,null),T.return=C,T;if(typeof T.then=="function")return z(C,Ll(T),A);if(T.$$typeof===X)return z(C,Dl(C,T),A);Ul(C,T)}return null}function O(C,T,A,U){var oe=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return oe!==null?null:v(C,T,""+A,U);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case w:return A.key===oe?E(C,T,A,U):null;case N:return A.key===oe?R(C,T,A,U):null;case he:return A=qi(A),O(C,T,A,U)}if(F(A)||ie(A))return oe!==null?null:k(C,T,A,U,null);if(typeof A.then=="function")return O(C,T,Ll(A),U);if(A.$$typeof===X)return O(C,T,Dl(C,A),U);Ul(C,A)}return null}function D(C,T,A,U,oe){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return C=C.get(A)||null,v(T,C,""+U,oe);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case w:return C=C.get(U.key===null?A:U.key)||null,E(T,C,U,oe);case N:return C=C.get(U.key===null?A:U.key)||null,R(T,C,U,oe);case he:return U=qi(U),D(C,T,A,U,oe)}if(F(U)||ie(U))return C=C.get(A)||null,k(T,C,U,oe,null);if(typeof U.then=="function")return D(C,T,A,Ll(U),oe);if(U.$$typeof===X)return D(C,T,A,Dl(T,U),oe);Ul(T,U)}return null}function $(C,T,A,U){for(var oe=null,Ae=null,ne=T,_e=T=0,Te=null;ne!==null&&_e<A.length;_e++){ne.index>_e?(Te=ne,ne=null):Te=ne.sibling;var Re=O(C,ne,A[_e],U);if(Re===null){ne===null&&(ne=Te);break}e&&ne&&Re.alternate===null&&n(C,ne),T=d(Re,T,_e),Ae===null?oe=Re:Ae.sibling=Re,Ae=Re,ne=Te}if(_e===A.length)return a(C,ne),we&&Sn(C,_e),oe;if(ne===null){for(;_e<A.length;_e++)ne=z(C,A[_e],U),ne!==null&&(T=d(ne,T,_e),Ae===null?oe=ne:Ae.sibling=ne,Ae=ne);return we&&Sn(C,_e),oe}for(ne=l(ne);_e<A.length;_e++)Te=D(ne,C,_e,A[_e],U),Te!==null&&(e&&Te.alternate!==null&&ne.delete(Te.key===null?_e:Te.key),T=d(Te,T,_e),Ae===null?oe=Te:Ae.sibling=Te,Ae=Te);return e&&ne.forEach(function(pi){return n(C,pi)}),we&&Sn(C,_e),oe}function ce(C,T,A,U){if(A==null)throw Error(r(151));for(var oe=null,Ae=null,ne=T,_e=T=0,Te=null,Re=A.next();ne!==null&&!Re.done;_e++,Re=A.next()){ne.index>_e?(Te=ne,ne=null):Te=ne.sibling;var pi=O(C,ne,Re.value,U);if(pi===null){ne===null&&(ne=Te);break}e&&ne&&pi.alternate===null&&n(C,ne),T=d(pi,T,_e),Ae===null?oe=pi:Ae.sibling=pi,Ae=pi,ne=Te}if(Re.done)return a(C,ne),we&&Sn(C,_e),oe;if(ne===null){for(;!Re.done;_e++,Re=A.next())Re=z(C,Re.value,U),Re!==null&&(T=d(Re,T,_e),Ae===null?oe=Re:Ae.sibling=Re,Ae=Re);return we&&Sn(C,_e),oe}for(ne=l(ne);!Re.done;_e++,Re=A.next())Re=D(ne,C,_e,Re.value,U),Re!==null&&(e&&Re.alternate!==null&&ne.delete(Re.key===null?_e:Re.key),T=d(Re,T,_e),Ae===null?oe=Re:Ae.sibling=Re,Ae=Re);return e&&ne.forEach(function(tx){return n(C,tx)}),we&&Sn(C,_e),oe}function Ue(C,T,A,U){if(typeof A=="object"&&A!==null&&A.type===P&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case w:e:{for(var oe=A.key;T!==null;){if(T.key===oe){if(oe=A.type,oe===P){if(T.tag===7){a(C,T.sibling),U=c(T,A.props.children),U.return=C,C=U;break e}}else if(T.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===he&&qi(oe)===T.type){a(C,T.sibling),U=c(T,A.props),Ya(U,A),U.return=C,C=U;break e}a(C,T);break}else n(C,T);T=T.sibling}A.type===P?(U=Pi(A.props.children,C.mode,U,A.key),U.return=C,C=U):(U=Rl(A.type,A.key,A.props,null,C.mode,U),Ya(U,A),U.return=C,C=U)}return p(C);case N:e:{for(oe=A.key;T!==null;){if(T.key===oe)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){a(C,T.sibling),U=c(T,A.children||[]),U.return=C,C=U;break e}else{a(C,T);break}else n(C,T);T=T.sibling}U=ou(A,C.mode,U),U.return=C,C=U}return p(C);case he:return A=qi(A),Ue(C,T,A,U)}if(F(A))return $(C,T,A,U);if(ie(A)){if(oe=ie(A),typeof oe!="function")throw Error(r(150));return A=oe.call(A),ce(C,T,A,U)}if(typeof A.then=="function")return Ue(C,T,Ll(A),U);if(A.$$typeof===X)return Ue(C,T,Dl(C,A),U);Ul(C,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,T!==null&&T.tag===6?(a(C,T.sibling),U=c(T,A),U.return=C,C=U):(a(C,T),U=lu(A,C.mode,U),U.return=C,C=U),p(C)):a(C,T)}return function(C,T,A,U){try{Va=0;var oe=Ue(C,T,A,U);return zs=null,oe}catch(ne){if(ne===Us||ne===Ml)throw ne;var Ae=kt(29,ne,null,C.mode);return Ae.lanes=U,Ae.return=C,Ae}}}var Yi=np(!0),ip=np(!1),Zn=!1;function bu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Su(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Jn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ei(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Oe&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=Al(e),Bm(e,null,a),n}return wl(e,l,n,a),Al(e)}function Xa(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Kh(e,a)}}function Eu(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?c=d=p:d=d.next=p,a=a.next}while(a!==null);d===null?c=d=n:d=d.next=n}else c=d=n;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var xu=!1;function Ka(){if(xu){var e=Ls;if(e!==null)throw e}}function Qa(e,n,a,l){xu=!1;var c=e.updateQueue;Zn=!1;var d=c.firstBaseUpdate,p=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var E=v,R=E.next;E.next=null,p===null?d=R:p.next=R,p=E;var k=e.alternate;k!==null&&(k=k.updateQueue,v=k.lastBaseUpdate,v!==p&&(v===null?k.firstBaseUpdate=R:v.next=R,k.lastBaseUpdate=E))}if(d!==null){var z=c.baseState;p=0,k=R=E=null,v=d;do{var O=v.lane&-536870913,D=O!==v.lane;if(D?(xe&O)===O:(l&O)===O){O!==0&&O===ks&&(xu=!0),k!==null&&(k=k.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var $=e,ce=v;O=n;var Ue=a;switch(ce.tag){case 1:if($=ce.payload,typeof $=="function"){z=$.call(Ue,z,O);break e}z=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=ce.payload,O=typeof $=="function"?$.call(Ue,z,O):$,O==null)break e;z=b({},z,O);break e;case 2:Zn=!0}}O=v.callback,O!==null&&(e.flags|=64,D&&(e.flags|=8192),D=c.callbacks,D===null?c.callbacks=[O]:D.push(O))}else D={lane:O,tag:v.tag,payload:v.payload,callback:v.callback,next:null},k===null?(R=k=D,E=z):k=k.next=D,p|=O;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;D=v,v=D.next,D.next=null,c.lastBaseUpdate=D,c.shared.pending=null}}while(!0);k===null&&(E=z),c.baseState=E,c.firstBaseUpdate=R,c.lastBaseUpdate=k,d===null&&(c.shared.lanes=0),ai|=p,e.lanes=p,e.memoizedState=z}}function sp(e,n){if(typeof e!="function")throw Error(r(191,e));e.call(n)}function ap(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)sp(a[e],n)}var Ps=x(null),zl=x(0);function rp(e,n){e=Dn,M(zl,e),M(Ps,n),Dn=e|n.baseLanes}function Tu(){M(zl,Dn),M(Ps,Ps.current)}function Nu(){Dn=zl.current,I(Ps),I(zl)}var Lt=x(null),Kt=null;function ti(e){var n=e.alternate;M($e,$e.current&1),M(Lt,e),Kt===null&&(n===null||Ps.current!==null||n.memoizedState!==null)&&(Kt=e)}function Cu(e){M($e,$e.current),M(Lt,e),Kt===null&&(Kt=e)}function lp(e){e.tag===22?(M($e,$e.current),M(Lt,e),Kt===null&&(Kt=e)):ni()}function ni(){M($e,$e.current),M(Lt,Lt.current)}function Ut(e){I(Lt),Kt===e&&(Kt=null),I($e)}var $e=x(0);function Pl(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Dd(a)||Id(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Tn=0,ge=null,ke=null,et=null,Bl=!1,Bs=!1,Xi=!1,Hl=0,Wa=0,Hs=null,VS=0;function Ye(){throw Error(r(321))}function wu(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!Mt(e[a],n[a]))return!1;return!0}function Au(e,n,a,l,c,d){return Tn=d,ge=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,j.H=e===null||e.memoizedState===null?qp:Fu,Xi=!1,d=a(l,c),Xi=!1,Bs&&(d=cp(n,a,l,c)),op(e),d}function op(e){j.H=Ja;var n=ke!==null&&ke.next!==null;if(Tn=0,et=ke=ge=null,Bl=!1,Wa=0,Hs=null,n)throw Error(r(300));e===null||tt||(e=e.dependencies,e!==null&&Ol(e)&&(tt=!0))}function cp(e,n,a,l){ge=e;var c=0;do{if(Bs&&(Hs=null),Wa=0,Bs=!1,25<=c)throw Error(r(301));if(c+=1,et=ke=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}j.H=Vp,d=n(a,l)}while(Bs);return d}function YS(){var e=j.H,n=e.useState()[0];return n=typeof n.then=="function"?$a(n):n,e=e.useState()[0],(ke!==null?ke.memoizedState:null)!==e&&(ge.flags|=1024),n}function Ru(){var e=Hl!==0;return Hl=0,e}function ju(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Ou(e){if(Bl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Bl=!1}Tn=0,et=ke=ge=null,Bs=!1,Wa=Hl=0,Hs=null}function yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?ge.memoizedState=et=e:et=et.next=e,et}function Ze(){if(ke===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var n=et===null?ge.memoizedState:et.next;if(n!==null)et=n,ke=e;else{if(e===null)throw ge.alternate===null?Error(r(467)):Error(r(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},et===null?ge.memoizedState=et=e:et=et.next=e}return et}function Gl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $a(e){var n=Wa;return Wa+=1,Hs===null&&(Hs=[]),e=Jm(Hs,e,n),n=ge,(et===null?n.memoizedState:et.next)===null&&(n=n.alternate,j.H=n===null||n.memoizedState===null?qp:Fu),e}function Fl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $a(e);if(e.$$typeof===X)return ft(e)}throw Error(r(438,String(e)))}function Du(e){var n=null,a=ge.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=ge.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Gl(),ge.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=pe;return n.index++,a}function Nn(e,n){return typeof n=="function"?n(e):n}function ql(e){var n=Ze();return Iu(n,ke,e)}function Iu(e,n,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var c=e.baseQueue,d=l.pending;if(d!==null){if(c!==null){var p=c.next;c.next=d.next,d.next=p}n.baseQueue=c=d,l.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{n=c.next;var v=p=null,E=null,R=n,k=!1;do{var z=R.lane&-536870913;if(z!==R.lane?(xe&z)===z:(Tn&z)===z){var O=R.revertLane;if(O===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),z===ks&&(k=!0);else if((Tn&O)===O){R=R.next,O===ks&&(k=!0);continue}else z={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},E===null?(v=E=z,p=d):E=E.next=z,ge.lanes|=O,ai|=O;z=R.action,Xi&&a(d,z),d=R.hasEagerState?R.eagerState:a(d,z)}else O={lane:z,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},E===null?(v=E=O,p=d):E=E.next=O,ge.lanes|=z,ai|=z;R=R.next}while(R!==null&&R!==n);if(E===null?p=d:E.next=v,!Mt(d,e.memoizedState)&&(tt=!0,k&&(a=Ls,a!==null)))throw a;e.memoizedState=d,e.baseState=p,e.baseQueue=E,l.lastRenderedState=d}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Mu(e){var n=Ze(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,c=a.pending,d=n.memoizedState;if(c!==null){a.pending=null;var p=c=c.next;do d=e(d,p.action),p=p.next;while(p!==c);Mt(d,n.memoizedState)||(tt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,l]}function up(e,n,a){var l=ge,c=Ze(),d=we;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var p=!Mt((ke||c).memoizedState,a);if(p&&(c.memoizedState=a,tt=!0),c=c.queue,Uu(hp.bind(null,l,c,e),[e]),c.getSnapshot!==n||p||et!==null&&et.memoizedState.tag&1){if(l.flags|=2048,Gs(9,{destroy:void 0},fp.bind(null,l,c,a,n),null),Be===null)throw Error(r(349));d||(Tn&127)!==0||dp(l,n,a)}return a}function dp(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=ge.updateQueue,n===null?(n=Gl(),ge.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function fp(e,n,a,l){n.value=a,n.getSnapshot=l,mp(n)&&pp(e)}function hp(e,n,a){return a(function(){mp(n)&&pp(e)})}function mp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!Mt(e,a)}catch{return!0}}function pp(e){var n=zi(e,2);n!==null&&Rt(n,e,2)}function ku(e){var n=yt();if(typeof e=="function"){var a=e;if(e=a(),Xi){Vn(!0);try{a()}finally{Vn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:e},n}function gp(e,n,a,l){return e.baseState=a,Iu(e,ke,typeof l=="function"?l:Nn)}function XS(e,n,a,l,c){if(Xl(e))throw Error(r(485));if(e=n.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){d.listeners.push(p)}};j.T!==null?a(!0):d.isTransition=!1,l(d),a=n.pending,a===null?(d.next=n.pending=d,_p(n,d)):(d.next=a.next,n.pending=a.next=d)}}function _p(e,n){var a=n.action,l=n.payload,c=e.state;if(n.isTransition){var d=j.T,p={};j.T=p;try{var v=a(c,l),E=j.S;E!==null&&E(p,v),vp(e,n,v)}catch(R){Lu(e,n,R)}finally{d!==null&&p.types!==null&&(d.types=p.types),j.T=d}}else try{d=a(c,l),vp(e,n,d)}catch(R){Lu(e,n,R)}}function vp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yp(e,n,l)},function(l){return Lu(e,n,l)}):yp(e,n,a)}function yp(e,n,a){n.status="fulfilled",n.value=a,bp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,_p(e,a)))}function Lu(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,bp(n),n=n.next;while(n!==l)}e.action=null}function bp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Sp(e,n){return n}function Ep(e,n){if(we){var a=Be.formState;if(a!==null){e:{var l=ge;if(we){if(Fe){t:{for(var c=Fe,d=Xt;c.nodeType!==8;){if(!d){c=null;break t}if(c=Qt(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Fe=Qt(c.nextSibling),l=c.data==="F!";break e}}Wn(l)}l=!1}l&&(n=a[0])}}return a=yt(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sp,lastRenderedState:n},a.queue=l,a=Hp.bind(null,ge,l),l.dispatch=a,l=ku(!1),d=Gu.bind(null,ge,!1,l.queue),l=yt(),c={state:n,dispatch:null,action:e,pending:null},l.queue=c,a=XS.bind(null,ge,c,d,a),c.dispatch=a,l.memoizedState=e,[n,a,!1]}function xp(e){var n=Ze();return Tp(n,ke,e)}function Tp(e,n,a){if(n=Iu(e,n,Sp)[0],e=ql(Nn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=$a(n)}catch(p){throw p===Us?Ml:p}else l=n;n=Ze();var c=n.queue,d=c.dispatch;return a!==n.memoizedState&&(ge.flags|=2048,Gs(9,{destroy:void 0},KS.bind(null,c,a),null)),[l,d,e]}function KS(e,n){e.action=n}function Np(e){var n=Ze(),a=ke;if(a!==null)return Tp(n,a,e);Ze(),n=n.memoizedState,a=Ze();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function Gs(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=ge.updateQueue,n===null&&(n=Gl(),ge.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function Cp(){return Ze().memoizedState}function Vl(e,n,a,l){var c=yt();ge.flags|=e,c.memoizedState=Gs(1|n,{destroy:void 0},a,l===void 0?null:l)}function Yl(e,n,a,l){var c=Ze();l=l===void 0?null:l;var d=c.memoizedState.inst;ke!==null&&l!==null&&wu(l,ke.memoizedState.deps)?c.memoizedState=Gs(n,d,a,l):(ge.flags|=e,c.memoizedState=Gs(1|n,d,a,l))}function wp(e,n){Vl(8390656,8,e,n)}function Uu(e,n){Yl(2048,8,e,n)}function QS(e){ge.flags|=4;var n=ge.updateQueue;if(n===null)n=Gl(),ge.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Ap(e){var n=Ze().memoizedState;return QS({ref:n,nextImpl:e}),function(){if((Oe&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Rp(e,n){return Yl(4,2,e,n)}function jp(e,n){return Yl(4,4,e,n)}function Op(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Dp(e,n,a){a=a!=null?a.concat([e]):null,Yl(4,4,Op.bind(null,n,e),a)}function zu(){}function Ip(e,n){var a=Ze();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&wu(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function Mp(e,n){var a=Ze();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&wu(n,l[1]))return l[0];if(l=e(),Xi){Vn(!0);try{e()}finally{Vn(!1)}}return a.memoizedState=[l,n],l}function Pu(e,n,a){return a===void 0||(Tn&1073741824)!==0&&(xe&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=kg(),ge.lanes|=e,ai|=e,a)}function kp(e,n,a,l){return Mt(a,n)?a:Ps.current!==null?(e=Pu(e,a,l),Mt(e,n)||(tt=!0),e):(Tn&42)===0||(Tn&1073741824)!==0&&(xe&261930)===0?(tt=!0,e.memoizedState=a):(e=kg(),ge.lanes|=e,ai|=e,n)}function Lp(e,n,a,l,c){var d=V.p;V.p=d!==0&&8>d?d:8;var p=j.T,v={};j.T=v,Gu(e,!1,n,a);try{var E=c(),R=j.S;if(R!==null&&R(v,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var k=qS(E,l);Za(e,n,k,Bt(e))}else Za(e,n,l,Bt(e))}catch(z){Za(e,n,{then:function(){},status:"rejected",reason:z},Bt())}finally{V.p=d,p!==null&&v.types!==null&&(p.types=v.types),j.T=p}}function WS(){}function Bu(e,n,a,l){if(e.tag!==5)throw Error(r(476));var c=Up(e).queue;Lp(e,c,n,W,a===null?WS:function(){return zp(e),a(l)})}function Up(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:W},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function zp(e){var n=Up(e);n.next===null&&(n=e.alternate.memoizedState),Za(e,n.next.queue,{},Bt())}function Hu(){return ft(pr)}function Pp(){return Ze().memoizedState}function Bp(){return Ze().memoizedState}function $S(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Bt();e=Jn(a);var l=ei(n,e,a);l!==null&&(Rt(l,n,a),Xa(l,n,a)),n={cache:gu()},e.payload=n;return}n=n.return}}function ZS(e,n,a){var l=Bt();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Xl(e)?Gp(n,a):(a=au(e,n,a,l),a!==null&&(Rt(a,e,l),Fp(a,n,l)))}function Hp(e,n,a){var l=Bt();Za(e,n,a,l)}function Za(e,n,a,l){var c={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xl(e))Gp(n,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var p=n.lastRenderedState,v=d(p,a);if(c.hasEagerState=!0,c.eagerState=v,Mt(v,p))return wl(e,n,c,0),Be===null&&Cl(),!1}catch{}if(a=au(e,n,c,l),a!==null)return Rt(a,e,l),Fp(a,n,l),!0}return!1}function Gu(e,n,a,l){if(l={lane:2,revertLane:bd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Xl(e)){if(n)throw Error(r(479))}else n=au(e,a,l,2),n!==null&&Rt(n,e,2)}function Xl(e){var n=e.alternate;return e===ge||n!==null&&n===ge}function Gp(e,n){Bs=Bl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Fp(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,Kh(e,a)}}var Ja={readContext:ft,use:Fl,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye};Ja.useEffectEvent=Ye;var qp={readContext:ft,use:Fl,useCallback:function(e,n){return yt().memoizedState=[e,n===void 0?null:n],e},useContext:ft,useEffect:wp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Vl(4194308,4,Op.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Vl(4194308,4,e,n)},useInsertionEffect:function(e,n){Vl(4,2,e,n)},useMemo:function(e,n){var a=yt();n=n===void 0?null:n;var l=e();if(Xi){Vn(!0);try{e()}finally{Vn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=yt();if(a!==void 0){var c=a(n);if(Xi){Vn(!0);try{a(n)}finally{Vn(!1)}}}else c=n;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=ZS.bind(null,ge,e),[l.memoizedState,e]},useRef:function(e){var n=yt();return e={current:e},n.memoizedState=e},useState:function(e){e=ku(e);var n=e.queue,a=Hp.bind(null,ge,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:zu,useDeferredValue:function(e,n){var a=yt();return Pu(a,e,n)},useTransition:function(){var e=ku(!1);return e=Lp.bind(null,ge,e.queue,!0,!1),yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=ge,c=yt();if(we){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),Be===null)throw Error(r(349));(xe&127)!==0||dp(l,n,a)}c.memoizedState=a;var d={value:a,getSnapshot:n};return c.queue=d,wp(hp.bind(null,l,d,e),[e]),l.flags|=2048,Gs(9,{destroy:void 0},fp.bind(null,l,d,a,n),null),a},useId:function(){var e=yt(),n=Be.identifierPrefix;if(we){var a=dn,l=un;a=(l&~(1<<32-It(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Hl++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=VS++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Hu,useFormState:Ep,useActionState:Ep,useOptimistic:function(e){var n=yt();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Gu.bind(null,ge,!0,a),a.dispatch=n,[e,n]},useMemoCache:Du,useCacheRefresh:function(){return yt().memoizedState=$S.bind(null,ge)},useEffectEvent:function(e){var n=yt(),a={impl:e};return n.memoizedState=a,function(){if((Oe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Fu={readContext:ft,use:Fl,useCallback:Ip,useContext:ft,useEffect:Uu,useImperativeHandle:Dp,useInsertionEffect:Rp,useLayoutEffect:jp,useMemo:Mp,useReducer:ql,useRef:Cp,useState:function(){return ql(Nn)},useDebugValue:zu,useDeferredValue:function(e,n){var a=Ze();return kp(a,ke.memoizedState,e,n)},useTransition:function(){var e=ql(Nn)[0],n=Ze().memoizedState;return[typeof e=="boolean"?e:$a(e),n]},useSyncExternalStore:up,useId:Pp,useHostTransitionStatus:Hu,useFormState:xp,useActionState:xp,useOptimistic:function(e,n){var a=Ze();return gp(a,ke,e,n)},useMemoCache:Du,useCacheRefresh:Bp};Fu.useEffectEvent=Ap;var Vp={readContext:ft,use:Fl,useCallback:Ip,useContext:ft,useEffect:Uu,useImperativeHandle:Dp,useInsertionEffect:Rp,useLayoutEffect:jp,useMemo:Mp,useReducer:Mu,useRef:Cp,useState:function(){return Mu(Nn)},useDebugValue:zu,useDeferredValue:function(e,n){var a=Ze();return ke===null?Pu(a,e,n):kp(a,ke.memoizedState,e,n)},useTransition:function(){var e=Mu(Nn)[0],n=Ze().memoizedState;return[typeof e=="boolean"?e:$a(e),n]},useSyncExternalStore:up,useId:Pp,useHostTransitionStatus:Hu,useFormState:Np,useActionState:Np,useOptimistic:function(e,n){var a=Ze();return ke!==null?gp(a,ke,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Du,useCacheRefresh:Bp};Vp.useEffectEvent=Ap;function qu(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:b({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Vu={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=Bt(),c=Jn(l);c.payload=n,a!=null&&(c.callback=a),n=ei(e,c,l),n!==null&&(Rt(n,e,l),Xa(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=Bt(),c=Jn(l);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=ei(e,c,l),n!==null&&(Rt(n,e,l),Xa(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Bt(),l=Jn(a);l.tag=2,n!=null&&(l.callback=n),n=ei(e,l,a),n!==null&&(Rt(n,e,a),Xa(n,e,a))}};function Yp(e,n,a,l,c,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,p):n.prototype&&n.prototype.isPureReactComponent?!Pa(a,l)||!Pa(c,d):!0}function Xp(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Vu.enqueueReplaceState(n,n.state,null)}function Ki(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=b({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}function Kp(e){Nl(e)}function Qp(e){console.error(e)}function Wp(e){Nl(e)}function Kl(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function $p(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Yu(e,n,a){return a=Jn(a),a.tag=3,a.payload={element:null},a.callback=function(){Kl(e,n)},a}function Zp(e){return e=Jn(e),e.tag=3,e}function Jp(e,n,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var d=l.value;e.payload=function(){return c(d)},e.callback=function(){$p(n,a,l)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){$p(n,a,l),typeof c!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function JS(e,n,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ms(n,a,c,!0),a=Lt.current,a!==null){switch(a.tag){case 31:case 13:return Kt===null?ro():a.alternate===null&&Xe===0&&(Xe=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===kl?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),_d(e,l,c)),!1;case 22:return a.flags|=65536,l===kl?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),_d(e,l,c)),!1}throw Error(r(435,a.tag))}return _d(e,l,c),ro(),!1}if(we)return n=Lt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==du&&(e=Error(r(422),{cause:l}),Ga(qt(e,a)))):(l!==du&&(n=Error(r(423),{cause:l}),Ga(qt(n,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=qt(l,a),c=Yu(e.stateNode,l,c),Eu(e,c),Xe!==4&&(Xe=2)),!1;var d=Error(r(520),{cause:l});if(d=qt(d,a),lr===null?lr=[d]:lr.push(d),Xe!==4&&(Xe=2),n===null)return!0;l=qt(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Yu(a.stateNode,l,e),Eu(a,e),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ri===null||!ri.has(d))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Zp(c),Jp(c,e,a,l),Eu(a,c),!1}a=a.return}while(a!==null);return!1}var Xu=Error(r(461)),tt=!1;function ht(e,n,a,l){n.child=e===null?ip(n,null,a,l):Yi(n,e.child,a,l)}function eg(e,n,a,l,c){a=a.render;var d=n.ref;if("ref"in l){var p={};for(var v in l)v!=="ref"&&(p[v]=l[v])}else p=l;return Gi(n),l=Au(e,n,a,p,d,c),v=Ru(),e!==null&&!tt?(ju(e,n,c),Cn(e,n,c)):(we&&v&&cu(n),n.flags|=1,ht(e,n,l,c),n.child)}function tg(e,n,a,l,c){if(e===null){var d=a.type;return typeof d=="function"&&!ru(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,ng(e,n,d,l,c)):(e=Rl(a.type,null,l,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!td(e,c)){var p=d.memoizedProps;if(a=a.compare,a=a!==null?a:Pa,a(p,l)&&e.ref===n.ref)return Cn(e,n,c)}return n.flags|=1,e=bn(d,l),e.ref=n.ref,e.return=n,n.child=e}function ng(e,n,a,l,c){if(e!==null){var d=e.memoizedProps;if(Pa(d,l)&&e.ref===n.ref)if(tt=!1,n.pendingProps=l=d,td(e,c))(e.flags&131072)!==0&&(tt=!0);else return n.lanes=e.lanes,Cn(e,n,c)}return Ku(e,n,a,l,c)}function ig(e,n,a,l){var c=l.children,d=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=n.child=e.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~d}else l=0,n.child=null;return sg(e,n,d,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Il(n,d!==null?d.cachePool:null),d!==null?rp(n,d):Tu(),lp(n);else return l=n.lanes=536870912,sg(e,n,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Il(n,d.cachePool),rp(n,d),ni(),n.memoizedState=null):(e!==null&&Il(n,null),Tu(),ni());return ht(e,n,c,a),n.child}function er(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function sg(e,n,a,l,c){var d=vu();return d=d===null?null:{parent:Je._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},e!==null&&Il(n,null),Tu(),lp(n),e!==null&&Ms(e,n,l,!0),n.childLanes=c,null}function Ql(e,n){return n=$l({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function ag(e,n,a){return Yi(n,e.child,null,a),e=Ql(n,n.pendingProps),e.flags|=2,Ut(n),n.memoizedState=null,e}function eE(e,n,a){var l=n.pendingProps,c=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(we){if(l.mode==="hidden")return e=Ql(n,l),n.lanes=536870912,er(null,e);if(Cu(n),(e=Fe)?(e=__(e,Xt),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Kn!==null?{id:un,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},a=Gm(e),a.return=n,n.child=a,dt=n,Fe=null)):e=null,e===null)throw Wn(n);return n.lanes=536870912,null}return Ql(n,l)}var d=e.memoizedState;if(d!==null){var p=d.dehydrated;if(Cu(n),c)if(n.flags&256)n.flags&=-257,n=ag(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(r(558));else if(tt||Ms(e,n,a,!1),c=(a&e.childLanes)!==0,tt||c){if(l=Be,l!==null&&(p=Qh(l,a),p!==0&&p!==d.retryLane))throw d.retryLane=p,zi(e,p),Rt(l,e,p),Xu;ro(),n=ag(e,n,a)}else e=d.treeContext,Fe=Qt(p.nextSibling),dt=n,we=!0,Qn=null,Xt=!1,e!==null&&Vm(n,e),n=Ql(n,l),n.flags|=4096;return n}return e=bn(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Wl(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Ku(e,n,a,l,c){return Gi(n),a=Au(e,n,a,l,void 0,c),l=Ru(),e!==null&&!tt?(ju(e,n,c),Cn(e,n,c)):(we&&l&&cu(n),n.flags|=1,ht(e,n,a,c),n.child)}function rg(e,n,a,l,c,d){return Gi(n),n.updateQueue=null,a=cp(n,l,a,c),op(e),l=Ru(),e!==null&&!tt?(ju(e,n,d),Cn(e,n,d)):(we&&l&&cu(n),n.flags|=1,ht(e,n,a,d),n.child)}function lg(e,n,a,l,c){if(Gi(n),n.stateNode===null){var d=js,p=a.contextType;typeof p=="object"&&p!==null&&(d=ft(p)),d=new a(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Vu,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},bu(n),p=a.contextType,d.context=typeof p=="object"&&p!==null?ft(p):js,d.state=n.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(qu(n,a,p,l),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(p=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),p!==d.state&&Vu.enqueueReplaceState(d,d.state,null),Qa(n,l,d,c),Ka(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){d=n.stateNode;var v=n.memoizedProps,E=Ki(a,v);d.props=E;var R=d.context,k=a.contextType;p=js,typeof k=="object"&&k!==null&&(p=ft(k));var z=a.getDerivedStateFromProps;k=typeof z=="function"||typeof d.getSnapshotBeforeUpdate=="function",v=n.pendingProps!==v,k||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v||R!==p)&&Xp(n,d,l,p),Zn=!1;var O=n.memoizedState;d.state=O,Qa(n,l,d,c),Ka(),R=n.memoizedState,v||O!==R||Zn?(typeof z=="function"&&(qu(n,a,z,l),R=n.memoizedState),(E=Zn||Yp(n,a,E,l,O,R,p))?(k||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=R),d.props=l,d.state=R,d.context=p,l=E):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,Su(e,n),p=n.memoizedProps,k=Ki(a,p),d.props=k,z=n.pendingProps,O=d.context,R=a.contextType,E=js,typeof R=="object"&&R!==null&&(E=ft(R)),v=a.getDerivedStateFromProps,(R=typeof v=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==z||O!==E)&&Xp(n,d,l,E),Zn=!1,O=n.memoizedState,d.state=O,Qa(n,l,d,c),Ka();var D=n.memoizedState;p!==z||O!==D||Zn||e!==null&&e.dependencies!==null&&Ol(e.dependencies)?(typeof v=="function"&&(qu(n,a,v,l),D=n.memoizedState),(k=Zn||Yp(n,a,k,l,O,D,E)||e!==null&&e.dependencies!==null&&Ol(e.dependencies))?(R||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,D,E),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,D,E)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=D),d.props=l,d.state=D,d.context=E,l=k):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),l=!1)}return d=l,Wl(e,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&l?(n.child=Yi(n,e.child,null,c),n.child=Yi(n,null,a,c)):ht(e,n,a,c),n.memoizedState=d.state,e=n.child):e=Cn(e,n,c),e}function og(e,n,a,l){return Bi(),n.flags|=256,ht(e,n,a,l),n.child}var Qu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wu(e){return{baseLanes:e,cachePool:$m()}}function $u(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Pt),e}function cg(e,n,a){var l=n.pendingProps,c=!1,d=(n.flags&128)!==0,p;if((p=d)||(p=e!==null&&e.memoizedState===null?!1:($e.current&2)!==0),p&&(c=!0,n.flags&=-129),p=(n.flags&32)!==0,n.flags&=-33,e===null){if(we){if(c?ti(n):ni(),(e=Fe)?(e=__(e,Xt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Kn!==null?{id:un,overflow:dn}:null,retryLane:536870912,hydrationErrors:null},a=Gm(e),a.return=n,n.child=a,dt=n,Fe=null)):e=null,e===null)throw Wn(n);return Id(e)?n.lanes=32:n.lanes=536870912,null}var v=l.children;return l=l.fallback,c?(ni(),c=n.mode,v=$l({mode:"hidden",children:v},c),l=Pi(l,c,a,null),v.return=n,l.return=n,v.sibling=l,n.child=v,l=n.child,l.memoizedState=Wu(a),l.childLanes=$u(e,p,a),n.memoizedState=Qu,er(null,l)):(ti(n),Zu(n,v))}var E=e.memoizedState;if(E!==null&&(v=E.dehydrated,v!==null)){if(d)n.flags&256?(ti(n),n.flags&=-257,n=Ju(e,n,a)):n.memoizedState!==null?(ni(),n.child=e.child,n.flags|=128,n=null):(ni(),v=l.fallback,c=n.mode,l=$l({mode:"visible",children:l.children},c),v=Pi(v,c,a,null),v.flags|=2,l.return=n,v.return=n,l.sibling=v,n.child=l,Yi(n,e.child,null,a),l=n.child,l.memoizedState=Wu(a),l.childLanes=$u(e,p,a),n.memoizedState=Qu,n=er(null,l));else if(ti(n),Id(v)){if(p=v.nextSibling&&v.nextSibling.dataset,p)var R=p.dgst;p=R,l=Error(r(419)),l.stack="",l.digest=p,Ga({value:l,source:null,stack:null}),n=Ju(e,n,a)}else if(tt||Ms(e,n,a,!1),p=(a&e.childLanes)!==0,tt||p){if(p=Be,p!==null&&(l=Qh(p,a),l!==0&&l!==E.retryLane))throw E.retryLane=l,zi(e,l),Rt(p,e,l),Xu;Dd(v)||ro(),n=Ju(e,n,a)}else Dd(v)?(n.flags|=192,n.child=e.child,n=null):(e=E.treeContext,Fe=Qt(v.nextSibling),dt=n,we=!0,Qn=null,Xt=!1,e!==null&&Vm(n,e),n=Zu(n,l.children),n.flags|=4096);return n}return c?(ni(),v=l.fallback,c=n.mode,E=e.child,R=E.sibling,l=bn(E,{mode:"hidden",children:l.children}),l.subtreeFlags=E.subtreeFlags&65011712,R!==null?v=bn(R,v):(v=Pi(v,c,a,null),v.flags|=2),v.return=n,l.return=n,l.sibling=v,n.child=l,er(null,l),l=n.child,v=e.child.memoizedState,v===null?v=Wu(a):(c=v.cachePool,c!==null?(E=Je._currentValue,c=c.parent!==E?{parent:E,pool:E}:c):c=$m(),v={baseLanes:v.baseLanes|a,cachePool:c}),l.memoizedState=v,l.childLanes=$u(e,p,a),n.memoizedState=Qu,er(e.child,l)):(ti(n),a=e.child,e=a.sibling,a=bn(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(p=n.deletions,p===null?(n.deletions=[e],n.flags|=16):p.push(e)),n.child=a,n.memoizedState=null,a)}function Zu(e,n){return n=$l({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function $l(e,n){return e=kt(22,e,null,n),e.lanes=0,e}function Ju(e,n,a){return Yi(n,e.child,null,a),e=Zu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function ug(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),mu(e.return,n,a)}function ed(e,n,a,l,c,d){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c,treeForkCount:d}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=c,p.treeForkCount=d)}function dg(e,n,a){var l=n.pendingProps,c=l.revealOrder,d=l.tail;l=l.children;var p=$e.current,v=(p&2)!==0;if(v?(p=p&1|2,n.flags|=128):p&=1,M($e,p),ht(e,n,l,a),l=we?Ha:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ug(e,a,n);else if(e.tag===19)ug(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(a=n.child,c=null;a!==null;)e=a.alternate,e!==null&&Pl(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),ed(n,!1,c,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&Pl(e)===null){n.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}ed(n,!0,a,null,d,l);break;case"together":ed(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Cn(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),ai|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Ms(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,a=bn(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=bn(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function td(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ol(e)))}function tE(e,n,a){switch(n.tag){case 3:We(n,n.stateNode.containerInfo),$n(n,Je,e.memoizedState.cache),Bi();break;case 27:case 5:cn(n);break;case 4:We(n,n.stateNode.containerInfo);break;case 10:$n(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Cu(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(ti(n),n.flags|=128,null):(a&n.child.childLanes)!==0?cg(e,n,a):(ti(n),e=Cn(e,n,a),e!==null?e.sibling:null);ti(n);break;case 19:var c=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ms(e,n,a,!1),l=(a&n.childLanes)!==0),c){if(l)return dg(e,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),M($e,$e.current),l)break;return null;case 22:return n.lanes=0,ig(e,n,a,n.pendingProps);case 24:$n(n,Je,e.memoizedState.cache)}return Cn(e,n,a)}function fg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)tt=!0;else{if(!td(e,a)&&(n.flags&128)===0)return tt=!1,tE(e,n,a);tt=(e.flags&131072)!==0}else tt=!1,we&&(n.flags&1048576)!==0&&qm(n,Ha,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(e=qi(n.elementType),n.type=e,typeof e=="function")ru(e)?(l=Ki(e,l),n.tag=1,n=lg(null,n,e,l,a)):(n.tag=0,n=Ku(null,n,e,l,a));else{if(e!=null){var c=e.$$typeof;if(c===B){n.tag=11,n=eg(null,n,e,l,a);break e}else if(c===Q){n.tag=14,n=tg(null,n,e,l,a);break e}}throw n=L(e)||e,Error(r(306,n,""))}}return n;case 0:return Ku(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,c=Ki(l,n.pendingProps),lg(e,n,l,c,a);case 3:e:{if(We(n,n.stateNode.containerInfo),e===null)throw Error(r(387));l=n.pendingProps;var d=n.memoizedState;c=d.element,Su(e,n),Qa(n,l,null,a);var p=n.memoizedState;if(l=p.cache,$n(n,Je,l),l!==d.cache&&pu(n,[Je],a,!0),Ka(),l=p.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:p.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=og(e,n,l,a);break e}else if(l!==c){c=qt(Error(r(424)),n),Ga(c),n=og(e,n,l,a);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Fe=Qt(e.firstChild),dt=n,we=!0,Qn=null,Xt=!0,a=ip(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Bi(),l===c){n=Cn(e,n,a);break e}ht(e,n,l,a)}n=n.child}return n;case 26:return Wl(e,n),e===null?(a=x_(n.type,null,n.pendingProps,null))?n.memoizedState=a:we||(a=n.type,e=n.pendingProps,l=mo(ae.current).createElement(a),l[ut]=n,l[xt]=e,mt(l,a,e),rt(l),n.stateNode=l):n.memoizedState=x_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return cn(n),e===null&&we&&(l=n.stateNode=b_(n.type,n.pendingProps,ae.current),dt=n,Xt=!0,c=Fe,ui(n.type)?(Md=c,Fe=Qt(l.firstChild)):Fe=c),ht(e,n,n.pendingProps.children,a),Wl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&we&&((c=l=Fe)&&(l=OE(l,n.type,n.pendingProps,Xt),l!==null?(n.stateNode=l,dt=n,Fe=Qt(l.firstChild),Xt=!1,c=!0):c=!1),c||Wn(n)),cn(n),c=n.type,d=n.pendingProps,p=e!==null?e.memoizedProps:null,l=d.children,Rd(c,d)?l=null:p!==null&&Rd(c,p)&&(n.flags|=32),n.memoizedState!==null&&(c=Au(e,n,YS,null,null,a),pr._currentValue=c),Wl(e,n),ht(e,n,l,a),n.child;case 6:return e===null&&we&&((e=a=Fe)&&(a=DE(a,n.pendingProps,Xt),a!==null?(n.stateNode=a,dt=n,Fe=null,e=!0):e=!1),e||Wn(n)),null;case 13:return cg(e,n,a);case 4:return We(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Yi(n,null,l,a):ht(e,n,l,a),n.child;case 11:return eg(e,n,n.type,n.pendingProps,a);case 7:return ht(e,n,n.pendingProps,a),n.child;case 8:return ht(e,n,n.pendingProps.children,a),n.child;case 12:return ht(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,$n(n,n.type,l.value),ht(e,n,l.children,a),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,Gi(n),c=ft(c),l=l(c),n.flags|=1,ht(e,n,l,a),n.child;case 14:return tg(e,n,n.type,n.pendingProps,a);case 15:return ng(e,n,n.type,n.pendingProps,a);case 19:return dg(e,n,a);case 31:return eE(e,n,a);case 22:return ig(e,n,a,n.pendingProps);case 24:return Gi(n),l=ft(Je),e===null?(c=vu(),c===null&&(c=Be,d=gu(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=a),c=d),n.memoizedState={parent:l,cache:c},bu(n),$n(n,Je,c)):((e.lanes&a)!==0&&(Su(e,n),Qa(n,null,null,a),Ka()),c=e.memoizedState,d=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),$n(n,Je,l)):(l=d.cache,$n(n,Je,l),l!==c.cache&&pu(n,[Je],a,!0))),ht(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function wn(e){e.flags|=4}function nd(e,n,a,l,c){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Pg())e.flags|=8192;else throw Vi=kl,yu}else e.flags&=-16777217}function hg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!A_(n))if(Pg())e.flags|=8192;else throw Vi=kl,yu}function Zl(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Yh():536870912,e.lanes|=n,Ys|=n)}function tr(e,n){if(!we)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qe(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function nE(e,n,a){var l=n.pendingProps;switch(uu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(n),null;case 1:return qe(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),xn(Je),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Is(n)?wn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,fu())),qe(n),null;case 26:var c=n.type,d=n.memoizedState;return e===null?(wn(n),d!==null?(qe(n),hg(n,d)):(qe(n),nd(n,c,null,l,a))):d?d!==e.memoizedState?(wn(n),qe(n),hg(n,d)):(qe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&wn(n),qe(n),nd(n,c,e,l,a)),null;case 27:if(cl(n),a=ae.current,c=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&wn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return qe(n),null}e=G.current,Is(n)?Ym(n):(e=b_(c,l,a),n.stateNode=e,wn(n))}return qe(n),null;case 5:if(cl(n),c=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&wn(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return qe(n),null}if(d=G.current,Is(n))Ym(n);else{var p=mo(ae.current);switch(d){case 1:d=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=p.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?p.createElement("select",{is:l.is}):p.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?p.createElement(c,{is:l.is}):p.createElement(c)}}d[ut]=n,d[xt]=l;e:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)d.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=d;e:switch(mt(d,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&wn(n)}}return qe(n),nd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&wn(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(e=ae.current,Is(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,c=dt,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[ut]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||c_(e.nodeValue,a)),e||Wn(n,!0)}else e=mo(e).createTextNode(l),e[ut]=n,n.stateNode=e}return qe(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=Is(n),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[ut]=n}else Bi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qe(n),e=!1}else a=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ut(n),n):(Ut(n),null);if((n.flags&128)!==0)throw Error(r(558))}return qe(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Is(n),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(r(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));c[ut]=n}else Bi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qe(n),c=!1}else c=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Ut(n),n):(Ut(n),null)}return Ut(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),Zl(n,n.updateQueue),qe(n),null);case 4:return Me(),e===null&&Td(n.stateNode.containerInfo),qe(n),null;case 10:return xn(n.type),qe(n),null;case 19:if(I($e),l=n.memoizedState,l===null)return qe(n),null;if(c=(n.flags&128)!==0,d=l.rendering,d===null)if(c)tr(l,!1);else{if(Xe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=Pl(e),d!==null){for(n.flags|=128,tr(l,!1),e=d.updateQueue,n.updateQueue=e,Zl(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Hm(a,e),a=a.sibling;return M($e,$e.current&1|2),we&&Sn(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Ot()>io&&(n.flags|=128,c=!0,tr(l,!1),n.lanes=4194304)}else{if(!c)if(e=Pl(d),e!==null){if(n.flags|=128,c=!0,e=e.updateQueue,n.updateQueue=e,Zl(n,e),tr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!we)return qe(n),null}else 2*Ot()-l.renderingStartTime>io&&a!==536870912&&(n.flags|=128,c=!0,tr(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(e=l.last,e!==null?e.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ot(),e.sibling=null,a=$e.current,M($e,c?a&1|2:a&1),we&&Sn(n,l.treeForkCount),e):(qe(n),null);case 22:case 23:return Ut(n),Nu(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(qe(n),n.subtreeFlags&6&&(n.flags|=8192)):qe(n),a=n.updateQueue,a!==null&&Zl(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&I(Fi),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),xn(Je),qe(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function iE(e,n){switch(uu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return xn(Je),Me(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return cl(n),null;case 31:if(n.memoizedState!==null){if(Ut(n),n.alternate===null)throw Error(r(340));Bi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ut(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Bi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return I($e),null;case 4:return Me(),null;case 10:return xn(n.type),null;case 22:case 23:return Ut(n),Nu(),e!==null&&I(Fi),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return xn(Je),null;case 25:return null;default:return null}}function mg(e,n){switch(uu(n),n.tag){case 3:xn(Je),Me();break;case 26:case 27:case 5:cl(n);break;case 4:Me();break;case 31:n.memoizedState!==null&&Ut(n);break;case 13:Ut(n);break;case 19:I($e);break;case 10:xn(n.type);break;case 22:case 23:Ut(n),Nu(),e!==null&&I(Fi);break;case 24:xn(Je)}}function nr(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&e)===e){l=void 0;var d=a.create,p=a.inst;l=d(),p.destroy=l}a=a.next}while(a!==c)}}catch(v){Ie(n,n.return,v)}}function ii(e,n,a){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&e)===e){var p=l.inst,v=p.destroy;if(v!==void 0){p.destroy=void 0,c=n;var E=a,R=v;try{R()}catch(k){Ie(c,E,k)}}}l=l.next}while(l!==d)}}catch(k){Ie(n,n.return,k)}}function pg(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{ap(n,a)}catch(l){Ie(e,e.return,l)}}}function gg(e,n,a){a.props=Ki(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Ie(e,n,l)}}function ir(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(c){Ie(e,n,c)}}function fn(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){Ie(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Ie(e,n,c)}else a.current=null}function _g(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){Ie(e,e.return,c)}}function id(e,n,a){try{var l=e.stateNode;NE(l,e.type,a,n),l[xt]=n}catch(c){Ie(e,e.return,c)}}function vg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ui(e.type)||e.tag===4}function sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ui(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ad(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=vn));else if(l!==4&&(l===27&&ui(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(ad(e,n,a),e=e.sibling;e!==null;)ad(e,n,a),e=e.sibling}function Jl(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&ui(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Jl(e,n,a),e=e.sibling;e!==null;)Jl(e,n,a),e=e.sibling}function yg(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);mt(n,l,a),n[ut]=e,n[xt]=a}catch(d){Ie(e,e.return,d)}}var An=!1,nt=!1,rd=!1,bg=typeof WeakSet=="function"?WeakSet:Set,lt=null;function sE(e,n){if(e=e.containerInfo,wd=So,e=Dm(e),Jc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var p=0,v=-1,E=-1,R=0,k=0,z=e,O=null;t:for(;;){for(var D;z!==a||c!==0&&z.nodeType!==3||(v=p+c),z!==d||l!==0&&z.nodeType!==3||(E=p+l),z.nodeType===3&&(p+=z.nodeValue.length),(D=z.firstChild)!==null;)O=z,z=D;for(;;){if(z===e)break t;if(O===a&&++R===c&&(v=p),O===d&&++k===l&&(E=p),(D=z.nextSibling)!==null)break;z=O,O=z.parentNode}z=D}a=v===-1||E===-1?null:{start:v,end:E}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ad={focusedElem:e,selectionRange:a},So=!1,lt=n;lt!==null;)if(n=lt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,lt=e;else for(;lt!==null;){switch(n=lt,d=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)c=e[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=n,c=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var $=Ki(a.type,c);e=l.getSnapshotBeforeUpdate($,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(ce){Ie(a,a.return,ce)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Od(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=n.sibling,e!==null){e.return=n.return,lt=e;break}lt=n.return}}function Sg(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:jn(e,a),l&4&&nr(5,a);break;case 1:if(jn(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(p){Ie(a,a.return,p)}else{var c=Ki(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Ie(a,a.return,p)}}l&64&&pg(a),l&512&&ir(a,a.return);break;case 3:if(jn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{ap(e,n)}catch(p){Ie(a,a.return,p)}}break;case 27:n===null&&l&4&&yg(a);case 26:case 5:jn(e,a),n===null&&l&4&&_g(a),l&512&&ir(a,a.return);break;case 12:jn(e,a);break;case 31:jn(e,a),l&4&&Tg(e,a);break;case 13:jn(e,a),l&4&&Ng(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=hE.bind(null,a),IE(e,a))));break;case 22:if(l=a.memoizedState!==null||An,!l){n=n!==null&&n.memoizedState!==null||nt,c=An;var d=nt;An=l,(nt=n)&&!d?On(e,a,(a.subtreeFlags&8772)!==0):jn(e,a),An=c,nt=d}break;case 30:break;default:jn(e,a)}}function Eg(e){var n=e.alternate;n!==null&&(e.alternate=null,Eg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Lc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,Nt=!1;function Rn(e,n,a){for(a=a.child;a!==null;)xg(e,n,a),a=a.sibling}function xg(e,n,a){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(wa,a)}catch{}switch(a.tag){case 26:nt||fn(a,n),Rn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:nt||fn(a,n);var l=Ve,c=Nt;ui(a.type)&&(Ve=a.stateNode,Nt=!1),Rn(e,n,a),fr(a.stateNode),Ve=l,Nt=c;break;case 5:nt||fn(a,n);case 6:if(l=Ve,c=Nt,Ve=null,Rn(e,n,a),Ve=l,Nt=c,Ve!==null)if(Nt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(a.stateNode)}catch(d){Ie(a,n,d)}else try{Ve.removeChild(a.stateNode)}catch(d){Ie(a,n,d)}break;case 18:Ve!==null&&(Nt?(e=Ve,p_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ea(e)):p_(Ve,a.stateNode));break;case 4:l=Ve,c=Nt,Ve=a.stateNode.containerInfo,Nt=!0,Rn(e,n,a),Ve=l,Nt=c;break;case 0:case 11:case 14:case 15:ii(2,a,n),nt||ii(4,a,n),Rn(e,n,a);break;case 1:nt||(fn(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&gg(a,n,l)),Rn(e,n,a);break;case 21:Rn(e,n,a);break;case 22:nt=(l=nt)||a.memoizedState!==null,Rn(e,n,a),nt=l;break;default:Rn(e,n,a)}}function Tg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ea(e)}catch(a){Ie(n,n.return,a)}}}function Ng(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ea(e)}catch(a){Ie(n,n.return,a)}}function aE(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new bg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new bg),n;default:throw Error(r(435,e.tag))}}function eo(e,n){var a=aE(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var c=mE.bind(null,e,l);l.then(c,c)}})}function Ct(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],d=e,p=n,v=p;e:for(;v!==null;){switch(v.tag){case 27:if(ui(v.type)){Ve=v.stateNode,Nt=!1;break e}break;case 5:Ve=v.stateNode,Nt=!1;break e;case 3:case 4:Ve=v.stateNode.containerInfo,Nt=!0;break e}v=v.return}if(Ve===null)throw Error(r(160));xg(d,p,c),Ve=null,Nt=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Cg(n,e),n=n.sibling}var tn=null;function Cg(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ct(n,e),wt(e),l&4&&(ii(3,e,e.return),nr(3,e),ii(5,e,e.return));break;case 1:Ct(n,e),wt(e),l&512&&(nt||a===null||fn(a,a.return)),l&64&&An&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=tn;if(Ct(n,e),wt(e),l&512&&(nt||a===null||fn(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":d=c.getElementsByTagName("title")[0],(!d||d[ja]||d[ut]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(l),c.head.insertBefore(d,c.querySelector("head > title"))),mt(d,l,a),d[ut]=e,rt(d),l=d;break e;case"link":var p=C_("link","href",c).get(l+(a.href||""));if(p){for(var v=0;v<p.length;v++)if(d=p[v],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(v,1);break t}}d=c.createElement(l),mt(d,l,a),c.head.appendChild(d);break;case"meta":if(p=C_("meta","content",c).get(l+(a.content||""))){for(v=0;v<p.length;v++)if(d=p[v],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(v,1);break t}}d=c.createElement(l),mt(d,l,a),c.head.appendChild(d);break;default:throw Error(r(468,l))}d[ut]=e,rt(d),l=d}e.stateNode=l}else w_(c,e.type,e.stateNode);else e.stateNode=N_(c,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?w_(c,e.type,e.stateNode):N_(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&id(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ct(n,e),wt(e),l&512&&(nt||a===null||fn(a,a.return)),a!==null&&l&4&&id(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ct(n,e),wt(e),l&512&&(nt||a===null||fn(a,a.return)),e.flags&32){c=e.stateNode;try{xs(c,"")}catch($){Ie(e,e.return,$)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,id(e,c,a!==null?a.memoizedProps:c)),l&1024&&(rd=!0);break;case 6:if(Ct(n,e),wt(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch($){Ie(e,e.return,$)}}break;case 3:if(_o=null,c=tn,tn=po(n.containerInfo),Ct(n,e),tn=c,wt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ea(n.containerInfo)}catch($){Ie(e,e.return,$)}rd&&(rd=!1,wg(e));break;case 4:l=tn,tn=po(e.stateNode.containerInfo),Ct(n,e),wt(e),tn=l;break;case 12:Ct(n,e),wt(e);break;case 31:Ct(n,e),wt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,eo(e,l)));break;case 13:Ct(n,e),wt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(no=Ot()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,eo(e,l)));break;case 22:c=e.memoizedState!==null;var E=a!==null&&a.memoizedState!==null,R=An,k=nt;if(An=R||c,nt=k||E,Ct(n,e),nt=k,An=R,wt(e),l&8192)e:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||E||An||nt||Qi(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){E=a=n;try{if(d=E.stateNode,c)p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{v=E.stateNode;var z=E.memoizedProps.style,O=z!=null&&z.hasOwnProperty("display")?z.display:null;v.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch($){Ie(E,E.return,$)}}}else if(n.tag===6){if(a===null){E=n;try{E.stateNode.nodeValue=c?"":E.memoizedProps}catch($){Ie(E,E.return,$)}}}else if(n.tag===18){if(a===null){E=n;try{var D=E.stateNode;c?g_(D,!0):g_(E.stateNode,!1)}catch($){Ie(E,E.return,$)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,eo(e,a))));break;case 19:Ct(n,e),wt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,eo(e,l)));break;case 30:break;case 21:break;default:Ct(n,e),wt(e)}}function wt(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(vg(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var c=a.stateNode,d=sd(e);Jl(e,d,c);break;case 5:var p=a.stateNode;a.flags&32&&(xs(p,""),a.flags&=-33);var v=sd(e);Jl(e,v,p);break;case 3:case 4:var E=a.stateNode.containerInfo,R=sd(e);ad(e,R,E);break;default:throw Error(r(161))}}catch(k){Ie(e,e.return,k)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function wg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;wg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function jn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Sg(e,n.alternate,n),n=n.sibling}function Qi(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ii(4,n,n.return),Qi(n);break;case 1:fn(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&gg(n,n.return,a),Qi(n);break;case 27:fr(n.stateNode);case 26:case 5:fn(n,n.return),Qi(n);break;case 22:n.memoizedState===null&&Qi(n);break;case 30:Qi(n);break;default:Qi(n)}e=e.sibling}}function On(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=e,d=n,p=d.flags;switch(d.tag){case 0:case 11:case 15:On(c,d,a),nr(4,d);break;case 1:if(On(c,d,a),l=d,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(R){Ie(l,l.return,R)}if(l=d,c=l.updateQueue,c!==null){var v=l.stateNode;try{var E=c.shared.hiddenCallbacks;if(E!==null)for(c.shared.hiddenCallbacks=null,c=0;c<E.length;c++)sp(E[c],v)}catch(R){Ie(l,l.return,R)}}a&&p&64&&pg(d),ir(d,d.return);break;case 27:yg(d);case 26:case 5:On(c,d,a),a&&l===null&&p&4&&_g(d),ir(d,d.return);break;case 12:On(c,d,a);break;case 31:On(c,d,a),a&&p&4&&Tg(c,d);break;case 13:On(c,d,a),a&&p&4&&Ng(c,d);break;case 22:d.memoizedState===null&&On(c,d,a),ir(d,d.return);break;case 30:break;default:On(c,d,a)}n=n.sibling}}function ld(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Fa(a))}function od(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Fa(e))}function nn(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ag(e,n,a,l),n=n.sibling}function Ag(e,n,a,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:nn(e,n,a,l),c&2048&&nr(9,n);break;case 1:nn(e,n,a,l);break;case 3:nn(e,n,a,l),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Fa(e)));break;case 12:if(c&2048){nn(e,n,a,l),e=n.stateNode;try{var d=n.memoizedProps,p=d.id,v=d.onPostCommit;typeof v=="function"&&v(p,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){Ie(n,n.return,E)}}else nn(e,n,a,l);break;case 31:nn(e,n,a,l);break;case 13:nn(e,n,a,l);break;case 23:break;case 22:d=n.stateNode,p=n.alternate,n.memoizedState!==null?d._visibility&2?nn(e,n,a,l):sr(e,n):d._visibility&2?nn(e,n,a,l):(d._visibility|=2,Fs(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),c&2048&&ld(p,n);break;case 24:nn(e,n,a,l),c&2048&&od(n.alternate,n);break;default:nn(e,n,a,l)}}function Fs(e,n,a,l,c){for(c=c&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=e,p=n,v=a,E=l,R=p.flags;switch(p.tag){case 0:case 11:case 15:Fs(d,p,v,E,c),nr(8,p);break;case 23:break;case 22:var k=p.stateNode;p.memoizedState!==null?k._visibility&2?Fs(d,p,v,E,c):sr(d,p):(k._visibility|=2,Fs(d,p,v,E,c)),c&&R&2048&&ld(p.alternate,p);break;case 24:Fs(d,p,v,E,c),c&&R&2048&&od(p.alternate,p);break;default:Fs(d,p,v,E,c)}n=n.sibling}}function sr(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,c=l.flags;switch(l.tag){case 22:sr(a,l),c&2048&&ld(l.alternate,l);break;case 24:sr(a,l),c&2048&&od(l.alternate,l);break;default:sr(a,l)}n=n.sibling}}var ar=8192;function qs(e,n,a){if(e.subtreeFlags&ar)for(e=e.child;e!==null;)Rg(e,n,a),e=e.sibling}function Rg(e,n,a){switch(e.tag){case 26:qs(e,n,a),e.flags&ar&&e.memoizedState!==null&&VE(a,tn,e.memoizedState,e.memoizedProps);break;case 5:qs(e,n,a);break;case 3:case 4:var l=tn;tn=po(e.stateNode.containerInfo),qs(e,n,a),tn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ar,ar=16777216,qs(e,n,a),ar=l):qs(e,n,a));break;default:qs(e,n,a)}}function jg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function rr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];lt=l,Dg(l,e)}jg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Og(e),e=e.sibling}function Og(e){switch(e.tag){case 0:case 11:case 15:rr(e),e.flags&2048&&ii(9,e,e.return);break;case 3:rr(e);break;case 12:rr(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,to(e)):rr(e);break;default:rr(e)}}function to(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];lt=l,Dg(l,e)}jg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ii(8,n,n.return),to(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,to(n));break;default:to(n)}e=e.sibling}}function Dg(e,n){for(;lt!==null;){var a=lt;switch(a.tag){case 0:case 11:case 15:ii(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Fa(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,lt=l;else e:for(a=e;lt!==null;){l=lt;var c=l.sibling,d=l.return;if(Eg(l),l===a){lt=null;break e}if(c!==null){c.return=d,lt=c;break e}lt=d}}}var rE={getCacheForType:function(e){var n=ft(Je),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return ft(Je).controller.signal}},lE=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Be=null,be=null,xe=0,De=0,zt=null,si=!1,Vs=!1,cd=!1,Dn=0,Xe=0,ai=0,Wi=0,ud=0,Pt=0,Ys=0,lr=null,At=null,dd=!1,no=0,Ig=0,io=1/0,so=null,ri=null,it=0,li=null,Xs=null,In=0,fd=0,hd=null,Mg=null,or=0,md=null;function Bt(){return(Oe&2)!==0&&xe!==0?xe&-xe:j.T!==null?bd():Wh()}function kg(){if(Pt===0)if((xe&536870912)===0||we){var e=fl;fl<<=1,(fl&3932160)===0&&(fl=262144),Pt=e}else Pt=536870912;return e=Lt.current,e!==null&&(e.flags|=32),Pt}function Rt(e,n,a){(e===Be&&(De===2||De===9)||e.cancelPendingCommit!==null)&&(Ks(e,0),oi(e,xe,Pt,!1)),Ra(e,a),((Oe&2)===0||e!==Be)&&(e===Be&&((Oe&2)===0&&(Wi|=a),Xe===4&&oi(e,xe,Pt,!1)),hn(e))}function Lg(e,n,a){if((Oe&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Aa(e,n),c=l?uE(e,n):gd(e,n,!0),d=l;do{if(c===0){Vs&&!l&&oi(e,n,0,!1);break}else{if(a=e.current.alternate,d&&!oE(a)){c=gd(e,n,!1),d=!1;continue}if(c===2){if(d=n,e.errorRecoveryDisabledLanes&d)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){n=p;e:{var v=e;c=lr;var E=v.current.memoizedState.isDehydrated;if(E&&(Ks(v,p).flags|=256),p=gd(v,p,!1),p!==2){if(cd&&!E){v.errorRecoveryDisabledLanes|=d,Wi|=d,c=4;break e}d=At,At=c,d!==null&&(At===null?At=d:At.push.apply(At,d))}c=p}if(d=!1,c!==2)continue}}if(c===1){Ks(e,0),oi(e,n,0,!0);break}e:{switch(l=e,d=c,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:oi(l,n,Pt,!si);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(c=no+300-Ot(),10<c)){if(oi(l,n,Pt,!si),ml(l,0,!0)!==0)break e;In=n,l.timeoutHandle=h_(Ug.bind(null,l,a,At,so,dd,n,Pt,Wi,Ys,si,d,"Throttled",-0,0),c);break e}Ug(l,a,At,so,dd,n,Pt,Wi,Ys,si,d,null,-0,0)}}break}while(!0);hn(e)}function Ug(e,n,a,l,c,d,p,v,E,R,k,z,O,D){if(e.timeoutHandle=-1,z=n.subtreeFlags,z&8192||(z&16785408)===16785408){z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vn},Rg(n,d,z);var $=(d&62914560)===d?no-Ot():(d&4194048)===d?Ig-Ot():0;if($=YE(z,$),$!==null){In=d,e.cancelPendingCommit=$(Vg.bind(null,e,n,d,a,l,c,p,v,E,k,z,null,O,D)),oi(e,d,p,!R);return}}Vg(e,n,d,a,l,c,p,v,E)}function oE(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],d=c.getSnapshot;c=c.value;try{if(!Mt(d(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function oi(e,n,a,l){n&=~ud,n&=~Wi,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var c=n;0<c;){var d=31-It(c),p=1<<d;l[d]=-1,c&=~p}a!==0&&Xh(e,a,n)}function ao(){return(Oe&6)===0?(cr(0),!1):!0}function pd(){if(be!==null){if(De===0)var e=be.return;else e=be,En=Hi=null,Ou(e),zs=null,Va=0,e=be;for(;e!==null;)mg(e.alternate,e),e=e.return;be=null}}function Ks(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,AE(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),In=0,pd(),Be=e,be=a=bn(e.current,null),xe=n,De=0,zt=null,si=!1,Vs=Aa(e,n),cd=!1,Ys=Pt=ud=Wi=ai=Xe=0,At=lr=null,dd=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var c=31-It(l),d=1<<c;n|=e[c],l&=~d}return Dn=n,Cl(),a}function zg(e,n){ge=null,j.H=Ja,n===Us||n===Ml?(n=ep(),De=3):n===yu?(n=ep(),De=4):De=n===Xu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,zt=n,be===null&&(Xe=1,Kl(e,qt(n,e.current)))}function Pg(){var e=Lt.current;return e===null?!0:(xe&4194048)===xe?Kt===null:(xe&62914560)===xe||(xe&536870912)!==0?e===Kt:!1}function Bg(){var e=j.H;return j.H=Ja,e===null?Ja:e}function Hg(){var e=j.A;return j.A=rE,e}function ro(){Xe=4,si||(xe&4194048)!==xe&&Lt.current!==null||(Vs=!0),(ai&134217727)===0&&(Wi&134217727)===0||Be===null||oi(Be,xe,Pt,!1)}function gd(e,n,a){var l=Oe;Oe|=2;var c=Bg(),d=Hg();(Be!==e||xe!==n)&&(so=null,Ks(e,n)),n=!1;var p=Xe;e:do try{if(De!==0&&be!==null){var v=be,E=zt;switch(De){case 8:pd(),p=6;break e;case 3:case 2:case 9:case 6:Lt.current===null&&(n=!0);var R=De;if(De=0,zt=null,Qs(e,v,E,R),a&&Vs){p=0;break e}break;default:R=De,De=0,zt=null,Qs(e,v,E,R)}}cE(),p=Xe;break}catch(k){zg(e,k)}while(!0);return n&&e.shellSuspendCounter++,En=Hi=null,Oe=l,j.H=c,j.A=d,be===null&&(Be=null,xe=0,Cl()),p}function cE(){for(;be!==null;)Gg(be)}function uE(e,n){var a=Oe;Oe|=2;var l=Bg(),c=Hg();Be!==e||xe!==n?(so=null,io=Ot()+500,Ks(e,n)):Vs=Aa(e,n);e:do try{if(De!==0&&be!==null){n=be;var d=zt;t:switch(De){case 1:De=0,zt=null,Qs(e,n,d,1);break;case 2:case 9:if(Zm(d)){De=0,zt=null,Fg(n);break}n=function(){De!==2&&De!==9||Be!==e||(De=7),hn(e)},d.then(n,n);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:Zm(d)?(De=0,zt=null,Fg(n)):(De=0,zt=null,Qs(e,n,d,7));break;case 5:var p=null;switch(be.tag){case 26:p=be.memoizedState;case 5:case 27:var v=be;if(p?A_(p):v.stateNode.complete){De=0,zt=null;var E=v.sibling;if(E!==null)be=E;else{var R=v.return;R!==null?(be=R,lo(R)):be=null}break t}}De=0,zt=null,Qs(e,n,d,5);break;case 6:De=0,zt=null,Qs(e,n,d,6);break;case 8:pd(),Xe=6;break e;default:throw Error(r(462))}}dE();break}catch(k){zg(e,k)}while(!0);return En=Hi=null,j.H=l,j.A=c,Oe=a,be!==null?0:(Be=null,xe=0,Cl(),Xe)}function dE(){for(;be!==null&&!Mb();)Gg(be)}function Gg(e){var n=fg(e.alternate,e,Dn);e.memoizedProps=e.pendingProps,n===null?lo(e):be=n}function Fg(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=rg(a,n,n.pendingProps,n.type,void 0,xe);break;case 11:n=rg(a,n,n.pendingProps,n.type.render,n.ref,xe);break;case 5:Ou(n);default:mg(a,n),n=be=Hm(n,Dn),n=fg(a,n,Dn)}e.memoizedProps=e.pendingProps,n===null?lo(e):be=n}function Qs(e,n,a,l){En=Hi=null,Ou(n),zs=null,Va=0;var c=n.return;try{if(JS(e,c,n,a,xe)){Xe=1,Kl(e,qt(a,e.current)),be=null;return}}catch(d){if(c!==null)throw be=c,d;Xe=1,Kl(e,qt(a,e.current)),be=null;return}n.flags&32768?(we||l===1?e=!0:Vs||(xe&536870912)!==0?e=!1:(si=e=!0,(l===2||l===9||l===3||l===6)&&(l=Lt.current,l!==null&&l.tag===13&&(l.flags|=16384))),qg(n,e)):lo(n)}function lo(e){var n=e;do{if((n.flags&32768)!==0){qg(n,si);return}e=n.return;var a=nE(n.alternate,n,Dn);if(a!==null){be=a;return}if(n=n.sibling,n!==null){be=n;return}be=n=e}while(n!==null);Xe===0&&(Xe=5)}function qg(e,n){do{var a=iE(e.alternate,e);if(a!==null){a.flags&=32767,be=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){be=e;return}be=e=a}while(e!==null);Xe=6,be=null}function Vg(e,n,a,l,c,d,p,v,E){e.cancelPendingCommit=null;do oo();while(it!==0);if((Oe&6)!==0)throw Error(r(327));if(n!==null){if(n===e.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=su,qb(e,a,d,p,v,E),e===Be&&(be=Be=null,xe=0),Xs=n,li=e,In=a,fd=d,hd=c,Mg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,pE(ul,function(){return Wg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=j.T,j.T=null,c=V.p,V.p=2,p=Oe,Oe|=4;try{sE(e,n,a)}finally{Oe=p,V.p=c,j.T=l}}it=1,Yg(),Xg(),Kg()}}function Yg(){if(it===1){it=0;var e=li,n=Xs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var l=V.p;V.p=2;var c=Oe;Oe|=4;try{Cg(n,e);var d=Ad,p=Dm(e.containerInfo),v=d.focusedElem,E=d.selectionRange;if(p!==v&&v&&v.ownerDocument&&Om(v.ownerDocument.documentElement,v)){if(E!==null&&Jc(v)){var R=E.start,k=E.end;if(k===void 0&&(k=R),"selectionStart"in v)v.selectionStart=R,v.selectionEnd=Math.min(k,v.value.length);else{var z=v.ownerDocument||document,O=z&&z.defaultView||window;if(O.getSelection){var D=O.getSelection(),$=v.textContent.length,ce=Math.min(E.start,$),Ue=E.end===void 0?ce:Math.min(E.end,$);!D.extend&&ce>Ue&&(p=Ue,Ue=ce,ce=p);var C=jm(v,ce),T=jm(v,Ue);if(C&&T&&(D.rangeCount!==1||D.anchorNode!==C.node||D.anchorOffset!==C.offset||D.focusNode!==T.node||D.focusOffset!==T.offset)){var A=z.createRange();A.setStart(C.node,C.offset),D.removeAllRanges(),ce>Ue?(D.addRange(A),D.extend(T.node,T.offset)):(A.setEnd(T.node,T.offset),D.addRange(A))}}}}for(z=[],D=v;D=D.parentNode;)D.nodeType===1&&z.push({element:D,left:D.scrollLeft,top:D.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<z.length;v++){var U=z[v];U.element.scrollLeft=U.left,U.element.scrollTop=U.top}}So=!!wd,Ad=wd=null}finally{Oe=c,V.p=l,j.T=a}}e.current=n,it=2}}function Xg(){if(it===2){it=0;var e=li,n=Xs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var l=V.p;V.p=2;var c=Oe;Oe|=4;try{Sg(e,n.alternate,n)}finally{Oe=c,V.p=l,j.T=a}}it=3}}function Kg(){if(it===4||it===3){it=0,kb();var e=li,n=Xs,a=In,l=Mg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?it=5:(it=0,Xs=li=null,Qg(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ri=null),Mc(a),n=n.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(wa,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=j.T,c=V.p,V.p=2,j.T=null;try{for(var d=e.onRecoverableError,p=0;p<l.length;p++){var v=l[p];d(v.value,{componentStack:v.stack})}}finally{j.T=n,V.p=c}}(In&3)!==0&&oo(),hn(e),c=e.pendingLanes,(a&261930)!==0&&(c&42)!==0?e===md?or++:(or=0,md=e):or=0,cr(0)}}function Qg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Fa(n)))}function oo(){return Yg(),Xg(),Kg(),Wg()}function Wg(){if(it!==5)return!1;var e=li,n=fd;fd=0;var a=Mc(In),l=j.T,c=V.p;try{V.p=32>a?32:a,j.T=null,a=hd,hd=null;var d=li,p=In;if(it=0,Xs=li=null,In=0,(Oe&6)!==0)throw Error(r(331));var v=Oe;if(Oe|=4,Og(d.current),Ag(d,d.current,p,a),Oe=v,cr(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(wa,d)}catch{}return!0}finally{V.p=c,j.T=l,Qg(e,n)}}function $g(e,n,a){n=qt(a,n),n=Yu(e.stateNode,n,2),e=ei(e,n,2),e!==null&&(Ra(e,2),hn(e))}function Ie(e,n,a){if(e.tag===3)$g(e,e,a);else for(;n!==null;){if(n.tag===3){$g(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ri===null||!ri.has(l))){e=qt(a,e),a=Zp(2),l=ei(n,a,2),l!==null&&(Jp(a,l,n,e),Ra(l,2),hn(l));break}}n=n.return}}function _d(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new lE;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(a)||(cd=!0,c.add(a),e=fE.bind(null,e,n,a),n.then(e,e))}function fE(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Be===e&&(xe&a)===a&&(Xe===4||Xe===3&&(xe&62914560)===xe&&300>Ot()-no?(Oe&2)===0&&Ks(e,0):ud|=a,Ys===xe&&(Ys=0)),hn(e)}function Zg(e,n){n===0&&(n=Yh()),e=zi(e,n),e!==null&&(Ra(e,n),hn(e))}function hE(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Zg(e,a)}function mE(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Zg(e,a)}function pE(e,n){return jc(e,n)}var co=null,Ws=null,vd=!1,uo=!1,yd=!1,ci=0;function hn(e){e!==Ws&&e.next===null&&(Ws===null?co=Ws=e:Ws=Ws.next=e),uo=!0,vd||(vd=!0,_E())}function cr(e,n){if(!yd&&uo){yd=!0;do for(var a=!1,l=co;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var d=0;else{var p=l.suspendedLanes,v=l.pingedLanes;d=(1<<31-It(42|e)+1)-1,d&=c&~(p&~v),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,n_(l,d))}else d=xe,d=ml(l,l===Be?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Aa(l,d)||(a=!0,n_(l,d));l=l.next}while(a);yd=!1}}function gE(){Jg()}function Jg(){uo=vd=!1;var e=0;ci!==0&&wE()&&(e=ci);for(var n=Ot(),a=null,l=co;l!==null;){var c=l.next,d=e_(l,n);d===0?(l.next=null,a===null?co=c:a.next=c,c===null&&(Ws=a)):(a=l,(e!==0||(d&3)!==0)&&(uo=!0)),l=c}it!==0&&it!==5||cr(e),ci!==0&&(ci=0)}function e_(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var p=31-It(d),v=1<<p,E=c[p];E===-1?((v&a)===0||(v&l)!==0)&&(c[p]=Fb(v,n)):E<=n&&(e.expiredLanes|=v),d&=~v}if(n=Be,a=xe,a=ml(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(De===2||De===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Oc(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Aa(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&Oc(l),Mc(a)){case 2:case 8:a=qh;break;case 32:a=ul;break;case 268435456:a=Vh;break;default:a=ul}return l=t_.bind(null,e),a=jc(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&Oc(l),e.callbackPriority=2,e.callbackNode=null,2}function t_(e,n){if(it!==0&&it!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(oo()&&e.callbackNode!==a)return null;var l=xe;return l=ml(e,e===Be?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Lg(e,l,n),e_(e,Ot()),e.callbackNode!=null&&e.callbackNode===a?t_.bind(null,e):null)}function n_(e,n){if(oo())return null;Lg(e,n,!0)}function _E(){RE(function(){(Oe&6)!==0?jc(Fh,gE):Jg()})}function bd(){if(ci===0){var e=ks;e===0&&(e=dl,dl<<=1,(dl&261888)===0&&(dl=256)),ci=e}return ci}function i_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:vl(""+e)}function s_(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function vE(e,n,a,l,c){if(n==="submit"&&a&&a.stateNode===c){var d=i_((c[xt]||null).action),p=l.submitter;p&&(n=(n=p[xt]||null)?i_(n.formAction):p.getAttribute("formAction"),n!==null&&(d=n,p=null));var v=new El("action","action",null,l,c);e.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ci!==0){var E=p?s_(c,p):new FormData(c);Bu(a,{pending:!0,data:E,method:c.method,action:d},null,E)}}else typeof d=="function"&&(v.preventDefault(),E=p?s_(c,p):new FormData(c),Bu(a,{pending:!0,data:E,method:c.method,action:d},d,E))},currentTarget:c}]})}}for(var Sd=0;Sd<iu.length;Sd++){var Ed=iu[Sd],yE=Ed.toLowerCase(),bE=Ed[0].toUpperCase()+Ed.slice(1);en(yE,"on"+bE)}en(km,"onAnimationEnd"),en(Lm,"onAnimationIteration"),en(Um,"onAnimationStart"),en("dblclick","onDoubleClick"),en("focusin","onFocus"),en("focusout","onBlur"),en(LS,"onTransitionRun"),en(US,"onTransitionStart"),en(zS,"onTransitionCancel"),en(zm,"onTransitionEnd"),Ss("onMouseEnter",["mouseout","mouseover"]),Ss("onMouseLeave",["mouseout","mouseover"]),Ss("onPointerEnter",["pointerout","pointerover"]),Ss("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ur));function a_(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],c=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var p=l.length-1;0<=p;p--){var v=l[p],E=v.instance,R=v.currentTarget;if(v=v.listener,E!==d&&c.isPropagationStopped())break e;d=v,c.currentTarget=R;try{d(c)}catch(k){Nl(k)}c.currentTarget=null,d=E}else for(p=0;p<l.length;p++){if(v=l[p],E=v.instance,R=v.currentTarget,v=v.listener,E!==d&&c.isPropagationStopped())break e;d=v,c.currentTarget=R;try{d(c)}catch(k){Nl(k)}c.currentTarget=null,d=E}}}}function Se(e,n){var a=n[kc];a===void 0&&(a=n[kc]=new Set);var l=e+"__bubble";a.has(l)||(r_(n,e,2,!1),a.add(l))}function xd(e,n,a){var l=0;n&&(l|=4),r_(a,e,l,n)}var fo="_reactListening"+Math.random().toString(36).slice(2);function Td(e){if(!e[fo]){e[fo]=!0,Jh.forEach(function(a){a!=="selectionchange"&&(SE.has(a)||xd(a,!1,e),xd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[fo]||(n[fo]=!0,xd("selectionchange",!1,n))}}function r_(e,n,a,l){switch(k_(n)){case 2:var c=QE;break;case 8:c=WE;break;default:c=Pd}a=c.bind(null,n,a,e),c=void 0,!qc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(n,a,{capture:!0,passive:c}):e.addEventListener(n,a,!0):c!==void 0?e.addEventListener(n,a,{passive:c}):e.addEventListener(n,a,!1)}function Nd(e,n,a,l,c){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var v=l.stateNode.containerInfo;if(v===c)break;if(p===4)for(p=l.return;p!==null;){var E=p.tag;if((E===3||E===4)&&p.stateNode.containerInfo===c)return;p=p.return}for(;v!==null;){if(p=vs(v),p===null)return;if(E=p.tag,E===5||E===6||E===26||E===27){l=d=p;continue e}v=v.parentNode}}l=l.return}dm(function(){var R=d,k=Gc(a),z=[];e:{var O=Pm.get(e);if(O!==void 0){var D=El,$=e;switch(e){case"keypress":if(bl(a)===0)break e;case"keydown":case"keyup":D=mS;break;case"focusin":$="focus",D=Kc;break;case"focusout":$="blur",D=Kc;break;case"beforeblur":case"afterblur":D=Kc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=nS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=_S;break;case km:case Lm:case Um:D=aS;break;case zm:D=yS;break;case"scroll":case"scrollend":D=eS;break;case"wheel":D=SS;break;case"copy":case"cut":case"paste":D=lS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=gm;break;case"toggle":case"beforetoggle":D=xS}var ce=(n&4)!==0,Ue=!ce&&(e==="scroll"||e==="scrollend"),C=ce?O!==null?O+"Capture":null:O;ce=[];for(var T=R,A;T!==null;){var U=T;if(A=U.stateNode,U=U.tag,U!==5&&U!==26&&U!==27||A===null||C===null||(U=Da(T,C),U!=null&&ce.push(dr(T,U,A))),Ue)break;T=T.return}0<ce.length&&(O=new D(O,$,null,a,k),z.push({event:O,listeners:ce}))}}if((n&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",O&&a!==Hc&&($=a.relatedTarget||a.fromElement)&&(vs($)||$[_s]))break e;if((D||O)&&(O=k.window===k?k:(O=k.ownerDocument)?O.defaultView||O.parentWindow:window,D?($=a.relatedTarget||a.toElement,D=R,$=$?vs($):null,$!==null&&(Ue=u($),ce=$.tag,$!==Ue||ce!==5&&ce!==27&&ce!==6)&&($=null)):(D=null,$=R),D!==$)){if(ce=mm,U="onMouseLeave",C="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(ce=gm,U="onPointerLeave",C="onPointerEnter",T="pointer"),Ue=D==null?O:Oa(D),A=$==null?O:Oa($),O=new ce(U,T+"leave",D,a,k),O.target=Ue,O.relatedTarget=A,U=null,vs(k)===R&&(ce=new ce(C,T+"enter",$,a,k),ce.target=A,ce.relatedTarget=Ue,U=ce),Ue=U,D&&$)t:{for(ce=EE,C=D,T=$,A=0,U=C;U;U=ce(U))A++;U=0;for(var oe=T;oe;oe=ce(oe))U++;for(;0<A-U;)C=ce(C),A--;for(;0<U-A;)T=ce(T),U--;for(;A--;){if(C===T||T!==null&&C===T.alternate){ce=C;break t}C=ce(C),T=ce(T)}ce=null}else ce=null;D!==null&&l_(z,O,D,ce,!1),$!==null&&Ue!==null&&l_(z,Ue,$,ce,!0)}}e:{if(O=R?Oa(R):window,D=O.nodeName&&O.nodeName.toLowerCase(),D==="select"||D==="input"&&O.type==="file")var Ae=Tm;else if(Em(O))if(Nm)Ae=IS;else{Ae=OS;var ne=jS}else D=O.nodeName,!D||D.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?R&&Bc(R.elementType)&&(Ae=Tm):Ae=DS;if(Ae&&(Ae=Ae(e,R))){xm(z,Ae,a,k);break e}ne&&ne(e,O,R),e==="focusout"&&R&&O.type==="number"&&R.memoizedProps.value!=null&&Pc(O,"number",O.value)}switch(ne=R?Oa(R):window,e){case"focusin":(Em(ne)||ne.contentEditable==="true")&&(ws=ne,eu=R,Ba=null);break;case"focusout":Ba=eu=ws=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,Im(z,a,k);break;case"selectionchange":if(kS)break;case"keydown":case"keyup":Im(z,a,k)}var _e;if(Wc)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Cs?bm(e,a)&&(Te="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(_m&&a.locale!=="ko"&&(Cs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Cs&&(_e=fm()):(Xn=k,Vc="value"in Xn?Xn.value:Xn.textContent,Cs=!0)),ne=ho(R,Te),0<ne.length&&(Te=new pm(Te,e,null,a,k),z.push({event:Te,listeners:ne}),_e?Te.data=_e:(_e=Sm(a),_e!==null&&(Te.data=_e)))),(_e=NS?CS(e,a):wS(e,a))&&(Te=ho(R,"onBeforeInput"),0<Te.length&&(ne=new pm("onBeforeInput","beforeinput",null,a,k),z.push({event:ne,listeners:Te}),ne.data=_e)),vE(z,e,R,a,k)}a_(z,n)})}function dr(e,n,a){return{instance:e,listener:n,currentTarget:a}}function ho(e,n){for(var a=n+"Capture",l=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Da(e,a),c!=null&&l.unshift(dr(e,c,d)),c=Da(e,n),c!=null&&l.push(dr(e,c,d))),e.tag===3)return l;e=e.return}return[]}function EE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function l_(e,n,a,l,c){for(var d=n._reactName,p=[];a!==null&&a!==l;){var v=a,E=v.alternate,R=v.stateNode;if(v=v.tag,E!==null&&E===l)break;v!==5&&v!==26&&v!==27||R===null||(E=R,c?(R=Da(a,d),R!=null&&p.unshift(dr(a,R,E))):c||(R=Da(a,d),R!=null&&p.push(dr(a,R,E)))),a=a.return}p.length!==0&&e.push({event:n,listeners:p})}var xE=/\r\n?/g,TE=/\u0000|\uFFFD/g;function o_(e){return(typeof e=="string"?e:""+e).replace(xE,`
`).replace(TE,"")}function c_(e,n){return n=o_(n),o_(e)===n}function Le(e,n,a,l,c,d){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||xs(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&xs(e,""+l);break;case"className":gl(e,"class",l);break;case"tabIndex":gl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":gl(e,a,l);break;case"style":cm(e,l,d);break;case"data":if(n!=="object"){gl(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=vl(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&Le(e,n,"name",c.name,c,null),Le(e,n,"formEncType",c.formEncType,c,null),Le(e,n,"formMethod",c.formMethod,c,null),Le(e,n,"formTarget",c.formTarget,c,null)):(Le(e,n,"encType",c.encType,c,null),Le(e,n,"method",c.method,c,null),Le(e,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=vl(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=vn);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=vl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Se("beforetoggle",e),Se("toggle",e),pl(e,"popover",l);break;case"xlinkActuate":_n(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":_n(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":_n(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":_n(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":_n(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":_n(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":_n(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":_n(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":_n(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":pl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Zb.get(a)||a,pl(e,a,l))}}function Cd(e,n,a,l,c,d){switch(a){case"style":cm(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?xs(e,l):(typeof l=="number"||typeof l=="bigint")&&xs(e,""+l);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"onClick":l!=null&&(e.onclick=vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!em.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),d=e[xt]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(n,d,c),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,c);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):pl(e,a,l)}}}function mt(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var l=!1,c=!1,d;for(d in a)if(a.hasOwnProperty(d)){var p=a[d];if(p!=null)switch(d){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Le(e,n,d,p,a,null)}}c&&Le(e,n,"srcSet",a.srcSet,a,null),l&&Le(e,n,"src",a.src,a,null);return;case"input":Se("invalid",e);var v=d=p=c=null,E=null,R=null;for(l in a)if(a.hasOwnProperty(l)){var k=a[l];if(k!=null)switch(l){case"name":c=k;break;case"type":p=k;break;case"checked":E=k;break;case"defaultChecked":R=k;break;case"value":d=k;break;case"defaultValue":v=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(137,n));break;default:Le(e,n,l,k,a,null)}}am(e,d,v,E,R,p,c,!1);return;case"select":Se("invalid",e),l=p=d=null;for(c in a)if(a.hasOwnProperty(c)&&(v=a[c],v!=null))switch(c){case"value":d=v;break;case"defaultValue":p=v;break;case"multiple":l=v;default:Le(e,n,c,v,a,null)}n=d,a=p,e.multiple=!!l,n!=null?Es(e,!!l,n,!1):a!=null&&Es(e,!!l,a,!0);return;case"textarea":Se("invalid",e),d=c=l=null;for(p in a)if(a.hasOwnProperty(p)&&(v=a[p],v!=null))switch(p){case"value":l=v;break;case"defaultValue":c=v;break;case"children":d=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:Le(e,n,p,v,a,null)}lm(e,l,c,d);return;case"option":for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null)&&(E==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Le(e,n,E,l,a,null));return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(l=0;l<ur.length;l++)Se(ur[l],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:Le(e,n,R,l,a,null)}return;default:if(Bc(n)){for(k in a)a.hasOwnProperty(k)&&(l=a[k],l!==void 0&&Cd(e,n,k,l,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(l=a[v],l!=null&&Le(e,n,v,l,a,null))}function NE(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,p=null,v=null,E=null,R=null,k=null;for(D in a){var z=a[D];if(a.hasOwnProperty(D)&&z!=null)switch(D){case"checked":break;case"value":break;case"defaultValue":E=z;default:l.hasOwnProperty(D)||Le(e,n,D,null,l,z)}}for(var O in l){var D=l[O];if(z=a[O],l.hasOwnProperty(O)&&(D!=null||z!=null))switch(O){case"type":d=D;break;case"name":c=D;break;case"checked":R=D;break;case"defaultChecked":k=D;break;case"value":p=D;break;case"defaultValue":v=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(137,n));break;default:D!==z&&Le(e,n,O,D,l,z)}}zc(e,p,v,E,R,k,d,c);return;case"select":D=p=v=O=null;for(d in a)if(E=a[d],a.hasOwnProperty(d)&&E!=null)switch(d){case"value":break;case"multiple":D=E;default:l.hasOwnProperty(d)||Le(e,n,d,null,l,E)}for(c in l)if(d=l[c],E=a[c],l.hasOwnProperty(c)&&(d!=null||E!=null))switch(c){case"value":O=d;break;case"defaultValue":v=d;break;case"multiple":p=d;default:d!==E&&Le(e,n,c,d,l,E)}n=v,a=p,l=D,O!=null?Es(e,!!a,O,!1):!!l!=!!a&&(n!=null?Es(e,!!a,n,!0):Es(e,!!a,a?[]:"",!1));return;case"textarea":D=O=null;for(v in a)if(c=a[v],a.hasOwnProperty(v)&&c!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Le(e,n,v,null,l,c)}for(p in l)if(c=l[p],d=a[p],l.hasOwnProperty(p)&&(c!=null||d!=null))switch(p){case"value":O=c;break;case"defaultValue":D=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(r(91));break;default:c!==d&&Le(e,n,p,c,l,d)}rm(e,O,D);return;case"option":for(var $ in a)O=a[$],a.hasOwnProperty($)&&O!=null&&!l.hasOwnProperty($)&&($==="selected"?e.selected=!1:Le(e,n,$,null,l,O));for(E in l)O=l[E],D=a[E],l.hasOwnProperty(E)&&O!==D&&(O!=null||D!=null)&&(E==="selected"?e.selected=O&&typeof O!="function"&&typeof O!="symbol":Le(e,n,E,O,l,D));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in a)O=a[ce],a.hasOwnProperty(ce)&&O!=null&&!l.hasOwnProperty(ce)&&Le(e,n,ce,null,l,O);for(R in l)if(O=l[R],D=a[R],l.hasOwnProperty(R)&&O!==D&&(O!=null||D!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(137,n));break;default:Le(e,n,R,O,l,D)}return;default:if(Bc(n)){for(var Ue in a)O=a[Ue],a.hasOwnProperty(Ue)&&O!==void 0&&!l.hasOwnProperty(Ue)&&Cd(e,n,Ue,void 0,l,O);for(k in l)O=l[k],D=a[k],!l.hasOwnProperty(k)||O===D||O===void 0&&D===void 0||Cd(e,n,k,O,l,D);return}}for(var C in a)O=a[C],a.hasOwnProperty(C)&&O!=null&&!l.hasOwnProperty(C)&&Le(e,n,C,null,l,O);for(z in l)O=l[z],D=a[z],!l.hasOwnProperty(z)||O===D||O==null&&D==null||Le(e,n,z,O,l,D)}function u_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CE(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var c=a[l],d=c.transferSize,p=c.initiatorType,v=c.duration;if(d&&v&&u_(p)){for(p=0,v=c.responseEnd,l+=1;l<a.length;l++){var E=a[l],R=E.startTime;if(R>v)break;var k=E.transferSize,z=E.initiatorType;k&&u_(z)&&(E=E.responseEnd,p+=k*(E<v?1:(v-R)/(E-R)))}if(--l,n+=8*(d+p)/(c.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var wd=null,Ad=null;function mo(e){return e.nodeType===9?e:e.ownerDocument}function d_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Rd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var jd=null;function wE(){var e=window.event;return e&&e.type==="popstate"?e===jd?!1:(jd=e,!0):(jd=null,!1)}var h_=typeof setTimeout=="function"?setTimeout:void 0,AE=typeof clearTimeout=="function"?clearTimeout:void 0,m_=typeof Promise=="function"?Promise:void 0,RE=typeof queueMicrotask=="function"?queueMicrotask:typeof m_<"u"?function(e){return m_.resolve(null).then(e).catch(jE)}:h_;function jE(e){setTimeout(function(){throw e})}function ui(e){return e==="head"}function p_(e,n){var a=n,l=0;do{var c=a.nextSibling;if(e.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(c),ea(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")fr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,fr(a);for(var d=a.firstChild;d;){var p=d.nextSibling,v=d.nodeName;d[ja]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=p}}else a==="body"&&fr(e.ownerDocument.body);a=c}while(a);ea(n)}function g_(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Od(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Od(a),Lc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function OE(e,n,a,l){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ja])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Qt(e.nextSibling),e===null)break}return null}function DE(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Qt(e.nextSibling),e===null))return null;return e}function __(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Qt(e.nextSibling),e===null))return null;return e}function Dd(e){return e.data==="$?"||e.data==="$~"}function Id(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function IE(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Qt(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Md=null;function v_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Qt(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function y_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function b_(e,n,a){switch(n=mo(a),e){case"html":if(e=n.documentElement,!e)throw Error(r(452));return e;case"head":if(e=n.head,!e)throw Error(r(453));return e;case"body":if(e=n.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function fr(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Lc(e)}var Wt=new Map,S_=new Set;function po(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Mn=V.d;V.d={f:ME,r:kE,D:LE,C:UE,L:zE,m:PE,X:HE,S:BE,M:GE};function ME(){var e=Mn.f(),n=ao();return e||n}function kE(e){var n=ys(e);n!==null&&n.tag===5&&n.type==="form"?zp(n):Mn.r(e)}var $s=typeof document>"u"?null:document;function E_(e,n,a){var l=$s;if(l&&typeof n=="string"&&n){var c=Gt(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),S_.has(c)||(S_.add(c),e={rel:e,crossOrigin:a,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),mt(n,"link",e),rt(n),l.head.appendChild(n)))}}function LE(e){Mn.D(e),E_("dns-prefetch",e,null)}function UE(e,n){Mn.C(e,n),E_("preconnect",e,n)}function zE(e,n,a){Mn.L(e,n,a);var l=$s;if(l&&e&&n){var c='link[rel="preload"][as="'+Gt(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Gt(a.imageSizes)+'"]')):c+='[href="'+Gt(e)+'"]';var d=c;switch(n){case"style":d=Zs(e);break;case"script":d=Js(e)}Wt.has(d)||(e=b({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Wt.set(d,e),l.querySelector(c)!==null||n==="style"&&l.querySelector(hr(d))||n==="script"&&l.querySelector(mr(d))||(n=l.createElement("link"),mt(n,"link",e),rt(n),l.head.appendChild(n)))}}function PE(e,n){Mn.m(e,n);var a=$s;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Gt(l)+'"][href="'+Gt(e)+'"]',d=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Js(e)}if(!Wt.has(d)&&(e=b({rel:"modulepreload",href:e},n),Wt.set(d,e),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(mr(d)))return}l=a.createElement("link"),mt(l,"link",e),rt(l),a.head.appendChild(l)}}}function BE(e,n,a){Mn.S(e,n,a);var l=$s;if(l&&e){var c=bs(l).hoistableStyles,d=Zs(e);n=n||"default";var p=c.get(d);if(!p){var v={loading:0,preload:null};if(p=l.querySelector(hr(d)))v.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Wt.get(d))&&kd(e,a);var E=p=l.createElement("link");rt(E),mt(E,"link",e),E._p=new Promise(function(R,k){E.onload=R,E.onerror=k}),E.addEventListener("load",function(){v.loading|=1}),E.addEventListener("error",function(){v.loading|=2}),v.loading|=4,go(p,n,l)}p={type:"stylesheet",instance:p,count:1,state:v},c.set(d,p)}}}function HE(e,n){Mn.X(e,n);var a=$s;if(a&&e){var l=bs(a).hoistableScripts,c=Js(e),d=l.get(c);d||(d=a.querySelector(mr(c)),d||(e=b({src:e,async:!0},n),(n=Wt.get(c))&&Ld(e,n),d=a.createElement("script"),rt(d),mt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function GE(e,n){Mn.M(e,n);var a=$s;if(a&&e){var l=bs(a).hoistableScripts,c=Js(e),d=l.get(c);d||(d=a.querySelector(mr(c)),d||(e=b({src:e,async:!0,type:"module"},n),(n=Wt.get(c))&&Ld(e,n),d=a.createElement("script"),rt(d),mt(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function x_(e,n,a,l){var c=(c=ae.current)?po(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Zs(a.href),a=bs(c).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Zs(a.href);var d=bs(c).hoistableStyles,p=d.get(e);if(p||(c=c.ownerDocument||c,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,p),(d=c.querySelector(hr(e)))&&!d._p&&(p.instance=d,p.state.loading=5),Wt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wt.set(e,a),d||FE(c,e,a,p.state))),n&&l===null)throw Error(r(528,""));return p}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Js(a),a=bs(c).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Zs(e){return'href="'+Gt(e)+'"'}function hr(e){return'link[rel="stylesheet"]['+e+"]"}function T_(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function FE(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),mt(n,"link",a),rt(n),e.head.appendChild(n))}function Js(e){return'[src="'+Gt(e)+'"]'}function mr(e){return"script[async]"+e}function N_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+Gt(a.href)+'"]');if(l)return n.instance=l,rt(l),l;var c=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),rt(l),mt(l,"style",c),go(l,a.precedence,e),n.instance=l;case"stylesheet":c=Zs(a.href);var d=e.querySelector(hr(c));if(d)return n.state.loading|=4,n.instance=d,rt(d),d;l=T_(a),(c=Wt.get(c))&&kd(l,c),d=(e.ownerDocument||e).createElement("link"),rt(d);var p=d;return p._p=new Promise(function(v,E){p.onload=v,p.onerror=E}),mt(d,"link",l),n.state.loading|=4,go(d,a.precedence,e),n.instance=d;case"script":return d=Js(a.src),(c=e.querySelector(mr(d)))?(n.instance=c,rt(c),c):(l=a,(c=Wt.get(d))&&(l=b({},a),Ld(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),rt(c),mt(c,"link",l),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,go(l,a.precedence,e));return n.instance}function go(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,d=c,p=0;p<l.length;p++){var v=l[p];if(v.dataset.precedence===n)d=v;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function kd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Ld(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var _o=null;function C_(e,n,a){if(_o===null){var l=new Map,c=_o=new Map;c.set(a,l)}else c=_o,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var d=a[c];if(!(d[ja]||d[ut]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var p=d.getAttribute(n)||"";p=e+p;var v=l.get(p);v?v.push(d):l.set(p,[d])}}return l}function w_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function qE(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function A_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function VE(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=Zs(l.href),d=n.querySelector(hr(c));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=vo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=d,rt(d);return}d=n.ownerDocument||n,l=T_(l),(c=Wt.get(c))&&kd(l,c),d=d.createElement("link"),rt(d);var p=d;p._p=new Promise(function(v,E){p.onload=v,p.onerror=E}),mt(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=vo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Ud=0;function YE(e,n){return e.stylesheets&&e.count===0&&bo(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&bo(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+n);0<e.imgBytes&&Ud===0&&(Ud=62500*CE());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&bo(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Ud?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function vo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var yo=null;function bo(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,yo=new Map,n.forEach(XE,e),yo=null,vo.call(e))}function XE(e,n){if(!(n.state.loading&4)){var a=yo.get(e);if(a)var l=a.get(null);else{a=new Map,yo.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var p=c[d];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),l=p)}l&&a.set(null,l)}c=n.instance,p=c.getAttribute("data-precedence"),d=a.get(p)||l,d===l&&a.set(null,c),a.set(p,c),this.count++,l=vo.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var pr={$$typeof:X,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function KE(e,n,a,l,c,d,p,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.hiddenUpdates=Dc(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function R_(e,n,a,l,c,d,p,v,E,R,k,z){return e=new KE(e,n,a,p,E,R,k,z,v),n=1,d===!0&&(n|=24),d=kt(3,null,null,n),e.current=d,d.stateNode=e,n=gu(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:n},bu(d),e}function j_(e){return e?(e=js,e):js}function O_(e,n,a,l,c,d){c=j_(c),l.context===null?l.context=c:l.pendingContext=c,l=Jn(n),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=ei(e,l,n),a!==null&&(Rt(a,e,n),Xa(a,e,n))}function D_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function zd(e,n){D_(e,n),(e=e.alternate)&&D_(e,n)}function I_(e){if(e.tag===13||e.tag===31){var n=zi(e,67108864);n!==null&&Rt(n,e,67108864),zd(e,67108864)}}function M_(e){if(e.tag===13||e.tag===31){var n=Bt();n=Ic(n);var a=zi(e,n);a!==null&&Rt(a,e,n),zd(e,n)}}var So=!0;function QE(e,n,a,l){var c=j.T;j.T=null;var d=V.p;try{V.p=2,Pd(e,n,a,l)}finally{V.p=d,j.T=c}}function WE(e,n,a,l){var c=j.T;j.T=null;var d=V.p;try{V.p=8,Pd(e,n,a,l)}finally{V.p=d,j.T=c}}function Pd(e,n,a,l){if(So){var c=Bd(l);if(c===null)Nd(e,n,l,Eo,a),L_(e,l);else if(ZE(c,e,n,a,l))l.stopPropagation();else if(L_(e,l),n&4&&-1<$E.indexOf(e)){for(;c!==null;){var d=ys(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var p=Ii(d.pendingLanes);if(p!==0){var v=d;for(v.pendingLanes|=2,v.entangledLanes|=2;p;){var E=1<<31-It(p);v.entanglements[1]|=E,p&=~E}hn(d),(Oe&6)===0&&(io=Ot()+500,cr(0))}}break;case 31:case 13:v=zi(d,2),v!==null&&Rt(v,d,2),ao(),zd(d,2)}if(d=Bd(l),d===null&&Nd(e,n,l,Eo,a),d===c)break;c=d}c!==null&&l.stopPropagation()}else Nd(e,n,l,null,a)}}function Bd(e){return e=Gc(e),Hd(e)}var Eo=null;function Hd(e){if(Eo=null,e=vs(e),e!==null){var n=u(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=h(n),e!==null)return e;e=null}else if(a===31){if(e=m(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Eo=e,null}function k_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lb()){case Fh:return 2;case qh:return 8;case ul:case Ub:return 32;case Vh:return 268435456;default:return 32}default:return 32}}var Gd=!1,di=null,fi=null,hi=null,gr=new Map,_r=new Map,mi=[],$E="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L_(e,n){switch(e){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":gr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":_r.delete(n.pointerId)}}function vr(e,n,a,l,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[c]},n!==null&&(n=ys(n),n!==null&&I_(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function ZE(e,n,a,l,c){switch(n){case"focusin":return di=vr(di,e,n,a,l,c),!0;case"dragenter":return fi=vr(fi,e,n,a,l,c),!0;case"mouseover":return hi=vr(hi,e,n,a,l,c),!0;case"pointerover":var d=c.pointerId;return gr.set(d,vr(gr.get(d)||null,e,n,a,l,c)),!0;case"gotpointercapture":return d=c.pointerId,_r.set(d,vr(_r.get(d)||null,e,n,a,l,c)),!0}return!1}function U_(e){var n=vs(e.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=h(a),n!==null){e.blockedOn=n,$h(e.priority,function(){M_(a)});return}}else if(n===31){if(n=m(a),n!==null){e.blockedOn=n,$h(e.priority,function(){M_(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Bd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Hc=l,a.target.dispatchEvent(l),Hc=null}else return n=ys(a),n!==null&&I_(n),e.blockedOn=a,!1;n.shift()}return!0}function z_(e,n,a){xo(e)&&a.delete(n)}function JE(){Gd=!1,di!==null&&xo(di)&&(di=null),fi!==null&&xo(fi)&&(fi=null),hi!==null&&xo(hi)&&(hi=null),gr.forEach(z_),_r.forEach(z_)}function To(e,n){e.blockedOn===n&&(e.blockedOn=null,Gd||(Gd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,JE)))}var No=null;function P_(e){No!==e&&(No=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){No===e&&(No=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],c=e[n+2];if(typeof l!="function"){if(Hd(l||a)===null)continue;break}var d=ys(a);d!==null&&(e.splice(n,3),n-=3,Bu(d,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function ea(e){function n(E){return To(E,e)}di!==null&&To(di,e),fi!==null&&To(fi,e),hi!==null&&To(hi,e),gr.forEach(n),_r.forEach(n);for(var a=0;a<mi.length;a++){var l=mi[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<mi.length&&(a=mi[0],a.blockedOn===null);)U_(a),a.blockedOn===null&&mi.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],d=a[l+1],p=c[xt]||null;if(typeof d=="function")p||P_(a);else if(p){var v=null;if(d&&d.hasAttribute("formAction")){if(c=d,p=d[xt]||null)v=p.formAction;else if(Hd(c)!==null)continue}else v=p.action;typeof v=="function"?a[l+1]=v:(a.splice(l,3),l-=3),P_(a)}}}function B_(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(p){return c=p})},focusReset:"manual",scroll:"manual"})}function n(){c!==null&&(c(),c=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),c!==null&&(c(),c=null)}}}function Fd(e){this._internalRoot=e}Co.prototype.render=Fd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Bt();O_(a,l,e,n,null,null)},Co.prototype.unmount=Fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;O_(e.current,2,null,e,null,null),ao(),n[_s]=null}};function Co(e){this._internalRoot=e}Co.prototype.unstable_scheduleHydration=function(e){if(e){var n=Wh();e={blockedOn:null,target:e,priority:n};for(var a=0;a<mi.length&&n!==0&&n<mi[a].priority;a++);mi.splice(a,0,e),a===0&&U_(e)}};var H_=t.version;if(H_!=="19.2.4")throw Error(r(527,H_,"19.2.4"));V.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=_(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var ex={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{wa=wo.inject(ex),Dt=wo}catch{}}return br.createRoot=function(e,n){if(!o(e))throw Error(r(299));var a=!1,l="",c=Kp,d=Qp,p=Wp;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=R_(e,1,!1,null,null,a,l,null,c,d,p,B_),e[_s]=n.current,Td(e),new Fd(n)},br.hydrateRoot=function(e,n,a){if(!o(e))throw Error(r(299));var l=!1,c="",d=Kp,p=Qp,v=Wp,E=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(E=a.formState)),n=R_(e,1,!0,n,a??null,l,c,E,d,p,v,B_),n.context=j_(null),a=n.current,l=Bt(),l=Ic(l),c=Jn(l),c.callback=null,ei(a,c,l),a=l,n.current.lanes=a,Ra(n,a),hn(n),e[_s]=n.current,Td(e),new Co(n)},br.version="19.2.4",br}var $_;function ux(){if($_)return Yd.exports;$_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Yd.exports=cx(),Yd.exports}var dx=ux();function es(i,t=[],s=null){const[r,o]=ee.useState(null),[u,h]=ee.useState(!0),[m,g]=ee.useState(null),_=ee.useCallback(async()=>{try{h(!0),g(null);const y=await i();o(y)}catch(y){g(y.message||"Failed to fetch data")}finally{h(!1)}},[i,...t]);return ee.useEffect(()=>{_()},[_]),ee.useEffect(()=>{if(!s)return;const y=setInterval(_,s);return()=>clearInterval(y)},[_,s]),{data:r,loading:u,error:m,reload:_}}const fx="https://fantasy.premierleague.com/api";let Xr=5398119;function Wd(i){Xr=Number(i)}function hx(){return Xr}let Ao=null,Z_=0;const mx=1800*1e3;let Ro=null;const jo={},gy=[i=>`https://corsproxy.io/?url=${encodeURIComponent(i)}`,i=>`https://api.allorigins.win/raw?url=${encodeURIComponent(i)}`,i=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(i)}`,i=>`https://thingproxy.freeboard.io/fetch/${i}`];let Oo=-1,Sr=null;async function ko(i,t=8e3){const s=new AbortController,r=setTimeout(()=>s.abort(),t);try{const o=await fetch(i,{signal:s.signal});return clearTimeout(r),o}catch(o){throw clearTimeout(r),o}}async function J_(i,t){const s=gy[i](t),r=await ko(s,6e3);if(!r.ok)throw new Error(`FPL API error (${r.status})`);const o=await r.json();return{index:i,data:o}}async function fs(i){try{const h=await ko(`/api/fpl-proxy?path=${encodeURIComponent(i)}`);if(h.ok)return await h.json()}catch{}const t={"bootstrap-static/":"bootstrap.json","fixtures/":"fixtures.json"},s=i.match(/^event\/(\d+)\/live\/$/),r=t[i]||(s?`live/gw${s[1]}.json`:null);if(r)try{const m=await ko(`/FF2026/data/${r}`,3e3);if(m.ok){const g=await m.json();if(g&&(Array.isArray(g)?g.length>0:Object.keys(g).length>0))return g}}catch{}if(Sr!==!1)try{const h=await ko(`/api/fpl-proxy?path=${encodeURIComponent(i)}`,Sr===null?3e3:6e3);if(h.ok){const m=await h.json();return Sr=!0,m}Sr=!1}catch{Sr=!1}const o=`${fx}/${i}`;if(Oo>=0)try{const{data:h}=await J_(Oo,o);return h}catch{Oo=-1}const u=gy.map((h,m)=>J_(m,o));try{const{index:h,data:m}=await Promise.any(u);return Oo=h,m}catch{throw new Error('Unable to reach the FPL API. All proxy methods failed. Try refreshing or running the app locally with "npm run dev".')}}async function hs(){const i=Date.now();return(!Ao||i-Z_>=mx)&&(Ao=fs("bootstrap-static/").catch(t=>{throw Ao=null,t}),Z_=i),Ao}async function Pf(){return fs(`entry/${Xr}/`)}async function Bf(){return fs(`entry/${Xr}/history/`)}async function Hf(i){return fs(`entry/${Xr}/event/${i}/picks/`)}async function Kr(){return Ro||(Ro=fs("fixtures/").catch(i=>{throw Ro=null,i})),Ro}async function Gf(i){return jo[i]||(jo[i]=fs(`event/${i}/live/`).catch(t=>{throw delete jo[i],t})),jo[i]}async function px(i){return fs(`leagues-classic/${i}/standings/`)}let $d=null,Zd=null;async function _y(i){try{const s=await fetch(`/FF2026/data/${i}`);return s.ok?await s.json():null}catch{return null}}async function Ff(){return $d||($d=_y("understat.json").then(i=>{if(!i||!Array.isArray(i))return{};const t={};for(const s of i){const r=Lo(s.name);t[r]=s}return t})),$d}function vy(i,t){if(!i||!t)return null;const s=Lo(t.web_name||"");if(s&&i[s])return i[s];const r=Lo(t.second_name||"");if(r&&i[r])return i[r];const o=Lo(`${t.first_name||""} ${t.second_name||""}`);if(o&&i[o])return i[o];if(s.length>=4){for(const[u,h]of Object.entries(i))if(u.endsWith(s)||s.endsWith(u))return h}return null}async function qf(){return Zd||(Zd=_y("odds.json").then(i=>i||{matches:[],teamStrength:{}})),Zd}const gx={Arsenal:"ARS","Aston Villa":"AVL",Bournemouth:"BOU",Brentford:"BRE",Brighton:"BHA",Chelsea:"CHE","Crystal Palace":"CRY",Everton:"EVE",Fulham:"FUL",Ipswich:"IPS",Leicester:"LEI",Liverpool:"LIV","Man City":"MCI","Man United":"MUN",Newcastle:"NEW","Nott'm Forest":"NFO",Southampton:"SOU",Tottenham:"TOT","West Ham":"WHU",Wolves:"WOL"},_x=Object.fromEntries(Object.entries(gx).map(([i,t])=>[t,i]));function vx(i,t){const s=_x[t];return!s||!i?.teamStrength?.[s]?null:i.teamStrength[s].strength}function Lo(i){return i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z\s]/g,"").trim()}const ev={ATK:{form:.18,ppg:.14,ict:.18,fdr:.14,homeAway:.1,teamStr:.12,availability:.09,bonus:.05},DEF:{form:.2,ppg:.16,ict:.1,fdr:.16,homeAway:.1,teamStr:.14,availability:.09,bonus:.05}};function yx(i){return i==="GKP"||i==="DEF"?ev.DEF:ev.ATK}function is(i,t,s){return Math.max(t,Math.min(s,i))}function tv(i){return is(i/50,0,10)}function bx(i){return is((5-i)*2.5,0,10)}function Sx(i){return i==null||i===""?10:is(i/10,0,10)}function Ex(i,t){if(!t||t<=0)return 5;const s=i/t;return is(s*3.3,0,10)}function xx(i,t,s){if(!i)return 5;const r=t==="GKP"||t==="DEF";let o;return r?o=s?i.strength_defence_home:i.strength_defence_away:o=s?i.strength_attack_home:i.strength_attack_away,o?is((o-900)/60,0,10):5}function Tx(i){return i?7.5:4.5}function Nx(i){return i>=7?"In great form":i>=5?"Decent form":i>=3?"Average form":"Poor form"}function Cx(i,t){const s=t||"";return i<=2?`Easy fixture ${s}`:i<=3?`Medium fixture ${s}`:`Tough fixture ${s}`}function wx(i){return i>=7?"High attacking threat":i>=4?"Moderate involvement":"Low attacking involvement"}function Ax(i){return i==null||i===""||i>=100?"Fully available":i>=75?"Likely to play":i>=50?"Fitness doubt":i>=25?"Unlikely to play":"Expected to miss"}function Go(i,t,s){const r=yx(i.position),o=t?.opponent?.includes("(H)")??!1,u=s?.[i.teamId]||null,h=i.appearances||(i.minutes?Math.round(i.minutes/70):0),m=[{name:"form",value:i.form||0,norm:is(i.form||0,0,10),weight:r.form,label:Nx(i.form||0)},{name:"ppg",value:i.pointsPerGame||0,norm:is((i.pointsPerGame||0)*2,0,10),weight:r.ppg,label:`${(i.pointsPerGame||0).toFixed(1)} pts/game average`},{name:"ict",value:i.ictIndex||0,norm:tv(i.ictIndex||0),weight:r.ict,label:wx(tv(i.ictIndex||0))},{name:"fdr",value:t?.difficulty||3,norm:bx(t?.difficulty||3),weight:r.fdr,label:Cx(t?.difficulty||3,t?.opponent)},{name:"homeAway",value:o?1:0,norm:Tx(o),weight:r.homeAway,label:o?"Home advantage":"Away match"},{name:"teamStr",value:0,norm:xx(u,i.position,o),weight:r.teamStr,label:`Team ${i.position==="GKP"||i.position==="DEF"?"defence":"attack"} strength`},{name:"availability",value:i.chanceOfPlaying??100,norm:Sx(i.chanceOfPlaying),weight:r.availability,label:Ax(i.chanceOfPlaying)},{name:"bonus",value:i.bonus||0,norm:Ex(i.bonus||0,h),weight:r.bonus,label:`${((i.bonus||0)/Math.max(h,1)).toFixed(1)} bonus/game`}];let g=0;for(const b of m)b.impact=+(b.norm*b.weight).toFixed(2),g+=b.impact;const _=+(g*.85).toFixed(1),y=m.filter(b=>b.impact>.5).sort((b,S)=>S.impact-b.impact).slice(0,3).map(b=>b.label);return{xpts:_,factors:m,topReasons:y}}function ss(i,t,s,r=3){const o=(t||[]).slice(0,r);if(o.length===0){const y=Go(i,{difficulty:3,opponent:"TBD"},s);return{totalXpts:+(y.xpts*r).toFixed(1),perGw:Array(r).fill(y),avgXpts:y.xpts,topReasons:y.topReasons}}const u=o.map(y=>Go(i,y,s)),h=+u.reduce((y,b)=>y+b.xpts,0).toFixed(1),m=+(h/u.length).toFixed(1),g={};for(const y of u)for(const b of y.topReasons)g[b]=(g[b]||0)+1;const _=Object.entries(g).sort((y,b)=>b[1]-y[1]).slice(0,3).map(([y])=>y);return{totalXpts:h,perGw:u,avgXpts:m,topReasons:_}}function yy(i,t){const s=i.map(r=>{const{totalXpts:o,avgXpts:u,topReasons:h}=ss(r,r.upcomingFixtures,t,3);return{...r,xpts:u,totalXpts3:o,topReasons:h}});return s.sort((r,o)=>o.xpts-r.xpts),{ranked:s,captain:s[0]||null,viceCaptain:s[1]||null}}function nv(i,t,s=3){return i.map(r=>{const{totalXpts:o,avgXpts:u,topReasons:h}=ss(r,r.upcomingFixtures,t,s);return{...r,xpts:u,totalXpts:o,topReasons:h}}).sort((r,o)=>o.xpts-r.xpts)}function va(i){const t={};for(const m of i.teams)t[m.id]=m;const s={};for(const m of i.element_types)s[m.id]=m.singular_name_short;const r={};for(const m of i.elements)r[m.id]=m;const o={};for(const m of i.events)o[m.id]=m;const u=i.events.find(m=>m.is_current),h=i.events.find(m=>m.is_next);return{teams:t,positionMap:s,players:r,events:o,currentEvent:u,nextEvent:h}}function Vf(i,t,s){const r={},o=i.filter(u=>u.event&&u.event>s&&!u.finished).sort((u,h)=>u.event-h.event);for(const u of o)r[u.team_h]||(r[u.team_h]=[]),r[u.team_h].length<5&&r[u.team_h].push({gw:u.event,opponent:`${t[u.team_a]?.short_name||"?"} (H)`,difficulty:u.team_h_difficulty}),r[u.team_a]||(r[u.team_a]=[]),r[u.team_a].length<5&&r[u.team_a].push({gw:u.event,opponent:`${t[u.team_h]?.short_name||"?"} (A)`,difficulty:u.team_a_difficulty});return r}function Rx(i){let t=1;const s=new Set(i.chips.map(r=>r.event));for(const r of i.current){if(s.has(r.event)){t=Math.min(t+1,5);continue}r.event_transfers===0?t=Math.min(t+1,5):r.event_transfers_cost>0?t=1:t=Math.max(1,Math.min(t-r.event_transfers+1,5))}return t}function by(i){return{xG:parseFloat(i.expected_goals)||0,xA:parseFloat(i.expected_assists)||0,xGI:parseFloat(i.expected_goal_involvements)||0,xGC:parseFloat(i.expected_goals_conceded)||0,xG90:parseFloat(i.expected_goals_per_90)||0,xA90:parseFloat(i.expected_assists_per_90)||0,xGI90:parseFloat(i.expected_goal_involvements_per_90)||0,ictIndex:parseFloat(i.ict_index)||0,influence:parseFloat(i.influence)||0,creativity:parseFloat(i.creativity)||0,threat:parseFloat(i.threat)||0,pointsPerGame:parseFloat(i.points_per_game)||0,goalsScored:i.goals_scored||0,assists:i.assists||0,cleanSheets:i.clean_sheets||0,minutes:i.minutes||0,bonus:i.bonus||0,bps:i.bps||0,penaltiesOrder:i.penalties_order||null,cornersOrder:i.corners_and_indirect_freekicks_order||null,directFKOrder:i.direct_freekicks_order||null}}function Sy(i){const t=i.cost_change_event||0,s=i.cost_change_start||0,r=i.transfers_in_event||0,o=i.transfers_out_event||0,u=r-o;let h="stable";return u>5e4?h="rising":u>2e4?h="likely-rising":u<-5e4?h="falling":u<-2e4&&(h="likely-falling"),{costChangeEvent:t/10,costChangeStart:s/10,transfersInEvent:r,transfersOutEvent:o,netTransfersEvent:u,transfersIn:i.transfers_in||0,transfersOut:i.transfers_out||0,pricePressure:h,startPrice:(i.now_cost-s)/10}}function Yf(i,t,s,r,o){const u=parseFloat(i.form)||0,h=parseFloat(i.points_per_game)||0,m=parseFloat(i.expected_goal_involvements_per_90)||0,g=parseFloat(i.ict_index)||0,_=i.minutes||0,y=_>0?_/90:1,b=g/Math.max(y,1),S=Math.min(b/10,10);let w=u*.3+h*.25+m*8*.2+S*.15;if(s){const q=vy(s,i);if(q&&q.games>0){const Z=(q.goals-q.xG)/q.games,H=q.npxG/q.games*(90/(q.time/q.games||90));w+=H*5*.1,w-=Z*.5}}let N=1;if(r&&o){const q=vx(r,o);q!==null?N=1.15-q*.5:N=1+(3-t)*.06}else N=1+(3-t)*.06;return Math.max(1,Math.round(w*N))}async function jx(){const i=hs(),t=Pf(),s=Kr(),r=Bf(),o=Ff(),u=qf(),h=await i,{teams:m,positionMap:g,players:_,currentEvent:y}=va(h),b=y?.id||1,[S,w,N,P,q,Z,H]=await Promise.all([t,s,r,Hf(b),Gf(b),o,u]),X={};for(const L of q.elements)X[L.id]=L.stats.total_points;const B=Vf(w,m,b);function K(L){const F=_[L.element],j=m[F.team],V=B[F.team]||[],W=V[0],J=parseFloat(F.form)||0;return{id:F.id,name:F.web_name,position:g[F.element_type],club:j?.name||"Unknown",clubShort:j?.short_name||"???",teamId:F.team,price:F.now_cost/10,totalPoints:F.total_points,gameweekPoints:X[F.id]??F.event_points??0,form:J,upcomingFixtures:V.slice(0,5),upcomingFixture:W?W.opponent:"TBD",fixtureDifficulty:W?W.difficulty:3,isCaptain:L.is_captain,isViceCaptain:L.is_vice_captain,benchOrder:L.position>11?L.position-11:0,ictIndex:parseFloat(F.ict_index)||0,pointsPerGame:parseFloat(F.points_per_game)||0,chanceOfPlaying:F.chance_of_playing_next_round,bonus:F.bonus||0,minutes:F.minutes||0}}const te=P.picks.filter(L=>L.position<=11).map(L=>{const F=_[L.element],j=m[F.team],V=B[F.team]||[],W=V[0],J=parseFloat(F.form)||0,le=by(F),x=Sy(F),I=vy(Z,F),M=I?{xG:I.xG,xA:I.xA,npxG:I.npxG,xGChain:I.xGChain,xGBuildup:I.xGBuildup,shots:I.shots,keyPasses:I.key_passes}:null;return{id:F.id,name:F.web_name,position:g[F.element_type],club:j?.name||"Unknown",clubShort:j?.short_name||"???",price:F.now_cost/10,totalPoints:F.total_points,gameweekPoints:X[F.id]??F.event_points??0,form:J,...le,...x,understat:M,upcomingFixtures:V.slice(0,5),upcomingFixture:W?W.opponent:"TBD",fixtureDifficulty:W?W.difficulty:3,isCaptain:L.is_captain,isViceCaptain:L.is_vice_captain,pointsHistory:Array.from({length:5},()=>Math.max(1,Math.round(J+(Math.random()-.5)*4))),expectedPoints:V.slice(0,5).map(G=>{const re=G.opponent?.match(/^(\w+)/)?.[1]||null;return Yf(F,G.difficulty,Z,H,re)})}}),Q=P.picks.filter(L=>L.position>11).sort((L,F)=>L.position-F.position).map(K),he=P.picks.find(L=>L.is_captain),pe=(he&&X[he.element]||0)*(he?.multiplier||2),ue=new Set(N.chips.map(L=>L.name)),ie=P.entry_history,se={totalPoints:ie.total_points,teamValue:ie.value/10,moneyInBank:ie.bank/10,overallRank:ie.overall_rank||S.summary_overall_rank||0,gameweekRank:ie.rank||0,currentGameweek:b,gameweekPoints:ie.points,captainPoints:pe,averagePoints:y?.average_entry_score||0,highestPoints:y?.highest_score||0,transfers:{made:ie.event_transfers,cost:ie.event_transfers_cost,available:Rx(N)},chips:{wildcard:!ue.has("wildcard"),benchBoost:!ue.has("bboost"),tripleCaptain:!ue.has("3xc"),freeHit:!ue.has("freehit")}};return{players:te,bench:Q,summary:se,teams:m}}async function Ox(){const[i,t]=await Promise.all([hs(),Bf()]),{events:s}=va(i);return t.current.slice(-7).map(o=>({gw:o.event,points:o.points,average:s[o.event]?.average_entry_score||0,rank:o.overall_rank}))}async function Dx(){const[i,t]=await Promise.all([hs(),Kr()]),{currentEvent:s}=va(i),r=s?.id||1,o=i.events.filter(m=>m.id>r).slice(0,5);if(o.length===0)return[{gw:r+1,projected:50,difficulty:"Medium"}];const u=i.events.filter(m=>m.finished),h=u.length>0?Math.round(u.reduce((m,g)=>m+(g.average_entry_score||0),0)/u.length):50;return o.map(m=>{const g=t.filter(w=>w.event===m.id),_=g.length>0?g.reduce((w,N)=>w+N.team_h_difficulty+N.team_a_difficulty,0)/(g.length*2):3,y=_<2.5?"Easy":_>3.5?"Hard":"Medium",b=_<3?1.1:_>3?.9:1,S=Math.round(h*b);return{gw:m.id,projected:S,difficulty:y}})}async function Ix(){const[i,t,s,r,o]=await Promise.all([hs(),Pf(),Kr(),Ff(),qf()]),{teams:u,positionMap:h,currentEvent:m}=va(i),g=m?.id||t.current_event,_=await Hf(g),y=new Set(_.picks.map(N=>N.element)),b=Vf(s,u,g);return{candidates:i.elements.filter(N=>!y.has(N.id)&&N.minutes>0&&N.status==="a").sort((N,P)=>parseFloat(P.form)-parseFloat(N.form)).slice(0,150).map(N=>{const P=u[N.team],q=parseFloat(N.form)||0,Z=b[N.team]||[],H=by(N),X=Sy(N);return{id:N.id,name:N.web_name,position:h[N.element_type],club:P?.name||"Unknown",clubShort:P?.short_name||"???",teamId:N.team,price:N.now_cost/10,totalPoints:N.total_points,form:q,...H,...X,selectedByPercent:parseFloat(N.selected_by_percent)||0,upcomingFixtures:Z.slice(0,5),expectedPoints:Z.slice(0,5).map(B=>{const K=B.opponent?.match(/^(\w+)/)?.[1]||null;return Yf(N,B.difficulty,r,o,K)}),ictIndex:parseFloat(N.ict_index)||0,pointsPerGame:parseFloat(N.points_per_game)||0,chanceOfPlaying:N.chance_of_playing_next_round,bonus:N.bonus||0,minutes:N.minutes||0}}),teams:u}}async function Mx(){const t=(await Pf()).leagues?.classic||[],s=t.find(o=>o.league_type==="x")||t.find(o=>o.max_entries&&o.max_entries<1e3)||t[0];if(!s)return{name:"No League Found",myPosition:0,totalMembers:0,standings:[]};const r=await px(s.id);return{name:r.league.name,myPosition:s.entry_rank||0,totalMembers:s.entry_count||r.standings.results.length,standings:r.standings.results.slice(0,10).map((o,u)=>({rank:o.rank||u+1,name:o.entry_name,manager:o.entry===hx()?"You":o.player_name,points:o.total}))}}async function kx(){const[i,t,s,r]=await Promise.all([hs(),Kr(),Ff(),qf()]),{teams:o,positionMap:u,currentEvent:h}=va(i),m=h?.id||1,g=t.filter(N=>N.event&&N.event>m&&!N.finished).sort((N,P)=>N.event-P.event||N.kickoff_time?.localeCompare(P.kickoff_time||"")),_=[...new Set(g.map(N=>N.event))].slice(0,5),y={};for(const N of i.events)y[N.id]=N.deadline_time;const b={};for(const N of g)b[N.team_h]||(b[N.team_h]={}),b[N.team_h][N.event]={difficulty:N.team_h_difficulty,opponent:`${o[N.team_a]?.short_name||"?"} (H)`,opponentShort:o[N.team_a]?.short_name||null},b[N.team_a]||(b[N.team_a]={}),b[N.team_a][N.event]={difficulty:N.team_a_difficulty,opponent:`${o[N.team_h]?.short_name||"?"} (A)`,opponentShort:o[N.team_h]?.short_name||null};const S=i.elements.filter(N=>N.minutes>0&&N.status==="a"&&parseFloat(N.form)>0);function w(N){const P=S.filter(H=>b[H.team]?.[N]).map(H=>{const X=b[H.team][N],B=parseFloat(H.form)||0,K=Yf(H,X.difficulty,s,r,X.opponentShort);return{id:H.id,name:H.web_name,position:u[H.element_type],club:o[H.team]?.short_name||"???",price:H.now_cost/10,form:B,totalPoints:H.total_points,opponent:X.opponent,difficulty:X.difficulty,score:K}}).sort((H,X)=>X.score-H.score),q=[],Z={};for(const H of P){const X=Z[H.position]||0;if(X<2&&(q.push(H),Z[H.position]=X+1),q.length>=8)break}return q}return _.map(N=>({gw:N,deadline:y[N]||null,matches:g.filter(P=>P.event===N).map(P=>({id:P.id,kickoff:P.kickoff_time,homeTeam:o[P.team_h]?.name||"TBD",homeShort:o[P.team_h]?.short_name||"?",awayTeam:o[P.team_a]?.name||"TBD",awayShort:o[P.team_a]?.short_name||"?",homeDifficulty:P.team_h_difficulty,awayDifficulty:P.team_a_difficulty})),picks:w(N)}))}async function Lx(){const[i,t,s]=await Promise.all([hs(),Bf(),Kr()]),{teams:r,positionMap:o,players:u,currentEvent:h}=va(i),m=t.current.filter(H=>H.event_transfers>0);if(m.length===0)return{transfers:[],teams:r};const g=h?.id||t.current[t.current.length-1]?.event||1,_=Vf(s,r,g),y=t.current.map(H=>H.event),b={},S=5;for(let H=0;H<y.length;H+=S){const X=y.slice(H,H+S),B=await Promise.all(X.map(K=>Hf(K).catch(()=>null)));X.forEach((K,te)=>{B[te]&&(b[K]=B[te])})}const w=[];for(const H of m){const X=H.event,B=y[y.indexOf(X)-1];if(!B||!b[B]||!b[X])continue;const K=new Set(b[B].picks.map(pe=>pe.element)),te=new Set(b[X].picks.map(pe=>pe.element)),Q=[...te].filter(pe=>!K.has(pe)),he=[...K].filter(pe=>!te.has(pe)),Ce=Math.min(Q.length,he.length);for(let pe=0;pe<Ce;pe++){const ue=u[Q[pe]],ie=u[he[pe]];!ue||!ie||w.push({gameweek:X,transferCost:H.event_transfers_cost,playerIn:{id:ue.id,name:ue.web_name,position:o[ue.element_type],club:r[ue.team]?.short_name||"???",clubFull:r[ue.team]?.name||"Unknown",price:ue.now_cost/10,teamId:ue.team,form:parseFloat(ue.form)||0,ictIndex:parseFloat(ue.ict_index)||0,pointsPerGame:parseFloat(ue.points_per_game)||0,chanceOfPlaying:ue.chance_of_playing_next_round,bonus:ue.bonus||0,minutes:ue.minutes||0,upcomingFixtures:(_[ue.team]||[]).slice(0,5)},playerOut:{id:ie.id,name:ie.web_name,position:o[ie.element_type],club:r[ie.team]?.short_name||"???",clubFull:r[ie.team]?.name||"Unknown",price:ie.now_cost/10,teamId:ie.team,form:parseFloat(ie.form)||0,ictIndex:parseFloat(ie.ict_index)||0,pointsPerGame:parseFloat(ie.points_per_game)||0,chanceOfPlaying:ie.chance_of_playing_next_round,bonus:ie.bonus||0,minutes:ie.minutes||0,upcomingFixtures:(_[ie.team]||[]).slice(0,5)}})}}const N=Math.max(...y),P=new Set;for(const H of w)for(let X=H.gameweek;X<=N;X++)P.add(X);const q={},Z=[...P].sort((H,X)=>H-X);for(let H=0;H<Z.length;H+=S){const X=Z.slice(H,H+S),B=await Promise.all(X.map(K=>Gf(K).catch(()=>null)));X.forEach((K,te)=>{q[K]=B[te]})}for(const H of w){let X=0,B=0;const K=[];for(let te=H.gameweek;te<=N;te++){const Q=q[te];if(!Q)continue;const he=Q.elements.find(ie=>ie.id===H.playerIn.id),Ce=Q.elements.find(ie=>ie.id===H.playerOut.id),pe=he?.stats?.total_points||0,ue=Ce?.stats?.total_points||0;X+=pe,B+=ue,K.push({gw:te,inPts:pe,outPts:ue,diff:pe-ue})}H.playerIn.pointsSinceTransfer=X,H.playerOut.pointsSinceTransfer=B,H.netGain=X-B,H.gwBreakdown=K,H.gameweeksCompared=K.length}return w.sort((H,X)=>X.gameweek-H.gameweek),{transfers:w,teams:r}}function Ux(i,t,s,r){const o=ss(i,i.upcomingFixtures,r,s),u=ss(t,t.upcomingFixtures,r,s),h=o.totalXpts,m=u.totalXpts,g=+(m-h).toFixed(1),_=(t.form||0)-(i.form||0),y=(t.price||0)-(i.price||0),b=t.xGI90||t.xGI||0,S=i.xGI90||i.xGI||0,w=b-S,N=t.upcomingFixtures?.length?t.upcomingFixtures.slice(0,s).reduce((te,Q)=>te+Q.difficulty,0)/s:3,q=(i.upcomingFixtures?.length?i.upcomingFixtures.slice(0,s).reduce((te,Q)=>te+Q.difficulty,0)/s:i.fixtureDifficulty||3)-N;let Z;Math.abs(g)<=2&&Math.abs(_)<1?Z="Low":Math.abs(g)>5||N>3.5?Z="High":Z="Medium";let H;if(g>3&&_>=0||g>3&&w>.1?H="Strong Buy":g<-2||_<-1.5?H="Avoid":H="Neutral",H==="Neutral"){const te=t.pricePressure==="rising"||t.pricePressure==="likely-rising",Q=i.pricePressure==="falling"||i.pricePressure==="likely-falling";te&&Q&&g>=0&&(H="Strong Buy")}b>0&&S>0&&(`${t.name}`,w>0,`${w.toFixed(2)}${i.name}`),t.pricePressure==="rising"||t.pricePressure==="likely-rising"?`${t.name}${(t.netTransfersEvent||0).toLocaleString()}`:(i.pricePressure==="falling"||i.pricePressure==="likely-falling")&&`${i.name}`;const X=u.topReasons,B=o.topReasons,K={"Strong Buy":`${t.name} (${m} xPts) is projected to outscore ${i.name} (${h} xPts) over ${s} GW${s>1?"s":""}. Key factors: ${X.join(", ").toLowerCase()}.`,Neutral:`Sideways move. ${t.name} (${m} xPts) vs ${i.name} (${h} xPts) over ${s} GW${s>1?"s":""}. Consider saving the transfer.`,Avoid:`${i.name} (${h} xPts) is the better option. Key: ${B.join(", ").toLowerCase()}.`};return{pointsDiff:g,formDiff:_.toFixed(1),priceDiff:y.toFixed(1),fixtureDiff:q.toFixed(1),xgiDiff:w.toFixed(2),riskLevel:Z,recommendation:H,explanation:K[H],outProjected:h,inProjected:m,outReasons:B,inReasons:X,avgInDifficulty:N.toFixed(1)}}function Qr({message:i="Loading..."}){return f.jsxs("div",{className:"loading-container",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:i})]})}function Wr({message:i,onRetry:t}){return f.jsxs("div",{className:"error-container",children:[f.jsx("div",{className:"error-icon",children:"!"}),f.jsx("p",{children:i}),t&&f.jsx("button",{className:"btn btn-primary",onClick:t,children:"Try Again"})]})}const iv={GKP:0,DEF:1,MID:2,FWD:3};function zx({player:i}){if(!i||!i.pricePressure||i.pricePressure==="stable")return null;const s={rising:{arrow:"",label:"Rising",className:"price-rising"},"likely-rising":{arrow:"",label:"Likely rising",className:"price-likely-rising"},falling:{arrow:"",label:"Falling",className:"price-falling"},"likely-falling":{arrow:"",label:"Likely falling",className:"price-likely-falling"}}[i.pricePressure];return s?f.jsx("span",{className:`price-indicator ${s.className}`,title:s.label,children:s.arrow}):null}function Px({player:i,isExpanded:t,onToggle:s}){const r=i.form>=7?"positive":i.form<=4?"negative":"",o=i.upcomingFixtures||[];return f.jsxs("div",{className:`player-card ${t?"expanded":""}`,onClick:s,children:[f.jsxs("div",{className:"player-card-header",children:[f.jsx("span",{className:`position-badge position-${i.position}`,children:i.position}),f.jsx("span",{className:"player-club",children:i.clubShort}),i.isCaptain&&f.jsx("span",{className:"badge captain",children:"C"}),i.isViceCaptain&&f.jsx("span",{className:"badge vice-captain",children:"V"})]}),f.jsx("div",{className:"player-name",children:i.name}),f.jsx("div",{className:"player-club-full",children:i.club}),f.jsxs("div",{className:"player-stats",children:[f.jsxs("div",{className:"stat",children:[f.jsx("span",{className:"stat-label",children:"Price"}),f.jsxs("span",{className:"stat-value",children:["",i.price,"m",f.jsx(zx,{player:i})]})]}),f.jsxs("div",{className:"stat",children:[f.jsx("span",{className:"stat-label",children:"Points"}),f.jsx("span",{className:"stat-value",children:i.totalPoints})]}),f.jsxs("div",{className:"stat",children:[f.jsx("span",{className:"stat-label",children:"Form"}),f.jsx("span",{className:`stat-value ${r}`,children:i.form})]}),f.jsxs("div",{className:"stat",children:[f.jsx("span",{className:"stat-label",children:"GW Pts"}),f.jsx("span",{className:"stat-value highlight",children:i.gameweekPoints})]})]}),f.jsxs("div",{className:"player-fixture",children:[f.jsx("span",{className:"fixture-label",children:"Next:"}),f.jsx("span",{className:`fixture-value fdr-${i.fixtureDifficulty}`,children:i.upcomingFixture}),f.jsx("span",{className:`expand-arrow ${t?"open":""}`,children:f.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),t&&f.jsxs("div",{className:"player-expanded",onClick:u=>u.stopPropagation(),children:[o.length>0&&f.jsxs("div",{className:"expanded-fixtures",children:[f.jsx("div",{className:"expanded-section-title",children:"Upcoming Fixtures"}),f.jsx("div",{className:"expanded-fixture-list",children:o.map(u=>f.jsxs("div",{className:"expanded-fixture-row",children:[f.jsxs("span",{className:"ef-gw",children:["GW",u.gw]}),f.jsx("span",{className:`ef-opponent fdr-${u.difficulty}`,children:u.opponent}),f.jsx("span",{className:"ef-diff-dots",children:[1,2,3,4,5].map(h=>f.jsx("span",{className:`ef-dot ${h<=u.difficulty?"filled":""}`},h))})]},u.gw))})]}),f.jsxs("div",{className:"expanded-stats",children:[f.jsx("div",{className:"expanded-section-title",children:"Season Stats"}),f.jsxs("div",{className:"expanded-stats-grid",children:[f.jsxs("div",{className:"es-item",children:[f.jsx("span",{className:"es-value",children:i.totalPoints}),f.jsx("span",{className:"es-label",children:"Total Pts"})]}),f.jsxs("div",{className:"es-item",children:[f.jsx("span",{className:"es-value",children:i.gameweekPoints}),f.jsx("span",{className:"es-label",children:"GW Pts"})]}),f.jsxs("div",{className:"es-item",children:[f.jsx("span",{className:`es-value ${r}`,children:i.form}),f.jsx("span",{className:"es-label",children:"Form"})]}),f.jsxs("div",{className:"es-item",children:[f.jsxs("span",{className:"es-value",children:["",i.price,"m"]}),f.jsx("span",{className:"es-label",children:"Price"})]})]})]}),(i.costChangeEvent!==void 0&&i.costChangeEvent!==0||i.pricePressure&&i.pricePressure!=="stable")&&f.jsxs("div",{className:"expanded-price-info",children:[f.jsx("div",{className:"expanded-section-title",children:"Price Movement"}),f.jsxs("div",{className:"expanded-stats-grid",children:[f.jsxs("div",{className:"es-item",children:[f.jsxs("span",{className:`es-value ${i.costChangeStart>0?"positive":i.costChangeStart<0?"negative":""}`,children:[i.costChangeStart>0?"+":"",(i.costChangeStart||0).toFixed(1)]}),f.jsx("span",{className:"es-label",children:"Season"})]}),f.jsxs("div",{className:"es-item",children:[f.jsxs("span",{className:`es-value ${i.costChangeEvent>0?"positive":i.costChangeEvent<0?"negative":""}`,children:[i.costChangeEvent>0?"+":"",(i.costChangeEvent||0).toFixed(1)]}),f.jsx("span",{className:"es-label",children:"This GW"})]}),f.jsxs("div",{className:"es-item",children:[f.jsxs("span",{className:"es-value",children:[((i.netTransfersEvent||0)/1e3).toFixed(0),"k"]}),f.jsx("span",{className:"es-label",children:"Net Xfers"})]}),f.jsxs("div",{className:"es-item",children:[f.jsxs("span",{className:"es-value",children:["",(i.startPrice||i.price).toFixed(1),"m"]}),f.jsx("span",{className:"es-label",children:"Start Price"})]})]})]})]})]})}function Bx({summary:i}){return f.jsxs("div",{className:"team-summary",children:[f.jsxs("h3",{children:["Team Summary  GW",i.currentGameweek]}),f.jsxs("div",{className:"summary-grid",children:[f.jsxs("div",{className:"summary-item featured",children:[f.jsx("span",{className:"summary-value",children:i.gameweekPoints}),f.jsx("span",{className:"summary-label",children:"GW Points"})]}),f.jsxs("div",{className:"summary-item",children:[f.jsx("span",{className:"summary-value",children:i.totalPoints}),f.jsx("span",{className:"summary-label",children:"Total Points"})]}),f.jsxs("div",{className:"summary-item",children:[f.jsxs("span",{className:"summary-value",children:["",i.teamValue,"m"]}),f.jsx("span",{className:"summary-label",children:"Team Value"})]}),f.jsxs("div",{className:"summary-item",children:[f.jsxs("span",{className:"summary-value",children:["",i.moneyInBank,"m"]}),f.jsx("span",{className:"summary-label",children:"In Bank"})]}),f.jsxs("div",{className:"summary-item",children:[f.jsx("span",{className:"summary-value",children:i.overallRank.toLocaleString()}),f.jsx("span",{className:"summary-label",children:"Overall Rank"})]}),f.jsxs("div",{className:"summary-item",children:[f.jsx("span",{className:"summary-value",children:i.transfers.available}),f.jsx("span",{className:"summary-label",children:"Free Transfers"})]})]}),f.jsxs("div",{className:"chips-section",children:[f.jsx("span",{className:"chips-label",children:"Chips Available:"}),f.jsxs("div",{className:"chips-list",children:[i.chips.wildcard&&f.jsx("span",{className:"chip available",children:"Wildcard"}),i.chips.benchBoost&&f.jsx("span",{className:"chip available",children:"Bench Boost"}),i.chips.tripleCaptain&&f.jsx("span",{className:"chip available",children:"Triple Captain"}),i.chips.freeHit&&f.jsx("span",{className:"chip available",children:"Free Hit"}),!i.chips.tripleCaptain&&f.jsx("span",{className:"chip used",children:"Triple Captain"})]})]})]})}function Hx({teamData:i,teamLoading:t,teamError:s,teamReload:r}){const[o,u]=ee.useState(null);if(t)return f.jsx(Qr,{message:"Loading your team..."});if(s)return f.jsx(Wr,{message:s,onRetry:r});const{players:h,summary:m}=i,g=[...h].sort((_,y)=>iv[_.position]-iv[y.position]);return f.jsxs("div",{className:"my-team",children:[f.jsx(Bx,{summary:m}),f.jsxs("div",{className:"players-section",children:[f.jsx("h3",{children:"Your Squad"}),f.jsx("div",{className:"players-grid",children:g.map(_=>f.jsx(Px,{player:_,isExpanded:o===_.id,onToggle:()=>u(o===_.id?null:_.id)},_.id))})]})]})}function Gx({data:i,maxValue:t,labelKey:s,valueKey:r,compareKey:o}){return f.jsx("div",{className:"bar-chart",children:i.map((u,h)=>f.jsxs("div",{className:"bar-group",children:[f.jsxs("div",{className:"bar-container",children:[o&&f.jsx("div",{className:"bar bar-compare",style:{height:`${u[o]/t*100}%`},title:`Avg: ${u[o]}`}),f.jsx("div",{className:"bar bar-primary",style:{height:`${u[r]/t*100}%`},title:`${u[r]} pts`,children:f.jsx("span",{className:"bar-value",children:u[r]})})]}),f.jsx("span",{className:"bar-label",children:u[s]})]},h))})}function Fx({projections:i}){return f.jsxs("div",{className:"projections-table",children:[f.jsxs("div",{className:"table-header",children:[f.jsx("span",{children:"GW"}),f.jsx("span",{children:"Projected"}),f.jsx("span",{children:"Difficulty"})]}),i.map(t=>f.jsxs("div",{className:"table-row",children:[f.jsxs("span",{children:["GW",t.gw]}),f.jsx("span",{className:"projected-value",children:t.projected}),f.jsx("span",{className:`difficulty difficulty-${t.difficulty.toLowerCase()}`,children:t.difficulty})]},t.gw))]})}function qx({league:i}){return f.jsxs("div",{className:"league-standings",children:[f.jsxs("div",{className:"table-header league-header",children:[f.jsx("span",{children:"#"}),f.jsx("span",{children:"Team"}),f.jsx("span",{children:"Pts"})]}),i.standings.map(t=>f.jsxs("div",{className:`table-row league-row ${t.manager==="You"?"my-row":""}`,children:[f.jsx("span",{className:"rank",children:t.rank}),f.jsxs("span",{className:"team-name",children:[t.name,f.jsx("small",{children:t.manager})]}),f.jsx("span",{className:"league-points",children:t.points})]},t.rank))]})}function Vx({teamData:i,teamLoading:t,teamError:s,teamReload:r}){const{data:o,loading:u,error:h,reload:m}=es(Ox),{data:g,loading:_,error:y}=es(Dx),{data:b,loading:S,error:w}=es(Mx),N=u||_||t||S,P=h||y||s||w;if(N)return f.jsx(Qr,{message:"Loading performance data..."});if(P)return f.jsx(Wr,{message:P,onRetry:m});const{summary:q}=i,Z=Math.max(...o.map(K=>Math.max(K.points,K.average)))+10,H=o.reduce((K,te)=>K+te.points,0),X=o.reduce((K,te)=>K+te.average,0),B=H-X;return f.jsxs("div",{className:"points-performance",children:[f.jsxs("div",{className:"metrics-row",children:[f.jsxs("div",{className:"metric-card featured",children:[f.jsx("span",{className:"metric-value",children:q.gameweekPoints}),f.jsxs("span",{className:"metric-label",children:["GW",q.currentGameweek," Points"]})]}),f.jsxs("div",{className:"metric-card",children:[f.jsx("span",{className:"metric-value",children:q.totalPoints}),f.jsx("span",{className:"metric-label",children:"Total Points"})]}),f.jsxs("div",{className:"metric-card",children:[f.jsx("span",{className:"metric-value",children:q.captainPoints}),f.jsx("span",{className:"metric-label",children:"Captain Bonus"})]}),f.jsxs("div",{className:"metric-card",children:[f.jsxs("span",{className:`metric-value ${B>0?"positive":"negative"}`,children:[B>0?"+":"",B]}),f.jsx("span",{className:"metric-label",children:"vs League Avg"})]})]}),f.jsxs("div",{className:"panels-grid",children:[f.jsxs("div",{className:"panel",children:[f.jsx("h3",{children:"Gameweek Trend"}),f.jsxs("div",{className:"chart-legend",children:[f.jsxs("span",{className:"legend-item",children:[f.jsx("span",{className:"legend-dot primary"})," You"]}),f.jsxs("span",{className:"legend-item",children:[f.jsx("span",{className:"legend-dot compare"})," Average"]})]}),f.jsx(Gx,{data:o,maxValue:Z,labelKey:"gw",valueKey:"points",compareKey:"average"})]}),f.jsxs("div",{className:"panel",children:[f.jsx("h3",{children:"Upcoming Projections"}),f.jsx(Fx,{projections:g})]}),f.jsxs("div",{className:"panel",children:[f.jsx("h3",{children:b.name}),f.jsx(qx,{league:b})]}),f.jsxs("div",{className:"panel",children:[f.jsx("h3",{children:"Rank Progression"}),f.jsx("div",{className:"rank-trend",children:o.map((K,te)=>{const he=(te>0?o[te-1].rank:K.rank)-K.rank;return f.jsxs("div",{className:"rank-item",children:[f.jsxs("span",{className:"rank-gw",children:["GW",K.gw]}),f.jsx("span",{className:"rank-number",children:K.rank.toLocaleString()}),f.jsx("span",{className:`rank-change ${he>0?"positive":he<0?"negative":""}`,children:he>0?`+${he.toLocaleString()}`:he<0?he.toLocaleString():"-"})]},K.gw)})})]})]})]})}const Yx=["All","GKP","DEF","MID","FWD"],Xx=[{value:"xpts",label:"xPts"},{value:"form",label:"Form"},{value:"totalPoints",label:"Total Pts"},{value:"price-asc",label:"Price (low)"},{value:"price-desc",label:"Price (high)"},{value:"selectedByPercent",label:"Ownership %"},{value:"netTransfersEvent",label:"Transfer Activity"}];function sv({label:i,players:t,selected:s,onChange:r,disabledId:o}){return f.jsxs("div",{className:"selector",children:[f.jsx("label",{children:i}),f.jsxs("select",{value:s||"",onChange:u=>r(Number(u.target.value)||null),children:[f.jsx("option",{value:"",children:"Select a player..."}),t.filter(u=>u.id!==o).map(u=>f.jsxs("option",{value:u.id,children:[u.name," (",u.position,") - ",u.clubShort," - ",u.price,"m"]},u.id))]})]})}function Kx({player:i}){const t=i?.pricePressure;if(!t||t==="stable")return f.jsxs("span",{children:["",i.price,"m"]});const s=t.includes("rising"),r=s?"":"",o=s?"positive":"negative";return f.jsxs("span",{children:["",i.price,"m ",f.jsx("span",{className:o,style:{fontSize:"0.65rem"},children:r})]})}function av({player:i,label:t,teams:s}){const r=ee.useMemo(()=>i?ss(i,i.upcomingFixtures,s,3):null,[i,s]);if(!i)return null;const o=i.upcomingFixtures?.[0];return f.jsxs("div",{className:"player-stat-card",children:[f.jsxs("div",{className:"stat-card-header",children:[f.jsx("span",{className:"stat-card-label",children:t}),f.jsx("span",{className:`position-badge position-${i.position}`,children:i.position})]}),f.jsx("div",{className:"stat-card-name",children:i.name}),f.jsx("div",{className:"stat-card-club",children:i.club}),f.jsxs("div",{className:"stat-card-stats",children:[f.jsxs("div",{className:"stat-card-item",children:[f.jsx("span",{className:"sc-value",children:i.totalPoints}),f.jsx("span",{className:"sc-label",children:"Pts"})]}),f.jsxs("div",{className:"stat-card-item",children:[f.jsx("span",{className:"sc-value",children:i.form}),f.jsx("span",{className:"sc-label",children:"Form"})]}),f.jsxs("div",{className:"stat-card-item",children:[f.jsx("span",{className:"sc-value",children:f.jsx(Kx,{player:i})}),f.jsx("span",{className:"sc-label",children:"Price"})]}),f.jsxs("div",{className:"stat-card-item",children:[r?f.jsx("span",{className:"sc-value trade-xpts-value",children:r.avgXpts}):f.jsx("span",{className:"sc-value",children:"-"}),f.jsx("span",{className:"sc-label",children:"xPts"})]}),f.jsxs("div",{className:"stat-card-item",children:[o?f.jsx("span",{className:`sc-value fixture-badge fdr-${o.difficulty}`,children:o.opponent}):f.jsx("span",{className:"sc-value",children:"-"}),f.jsx("span",{className:"sc-label",children:"Next"})]})]}),r?.topReasons?.length>0&&f.jsx("div",{className:"trade-xpts-reasons",children:r.topReasons.map((u,h)=>f.jsx("span",{className:"trade-reason-chip",children:u},h))})]})}function Qx({playerOut:i,playerIn:t,gameweeks:s}){const r=i.upcomingFixtures?.slice(0,s)||[],o=t.upcomingFixtures?.slice(0,s)||[],u=[...new Set([...r.map(g=>g.gw),...o.map(g=>g.gw)])].sort((g,_)=>g-_),h=Object.fromEntries(r.map(g=>[g.gw,g])),m=Object.fromEntries(o.map(g=>[g.gw,g]));return f.jsxs("div",{className:"fixture-comparison",children:[f.jsx("h4",{children:"Fixture Comparison"}),f.jsxs("div",{className:"fixture-table",children:[f.jsxs("div",{className:"fixture-row header three-col",children:[f.jsx("span",{children:i.name}),f.jsx("span",{children:"GW"}),f.jsx("span",{children:t.name})]}),u.map(g=>{const _=h[g],y=m[g];return f.jsxs("div",{className:"fixture-row three-col",children:[f.jsx("span",{className:_?`fixture-badge fdr-${_.difficulty}`:"fixture-blank",children:_?_.opponent:"-"}),f.jsxs("span",{className:"fixture-gw",children:["GW",g]}),f.jsx("span",{className:y?`fixture-badge fdr-${y.difficulty}`:"fixture-blank",children:y?y.opponent:"-"})]},g)})]})]})}function Wx({result:i,playerOut:t,playerIn:s}){const r=i.recommendation==="Strong Buy"?"strong-buy":i.recommendation==="Avoid"?"avoid":"neutral";return f.jsxs("div",{className:"trade-result",children:[f.jsx("div",{className:`recommendation-badge ${r}`,children:i.recommendation}),f.jsxs("div",{className:"result-metrics",children:[f.jsxs("div",{className:"result-metric",children:[f.jsx("span",{className:"result-label",children:"Projected xPts Diff"}),f.jsxs("span",{className:`result-value ${i.pointsDiff>0?"positive":i.pointsDiff<0?"negative":""}`,children:[i.pointsDiff>0?"+":"",i.pointsDiff]})]}),f.jsxs("div",{className:"result-metric",children:[f.jsx("span",{className:"result-label",children:"Form Comparison"}),f.jsxs("span",{className:`result-value ${Number(i.formDiff)>0?"positive":Number(i.formDiff)<0?"negative":""}`,children:[Number(i.formDiff)>0?"+":"",i.formDiff]})]}),f.jsxs("div",{className:"result-metric",children:[f.jsx("span",{className:"result-label",children:"Price Impact"}),f.jsxs("span",{className:`result-value ${Number(i.priceDiff)<0?"positive":Number(i.priceDiff)>0?"negative":""}`,children:[Number(i.priceDiff)>0?"+":"","",i.priceDiff,"m"]})]}),f.jsxs("div",{className:"result-metric",children:[f.jsx("span",{className:"result-label",children:"Fixture Swing"}),f.jsxs("span",{className:`result-value ${Number(i.fixtureDiff)>0?"positive":Number(i.fixtureDiff)<0?"negative":""}`,children:[Number(i.fixtureDiff)>0?"+":"",i.fixtureDiff]})]}),f.jsxs("div",{className:"result-metric",children:[f.jsx("span",{className:"result-label",children:"Risk Rating"}),f.jsx("span",{className:`risk-badge risk-${i.riskLevel.toLowerCase()}`,children:i.riskLevel})]})]}),(s.pricePressure==="rising"||s.pricePressure==="likely-rising")&&f.jsxs("div",{className:"urgency-alert urgency-rising",children:[f.jsx("span",{className:"urgency-icon",children:""}),f.jsxs("span",{className:"urgency-text",children:[s.name," has ",(s.netTransfersEvent||0).toLocaleString()," net transfers in this GW",s.pricePressure==="rising"?"  price rise imminent, act now!":"  trending toward a price rise."]})]}),(t.pricePressure==="falling"||t.pricePressure==="likely-falling")&&f.jsxs("div",{className:"urgency-alert urgency-falling",children:[f.jsx("span",{className:"urgency-icon",children:""}),f.jsxs("span",{className:"urgency-text",children:[t.name," is losing ",Math.abs(t.netTransfersEvent||0).toLocaleString()," net transfers",t.pricePressure==="falling"?"  price drop imminent, sell before value loss!":"  trending toward a price drop."]})]}),f.jsxs("div",{className:"points-projection",children:[f.jsxs("div",{className:"projection-bar",children:[f.jsx("span",{className:"proj-label",children:t.name}),f.jsx("div",{className:"proj-track",children:f.jsxs("div",{className:"proj-fill out",style:{width:`${i.outProjected/Math.max(i.outProjected,i.inProjected)*100}%`},children:[i.outProjected," xPts"]})})]}),f.jsxs("div",{className:"projection-bar",children:[f.jsx("span",{className:"proj-label",children:s.name}),f.jsx("div",{className:"proj-track",children:f.jsxs("div",{className:"proj-fill in",style:{width:`${i.inProjected/Math.max(i.outProjected,i.inProjected)*100}%`},children:[i.inProjected," xPts"]})})]})]}),(i.inReasons?.length>0||i.outReasons?.length>0)&&f.jsxs("div",{className:"trade-reasons-section",children:[i.inReasons?.length>0&&f.jsxs("div",{className:"trade-reasons-group",children:[f.jsx("span",{className:"trade-reasons-label",children:s.name}),f.jsx("div",{className:"trade-reasons-chips",children:i.inReasons.map((o,u)=>f.jsx("span",{className:"trade-reason-chip positive",children:o},u))})]}),i.outReasons?.length>0&&f.jsxs("div",{className:"trade-reasons-group",children:[f.jsx("span",{className:"trade-reasons-label",children:t.name}),f.jsx("div",{className:"trade-reasons-chips",children:i.outReasons.map((o,u)=>f.jsx("span",{className:"trade-reason-chip",children:o},u))})]})]}),f.jsxs("div",{className:"ai-explanation",children:[f.jsx("div",{className:"explanation-header",children:"Analysis"}),f.jsx("p",{children:i.explanation})]})]})}function $x({picks:i,onSelect:t}){return!i||i.length===0?null:f.jsxs("div",{className:"trade-top-picks",children:[f.jsx("h4",{children:"Top Picks by xPts"}),f.jsx("div",{className:"top-picks-grid",children:i.map(s=>f.jsxs("button",{className:"top-pick-card",onClick:()=>t(s.id),children:[f.jsxs("div",{className:"top-pick-header",children:[f.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),f.jsxs("span",{className:"top-pick-xpts",children:[s.xpts," xPts"]})]}),f.jsx("div",{className:"top-pick-name",children:s.name}),f.jsxs("div",{className:"top-pick-meta",children:[s.clubShort,"  ",s.price,"m  ",s.form," form"]}),s.topReasons?.length>0&&f.jsx("div",{className:"top-pick-reasons",children:s.topReasons.slice(0,2).map((r,o)=>f.jsx("span",{className:"trade-reason-chip small",children:r},o))})]},s.id))})]})}function Zx({teamData:i,teamLoading:t,teamError:s,teamReload:r}){const[o,u]=ee.useState(null),[h,m]=ee.useState(null),[g,_]=ee.useState(3),[y,b]=ee.useState("All"),[S,w]=ee.useState(""),[N,P]=ee.useState("xpts"),{data:q,loading:Z,error:H}=es(Ix),X=t||Z,B=s||H,K=ee.useMemo(()=>q?.candidates||[],[q]),te=ee.useMemo(()=>q?.teams||i?.teams||{},[q,i]),Q=ee.useMemo(()=>i?.players.find(se=>se.id===o),[i,o]),he=ee.useMemo(()=>{if(!K.length)return[];let se=K;if(y!=="All"&&(se=se.filter(F=>F.position===y)),S){const F=parseFloat(S);isNaN(F)||(se=se.filter(j=>j.price<=F))}const L=[...se];switch(N){case"xpts":return nv(L,te,g);case"form":L.sort((F,j)=>j.form-F.form);break;case"totalPoints":L.sort((F,j)=>j.totalPoints-F.totalPoints);break;case"price-asc":L.sort((F,j)=>F.price-j.price);break;case"price-desc":L.sort((F,j)=>j.price-F.price);break;case"selectedByPercent":L.sort((F,j)=>j.selectedByPercent-F.selectedByPercent);break;case"netTransfersEvent":L.sort((F,j)=>(j.netTransfersEvent||0)-(F.netTransfersEvent||0));break}return L},[K,y,S,N,te,g]),Ce=ee.useMemo(()=>K.find(se=>se.id===h),[K,h]),pe=ee.useMemo(()=>!Q||!Ce?null:Ux(Q,Ce,g,te),[Q,Ce,g,te]),ue=ee.useMemo(()=>{if(!K.length)return[];let se=K;return y!=="All"&&(se=se.filter(L=>L.position===y)),nv(se,te,g).slice(0,3)},[K,y,te,g]);function ie(se){if(u(se),se&&i){const L=i.players.find(F=>F.id===se);L&&b(L.position)}}return X?f.jsx(Qr,{message:"Loading trade data..."}):B?f.jsx(Wr,{message:B,onRetry:r}):f.jsxs("div",{className:"trade-analyzer",children:[f.jsxs("div",{className:"trade-controls",children:[f.jsxs("div",{className:"controls-card",children:[f.jsx("h3",{children:"Transfer Setup"}),f.jsx(sv,{label:"Transfer Out",players:i.players,selected:o,onChange:ie}),f.jsxs("div",{className:"filter-bar",children:[f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Position"}),f.jsx("div",{className:"filter-buttons",children:Yx.map(se=>f.jsx("button",{className:`filter-btn ${y===se?"active":""}`,onClick:()=>b(se),children:se},se))})]}),f.jsxs("div",{className:"filter-row",children:[f.jsxs("div",{className:"filter-group filter-group-sm",children:[f.jsx("label",{children:"Max Price"}),f.jsx("input",{type:"number",className:"filter-input",placeholder:"e.g. 8.0",step:"0.5",min:"3.5",max:"15",value:S,onChange:se=>w(se.target.value)})]}),f.jsxs("div",{className:"filter-group filter-group-sm",children:[f.jsx("label",{children:"Sort By"}),f.jsx("select",{className:"filter-select",value:N,onChange:se=>P(se.target.value),children:Xx.map(se=>f.jsx("option",{value:se.value,children:se.label},se.value))})]})]})]}),f.jsx(sv,{label:`Transfer In (${he.length} players)`,players:he,selected:h,onChange:m}),f.jsxs("div",{className:"gameweeks-selector",children:[f.jsx("label",{children:"Gameweeks to Analyze"}),f.jsx("div",{className:"gw-buttons",children:[1,2,3,4,5].map(se=>f.jsx("button",{className:`gw-btn ${g===se?"active":""}`,onClick:()=>_(se),children:se},se))})]})]}),f.jsx("div",{className:"stat-cards-column",children:Q||Ce?f.jsxs(f.Fragment,{children:[f.jsx(av,{player:Q,label:"OUT",teams:te}),Q&&Ce&&f.jsx("div",{className:"versus-icon",children:"vs"}),f.jsx(av,{player:Ce,label:"IN",teams:te})]}):f.jsxs("div",{className:"versus-card",children:[f.jsx("div",{className:"placeholder-icon",children:""}),f.jsx("p",{className:"versus-detail",children:"Select players to compare stats"})]})})]}),pe&&f.jsxs("div",{className:"trade-results",children:[f.jsx(Wx,{result:pe,playerOut:Q,playerIn:Ce}),f.jsx(Qx,{playerOut:Q,playerIn:Ce,gameweeks:g})]}),!o&&!h&&f.jsxs(f.Fragment,{children:[f.jsx($x,{picks:ue,onSelect:m}),f.jsxs("div",{className:"trade-placeholder",children:[f.jsx("div",{className:"placeholder-icon",children:""}),f.jsx("p",{children:"Select players above to analyze a potential transfer"})]})]})]})}function Jx(i){return i?new Date(i).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""}function e1(i){return i?new Date(i).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"TBD"}function t1({match:i}){return f.jsxs("div",{className:"match-row",children:[f.jsxs("div",{className:"match-team home",children:[f.jsx("span",{className:"team-full",children:i.homeTeam}),f.jsx("span",{className:"team-short",children:i.homeShort}),f.jsx("span",{className:`fdr-badge fdr-${i.homeDifficulty}`,children:i.homeDifficulty})]}),f.jsx("div",{className:"match-vs",children:"vs"}),f.jsxs("div",{className:"match-team away",children:[f.jsx("span",{className:`fdr-badge fdr-${i.awayDifficulty}`,children:i.awayDifficulty}),f.jsx("span",{className:"team-full",children:i.awayTeam}),f.jsx("span",{className:"team-short",children:i.awayShort})]}),f.jsx("div",{className:"match-kickoff",children:e1(i.kickoff)})]})}function n1({pick:i}){return f.jsxs("div",{className:"pick-card",children:[f.jsxs("div",{className:"pick-top",children:[f.jsx("span",{className:`pick-pos position-badge position-${i.position}`,children:i.position}),f.jsxs("span",{className:"pick-price",children:["",i.price,"m"]})]}),f.jsx("div",{className:"pick-name",children:i.name}),f.jsx("div",{className:"pick-club",children:i.club}),f.jsxs("div",{className:"pick-details",children:[f.jsxs("div",{className:"pick-stat",children:[f.jsx("span",{className:"pick-stat-value",children:i.form}),f.jsx("span",{className:"pick-stat-label",children:"Form"})]}),f.jsxs("div",{className:"pick-stat",children:[f.jsx("span",{className:"pick-stat-value",children:i.totalPoints}),f.jsx("span",{className:"pick-stat-label",children:"Pts"})]}),f.jsxs("div",{className:"pick-stat",children:[f.jsx("span",{className:`pick-stat-value fixture-badge fdr-${i.difficulty}`,children:i.opponent}),f.jsx("span",{className:"pick-stat-label",children:"Fix"})]})]})]})}function i1({picks:i}){return!i||i.length===0?null:f.jsxs("div",{className:"picks-section",children:[f.jsxs("div",{className:"picks-header",children:[f.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),f.jsx("span",{children:"Recommended Picks"})]}),f.jsx("div",{className:"picks-grid",children:i.map(t=>f.jsx(n1,{pick:t},t.id))})]})}function s1({gw:i,isActive:t,onToggle:s}){return f.jsxs("div",{className:`gw-card ${t?"expanded":""}`,children:[f.jsxs("button",{className:"gw-card-header",onClick:s,children:[f.jsxs("div",{className:"gw-title",children:[f.jsxs("span",{className:"gw-number",children:["GW",i.gw]}),f.jsxs("span",{className:"gw-match-count",children:[i.matches.length," match",i.matches.length!==1?"es":""]})]}),f.jsxs("div",{className:"gw-meta",children:[i.deadline&&f.jsxs("span",{className:"gw-deadline",children:["Deadline: ",Jx(i.deadline)]}),f.jsx("span",{className:`gw-chevron ${t?"open":""}`,children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})]}),t&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"gw-matches",children:i.matches.map(r=>f.jsx(t1,{match:r},r.id))}),f.jsx(i1,{picks:i.picks})]})]})}function a1(){const{data:i,loading:t,error:s,reload:r}=es(kx),[o,u]=ee.useState(null);if(t)return f.jsx(Qr,{message:"Loading fixtures..."});if(s)return f.jsx(Wr,{message:s,onRetry:r});const h=o??i[0]?.gw;return f.jsxs("div",{className:"fixtures",children:[f.jsxs("div",{className:"fixtures-header",children:[f.jsx("h3",{children:"Upcoming Fixtures"}),f.jsxs("div",{className:"fdr-legend",children:[f.jsx("span",{className:"legend-label",children:"FDR:"}),[1,2,3,4,5].map(m=>f.jsx("span",{className:`fdr-badge fdr-${m}`,children:m},m))]})]}),f.jsx("div",{className:"gw-list",children:i.map(m=>f.jsx(s1,{gw:m,isActive:h===m.gw,onToggle:()=>u(h===m.gw?null:m.gw)},m.gw))})]})}function r1(i){const t={DEF:0,MID:0,FWD:0};for(const s of i)t[s.position]!==void 0&&t[s.position]++;return`${t.DEF}-${t.MID}-${t.FWD}`}function Ey(i){const t={GKP:[],DEF:[],MID:[],FWD:[]};for(const s of i)t[s.position]?.push(s);return t}const xy=[[3,4,3],[3,5,2],[4,3,3],[4,4,2],[4,5,1],[5,3,2],[5,4,1]];function l1(i,t){const{ranked:s}=yy(i,t),r=Ey(s);for(const g of Object.keys(r))r[g].sort((_,y)=>(y.xpts||0)-(_.xpts||0));let o=null,u=-1/0,h=null,m=null;for(const[g,_,y]of xy){if(r.GKP.length<1||r.DEF.length<g||r.MID.length<_||r.FWD.length<y)continue;const b=[r.GKP[0],...r.DEF.slice(0,g),...r.MID.slice(0,_),...r.FWD.slice(0,y)],S=new Set(b.map(P=>P.id)),w=i.filter(P=>!S.has(P.id)),N=b.reduce((P,q)=>P+(q.xpts||0),0);N>u&&(u=N,o=`${g}-${_}-${y}`,h=b,m=w)}return{formation:o,xi:h,bench:m,score:u}}function o1({fixtures:i}){return!i||i.length===0?null:f.jsx("div",{className:"formation-fdr-dots",children:i.slice(0,3).map((t,s)=>f.jsx("span",{className:`formation-fdr-dot fdr-dot-${t.difficulty}`,title:`GW${t.gw}: ${t.opponent} (FDR ${t.difficulty})`},s))})}function c1(i){const t={DEF:0,MID:0,FWD:0,GKP:0};for(const r of i)t[r.position]!==void 0&&t[r.position]++;return t.GKP!==1?{valid:!1,reason:"Must have exactly 1 goalkeeper in the XI"}:xy.some(([r,o,u])=>t.DEF===r&&t.MID===o&&t.FWD===u)?{valid:!0}:{valid:!1,reason:`${t.DEF}-${t.MID}-${t.FWD} is not a valid formation`}}function u1({player:i,isSelected:t,isCompareSelected:s,isSwapSource:r,onSelect:o,compareMode:u,isSuggested:h,xpts:m}){const g=()=>o(i),_=["pitch-player",t?"selected":"",s?"compare-selected":"",r?"swap-source":"",h?"suggested-glow":""].filter(Boolean).join(" ");return f.jsxs("div",{className:_,onClick:g,children:[f.jsxs("div",{className:`pitch-shirt position-shirt-${i.position}`,children:[i.isCaptain&&f.jsx("span",{className:"pitch-armband",children:"C"}),i.isViceCaptain&&f.jsx("span",{className:"pitch-armband vc",children:"V"}),u&&s&&f.jsx("span",{className:"pitch-compare-badge",children:"VS"}),m!=null&&f.jsx("span",{className:"pitch-xpts-badge",title:`xPts: ${m}`,children:m})]}),f.jsx("div",{className:"pitch-player-name",children:i.name}),f.jsxs("div",{className:"pitch-player-pts",children:[i.gameweekPoints," pts"]}),f.jsx(o1,{fixtures:i.upcomingFixtures})]})}function d1({player:i,xptsData:t,onClose:s}){if(!i)return null;const r=i.form>=7?"positive":i.form<=4?"negative":"";return f.jsxs("div",{className:"formation-detail",children:[f.jsxs("div",{className:"formation-detail-header",children:[f.jsxs("div",{children:[f.jsx("span",{className:`position-badge position-${i.position}`,children:i.position}),f.jsx("span",{className:"detail-player-name",children:i.name}),i.isCaptain&&f.jsx("span",{className:"badge captain",children:"C"}),i.isViceCaptain&&f.jsx("span",{className:"badge vice-captain",children:"V"})]}),f.jsx("button",{className:"detail-close",onClick:s,children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),f.jsx("div",{className:"detail-club",children:i.club}),f.jsxs("div",{className:"detail-stats-grid",children:[f.jsxs("div",{className:"detail-stat",children:[f.jsx("span",{className:"detail-stat-value highlight",children:i.gameweekPoints}),f.jsx("span",{className:"detail-stat-label",children:"GW Pts"})]}),f.jsxs("div",{className:"detail-stat",children:[f.jsx("span",{className:"detail-stat-value",children:i.totalPoints}),f.jsx("span",{className:"detail-stat-label",children:"Total"})]}),f.jsxs("div",{className:"detail-stat",children:[f.jsx("span",{className:`detail-stat-value ${r}`,children:i.form}),f.jsx("span",{className:"detail-stat-label",children:"Form"})]}),f.jsxs("div",{className:"detail-stat",children:[f.jsxs("span",{className:"detail-stat-value",children:["",i.price,"m"]}),f.jsx("span",{className:"detail-stat-label",children:"Price"})]}),t&&f.jsxs("div",{className:"detail-stat",children:[f.jsx("span",{className:"detail-stat-value highlight",children:t.xpts}),f.jsx("span",{className:"detail-stat-label",children:"xPts"})]})]}),t?.topReasons?.length>0&&f.jsx("div",{className:"detail-xpts-reasons",children:t.topReasons.map((o,u)=>f.jsx("span",{className:"xpts-reason-chip",children:o},u))}),i.upcomingFixtures?.length>0&&f.jsxs("div",{className:"detail-fixtures",children:[f.jsx("div",{className:"detail-fixtures-label",children:"Upcoming"}),f.jsx("div",{className:"detail-fixture-chips",children:i.upcomingFixtures.slice(0,5).map(o=>f.jsx("span",{className:`detail-fixture-chip fdr-${o.difficulty}`,children:o.opponent},o.gw))})]})]})}function f1({players:i,onClose:t}){if(i.length<2)return null;const[s,r]=i,o=[{label:"GW Pts",valA:s.gameweekPoints,valB:r.gameweekPoints},{label:"Total",valA:s.totalPoints,valB:r.totalPoints},{label:"Form",valA:s.form,valB:r.form},{label:"Price",valA:`${s.price}m`,valB:`${r.price}m`,isText:!0}],u=h=>{const m=h.upcomingFixtures||[];return m.length===0?3:(m.slice(0,3).reduce((g,_)=>g+_.difficulty,0)/Math.min(m.length,3)).toFixed(1)};return o.push({label:"Avg FDR",valA:u(s),valB:u(r),lowerBetter:!0}),f.jsxs("div",{className:"formation-compare",children:[f.jsxs("div",{className:"compare-header",children:[f.jsx("h4",{children:"Player Comparison"}),f.jsx("button",{className:"detail-close",onClick:t,children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),f.jsxs("div",{className:"compare-names",children:[f.jsxs("div",{className:"compare-player-label",children:[f.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),f.jsx("span",{children:s.name})]}),f.jsx("span",{className:"compare-vs",children:"VS"}),f.jsxs("div",{className:"compare-player-label",children:[f.jsx("span",{className:`position-badge position-${r.position}`,children:r.position}),f.jsx("span",{children:r.name})]})]}),f.jsx("div",{className:"compare-table",children:o.map(h=>{const m=parseFloat(h.valA),g=parseFloat(h.valB);let _="",y="";return!h.isText&&!isNaN(m)&&!isNaN(g)&&(h.lowerBetter?m<g?_="compare-win":g<m&&(y="compare-win"):m>g?_="compare-win":g>m&&(y="compare-win")),f.jsxs("div",{className:"compare-row",children:[f.jsx("span",{className:`compare-val ${_}`,children:h.valA}),f.jsx("span",{className:"compare-label",children:h.label}),f.jsx("span",{className:`compare-val ${y}`,children:h.valB})]},h.label)})}),f.jsxs("div",{className:"compare-fixtures",children:[f.jsx("div",{className:"compare-fix-col",children:(s.upcomingFixtures||[]).slice(0,5).map(h=>f.jsx("span",{className:`detail-fixture-chip fdr-${h.difficulty}`,children:h.opponent},h.gw))}),f.jsx("span",{className:"compare-fix-label",children:"Fixtures"}),f.jsx("div",{className:"compare-fix-col",children:(r.upcomingFixtures||[]).slice(0,5).map(h=>f.jsx("span",{className:`detail-fixture-chip fdr-${h.difficulty}`,children:h.opponent},h.gw))})]})]})}function h1({suggestion:i,currentFormation:t,captainPick:s,onClose:r}){if(!i)return null;const o=i.formation===t;return f.jsxs("div",{className:"formation-suggested-panel",children:[f.jsxs("div",{className:"compare-header",children:[f.jsx("h4",{children:"Suggested Formation"}),f.jsx("button",{className:"detail-close",onClick:r,children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),o?f.jsxs("p",{className:"suggested-verdict suggested-good",children:["Your current ",t," is already optimal based on xPts analysis."]}):f.jsxs(f.Fragment,{children:[f.jsxs("p",{className:"suggested-verdict suggested-change",children:["Consider switching from ",f.jsx("strong",{children:t})," to ",f.jsx("strong",{children:i.formation})," to maximise expected points."]}),f.jsxs("div",{className:"suggested-changes",children:[f.jsx("div",{className:"suggested-changes-label",children:"Move to bench:"}),i.bench.filter(u=>u.benchOrder===0).slice(0,3).map(u=>f.jsxs("span",{className:"suggested-chip bench-chip",children:[u.name," ",f.jsx("span",{className:"suggested-chip-pos",children:u.position}),u.xpts!=null&&f.jsxs("span",{className:"suggested-chip-xpts",children:[u.xpts," xPts"]})]},u.id)),f.jsx("div",{className:"suggested-changes-label",style:{marginTop:"0.5rem"},children:"Bring into XI:"}),i.xi.filter(u=>u.benchOrder>0).slice(0,3).map(u=>f.jsxs("span",{className:"suggested-chip start-chip",children:[u.name," ",f.jsx("span",{className:"suggested-chip-pos",children:u.position}),u.xpts!=null&&f.jsxs("span",{className:"suggested-chip-xpts",children:[u.xpts," xPts"]})]},u.id))]})]}),s&&f.jsxs("div",{className:"suggested-captain",children:[f.jsx("div",{className:"suggested-changes-label",style:{marginTop:"0.75rem"},children:"Recommended captain:"}),f.jsxs("div",{className:"captain-suggestion",children:[f.jsx("span",{className:`position-badge position-${s.position}`,children:s.position}),f.jsx("strong",{children:s.name}),f.jsxs("span",{className:"xpts-reason-badge",children:[s.xpts," xPts"]}),s.topReasons?.length>0&&f.jsx("span",{className:"captain-reasons",children:s.topReasons.join("  ")})]})]})]})}function m1({teamData:i,teamLoading:t,teamError:s,teamReload:r}){const[o,u]=ee.useState(null),[h,m]=ee.useState(!1),[g,_]=ee.useState([]),[y,b]=ee.useState(!1),[S,w]=ee.useState(!1),[N,P]=ee.useState(null),[q,Z]=ee.useState([]),[H,X]=ee.useState(null);ee.useEffect(()=>{if(!H)return;const M=setTimeout(()=>X(null),2500);return()=>clearTimeout(M)},[H]);const B=ee.useMemo(()=>i?.teams||{},[i]),K=ee.useMemo(()=>{if(!i)return null;const M=[...i.players,...i.bench||[]];return l1(M,B)},[i,B]),te=ee.useMemo(()=>{if(!i)return{};const M=[...i.players,...i.bench||[]],G={};for(const re of M){const ae=re.upcomingFixtures?.[0]||{difficulty:3,opponent:"TBD"},ve=Go(re,ae,B);G[re.id]=ve.xpts}return G},[i,B]),Q=ee.useMemo(()=>{if(!i)return null;const M=[...i.players,...i.bench||[]],{captain:G}=yy(M,B);return G},[i,B]),{players:he,bench:Ce,hasSwaps:pe}=ee.useMemo(()=>{if(!i)return{players:[],bench:[],hasSwaps:!1};let M=[...i.players],G=[...i.bench||[]];for(const[re,ae]of q){const ve=M.findIndex(Me=>Me.id===re),We=G.findIndex(Me=>Me.id===ae);ve===-1||We===-1||([M[ve],G[We]]=[G[We],M[ve]])}return{players:M,bench:G,hasSwaps:q.length>0}},[i,q]);if(t)return f.jsx(Qr,{message:"Loading formation..."});if(s)return f.jsx(Wr,{message:s,onRetry:r});const{summary:ue}=i,ie=r1(he),se=Ey(he),L=y&&K?new Set(K.xi.map(M=>M.id)):new Set,F=new Set(he.map(M=>M.id));function j(M){if(S){V(M);return}h?_(G=>G.find(ae=>ae.id===M.id)?G.filter(ae=>ae.id!==M.id):G.length>=2?[G[1],M]:[...G,M]):u(G=>G?.id===M.id?null:M)}function V(M){if(!N){P(M);return}if(N.id===M.id){P(null);return}const G=F.has(N.id),re=F.has(M.id);if(G===re){P(M);return}const ae=G?N:M,ve=G?M:N,We=he.map(cn=>cn.id===ae.id?ve:cn),Me=c1(We);if(!Me.valid){X(Me.reason),P(null);return}Z(cn=>[...cn,[ae.id,ve.id]]),P(null)}function W(){const M=!S;w(M),P(null),X(null),M&&(m(!1),_([]),u(null))}function J(){const M=!h;m(M),_([]),u(null),M&&(w(!1),P(null))}function le(){b(M=>!M)}function x(){Z([]),P(null),X(null)}const I=M=>f.jsx(u1,{player:M,isSelected:o?.id===M.id,isCompareSelected:g.some(G=>G.id===M.id),isSwapSource:N?.id===M.id,onSelect:j,compareMode:h,isSuggested:y&&L.has(M.id),xpts:te[M.id]},M.id);return f.jsxs("div",{className:"formation-view",children:[f.jsxs("div",{className:"formation-header",children:[f.jsxs("h3",{children:["Formation  ",ie]}),f.jsxs("div",{className:"formation-header-actions",children:[f.jsxs("button",{className:`formation-action-btn ${S?"active":""}`,onClick:W,title:"Swap players between XI and bench",children:[f.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("polyline",{points:"17 1 21 5 17 9"}),f.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),f.jsx("polyline",{points:"7 23 3 19 7 15"}),f.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),f.jsx("span",{children:"Swap"})]}),pe&&f.jsxs("button",{className:"formation-action-btn formation-reset-btn",onClick:x,title:"Reset to original lineup",children:[f.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("polyline",{points:"1 4 1 10 7 10"}),f.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),f.jsx("span",{children:"Reset"})]}),f.jsxs("button",{className:`formation-action-btn ${h?"active":""}`,onClick:J,title:"Compare two players",children:[f.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),f.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),f.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),f.jsx("span",{children:"Compare"})]}),f.jsxs("button",{className:`formation-action-btn ${y?"active":""}`,onClick:le,title:"Suggest optimal formation",children:[f.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),f.jsx("path",{d:"M2 17l10 5 10-5"}),f.jsx("path",{d:"M2 12l10 5 10-5"})]}),f.jsx("span",{children:"Suggest"})]}),f.jsxs("span",{className:"formation-gw",children:["GW",ue.currentGameweek]})]})]}),h&&f.jsx("div",{className:"formation-compare-hint",children:"Tap any 2 players to compare them side-by-side"}),S&&f.jsx("div",{className:"formation-swap-hint",children:N?f.jsxs(f.Fragment,{children:["Tap a ",F.has(N.id)?"bench":"starting"," player to swap with ",f.jsx("strong",{children:N.name})]}):"Tap a player, then tap another to swap them"}),H&&f.jsx("div",{className:"swap-invalid-msg",children:H}),f.jsxs("div",{className:"pitch",children:[f.jsxs("div",{className:"pitch-surface",children:[f.jsx("div",{className:"pitch-marking center-circle"}),f.jsx("div",{className:"pitch-marking center-line"}),f.jsx("div",{className:"pitch-marking penalty-box top"}),f.jsx("div",{className:"pitch-marking penalty-box bottom"}),f.jsx("div",{className:"pitch-row fwd-row",children:se.FWD.map(I)}),f.jsx("div",{className:"pitch-row mid-row",children:se.MID.map(I)}),f.jsx("div",{className:"pitch-row def-row",children:se.DEF.map(I)}),f.jsx("div",{className:"pitch-row gk-row",children:se.GKP.map(I)})]}),Ce.length>0&&f.jsxs("div",{className:"formation-bench",children:[f.jsx("div",{className:"formation-bench-label",children:"Bench"}),f.jsx("div",{className:"formation-bench-row",children:Ce.map((M,G)=>f.jsxs("div",{className:"formation-bench-player",children:[f.jsx("span",{className:"bench-order",children:G+1}),I(M)]},M.id))})]})]}),h&&g.length===2&&f.jsx(f1,{players:g,onClose:()=>_([])}),!h&&!S&&o&&f.jsx(d1,{player:o,xptsData:Go(o,o.upcomingFixtures?.[0]||{difficulty:3,opponent:"TBD"},B),onClose:()=>u(null)}),y&&f.jsx(h1,{suggestion:K,currentFormation:ie,captainPick:Q,onClose:()=>b(!1)})]})}const p1=()=>{};var rv={};const Ty={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const Y=function(i,t){if(!i)throw ya(t)},ya=function(i){return new Error("Firebase Database ("+Ty.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};const Ny=function(i){const t=[];let s=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?t[s++]=o:o<2048?(t[s++]=o>>6|192,t[s++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),t[s++]=o>>18|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128,t[s++]=o&63|128):(t[s++]=o>>12|224,t[s++]=o>>6&63|128,t[s++]=o&63|128)}return t},g1=function(i){const t=[];let s=0,r=0;for(;s<i.length;){const o=i[s++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[s++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[s++],h=i[s++],m=i[s++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=i[s++],h=i[s++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},Xf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,m=h?i[o+1]:0,g=o+2<i.length,_=g?i[o+2]:0,y=u>>2,b=(u&3)<<4|m>>4;let S=(m&15)<<2|_>>6,w=_&63;g||(w=64,h||(S=64)),r.push(s[y],s[b],s[S],s[w])}return r.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Ny(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):g1(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const u=s[i.charAt(o++)],m=o<i.length?s[i.charAt(o)]:0;++o;const _=o<i.length?s[i.charAt(o)]:64;++o;const b=o<i.length?s[i.charAt(o)]:64;if(++o,u==null||m==null||_==null||b==null)throw new _1;const S=u<<2|m>>4;if(r.push(S),_!==64){const w=m<<4&240|_>>2;if(r.push(w),b!==64){const N=_<<6&192|b;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class _1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Cy=function(i){const t=Ny(i);return Xf.encodeByteArray(t,!0)},Fo=function(i){return Cy(i).replace(/\./g,"")},qo=function(i){try{return Xf.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function v1(i){return wy(void 0,i)}function wy(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const s=t;return new Date(s.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(const s in t)!t.hasOwnProperty(s)||!y1(s)||(i[s]=wy(i[s],t[s]));return i}function y1(i){return i!=="__proto__"}function b1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const S1=()=>b1().__FIREBASE_DEFAULTS__,E1=()=>{if(typeof process>"u"||typeof rv>"u")return;const i=rv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},x1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&qo(i[1]);return t&&JSON.parse(t)},Kf=()=>{try{return p1()||S1()||E1()||x1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Ay=i=>Kf()?.emulatorHosts?.[i],T1=i=>{const t=Ay(i);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(s+1),10);return t[0]==="["?[t.substring(1,s-1),r]:[t.substring(0,s),r]},Ry=()=>Kf()?.config,jy=i=>Kf()?.[`_${i}`];class $r{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,r))}}}function ba(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Oy(i){return(await fetch(i,{credentials:"include"})).ok}function N1(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=t||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Fo(JSON.stringify(s)),Fo(JSON.stringify(h)),""].join(".")}const Ar={};function C1(){const i={prod:[],emulator:[]};for(const t of Object.keys(Ar))Ar[t]?i.emulator.push(t):i.prod.push(t);return i}function w1(i){let t=document.getElementById(i),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),s=!0),{created:s,element:t}}let lv=!1;function Dy(i,t){if(typeof window>"u"||typeof document>"u"||!ba(window.location.host)||Ar[i]===t||Ar[i]||lv)return;Ar[i]=t;function s(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=C1().prod.length>0;function h(){const S=document.getElementById(r);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{lv=!0,h()},S}function y(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=w1(r),w=s("text"),N=document.getElementById(w)||document.createElement("span"),P=s("learnmore"),q=document.getElementById(P)||document.createElement("a"),Z=s("preprendIcon"),H=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const X=S.element;m(X),y(q,P);const B=_();g(H,Z),X.append(H,N,q,B),document.body.appendChild(X)}u?(N.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function A1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Iy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j1(){const i=Et();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function O1(){return Ty.NODE_ADMIN===!0}function D1(){try{return typeof indexedDB=="object"}catch{return!1}}function I1(){return new Promise((i,t)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(s){t(s)}})}const M1="FirebaseError";class ji extends Error{constructor(t,s,r){super(s),this.code=t,this.customData=r,this.name=M1,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zr.prototype.create)}}class Zr{constructor(t,s,r){this.service=t,this.serviceName=s,this.errors=r}create(t,...s){const r=s[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?k1(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new ji(o,m,r)}}function k1(i,t){return i.replace(L1,(s,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const L1=/\{\$([^}]+)}/g;function kr(i){return JSON.parse(i)}function at(i){return JSON.stringify(i)}const My=function(i){let t={},s={},r={},o="";try{const u=i.split(".");t=kr(qo(u[0])||""),s=kr(qo(u[1])||""),o=u[2],r=s.d||{},delete s.d}catch{}return{header:t,claims:s,data:r,signature:o}},U1=function(i){const t=My(i),s=t.claims;return!!s&&typeof s=="object"&&s.hasOwnProperty("iat")},z1=function(i){const t=My(i).claims;return typeof t=="object"&&t.admin===!0};function gn(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function ua(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function mf(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function Vo(i,t,s){const r={};for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=t.call(s,i[o],o,i));return r}function as(i,t){if(i===t)return!0;const s=Object.keys(i),r=Object.keys(t);for(const o of s){if(!r.includes(o))return!1;const u=i[o],h=t[o];if(ov(u)&&ov(h)){if(!as(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function ov(i){return i!==null&&typeof i=="object"}function Sa(i){const t=[];for(const[s,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Cr(i){const t={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function wr(i){const t=i.indexOf("?");if(!t)return"";const s=i.indexOf("#",t);return i.substring(t,s>0?s:void 0)}class P1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,s){s||(s=0);const r=this.W_;if(typeof t=="string")for(let b=0;b<16;b++)r[b]=t.charCodeAt(s)<<24|t.charCodeAt(s+1)<<16|t.charCodeAt(s+2)<<8|t.charCodeAt(s+3),s+=4;else for(let b=0;b<16;b++)r[b]=t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3],s+=4;for(let b=16;b<80;b++){const S=r[b-3]^r[b-8]^r[b-14]^r[b-16];r[b]=(S<<1|S>>>31)&4294967295}let o=this.chain_[0],u=this.chain_[1],h=this.chain_[2],m=this.chain_[3],g=this.chain_[4],_,y;for(let b=0;b<80;b++){b<40?b<20?(_=m^u&(h^m),y=1518500249):(_=u^h^m,y=1859775393):b<60?(_=u&h|m&(u|h),y=2400959708):(_=u^h^m,y=3395469782);const S=(o<<5|o>>>27)+_+g+y+r[b]&4294967295;g=m,m=h,h=(u<<30|u>>>2)&4294967295,u=o,o=S}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,s){if(t==null)return;s===void 0&&(s=t.length);const r=s-this.blockSize;let o=0;const u=this.buf_;let h=this.inbuf_;for(;o<s;){if(h===0)for(;o<=r;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<s;)if(u[h]=t.charCodeAt(o),++h,++o,h===this.blockSize){this.compress_(u),h=0;break}}else for(;o<s;)if(u[h]=t[o],++h,++o,h===this.blockSize){this.compress_(u),h=0;break}}this.inbuf_=h,this.total_+=s}digest(){const t=[];let s=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=s&255,s/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let u=24;u>=0;u-=8)t[r]=this.chain_[o]>>u&255,++r;return t}}function B1(i,t){const s=new H1(i,t);return s.subscribe.bind(s)}class H1{constructor(t,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(s=>{s.next(t)})}error(t){this.forEachObserver(s=>{s.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,s,r){let o;if(t===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");G1(t,["next","error","complete"])?o=t:o={next:t,error:s,complete:r},o.next===void 0&&(o.next=Jd),o.error===void 0&&(o.error=Jd),o.complete===void 0&&(o.complete=Jd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,t)}sendOne(t,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{s(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G1(i,t){if(typeof i!="object"||i===null)return!1;for(const s of t)if(s in i&&typeof i[s]=="function")return!0;return!1}function Jd(){}function dc(i,t){return`${i} failed: ${t} argument `}const F1=function(i){const t=[];let s=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);if(o>=55296&&o<=56319){const u=o-55296;r++,Y(r<i.length,"Surrogate pair missing trail surrogate.");const h=i.charCodeAt(r)-56320;o=65536+(u<<10)+h}o<128?t[s++]=o:o<2048?(t[s++]=o>>6|192,t[s++]=o&63|128):o<65536?(t[s++]=o>>12|224,t[s++]=o>>6&63|128,t[s++]=o&63|128):(t[s++]=o>>18|240,t[s++]=o>>12&63|128,t[s++]=o>>6&63|128,t[s++]=o&63|128)}return t},fc=function(i){let t=0;for(let s=0;s<i.length;s++){const r=i.charCodeAt(s);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,s++):t+=3}return t};function vt(i){return i&&i._delegate?i._delegate:i}class rs{constructor(t,s,r){this.name=t,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const $i="[DEFAULT]";class q1{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const r=new $r;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Y1(t))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=$i){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=$i){return this.instances.has(t)}getOptions(t=$i){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(t,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:V1(t),options:s}),this.instances.set(t,r),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=$i){return this.component?this.component.multipleInstances?t:$i:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function V1(i){return i===$i?void 0:i}function Y1(i){return i.instantiationMode==="EAGER"}class X1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new q1(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}var ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ze||(ze={}));const K1={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},Q1=ze.INFO,W1={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},$1=(i,t,...s)=>{if(t<i.logLevel)return;const r=new Date().toISOString(),o=W1[t];if(o)console[o](`[${r}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Wf{constructor(t){this.name=t,this._logLevel=Q1,this._logHandler=$1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ze))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?K1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...t),this._logHandler(this,ze.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...t),this._logHandler(this,ze.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...t),this._logHandler(this,ze.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...t),this._logHandler(this,ze.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...t),this._logHandler(this,ze.ERROR,...t)}}const Z1=(i,t)=>t.some(s=>i instanceof s);let cv,uv;function J1(){return cv||(cv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eT(){return uv||(uv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ky=new WeakMap,pf=new WeakMap,Ly=new WeakMap,ef=new WeakMap,$f=new WeakMap;function tT(i){const t=new Promise((s,r)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{s(Ei(i.result)),o()},h=()=>{r(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return t.then(s=>{s instanceof IDBCursor&&ky.set(s,i)}).catch(()=>{}),$f.set(t,i),t}function nT(i){if(pf.has(i))return;const t=new Promise((s,r)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{s(),o()},h=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});pf.set(i,t)}let gf={get(i,t,s){if(i instanceof IDBTransaction){if(t==="done")return pf.get(i);if(t==="objectStoreNames")return i.objectStoreNames||Ly.get(i);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Ei(i[t])},set(i,t,s){return i[t]=s,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function iT(i){gf=i(gf)}function sT(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const r=i.call(tf(this),t,...s);return Ly.set(r,t.sort?t.sort():[t]),Ei(r)}:eT().includes(i)?function(...t){return i.apply(tf(this),t),Ei(ky.get(this))}:function(...t){return Ei(i.apply(tf(this),t))}}function aT(i){return typeof i=="function"?sT(i):(i instanceof IDBTransaction&&nT(i),Z1(i,J1())?new Proxy(i,gf):i)}function Ei(i){if(i instanceof IDBRequest)return tT(i);if(ef.has(i))return ef.get(i);const t=aT(i);return t!==i&&(ef.set(i,t),$f.set(t,i)),t}const tf=i=>$f.get(i);function rT(i,t,{blocked:s,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(i,t),m=Ei(h);return r&&h.addEventListener("upgradeneeded",g=>{r(Ei(h.result),g.oldVersion,g.newVersion,Ei(h.transaction),g)}),s&&h.addEventListener("blocked",g=>s(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const lT=["get","getKey","getAll","getAllKeys","count"],oT=["put","add","delete","clear"],nf=new Map;function dv(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(nf.get(t))return nf.get(t);const s=t.replace(/FromIndex$/,""),r=t!==s,o=oT.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||lT.includes(s)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[s](...m),o&&g.done]))[0]};return nf.set(t,u),u}iT(i=>({...i,get:(t,s,r)=>dv(t,s)||i.get(t,s,r),has:(t,s)=>!!dv(t,s)||i.has(t,s)}));class cT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(uT(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function uT(i){return i.getComponent()?.type==="VERSION"}const _f="@firebase/app",fv="0.14.8";const Bn=new Wf("@firebase/app"),dT="@firebase/app-compat",fT="@firebase/analytics-compat",hT="@firebase/analytics",mT="@firebase/app-check-compat",pT="@firebase/app-check",gT="@firebase/auth",_T="@firebase/auth-compat",vT="@firebase/database",yT="@firebase/data-connect",bT="@firebase/database-compat",ST="@firebase/functions",ET="@firebase/functions-compat",xT="@firebase/installations",TT="@firebase/installations-compat",NT="@firebase/messaging",CT="@firebase/messaging-compat",wT="@firebase/performance",AT="@firebase/performance-compat",RT="@firebase/remote-config",jT="@firebase/remote-config-compat",OT="@firebase/storage",DT="@firebase/storage-compat",IT="@firebase/firestore",MT="@firebase/ai",kT="@firebase/firestore-compat",LT="firebase",UT="12.9.0";const vf="[DEFAULT]",zT={[_f]:"fire-core",[dT]:"fire-core-compat",[hT]:"fire-analytics",[fT]:"fire-analytics-compat",[pT]:"fire-app-check",[mT]:"fire-app-check-compat",[gT]:"fire-auth",[_T]:"fire-auth-compat",[vT]:"fire-rtdb",[yT]:"fire-data-connect",[bT]:"fire-rtdb-compat",[ST]:"fire-fn",[ET]:"fire-fn-compat",[xT]:"fire-iid",[TT]:"fire-iid-compat",[NT]:"fire-fcm",[CT]:"fire-fcm-compat",[wT]:"fire-perf",[AT]:"fire-perf-compat",[RT]:"fire-rc",[jT]:"fire-rc-compat",[OT]:"fire-gcs",[DT]:"fire-gcs-compat",[IT]:"fire-fst",[kT]:"fire-fst-compat",[MT]:"fire-vertex","fire-js":"fire-js",[LT]:"fire-js-all"};const Yo=new Map,PT=new Map,yf=new Map;function hv(i,t){try{i.container.addComponent(t)}catch(s){Bn.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,s)}}function da(i){const t=i.name;if(yf.has(t))return Bn.debug(`There were multiple attempts to register component ${t}.`),!1;yf.set(t,i);for(const s of Yo.values())hv(s,i);for(const s of PT.values())hv(s,i);return!0}function Zf(i,t){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(t)}function $t(i){return i==null?!1:i.settings!==void 0}const BT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Zr("app","Firebase",BT);class HT{constructor(t,s,r){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}const Ea=UT;function Uy(i,t={}){let s=i;typeof t!="object"&&(t={name:t});const r={name:vf,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw xi.create("bad-app-name",{appName:String(o)});if(s||(s=Ry()),!s)throw xi.create("no-options");const u=Yo.get(o);if(u){if(as(s,u.options)&&as(r,u.config))return u;throw xi.create("duplicate-app",{appName:o})}const h=new X1(o);for(const g of yf.values())h.addComponent(g);const m=new HT(s,r,h);return Yo.set(o,m),m}function zy(i=vf){const t=Yo.get(i);if(!t&&i===vf&&Ry())return Uy();if(!t)throw xi.create("no-app",{appName:i});return t}function Ti(i,t,s){let r=zT[i]??i;s&&(r+=`-${s}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const h=[`Unable to register library "${r}" with version "${t}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Bn.warn(h.join(" "));return}da(new rs(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const GT="firebase-heartbeat-database",FT=1,Lr="firebase-heartbeat-store";let sf=null;function Py(){return sf||(sf=rT(GT,FT,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Lr)}catch(s){console.warn(s)}}}}).catch(i=>{throw xi.create("idb-open",{originalErrorMessage:i.message})})),sf}async function qT(i){try{const s=(await Py()).transaction(Lr),r=await s.objectStore(Lr).get(By(i));return await s.done,r}catch(t){if(t instanceof ji)Bn.warn(t.message);else{const s=xi.create("idb-get",{originalErrorMessage:t?.message});Bn.warn(s.message)}}}async function mv(i,t){try{const r=(await Py()).transaction(Lr,"readwrite");await r.objectStore(Lr).put(t,By(i)),await r.done}catch(s){if(s instanceof ji)Bn.warn(s.message);else{const r=xi.create("idb-set",{originalErrorMessage:s?.message});Bn.warn(r.message)}}}function By(i){return`${i.name}!${i.options.appId}`}const VT=1024,YT=30;class XT{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new QT(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>YT){const o=WT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Bn.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=pv(),{heartbeatsToSend:s,unsentEntries:r}=KT(this._heartbeatsCache.heartbeats),o=Fo(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Bn.warn(t),""}}}function pv(){return new Date().toISOString().substring(0,10)}function KT(i,t=VT){const s=[];let r=i.slice();for(const o of i){const u=s.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),gv(s)>t){u.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),gv(s)>t){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class QT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D1()?I1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await qT(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return mv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return mv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function gv(i){return Fo(JSON.stringify({version:2,heartbeats:i})).length}function WT(i){if(i.length===0)return-1;let t=0,s=i[0].date;for(let r=1;r<i.length;r++)i[r].date<s&&(s=i[r].date,t=r);return t}function $T(i){da(new rs("platform-logger",t=>new cT(t),"PRIVATE")),da(new rs("heartbeat",t=>new XT(t),"PRIVATE")),Ti(_f,fv,i),Ti(_f,fv,"esm2020"),Ti("fire-js","")}$T("");var _v={};const vv="@firebase/database",yv="1.1.0";let Hy="";function ZT(i){Hy=i}class JT{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,s){s==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),at(s))}get(t){const s=this.domStorage_.getItem(this.prefixedName_(t));return s==null?null:kr(s)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class eN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,s){s==null?delete this.cache_[t]:this.cache_[t]=s}get(t){return gn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Gy=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new JT(t)}}catch{}return new eN},Ji=Gy("localStorage"),tN=Gy("sessionStorage");const aa=new Wf("@firebase/database"),nN=(function(){let i=1;return function(){return i++}})(),Fy=function(i){const t=F1(i),s=new P1;s.update(t);const r=s.digest();return Xf.encodeByteArray(r)},Jr=function(...i){let t="";for(let s=0;s<i.length;s++){const r=i[s];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Jr.apply(null,r):typeof r=="object"?t+=at(r):t+=r,t+=" "}return t};let Rr=null,bv=!0;const iN=function(i,t){Y(!0,"Can't turn on custom loggers persistently."),aa.logLevel=ze.VERBOSE,Rr=aa.log.bind(aa)},pt=function(...i){if(bv===!0&&(bv=!1,Rr===null&&tN.get("logging_enabled")===!0&&iN()),Rr){const t=Jr.apply(null,i);Rr(t)}},el=function(i){return function(...t){pt(i,...t)}},bf=function(...i){const t="FIREBASE INTERNAL ERROR: "+Jr(...i);aa.error(t)},Hn=function(...i){const t=`FIREBASE FATAL ERROR: ${Jr(...i)}`;throw aa.error(t),new Error(t)},St=function(...i){const t="FIREBASE WARNING: "+Jr(...i);aa.warn(t)},sN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&St("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jf=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},aN=function(i){if(document.readyState==="complete")i();else{let t=!1;const s=function(){if(!document.body){setTimeout(s,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&s()}),window.attachEvent("onload",s))}},fa="[MIN_NAME]",ls="[MAX_NAME]",ms=function(i,t){if(i===t)return 0;if(i===fa||t===ls)return-1;if(t===fa||i===ls)return 1;{const s=Sv(i),r=Sv(t);return s!==null?r!==null?s-r===0?i.length-t.length:s-r:-1:r!==null?1:i<t?-1:1}},rN=function(i,t){return i===t?0:i<t?-1:1},Er=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+at(t))},eh=function(i){if(typeof i!="object"||i===null)return at(i);const t=[];for(const r in i)t.push(r);t.sort();let s="{";for(let r=0;r<t.length;r++)r!==0&&(s+=","),s+=at(t[r]),s+=":",s+=eh(i[t[r]]);return s+="}",s},qy=function(i,t){const s=i.length;if(s<=t)return[i];const r=[];for(let o=0;o<s;o+=t)o+t>s?r.push(i.substring(o,s)):r.push(i.substring(o,o+t));return r};function gt(i,t){for(const s in i)i.hasOwnProperty(s)&&t(s,i[s])}const Vy=function(i){Y(!Jf(i),"Invalid JSON number");const t=11,s=52,r=(1<<t-1)-1;let o,u,h,m,g;i===0?(u=0,h=0,o=1/i===-1/0?1:0):(o=i<0,i=Math.abs(i),i>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(i)/Math.LN2),r),u=m+r,h=Math.round(i*Math.pow(2,s-m)-Math.pow(2,s))):(u=0,h=Math.round(i/Math.pow(2,1-r-s))));const _=[];for(g=s;g;g-=1)_.push(h%2?1:0),h=Math.floor(h/2);for(g=t;g;g-=1)_.push(u%2?1:0),u=Math.floor(u/2);_.push(o?1:0),_.reverse();const y=_.join("");let b="";for(g=0;g<64;g+=8){let S=parseInt(y.substr(g,8),2).toString(16);S.length===1&&(S="0"+S),b=b+S}return b.toLowerCase()},lN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function cN(i,t){let s="Unknown Error";i==="too_big"?s="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?s="Client doesn't have permission to access the desired data.":i==="unavailable"&&(s="The service is unavailable");const r=new Error(i+" at "+t._path.toString()+": "+s);return r.code=i.toUpperCase(),r}const uN=new RegExp("^-?(0*)\\d{1,10}$"),dN=-2147483648,fN=2147483647,Sv=function(i){if(uN.test(i)){const t=Number(i);if(t>=dN&&t<=fN)return t}return null},xa=function(i){try{i()}catch(t){setTimeout(()=>{const s=t.stack||"";throw St("Exception was thrown by user callback.",s),t},Math.floor(0))}},hN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},jr=function(i,t){const s=setTimeout(i,t);return typeof s=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(s):typeof s=="object"&&s.unref&&s.unref(),s};class mN{constructor(t,s){this.appCheckProvider=s,this.appName=t.name,$t(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=s?.getImmediate({optional:!0}),this.appCheck||s?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((s,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(s,r):s(null)},0)})}addTokenChangeListener(t){this.appCheckProvider?.get().then(s=>s.addTokenListener(t))}notifyForInvalidToken(){St(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class pN{constructor(t,s,r){this.appName_=t,this.firebaseOptions_=s,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(s=>s&&s.code==="auth/token-not-initialized"?(pt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(s,r):s(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(s=>s.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(s=>s.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',St(t)}}class Uo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Uo.OWNER="owner";const th="5",Yy="v",Xy="s",Ky="r",Qy="f",Wy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$y="ls",Zy="p",Sf="ac",Jy="websocket",e0="long_polling";class t0{constructor(t,s,r,o,u=!1,h="",m=!1,g=!1,_=null){this.secure=s,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=g,this.emulatorOptions=_,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ji.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ji.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",s=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${s}`}}function gN(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function n0(i,t,s){Y(typeof t=="string","typeof type must == string"),Y(typeof s=="object","typeof params must == object");let r;if(t===Jy)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===e0)r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);gN(i)&&(s.ns=i.namespace);const o=[];return gt(s,(u,h)=>{o.push(u+"="+h)}),r+o.join("&")}class _N{constructor(){this.counters_={}}incrementCounter(t,s=1){gn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=s}get(){return v1(this.counters_)}}const af={},rf={};function nh(i){const t=i.toString();return af[t]||(af[t]=new _N),af[t]}function vN(i,t){const s=i.toString();return rf[s]||(rf[s]=t()),rf[s]}class yN{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,s){this.closeAfterResponse=t,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,s){for(this.pendingResponses[t]=s;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&xa(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Ev="start",bN="close",SN="pLPCommand",EN="pRTLPCB",i0="id",s0="pw",a0="ser",xN="cb",TN="seg",NN="ts",CN="d",wN="dframe",r0=1870,l0=30,AN=r0-l0,RN=25e3,jN=3e4;class ia{constructor(t,s,r,o,u,h,m){this.connId=t,this.repoInfo=s,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=el(t),this.stats_=nh(s),this.urlFn=g=>(this.appCheckToken&&(g[Sf]=this.appCheckToken),n0(s,e0,g))}open(t,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new yN(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(jN)),aN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ih((...u)=>{const[h,m,g,_,y]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===Ev)this.id=m,this.password=g;else if(h===bN)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...u)=>{const[h,m]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const r={};r[Ev]="t",r[a0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[xN]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Yy]=th,this.transportSessionId&&(r[Xy]=this.transportSessionId),this.lastSessionId&&(r[$y]=this.lastSessionId),this.applicationId&&(r[Zy]=this.applicationId),this.appCheckToken&&(r[Sf]=this.appCheckToken),typeof location<"u"&&location.hostname&&Wy.test(location.hostname)&&(r[Ky]=Qy);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ia.forceAllow_=!0}static forceDisallow(){ia.forceDisallow_=!0}static isAvailable(){return ia.forceAllow_?!0:!ia.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!lN()&&!oN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const s=at(t);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const r=Cy(s),o=qy(r,AN);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(t,s){this.myDisconnFrame=document.createElement("iframe");const r={};r[wN]="t",r[i0]=t,r[s0]=s,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const s=at(t).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class ih{constructor(t,s,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=nN(),window[SN+this.uniqueCallbackIdentifier]=t,window[EN+this.uniqueCallbackIdentifier]=s,this.myIFrame=ih.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){pt("frame writing exception"),m.stack&&pt(m.stack),pt(m)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||pt("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,s){for(this.myID=t,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[i0]=this.myID,t[s0]=this.myPW,t[a0]=this.currentSerial;let s=this.urlFn(t),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+l0+r.length<=r0;){const h=this.pendingSegs.shift();r=r+"&"+TN+o+"="+h.seg+"&"+NN+o+"="+h.ts+"&"+CN+o+"="+h.d,o++}return s=s+r,this.addLongPollTag_(s,this.currentSerial),!0}else return!1}enqueueSegment(t,s,r){this.pendingSegs.push({seg:t,ts:s,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,s){this.outstandingRequests.add(s);const r=()=>{this.outstandingRequests.delete(s),this.newRequest_()},o=setTimeout(r,Math.floor(RN)),u=()=>{clearTimeout(o),r()};this.addTag(t,u)}addTag(t,s){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),s())},r.onerror=()=>{pt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}const ON=16384,DN=45e3;let Xo=null;typeof MozWebSocket<"u"?Xo=MozWebSocket:typeof WebSocket<"u"&&(Xo=WebSocket);class sn{constructor(t,s,r,o,u,h,m){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=el(this.connId),this.stats_=nh(s),this.connURL=sn.connectionURL_(s,h,m,o,r),this.nodeAdmin=s.nodeAdmin}static connectionURL_(t,s,r,o,u){const h={};return h[Yy]=th,typeof location<"u"&&location.hostname&&Wy.test(location.hostname)&&(h[Ky]=Qy),s&&(h[Xy]=s),r&&(h[$y]=r),o&&(h[Sf]=o),u&&(h[Zy]=u),n0(t,Jy,h)}open(t,s){this.onDisconnect=s,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ji.set("previous_websocket_failure",!0);try{let r;O1(),this.mySock=new Xo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){sn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(s);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Xo!==null&&!sn.forceDisallow_}static previouslyFailed(){return Ji.isInMemoryStorage||Ji.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ji.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const r=kr(s);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Y(this.frames===null,"We already have a frame buffer"),t.length<=6){const s=Number(t);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const s=t.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(s);else{const r=this.extractFrameCount_(s);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const s=at(t);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const r=qy(s,ON);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(DN))}sendString_(t){try{this.mySock.send(t)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}sn.responsesRequiredToBeHealthy=2;sn.healthyTimeout=3e4;class Ur{static get ALL_TRANSPORTS(){return[ia,sn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const s=sn&&sn.isAvailable();let r=s&&!sn.previouslyFailed();if(t.webSocketOnly&&(s||St("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[sn];else{const o=this.transports_=[];for(const u of Ur.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u);Ur.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ur.globalTransportInitialized_=!1;const IN=6e4,MN=5e3,kN=10*1024,LN=100*1024,lf="t",xv="d",UN="s",Tv="r",zN="e",Nv="o",Cv="a",wv="n",Av="p",PN="h";class BN{constructor(t,s,r,o,u,h,m,g,_,y){this.id=t,this.repoInfo_=s,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=g,this.onKill_=_,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=el("c:"+this.id+":"),this.transportManager_=new Ur(s),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,r)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=jr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>LN?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>kN?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return s=>{t===this.conn_?this.onConnectionLost_(s):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return s=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(s):t===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(t){const s={t:"d",d:t};this.sendData_(s)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(lf in t){const s=t[lf];s===Cv?this.upgradeIfSecondaryHealthy_():s===Tv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):s===Nv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const s=Er("t",t),r=Er("d",t);if(s==="c")this.onSecondaryControl_(r);else if(s==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+s)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Av,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Cv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const s=Er("t",t),r=Er("d",t);s==="c"?this.onControl_(r):s==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const s=Er(lf,t);if(xv in t){const r=t[xv];if(s===PN){const o={...r};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(s===wv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else s===UN?this.onConnectionShutdown_(r):s===Tv?this.onReset_(r):s===zN?bf("Server Error: "+r):s===Nv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bf("Unknown control packet command: "+s)}}onHandshake_(t){const s=t.ts,r=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),th!==r&&St("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,r),jr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(IN))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,s){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(MN))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Av,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ji.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class o0{put(t,s,r,o){}merge(t,s,r,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,s,r){}onDisconnectMerge(t,s,r){}onDisconnectCancel(t,s){}reportStats(t){}}class c0{constructor(t){this.allowedEvents_=t,this.listeners_={},Y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...s){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,s)}}on(t,s,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:s,context:r});const o=this.getInitialEvent(t);o&&s.apply(r,o)}off(t,s,r){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let u=0;u<o.length;u++)if(o[u].callback===s&&(!r||r===o[u].context)){o.splice(u,1);return}}validateEventType_(t){Y(this.allowedEvents_.find(s=>s===t),"Unknown event: "+t)}}class Ko extends c0{static getInstance(){return new Ko}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Qf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return Y(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const Rv=32,jv=768;class Pe{constructor(t,s){if(s===void 0){this.pieces_=t.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=s}toString(){let t="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)this.pieces_[s]!==""&&(t+="/"+this.pieces_[s]);return t||"/"}}function je(){return new Pe("")}function Ne(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function wi(i){return i.pieces_.length-i.pieceNum_}function Ge(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new Pe(i.pieces_,t)}function sh(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function HN(i){let t="";for(let s=i.pieceNum_;s<i.pieces_.length;s++)i.pieces_[s]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[s])));return t||"/"}function zr(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function u0(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let s=i.pieceNum_;s<i.pieces_.length-1;s++)t.push(i.pieces_[s]);return new Pe(t,0)}function Ke(i,t){const s=[];for(let r=i.pieceNum_;r<i.pieces_.length;r++)s.push(i.pieces_[r]);if(t instanceof Pe)for(let r=t.pieceNum_;r<t.pieces_.length;r++)s.push(t.pieces_[r]);else{const r=t.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&s.push(r[o])}return new Pe(s,0)}function Ee(i){return i.pieceNum_>=i.pieces_.length}function bt(i,t){const s=Ne(i),r=Ne(t);if(s===null)return t;if(s===r)return bt(Ge(i),Ge(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function GN(i,t){const s=zr(i,0),r=zr(t,0);for(let o=0;o<s.length&&o<r.length;o++){const u=ms(s[o],r[o]);if(u!==0)return u}return s.length===r.length?0:s.length<r.length?-1:1}function d0(i,t){if(wi(i)!==wi(t))return!1;for(let s=i.pieceNum_,r=t.pieceNum_;s<=i.pieces_.length;s++,r++)if(i.pieces_[s]!==t.pieces_[r])return!1;return!0}function Zt(i,t){let s=i.pieceNum_,r=t.pieceNum_;if(wi(i)>wi(t))return!1;for(;s<i.pieces_.length;){if(i.pieces_[s]!==t.pieces_[r])return!1;++s,++r}return!0}class FN{constructor(t,s){this.errorPrefix_=s,this.parts_=zr(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=fc(this.parts_[r]);f0(this)}}function qN(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=fc(t),f0(i)}function VN(i){const t=i.parts_.pop();i.byteLength_-=fc(t),i.parts_.length>0&&(i.byteLength_-=1)}function f0(i){if(i.byteLength_>jv)throw new Error(i.errorPrefix_+"has a key path longer than "+jv+" bytes ("+i.byteLength_+").");if(i.parts_.length>Rv)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Rv+") or object contains a cycle "+Zi(i))}function Zi(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}class ah extends c0{static getInstance(){return new ah}constructor(){super(["visible"]);let t,s;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(s="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(s="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(s="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(s="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return Y(t==="visible","Unknown event type: "+t),[this.visible_]}}const xr=1e3,YN=300*1e3,Ov=30*1e3,XN=1.3,KN=3e4,QN="server_kill",Dv=3;class zn extends o0{constructor(t,s,r,o,u,h,m,g){if(super(),this.repoInfo_=t,this.applicationId_=s,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=g,this.id=zn.nextPersistentConnectionId_++,this.log_=el("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xr,this.maxReconnectDelay_=YN,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ah.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ko.getInstance().on("online",this.onOnline_,this)}sendRequest(t,s,r){const o=++this.requestNumber_,u={r:o,a:t,b:s};this.log_(at(u)),Y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const s=new $r,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;h.s==="ok"?s.resolve(m):s.reject(m)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),s.promise}listen(t,s,r,o){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),Y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Y(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:s,query:t,tag:r};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const s=this.outstandingGets_[t];this.sendRequest("g",s.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(r)})}sendListen_(t){const s=t.query,r=s._path.toString(),o=s._queryIdentifier;this.log_("Listen on "+r+" for "+o);const u={p:r},h="q";t.tag&&(u.q=s._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest(h,u,m=>{const g=m.d,_=m.s;zn.warnOnListenWarnings_(g,s),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",m),_!=="ok"&&this.removeListen_(r,o),t.onComplete&&t.onComplete(_,g))})}static warnOnListenWarnings_(t,s){if(t&&typeof t=="object"&&gn(t,"w")){const r=ua(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+s._queryParams.getIndex().toString()+'"',u=s._path.toString();St(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||z1(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ov)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,s=U1(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(s,r,o=>{const u=o.s,h=o.d||"error";this.authToken_===t&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const s=t.s,r=t.d||"error";s==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,r)})}unlisten(t,s){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),Y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,s)}sendUnlisten_(t,s,r,o){this.log_("Unlisten on "+t+" for "+s);const u={p:t},h="n";o&&(u.q=r,u.t=o),this.sendRequest(h,u)}onDisconnectPut(t,s,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,s,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:s,onComplete:r})}onDisconnectMerge(t,s,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,s,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:s,onComplete:r})}onDisconnectCancel(t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(t,s,r,o){const u={p:s,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,s,r,o){this.putInternal("p",t,s,r,o)}merge(t,s,r,o){this.putInternal("m",t,s,r,o)}putInternal(t,s,r,o,u){this.initConnection_();const h={p:s,d:r};u!==void 0&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+s)}sendPut_(t){const s=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(s,r,u=>{this.log_(s+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(u.s,u.d)})}reportStats(t){if(this.connected_){const s={c:t};this.log_("reportStats",s),this.sendRequest("s",s,r=>{if(r.s!=="ok"){const u=r.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+at(t));const s=t.r,r=this.requestCBHash_[s];r&&(delete this.requestCBHash_[s],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,s){this.log_("handleServerMessage",t,s),t==="d"?this.onDataUpdate_(s.p,s.d,!1,s.t):t==="m"?this.onDataUpdate_(s.p,s.d,!0,s.t):t==="c"?this.onListenRevoked_(s.p,s.q):t==="ac"?this.onAuthRevoked_(s.s,s.d):t==="apc"?this.onAppCheckRevoked_(s.s,s.d):t==="sd"?this.onSecurityDebugPacket_(s):bf("Unrecognized action received from server: "+at(t)+`
Are you using the latest client?`)}onReady_(t,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=xr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>KN&&(this.reconnectDelay_=xr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let s=Math.max(0,this.reconnectDelay_-t);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*XN)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),s=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+zn.nextConnectionId_++,u=this.lastSessionId;let h=!1,m=null;const g=function(){m?m.close():(h=!0,r())},_=function(b){Y(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(b)};this.realtime_={close:g,sendRequest:_};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[b,S]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);h?pt("getToken() completed but was canceled"):(pt("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=S&&S.token,m=new BN(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,s,r,w=>{St(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(QN)},u))}catch(b){this.log_("Failed to get token: "+b),h||(this.repoInfo_.nodeAdmin&&St(b),g())}}}interrupt(t){pt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){pt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],mf(this.interruptReasons_)&&(this.reconnectDelay_=xr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const s=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const s=this.outstandingPuts_[t];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,s){let r;s?r=s.map(u=>eh(u)).join("$"):r="default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,s){const r=new Pe(t).toString();let o;if(this.listens.has(r)){const u=this.listens.get(r);o=u.get(s),u.delete(s),u.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,s){pt("Auth token revoked: "+t+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Dv&&(this.reconnectDelay_=Ov,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,s){pt("App check token revoked: "+t+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Dv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const s of t.values())this.sendListen_(s);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let s="js";t["sdk."+s+"."+Hy.replace(/\./g,"-")]=1,Qf()?t["framework.cordova"]=1:Iy()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ko.getInstance().currentlyOnline();return mf(this.interruptReasons_)&&t}}zn.nextPersistentConnectionId_=0;zn.nextConnectionId_=0;class ye{constructor(t,s){this.name=t,this.node=s}static Wrap(t,s){return new ye(t,s)}}class hc{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,s){const r=new ye(fa,t),o=new ye(fa,s);return this.compare(r,o)!==0}minPost(){return ye.MIN}}let Do;class h0 extends hc{static get __EMPTY_NODE(){return Do}static set __EMPTY_NODE(t){Do=t}compare(t,s){return ms(t.name,s.name)}isDefinedOn(t){throw ya("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,s){return!1}minPost(){return ye.MIN}maxPost(){return new ye(ls,Do)}makePost(t,s){return Y(typeof t=="string","KeyIndex indexValue must always be a string."),new ye(t,Do)}toString(){return".key"}}const ra=new h0;class Io{constructor(t,s,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let h=1;for(;!t.isEmpty();)if(t=t,h=s?r(t.key,s):1,o&&(h*=-1),h<0)this.isReverse_?t=t.left:t=t.right;else if(h===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),s;if(this.resultGenerator_?s=this.resultGenerator_(t.key,t.value):s={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class ct{constructor(t,s,r,o,u){this.key=t,this.value=s,this.color=r??ct.RED,this.left=o??jt.EMPTY_NODE,this.right=u??jt.EMPTY_NODE}copy(t,s,r,o,u){return new ct(t??this.key,s??this.value,r??this.color,o??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,r){let o=this;const u=r(t,o.key);return u<0?o=o.copy(null,null,null,o.left.insert(t,s,r),null):u===0?o=o.copy(null,s,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,s,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return jt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,s){let r,o;if(r=this,s(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,s),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),s(t,r.key)===0){if(r.right.isEmpty())return jt.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,s))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}ct.RED=!0;ct.BLACK=!1;class WN{copy(t,s,r,o,u){return this}insert(t,s,r){return new ct(t,s,null)}remove(t,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class jt{constructor(t,s=jt.EMPTY_NODE){this.comparator_=t,this.root_=s}insert(t,s){return new jt(this.comparator_,this.root_.insert(t,s,this.comparator_).copy(null,null,ct.BLACK,null,null))}remove(t){return new jt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ct.BLACK,null,null))}get(t){let s,r=this.root_;for(;!r.isEmpty();){if(s=this.comparator_(t,r.key),s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}getPredecessorKey(t){let s,r=this.root_,o=null;for(;!r.isEmpty();)if(s=this.comparator_(t,r.key),s===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else s<0?r=r.left:s>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Io(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,s){return new Io(this.root_,t,this.comparator_,!1,s)}getReverseIteratorFrom(t,s){return new Io(this.root_,t,this.comparator_,!0,s)}getReverseIterator(t){return new Io(this.root_,null,this.comparator_,!0,t)}}jt.EMPTY_NODE=new WN;function $N(i,t){return ms(i.name,t.name)}function rh(i,t){return ms(i,t)}let Ef;function ZN(i){Ef=i}const m0=function(i){return typeof i=="number"?"number:"+Vy(i):"string:"+i},p0=function(i){if(i.isLeafNode()){const t=i.val();Y(typeof t=="string"||typeof t=="number"||typeof t=="object"&&gn(t,".sv"),"Priority must be a string or number.")}else Y(i===Ef||i.isEmpty(),"priority of unexpected type.");Y(i===Ef||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Iv;class ot{static set __childrenNodeConstructor(t){Iv=t}static get __childrenNodeConstructor(){return Iv}constructor(t,s=ot.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=s,this.lazyHash_=null,Y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),p0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new ot(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:ot.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ee(t)?this:Ne(t)===".priority"?this.priorityNode_:ot.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,s){return null}updateImmediateChild(t,s){return t===".priority"?this.updatePriority(s):s.isEmpty()&&t!==".priority"?this:ot.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,s).updatePriority(this.priorityNode_)}updateChild(t,s){const r=Ne(t);return r===null?s:s.isEmpty()&&r!==".priority"?this:(Y(r!==".priority"||wi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ot.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ge(t),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,s){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+m0(this.priorityNode_.val())+":");const s=typeof this.value_;t+=s+":",s==="number"?t+=Vy(this.value_):t+=this.value_,this.lazyHash_=Fy(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===ot.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ot.__childrenNodeConstructor?-1:(Y(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const s=typeof t.value_,r=typeof this.value_,o=ot.VALUE_TYPE_ORDER.indexOf(s),u=ot.VALUE_TYPE_ORDER.indexOf(r);return Y(o>=0,"Unknown leaf type: "+s),Y(u>=0,"Unknown leaf type: "+r),o===u?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const s=t;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}else return!1}}ot.VALUE_TYPE_ORDER=["object","boolean","number","string"];let g0,_0;function JN(i){g0=i}function eC(i){_0=i}class tC extends hc{compare(t,s){const r=t.node.getPriority(),o=s.node.getPriority(),u=r.compareTo(o);return u===0?ms(t.name,s.name):u}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,s){return!t.getPriority().equals(s.getPriority())}minPost(){return ye.MIN}maxPost(){return new ye(ls,new ot("[PRIORITY-POST]",_0))}makePost(t,s){const r=g0(t);return new ye(s,new ot("[PRIORITY-POST]",r))}toString(){return".priority"}}const Qe=new tC;const nC=Math.log(2);class iC{constructor(t){const s=u=>parseInt(Math.log(u)/nC,10),r=u=>parseInt(Array(u+1).join("1"),2);this.count=s(t+1),this.current_=this.count-1;const o=r(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Qo=function(i,t,s,r){i.sort(t);const o=function(g,_){const y=_-g;let b,S;if(y===0)return null;if(y===1)return b=i[g],S=s?s(b):b,new ct(S,b.node,ct.BLACK,null,null);{const w=parseInt(y/2,10)+g,N=o(g,w),P=o(w+1,_);return b=i[w],S=s?s(b):b,new ct(S,b.node,ct.BLACK,N,P)}},u=function(g){let _=null,y=null,b=i.length;const S=function(N,P){const q=b-N,Z=b;b-=N;const H=o(q+1,Z),X=i[q],B=s?s(X):X;w(new ct(B,X.node,P,null,H))},w=function(N){_?(_.left=N,_=N):(y=N,_=N)};for(let N=0;N<g.count;++N){const P=g.nextBitIsOne(),q=Math.pow(2,g.count-(N+1));P?S(q,ct.BLACK):(S(q,ct.BLACK),S(q,ct.RED))}return y},h=new iC(i.length),m=u(h);return new jt(r||t,m)};let of;const ta={};class kn{static get Default(){return Y(ta&&Qe,"ChildrenNode.ts has not been loaded"),of=of||new kn({".priority":ta},{".priority":Qe}),of}constructor(t,s){this.indexes_=t,this.indexSet_=s}get(t){const s=ua(this.indexes_,t);if(!s)throw new Error("No index defined for "+t);return s instanceof jt?s:null}hasIndex(t){return gn(this.indexSet_,t.toString())}addIndex(t,s){Y(t!==ra,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=s.getIterator(ye.Wrap);let h=u.getNext();for(;h;)o=o||t.isDefinedOn(h.node),r.push(h),h=u.getNext();let m;o?m=Qo(r,t.getCompare()):m=ta;const g=t.toString(),_={...this.indexSet_};_[g]=t;const y={...this.indexes_};return y[g]=m,new kn(y,_)}addToIndexes(t,s){const r=Vo(this.indexes_,(o,u)=>{const h=ua(this.indexSet_,u);if(Y(h,"Missing index implementation for "+u),o===ta)if(h.isDefinedOn(t.node)){const m=[],g=s.getIterator(ye.Wrap);let _=g.getNext();for(;_;)_.name!==t.name&&m.push(_),_=g.getNext();return m.push(t),Qo(m,h.getCompare())}else return ta;else{const m=s.get(t.name);let g=o;return m&&(g=g.remove(new ye(t.name,m))),g.insert(t,t.node)}});return new kn(r,this.indexSet_)}removeFromIndexes(t,s){const r=Vo(this.indexes_,o=>{if(o===ta)return o;{const u=s.get(t.name);return u?o.remove(new ye(t.name,u)):o}});return new kn(r,this.indexSet_)}}let Tr;class fe{static get EMPTY_NODE(){return Tr||(Tr=new fe(new jt(rh),null,kn.Default))}constructor(t,s,r){this.children_=t,this.priorityNode_=s,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&p0(this.priorityNode_),this.children_.isEmpty()&&Y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Tr}updatePriority(t){return this.children_.isEmpty()?this:new fe(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const s=this.children_.get(t);return s===null?Tr:s}}getChild(t){const s=Ne(t);return s===null?this:this.getImmediateChild(s).getChild(Ge(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,s){if(Y(s,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(s);{const r=new ye(t,s);let o,u;s.isEmpty()?(o=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,s),u=this.indexMap_.addToIndexes(r,this.children_));const h=o.isEmpty()?Tr:this.priorityNode_;return new fe(o,h,u)}}updateChild(t,s){const r=Ne(t);if(r===null)return s;{Y(Ne(t)!==".priority"||wi(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Ge(t),s);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const s={};let r=0,o=0,u=!0;if(this.forEachChild(Qe,(h,m)=>{s[h]=m.val(t),r++,u&&fe.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):u=!1}),!t&&u&&o<2*r){const h=[];for(const m in s)h[m]=s[m];return h}else return t&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+m0(this.getPriority().val())+":"),this.forEachChild(Qe,(s,r)=>{const o=r.hash();o!==""&&(t+=":"+s+":"+o)}),this.lazyHash_=t===""?"":Fy(t)}return this.lazyHash_}getPredecessorChildName(t,s,r){const o=this.resolveIndex_(r);if(o){const u=o.getPredecessorKey(new ye(t,s));return u?u.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const s=this.resolveIndex_(t);if(s){const r=s.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const s=this.getFirstChildName(t);return s?new ye(s,this.children_.get(s)):null}getLastChildName(t){const s=this.resolveIndex_(t);if(s){const r=s.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const s=this.getLastChildName(t);return s?new ye(s,this.children_.get(s)):null}forEachChild(t,s){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>s(o.name,o.node)):this.children_.inorderTraversal(s)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,s){const r=this.resolveIndex_(s);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,ye.Wrap);let u=o.peek();for(;u!=null&&s.compare(u,t)<0;)o.getNext(),u=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,s){const r=this.resolveIndex_(s);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,ye.Wrap);let u=o.peek();for(;u!=null&&s.compare(u,t)>0;)o.getNext(),u=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===tl?-1:0}withIndex(t){if(t===ra||this.indexMap_.hasIndex(t))return this;{const s=this.indexMap_.addIndex(t,this.children_);return new fe(this.children_,this.priorityNode_,s)}}isIndexed(t){return t===ra||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const s=t;if(this.getPriority().equals(s.getPriority()))if(this.children_.count()===s.children_.count()){const r=this.getIterator(Qe),o=s.getIterator(Qe);let u=r.getNext(),h=o.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=r.getNext(),h=o.getNext()}return u===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===ra?null:this.indexMap_.get(t.toString())}}fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class sC extends fe{constructor(){super(new jt(rh),fe.EMPTY_NODE,kn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return fe.EMPTY_NODE}isEmpty(){return!1}}const tl=new sC;Object.defineProperties(ye,{MIN:{value:new ye(fa,fe.EMPTY_NODE)},MAX:{value:new ye(ls,tl)}});h0.__EMPTY_NODE=fe.EMPTY_NODE;ot.__childrenNodeConstructor=fe;ZN(tl);eC(tl);const aC=!0;function st(i,t=null){if(i===null)return fe.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),Y(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const s=i;return new ot(s,st(t))}if(!(i instanceof Array)&&aC){const s=[];let r=!1;if(gt(i,(h,m)=>{if(h.substring(0,1)!=="."){const g=st(m);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),s.push(new ye(h,g)))}}),s.length===0)return fe.EMPTY_NODE;const u=Qo(s,$N,h=>h.name,rh);if(r){const h=Qo(s,Qe.getCompare());return new fe(u,st(t),new kn({".priority":h},{".priority":Qe}))}else return new fe(u,st(t),kn.Default)}else{let s=fe.EMPTY_NODE;return gt(i,(r,o)=>{if(gn(i,r)&&r.substring(0,1)!=="."){const u=st(o);(u.isLeafNode()||!u.isEmpty())&&(s=s.updateImmediateChild(r,u))}}),s.updatePriority(st(t))}}JN(st);class rC extends hc{constructor(t){super(),this.indexPath_=t,Y(!Ee(t)&&Ne(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,s){const r=this.extractChild(t.node),o=this.extractChild(s.node),u=r.compareTo(o);return u===0?ms(t.name,s.name):u}makePost(t,s){const r=st(t),o=fe.EMPTY_NODE.updateChild(this.indexPath_,r);return new ye(s,o)}maxPost(){const t=fe.EMPTY_NODE.updateChild(this.indexPath_,tl);return new ye(ls,t)}toString(){return zr(this.indexPath_,0).join("/")}}class lC extends hc{compare(t,s){const r=t.node.compareTo(s.node);return r===0?ms(t.name,s.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,s){return!t.equals(s)}minPost(){return ye.MIN}maxPost(){return ye.MAX}makePost(t,s){const r=st(t);return new ye(s,r)}toString(){return".value"}}const oC=new lC;function v0(i){return{type:"value",snapshotNode:i}}function ha(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function Pr(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function Br(i,t,s){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:s}}function cC(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}class lh{constructor(t){this.index_=t}updateChild(t,s,r,o,u,h){Y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=t.getImmediateChild(s);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(h!=null&&(r.isEmpty()?t.hasChild(s)?h.trackChildChange(Pr(s,m)):Y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?h.trackChildChange(ha(s,r)):h.trackChildChange(Br(s,r,m))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(s,r).withIndex(this.index_)}updateFullNode(t,s,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Qe,(o,u)=>{s.hasChild(o)||r.trackChildChange(Pr(o,u))}),s.isLeafNode()||s.forEachChild(Qe,(o,u)=>{if(t.hasChild(o)){const h=t.getImmediateChild(o);h.equals(u)||r.trackChildChange(Br(o,u,h))}else r.trackChildChange(ha(o,u))})),s.withIndex(this.index_)}updatePriority(t,s){return t.isEmpty()?fe.EMPTY_NODE:t.updatePriority(s)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Hr{constructor(t){this.indexedFilter_=new lh(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Hr.getStartPost_(t),this.endPost_=Hr.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const s=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return s&&r}updateChild(t,s,r,o,u,h){return this.matches(new ye(s,r))||(r=fe.EMPTY_NODE),this.indexedFilter_.updateChild(t,s,r,o,u,h)}updateFullNode(t,s,r){s.isLeafNode()&&(s=fe.EMPTY_NODE);let o=s.withIndex(this.index_);o=o.updatePriority(fe.EMPTY_NODE);const u=this;return s.forEachChild(Qe,(h,m)=>{u.matches(new ye(h,m))||(o=o.updateImmediateChild(h,fe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,r)}updatePriority(t,s){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const s=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),s)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const s=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),s)}else return t.getIndex().maxPost()}}class uC{constructor(t){this.withinDirectionalStart=s=>this.reverse_?this.withinEndPost(s):this.withinStartPost(s),this.withinDirectionalEnd=s=>this.reverse_?this.withinStartPost(s):this.withinEndPost(s),this.withinStartPost=s=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),s);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=s=>{const r=this.index_.compare(s,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Hr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,s,r,o,u,h){return this.rangedFilter_.matches(new ye(s,r))||(r=fe.EMPTY_NODE),t.getImmediateChild(s).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,s,r,o,u,h):this.fullLimitUpdateChild_(t,s,r,u,h)}updateFullNode(t,s,r){let o;if(s.isLeafNode()||s.isEmpty())o=fe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<s.numChildren()&&s.isIndexed(this.index_)){o=fe.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=s.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=s.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;u.hasNext()&&h<this.limit_;){const m=u.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))o=o.updateImmediateChild(m.name,m.node),h++;else break;else continue}}else{o=s.withIndex(this.index_),o=o.updatePriority(fe.EMPTY_NODE);let u;this.reverse_?u=o.getReverseIterator(this.index_):u=o.getIterator(this.index_);let h=0;for(;u.hasNext();){const m=u.getNext();h<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?h++:o=o.updateImmediateChild(m.name,fe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,r)}updatePriority(t,s){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,s,r,o,u){let h;if(this.reverse_){const b=this.index_.getCompare();h=(S,w)=>b(w,S)}else h=this.index_.getCompare();const m=t;Y(m.numChildren()===this.limit_,"");const g=new ye(s,r),_=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),y=this.rangedFilter_.matches(g);if(m.hasChild(s)){const b=m.getImmediateChild(s);let S=o.getChildAfterChild(this.index_,_,this.reverse_);for(;S!=null&&(S.name===s||m.hasChild(S.name));)S=o.getChildAfterChild(this.index_,S,this.reverse_);const w=S==null?1:h(S,g);if(y&&!r.isEmpty()&&w>=0)return u?.trackChildChange(Br(s,r,b)),m.updateImmediateChild(s,r);{u?.trackChildChange(Pr(s,b));const P=m.updateImmediateChild(s,fe.EMPTY_NODE);return S!=null&&this.rangedFilter_.matches(S)?(u?.trackChildChange(ha(S.name,S.node)),P.updateImmediateChild(S.name,S.node)):P}}else return r.isEmpty()?t:y&&h(_,g)>=0?(u!=null&&(u.trackChildChange(Pr(_.name,_.node)),u.trackChildChange(ha(s,r))),m.updateImmediateChild(s,r).updateImmediateChild(_.name,fe.EMPTY_NODE)):t}}class oh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fa}hasEnd(){return this.endSet_}getIndexEndValue(){return Y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ls}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qe}copy(){const t=new oh;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function dC(i){return i.loadsAllData()?new lh(i.getIndex()):i.hasLimit()?new uC(i):new Hr(i)}function Mv(i){const t={};if(i.isDefault())return t;let s;if(i.index_===Qe?s="$priority":i.index_===oC?s="$value":i.index_===ra?s="$key":(Y(i.index_ instanceof rC,"Unrecognized index type!"),s=i.index_.toString()),t.orderBy=at(s),i.startSet_){const r=i.startAfterSet_?"startAfter":"startAt";t[r]=at(i.indexStartValue_),i.startNameSet_&&(t[r]+=","+at(i.indexStartName_))}if(i.endSet_){const r=i.endBeforeSet_?"endBefore":"endAt";t[r]=at(i.indexEndValue_),i.endNameSet_&&(t[r]+=","+at(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function kv(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let s=i.viewFrom_;s===""&&(i.isViewFromLeft()?s="l":s="r"),t.vf=s}return i.index_!==Qe&&(t.i=i.index_.toString()),t}class Wo extends o0{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,s){return s!==void 0?"tag$"+s:(Y(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,s,r,o){super(),this.repoInfo_=t,this.onDataUpdate_=s,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=el("p:rest:"),this.listens_={}}listen(t,s,r,o){const u=t._path.toString();this.log_("Listen called for "+u+" "+t._queryIdentifier);const h=Wo.getListenId_(t,r),m={};this.listens_[h]=m;const g=Mv(t._queryParams);this.restRequest_(u+".json",g,(_,y)=>{let b=y;if(_===404&&(b=null,_=null),_===null&&this.onDataUpdate_(u,b,!1,r),ua(this.listens_,h)===m){let S;_?_===401?S="permission_denied":S="rest_error:"+_:S="ok",o(S,null)}})}unlisten(t,s){const r=Wo.getListenId_(t,s);delete this.listens_[r]}get(t){const s=Mv(t._queryParams),r=t._path.toString(),o=new $r;return this.restRequest_(r+".json",s,(u,h)=>{let m=h;u===404&&(m=null,u=null),u===null?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(t){}restRequest_(t,s={},r){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(s.auth=o.accessToken),u&&u.token&&(s.ac=u.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Sa(s);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&m.readyState===4){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let g=null;if(m.status>=200&&m.status<300){try{g=kr(m.responseText)}catch{St("Failed to parse JSON response for "+h+": "+m.responseText)}r(null,g)}else m.status!==401&&m.status!==404&&St("Got unsuccessful REST response for "+h+" Status: "+m.status),r(m.status);r=null}},m.open("GET",h,!0),m.send()})}}class fC{constructor(){this.rootNode_=fe.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,s){this.rootNode_=this.rootNode_.updateChild(t,s)}}function $o(){return{value:null,children:new Map}}function y0(i,t,s){if(Ee(t))i.value=s,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,s);else{const r=Ne(t);i.children.has(r)||i.children.set(r,$o());const o=i.children.get(r);t=Ge(t),y0(o,t,s)}}function xf(i,t,s){i.value!==null?s(t,i.value):hC(i,(r,o)=>{const u=new Pe(t.toString()+"/"+r);xf(o,u,s)})}function hC(i,t){i.children.forEach((s,r)=>{t(r,s)})}class mC{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),s={...t};return this.last_&&gt(this.last_,(r,o)=>{s[r]=s[r]-o}),this.last_=t,s}}const Lv=10*1e3,pC=30*1e3,gC=300*1e3;class _C{constructor(t,s){this.server_=s,this.statsToReport_={},this.statsListener_=new mC(t);const r=Lv+(pC-Lv)*Math.random();jr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),s={};let r=!1;gt(t,(o,u)=>{u>0&&gn(this.statsToReport_,o)&&(s[o]=u,r=!0)}),r&&this.server_.reportStats(s),jr(this.reportStats_.bind(this),Math.floor(Math.random()*2*gC))}}var an;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(an||(an={}));function ch(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function uh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dh(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class Zo{constructor(t,s,r){this.path=t,this.affectedTree=s,this.revert=r,this.type=an.ACK_USER_WRITE,this.source=ch()}operationForChild(t){if(Ee(this.path)){if(this.affectedTree.value!=null)return Y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new Pe(t));return new Zo(je(),s,this.revert)}}else return Y(Ne(this.path)===t,"operationForChild called for unrelated child."),new Zo(Ge(this.path),this.affectedTree,this.revert)}}class Gr{constructor(t,s){this.source=t,this.path=s,this.type=an.LISTEN_COMPLETE}operationForChild(t){return Ee(this.path)?new Gr(this.source,je()):new Gr(this.source,Ge(this.path))}}class os{constructor(t,s,r){this.source=t,this.path=s,this.snap=r,this.type=an.OVERWRITE}operationForChild(t){return Ee(this.path)?new os(this.source,je(),this.snap.getImmediateChild(t)):new os(this.source,Ge(this.path),this.snap)}}class ma{constructor(t,s,r){this.source=t,this.path=s,this.children=r,this.type=an.MERGE}operationForChild(t){if(Ee(this.path)){const s=this.children.subtree(new Pe(t));return s.isEmpty()?null:s.value?new os(this.source,je(),s.value):new ma(this.source,je(),s)}else return Y(Ne(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ma(this.source,Ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ai{constructor(t,s,r){this.node_=t,this.fullyInitialized_=s,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Ee(t))return this.isFullyInitialized()&&!this.filtered_;const s=Ne(t);return this.isCompleteForChild(s)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class vC{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function yC(i,t,s,r){const o=[],u=[];return t.forEach(h=>{h.type==="child_changed"&&i.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&u.push(cC(h.childName,h.snapshotNode))}),Nr(i,o,"child_removed",t,r,s),Nr(i,o,"child_added",t,r,s),Nr(i,o,"child_moved",u,r,s),Nr(i,o,"child_changed",t,r,s),Nr(i,o,"value",t,r,s),o}function Nr(i,t,s,r,o,u){const h=r.filter(m=>m.type===s);h.sort((m,g)=>SC(i,m,g)),h.forEach(m=>{const g=bC(i,m,u);o.forEach(_=>{_.respondsTo(m.type)&&t.push(_.createEvent(g,i.query_))})})}function bC(i,t,s){return t.type==="value"||t.type==="child_removed"||(t.prevName=s.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function SC(i,t,s){if(t.childName==null||s.childName==null)throw ya("Should only compare child_ events.");const r=new ye(t.childName,t.snapshotNode),o=new ye(s.childName,s.snapshotNode);return i.index_.compare(r,o)}function mc(i,t){return{eventCache:i,serverCache:t}}function Or(i,t,s,r){return mc(new Ai(t,s,r),i.serverCache)}function b0(i,t,s,r){return mc(i.eventCache,new Ai(t,s,r))}function Jo(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function cs(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let cf;const EC=()=>(cf||(cf=new jt(rN)),cf);class He{static fromObject(t){let s=new He(null);return gt(t,(r,o)=>{s=s.set(new Pe(r),o)}),s}constructor(t,s=EC()){this.value=t,this.children=s}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,s){if(this.value!=null&&s(this.value))return{path:je(),value:this.value};if(Ee(t))return null;{const r=Ne(t),o=this.children.get(r);if(o!==null){const u=o.findRootMostMatchingPathAndValue(Ge(t),s);return u!=null?{path:Ke(new Pe(r),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Ee(t))return this;{const s=Ne(t),r=this.children.get(s);return r!==null?r.subtree(Ge(t)):new He(null)}}set(t,s){if(Ee(t))return new He(s,this.children);{const r=Ne(t),u=(this.children.get(r)||new He(null)).set(Ge(t),s),h=this.children.insert(r,u);return new He(this.value,h)}}remove(t){if(Ee(t))return this.children.isEmpty()?new He(null):new He(null,this.children);{const s=Ne(t),r=this.children.get(s);if(r){const o=r.remove(Ge(t));let u;return o.isEmpty()?u=this.children.remove(s):u=this.children.insert(s,o),this.value===null&&u.isEmpty()?new He(null):new He(this.value,u)}else return this}}get(t){if(Ee(t))return this.value;{const s=Ne(t),r=this.children.get(s);return r?r.get(Ge(t)):null}}setTree(t,s){if(Ee(t))return s;{const r=Ne(t),u=(this.children.get(r)||new He(null)).setTree(Ge(t),s);let h;return u.isEmpty()?h=this.children.remove(r):h=this.children.insert(r,u),new He(this.value,h)}}fold(t){return this.fold_(je(),t)}fold_(t,s){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_(Ke(t,o),s)}),s(t,this.value,r)}findOnPath(t,s){return this.findOnPath_(t,je(),s)}findOnPath_(t,s,r){const o=this.value?r(s,this.value):!1;if(o)return o;if(Ee(t))return null;{const u=Ne(t),h=this.children.get(u);return h?h.findOnPath_(Ge(t),Ke(s,u),r):null}}foreachOnPath(t,s){return this.foreachOnPath_(t,je(),s)}foreachOnPath_(t,s,r){if(Ee(t))return this;{this.value&&r(s,this.value);const o=Ne(t),u=this.children.get(o);return u?u.foreachOnPath_(Ge(t),Ke(s,o),r):new He(null)}}foreach(t){this.foreach_(je(),t)}foreach_(t,s){this.children.inorderTraversal((r,o)=>{o.foreach_(Ke(t,r),s)}),this.value&&s(t,this.value)}foreachChild(t){this.children.inorderTraversal((s,r)=>{r.value&&t(s,r.value)})}}class ln{constructor(t){this.writeTree_=t}static empty(){return new ln(new He(null))}}function Dr(i,t,s){if(Ee(t))return new ln(new He(s));{const r=i.writeTree_.findRootMostValueAndPath(t);if(r!=null){const o=r.path;let u=r.value;const h=bt(o,t);return u=u.updateChild(h,s),new ln(i.writeTree_.set(o,u))}else{const o=new He(s),u=i.writeTree_.setTree(t,o);return new ln(u)}}}function Tf(i,t,s){let r=i;return gt(s,(o,u)=>{r=Dr(r,Ke(t,o),u)}),r}function Uv(i,t){if(Ee(t))return ln.empty();{const s=i.writeTree_.setTree(t,new He(null));return new ln(s)}}function Nf(i,t){return ps(i,t)!=null}function ps(i,t){const s=i.writeTree_.findRootMostValueAndPath(t);return s!=null?i.writeTree_.get(s.path).getChild(bt(s.path,t)):null}function zv(i){const t=[],s=i.writeTree_.value;return s!=null?s.isLeafNode()||s.forEachChild(Qe,(r,o)=>{t.push(new ye(r,o))}):i.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&t.push(new ye(r,o.value))}),t}function Ni(i,t){if(Ee(t))return i;{const s=ps(i,t);return s!=null?new ln(new He(s)):new ln(i.writeTree_.subtree(t))}}function Cf(i){return i.writeTree_.isEmpty()}function pa(i,t){return S0(je(),i.writeTree_,t)}function S0(i,t,s){if(t.value!=null)return s.updateChild(i,t.value);{let r=null;return t.children.inorderTraversal((o,u)=>{o===".priority"?(Y(u.value!==null,"Priority writes must always be leaf nodes"),r=u.value):s=S0(Ke(i,o),u,s)}),!s.getChild(i).isEmpty()&&r!==null&&(s=s.updateChild(Ke(i,".priority"),r)),s}}function pc(i,t){return N0(t,i)}function xC(i,t,s,r,o){Y(r>i.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),i.allWrites.push({path:t,snap:s,writeId:r,visible:o}),o&&(i.visibleWrites=Dr(i.visibleWrites,t,s)),i.lastWriteId=r}function TC(i,t,s,r){Y(r>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:t,children:s,writeId:r,visible:!0}),i.visibleWrites=Tf(i.visibleWrites,t,s),i.lastWriteId=r}function NC(i,t){for(let s=0;s<i.allWrites.length;s++){const r=i.allWrites[s];if(r.writeId===t)return r}return null}function CC(i,t){const s=i.allWrites.findIndex(m=>m.writeId===t);Y(s>=0,"removeWrite called with nonexistent writeId.");const r=i.allWrites[s];i.allWrites.splice(s,1);let o=r.visible,u=!1,h=i.allWrites.length-1;for(;o&&h>=0;){const m=i.allWrites[h];m.visible&&(h>=s&&wC(m,r.path)?o=!1:Zt(r.path,m.path)&&(u=!0)),h--}if(o){if(u)return AC(i),!0;if(r.snap)i.visibleWrites=Uv(i.visibleWrites,r.path);else{const m=r.children;gt(m,g=>{i.visibleWrites=Uv(i.visibleWrites,Ke(r.path,g))})}return!0}else return!1}function wC(i,t){if(i.snap)return Zt(i.path,t);for(const s in i.children)if(i.children.hasOwnProperty(s)&&Zt(Ke(i.path,s),t))return!0;return!1}function AC(i){i.visibleWrites=E0(i.allWrites,RC,je()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function RC(i){return i.visible}function E0(i,t,s){let r=ln.empty();for(let o=0;o<i.length;++o){const u=i[o];if(t(u)){const h=u.path;let m;if(u.snap)Zt(s,h)?(m=bt(s,h),r=Dr(r,m,u.snap)):Zt(h,s)&&(m=bt(h,s),r=Dr(r,je(),u.snap.getChild(m)));else if(u.children){if(Zt(s,h))m=bt(s,h),r=Tf(r,m,u.children);else if(Zt(h,s))if(m=bt(h,s),Ee(m))r=Tf(r,je(),u.children);else{const g=ua(u.children,Ne(m));if(g){const _=g.getChild(Ge(m));r=Dr(r,je(),_)}}}else throw ya("WriteRecord should have .snap or .children")}}return r}function x0(i,t,s,r,o){if(!r&&!o){const u=ps(i.visibleWrites,t);if(u!=null)return u;{const h=Ni(i.visibleWrites,t);if(Cf(h))return s;if(s==null&&!Nf(h,je()))return null;{const m=s||fe.EMPTY_NODE;return pa(h,m)}}}else{const u=Ni(i.visibleWrites,t);if(!o&&Cf(u))return s;if(!o&&s==null&&!Nf(u,je()))return null;{const h=function(_){return(_.visible||o)&&(!r||!~r.indexOf(_.writeId))&&(Zt(_.path,t)||Zt(t,_.path))},m=E0(i.allWrites,h,t),g=s||fe.EMPTY_NODE;return pa(m,g)}}}function jC(i,t,s){let r=fe.EMPTY_NODE;const o=ps(i.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Qe,(u,h)=>{r=r.updateImmediateChild(u,h)}),r;if(s){const u=Ni(i.visibleWrites,t);return s.forEachChild(Qe,(h,m)=>{const g=pa(Ni(u,new Pe(h)),m);r=r.updateImmediateChild(h,g)}),zv(u).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}else{const u=Ni(i.visibleWrites,t);return zv(u).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}}function OC(i,t,s,r,o){Y(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=Ke(t,s);if(Nf(i.visibleWrites,u))return null;{const h=Ni(i.visibleWrites,u);return Cf(h)?o.getChild(s):pa(h,o.getChild(s))}}function DC(i,t,s,r){const o=Ke(t,s),u=ps(i.visibleWrites,o);if(u!=null)return u;if(r.isCompleteForChild(s)){const h=Ni(i.visibleWrites,o);return pa(h,r.getNode().getImmediateChild(s))}else return null}function IC(i,t){return ps(i.visibleWrites,t)}function MC(i,t,s,r,o,u,h){let m;const g=Ni(i.visibleWrites,t),_=ps(g,je());if(_!=null)m=_;else if(s!=null)m=pa(g,s);else return[];if(m=m.withIndex(h),!m.isEmpty()&&!m.isLeafNode()){const y=[],b=h.getCompare(),S=u?m.getReverseIteratorFrom(r,h):m.getIteratorFrom(r,h);let w=S.getNext();for(;w&&y.length<o;)b(w,r)!==0&&y.push(w),w=S.getNext();return y}else return[]}function kC(){return{visibleWrites:ln.empty(),allWrites:[],lastWriteId:-1}}function ec(i,t,s,r){return x0(i.writeTree,i.treePath,t,s,r)}function fh(i,t){return jC(i.writeTree,i.treePath,t)}function Pv(i,t,s,r){return OC(i.writeTree,i.treePath,t,s,r)}function tc(i,t){return IC(i.writeTree,Ke(i.treePath,t))}function LC(i,t,s,r,o,u){return MC(i.writeTree,i.treePath,t,s,r,o,u)}function hh(i,t,s){return DC(i.writeTree,i.treePath,t,s)}function T0(i,t){return N0(Ke(i.treePath,t),i.writeTree)}function N0(i,t){return{treePath:i,writeTree:t}}class UC{constructor(){this.changeMap=new Map}trackChildChange(t){const s=t.type,r=t.childName;Y(s==="child_added"||s==="child_changed"||s==="child_removed","Only child changes supported for tracking"),Y(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if(s==="child_added"&&u==="child_removed")this.changeMap.set(r,Br(r,t.snapshotNode,o.snapshotNode));else if(s==="child_removed"&&u==="child_added")this.changeMap.delete(r);else if(s==="child_removed"&&u==="child_changed")this.changeMap.set(r,Pr(r,o.oldSnap));else if(s==="child_changed"&&u==="child_added")this.changeMap.set(r,ha(r,t.snapshotNode));else if(s==="child_changed"&&u==="child_changed")this.changeMap.set(r,Br(r,t.snapshotNode,o.oldSnap));else throw ya("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}class zC{getCompleteChild(t){return null}getChildAfterChild(t,s,r){return null}}const C0=new zC;class mh{constructor(t,s,r=null){this.writes_=t,this.viewCache_=s,this.optCompleteServerCache_=r}getCompleteChild(t){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(t))return s.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new Ai(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hh(this.writes_,t,r)}}getChildAfterChild(t,s,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:cs(this.viewCache_),u=LC(this.writes_,o,s,1,r,t);return u.length===0?null:u[0]}}function PC(i){return{filter:i}}function BC(i,t){Y(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Y(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function HC(i,t,s,r,o){const u=new UC;let h,m;if(s.type===an.OVERWRITE){const _=s;_.source.fromUser?h=wf(i,t,_.path,_.snap,r,o,u):(Y(_.source.fromServer,"Unknown source."),m=_.source.tagged||t.serverCache.isFiltered()&&!Ee(_.path),h=nc(i,t,_.path,_.snap,r,o,m,u))}else if(s.type===an.MERGE){const _=s;_.source.fromUser?h=FC(i,t,_.path,_.children,r,o,u):(Y(_.source.fromServer,"Unknown source."),m=_.source.tagged||t.serverCache.isFiltered(),h=Af(i,t,_.path,_.children,r,o,m,u))}else if(s.type===an.ACK_USER_WRITE){const _=s;_.revert?h=YC(i,t,_.path,r,o,u):h=qC(i,t,_.path,_.affectedTree,r,o,u)}else if(s.type===an.LISTEN_COMPLETE)h=VC(i,t,s.path,r,u);else throw ya("Unknown operation type: "+s.type);const g=u.getChanges();return GC(t,h,g),{viewCache:h,changes:g}}function GC(i,t,s){const r=t.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=Jo(i);(s.length>0||!i.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&s.push(v0(Jo(t)))}}function w0(i,t,s,r,o,u){const h=t.eventCache;if(tc(r,s)!=null)return t;{let m,g;if(Ee(s))if(Y(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const _=cs(t),y=_ instanceof fe?_:fe.EMPTY_NODE,b=fh(r,y);m=i.filter.updateFullNode(t.eventCache.getNode(),b,u)}else{const _=ec(r,cs(t));m=i.filter.updateFullNode(t.eventCache.getNode(),_,u)}else{const _=Ne(s);if(_===".priority"){Y(wi(s)===1,"Can't have a priority with additional path components");const y=h.getNode();g=t.serverCache.getNode();const b=Pv(r,s,y,g);b!=null?m=i.filter.updatePriority(y,b):m=h.getNode()}else{const y=Ge(s);let b;if(h.isCompleteForChild(_)){g=t.serverCache.getNode();const S=Pv(r,s,h.getNode(),g);S!=null?b=h.getNode().getImmediateChild(_).updateChild(y,S):b=h.getNode().getImmediateChild(_)}else b=hh(r,_,t.serverCache);b!=null?m=i.filter.updateChild(h.getNode(),_,b,y,o,u):m=h.getNode()}}return Or(t,m,h.isFullyInitialized()||Ee(s),i.filter.filtersNodes())}}function nc(i,t,s,r,o,u,h,m){const g=t.serverCache;let _;const y=h?i.filter:i.filter.getIndexedFilter();if(Ee(s))_=y.updateFullNode(g.getNode(),r,null);else if(y.filtersNodes()&&!g.isFiltered()){const w=g.getNode().updateChild(s,r);_=y.updateFullNode(g.getNode(),w,null)}else{const w=Ne(s);if(!g.isCompleteForPath(s)&&wi(s)>1)return t;const N=Ge(s),q=g.getNode().getImmediateChild(w).updateChild(N,r);w===".priority"?_=y.updatePriority(g.getNode(),q):_=y.updateChild(g.getNode(),w,q,N,C0,null)}const b=b0(t,_,g.isFullyInitialized()||Ee(s),y.filtersNodes()),S=new mh(o,b,u);return w0(i,b,s,o,S,m)}function wf(i,t,s,r,o,u,h){const m=t.eventCache;let g,_;const y=new mh(o,t,u);if(Ee(s))_=i.filter.updateFullNode(t.eventCache.getNode(),r,h),g=Or(t,_,!0,i.filter.filtersNodes());else{const b=Ne(s);if(b===".priority")_=i.filter.updatePriority(t.eventCache.getNode(),r),g=Or(t,_,m.isFullyInitialized(),m.isFiltered());else{const S=Ge(s),w=m.getNode().getImmediateChild(b);let N;if(Ee(S))N=r;else{const P=y.getCompleteChild(b);P!=null?sh(S)===".priority"&&P.getChild(u0(S)).isEmpty()?N=P:N=P.updateChild(S,r):N=fe.EMPTY_NODE}if(w.equals(N))g=t;else{const P=i.filter.updateChild(m.getNode(),b,N,S,y,h);g=Or(t,P,m.isFullyInitialized(),i.filter.filtersNodes())}}}return g}function Bv(i,t){return i.eventCache.isCompleteForChild(t)}function FC(i,t,s,r,o,u,h){let m=t;return r.foreach((g,_)=>{const y=Ke(s,g);Bv(t,Ne(y))&&(m=wf(i,m,y,_,o,u,h))}),r.foreach((g,_)=>{const y=Ke(s,g);Bv(t,Ne(y))||(m=wf(i,m,y,_,o,u,h))}),m}function Hv(i,t,s){return s.foreach((r,o)=>{t=t.updateChild(r,o)}),t}function Af(i,t,s,r,o,u,h,m){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,_;Ee(s)?_=r:_=new He(null).setTree(s,r);const y=t.serverCache.getNode();return _.children.inorderTraversal((b,S)=>{if(y.hasChild(b)){const w=t.serverCache.getNode().getImmediateChild(b),N=Hv(i,w,S);g=nc(i,g,new Pe(b),N,o,u,h,m)}}),_.children.inorderTraversal((b,S)=>{const w=!t.serverCache.isCompleteForChild(b)&&S.value===null;if(!y.hasChild(b)&&!w){const N=t.serverCache.getNode().getImmediateChild(b),P=Hv(i,N,S);g=nc(i,g,new Pe(b),P,o,u,h,m)}}),g}function qC(i,t,s,r,o,u,h){if(tc(o,s)!=null)return t;const m=t.serverCache.isFiltered(),g=t.serverCache;if(r.value!=null){if(Ee(s)&&g.isFullyInitialized()||g.isCompleteForPath(s))return nc(i,t,s,g.getNode().getChild(s),o,u,m,h);if(Ee(s)){let _=new He(null);return g.getNode().forEachChild(ra,(y,b)=>{_=_.set(new Pe(y),b)}),Af(i,t,s,_,o,u,m,h)}else return t}else{let _=new He(null);return r.foreach((y,b)=>{const S=Ke(s,y);g.isCompleteForPath(S)&&(_=_.set(y,g.getNode().getChild(S)))}),Af(i,t,s,_,o,u,m,h)}}function VC(i,t,s,r,o){const u=t.serverCache,h=b0(t,u.getNode(),u.isFullyInitialized()||Ee(s),u.isFiltered());return w0(i,h,s,r,C0,o)}function YC(i,t,s,r,o,u){let h;if(tc(r,s)!=null)return t;{const m=new mh(r,t,o),g=t.eventCache.getNode();let _;if(Ee(s)||Ne(s)===".priority"){let y;if(t.serverCache.isFullyInitialized())y=ec(r,cs(t));else{const b=t.serverCache.getNode();Y(b instanceof fe,"serverChildren would be complete if leaf node"),y=fh(r,b)}y=y,_=i.filter.updateFullNode(g,y,u)}else{const y=Ne(s);let b=hh(r,y,t.serverCache);b==null&&t.serverCache.isCompleteForChild(y)&&(b=g.getImmediateChild(y)),b!=null?_=i.filter.updateChild(g,y,b,Ge(s),m,u):t.eventCache.getNode().hasChild(y)?_=i.filter.updateChild(g,y,fe.EMPTY_NODE,Ge(s),m,u):_=g,_.isEmpty()&&t.serverCache.isFullyInitialized()&&(h=ec(r,cs(t)),h.isLeafNode()&&(_=i.filter.updateFullNode(_,h,u)))}return h=t.serverCache.isFullyInitialized()||tc(r,je())!=null,Or(t,_,h,i.filter.filtersNodes())}}class XC{constructor(t,s){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new lh(r.getIndex()),u=dC(r);this.processor_=PC(u);const h=s.serverCache,m=s.eventCache,g=o.updateFullNode(fe.EMPTY_NODE,h.getNode(),null),_=u.updateFullNode(fe.EMPTY_NODE,m.getNode(),null),y=new Ai(g,h.isFullyInitialized(),o.filtersNodes()),b=new Ai(_,m.isFullyInitialized(),u.filtersNodes());this.viewCache_=mc(b,y),this.eventGenerator_=new vC(this.query_)}get query(){return this.query_}}function KC(i){return i.viewCache_.serverCache.getNode()}function QC(i){return Jo(i.viewCache_)}function WC(i,t){const s=cs(i.viewCache_);return s&&(i.query._queryParams.loadsAllData()||!Ee(t)&&!s.getImmediateChild(Ne(t)).isEmpty())?s.getChild(t):null}function Gv(i){return i.eventRegistrations_.length===0}function $C(i,t){i.eventRegistrations_.push(t)}function Fv(i,t,s){const r=[];if(s){Y(t==null,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(u=>{const h=u.createCancelEvent(s,o);h&&r.push(h)})}if(t){let o=[];for(let u=0;u<i.eventRegistrations_.length;++u){const h=i.eventRegistrations_[u];if(!h.matches(t))o.push(h);else if(t.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(u+1));break}}i.eventRegistrations_=o}else i.eventRegistrations_=[];return r}function qv(i,t,s,r){t.type===an.MERGE&&t.source.queryId!==null&&(Y(cs(i.viewCache_),"We should always have a full cache before handling merges"),Y(Jo(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,u=HC(i.processor_,o,t,s,r);return BC(i.processor_,u.viewCache),Y(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=u.viewCache,A0(i,u.changes,u.viewCache.eventCache.getNode(),null)}function ZC(i,t){const s=i.viewCache_.eventCache,r=[];return s.getNode().isLeafNode()||s.getNode().forEachChild(Qe,(u,h)=>{r.push(ha(u,h))}),s.isFullyInitialized()&&r.push(v0(s.getNode())),A0(i,r,s.getNode(),t)}function A0(i,t,s,r){const o=r?[r]:i.eventRegistrations_;return yC(i.eventGenerator_,t,s,o)}let ic;class R0{constructor(){this.views=new Map}}function JC(i){Y(!ic,"__referenceConstructor has already been defined"),ic=i}function ew(){return Y(ic,"Reference.ts has not been loaded"),ic}function tw(i){return i.views.size===0}function ph(i,t,s,r){const o=t.source.queryId;if(o!==null){const u=i.views.get(o);return Y(u!=null,"SyncTree gave us an op for an invalid query."),qv(u,t,s,r)}else{let u=[];for(const h of i.views.values())u=u.concat(qv(h,t,s,r));return u}}function j0(i,t,s,r,o){const u=t._queryIdentifier,h=i.views.get(u);if(!h){let m=ec(s,o?r:null),g=!1;m?g=!0:r instanceof fe?(m=fh(s,r),g=!1):(m=fe.EMPTY_NODE,g=!1);const _=mc(new Ai(m,g,!1),new Ai(r,o,!1));return new XC(t,_)}return h}function nw(i,t,s,r,o,u){const h=j0(i,t,r,o,u);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,h),$C(h,s),ZC(h,s)}function iw(i,t,s,r){const o=t._queryIdentifier,u=[];let h=[];const m=Ri(i);if(o==="default")for(const[g,_]of i.views.entries())h=h.concat(Fv(_,s,r)),Gv(_)&&(i.views.delete(g),_.query._queryParams.loadsAllData()||u.push(_.query));else{const g=i.views.get(o);g&&(h=h.concat(Fv(g,s,r)),Gv(g)&&(i.views.delete(o),g.query._queryParams.loadsAllData()||u.push(g.query)))}return m&&!Ri(i)&&u.push(new(ew())(t._repo,t._path)),{removed:u,events:h}}function O0(i){const t=[];for(const s of i.views.values())s.query._queryParams.loadsAllData()||t.push(s);return t}function Ci(i,t){let s=null;for(const r of i.views.values())s=s||WC(r,t);return s}function D0(i,t){if(t._queryParams.loadsAllData())return gc(i);{const r=t._queryIdentifier;return i.views.get(r)}}function I0(i,t){return D0(i,t)!=null}function Ri(i){return gc(i)!=null}function gc(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let sc;function sw(i){Y(!sc,"__referenceConstructor has already been defined"),sc=i}function aw(){return Y(sc,"Reference.ts has not been loaded"),sc}let rw=1;class Vv{constructor(t){this.listenProvider_=t,this.syncPointTree_=new He(null),this.pendingWriteTree_=kC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function M0(i,t,s,r,o){return xC(i.pendingWriteTree_,t,s,r,o),o?Ta(i,new os(ch(),t,s)):[]}function lw(i,t,s,r){TC(i.pendingWriteTree_,t,s,r);const o=He.fromObject(s);return Ta(i,new ma(ch(),t,o))}function Si(i,t,s=!1){const r=NC(i.pendingWriteTree_,t);if(CC(i.pendingWriteTree_,t)){let u=new He(null);return r.snap!=null?u=u.set(je(),!0):gt(r.children,h=>{u=u.set(new Pe(h),!0)}),Ta(i,new Zo(r.path,u,s))}else return[]}function nl(i,t,s){return Ta(i,new os(uh(),t,s))}function ow(i,t,s){const r=He.fromObject(s);return Ta(i,new ma(uh(),t,r))}function cw(i,t){return Ta(i,new Gr(uh(),t))}function uw(i,t,s){const r=_h(i,s);if(r){const o=vh(r),u=o.path,h=o.queryId,m=bt(u,t),g=new Gr(dh(h),m);return yh(i,u,g)}else return[]}function k0(i,t,s,r,o=!1){const u=t._path,h=i.syncPointTree_.get(u);let m=[];if(h&&(t._queryIdentifier==="default"||I0(h,t))){const g=iw(h,t,s,r);tw(h)&&(i.syncPointTree_=i.syncPointTree_.remove(u));const _=g.removed;if(m=g.events,!o){const y=_.findIndex(S=>S._queryParams.loadsAllData())!==-1,b=i.syncPointTree_.findOnPath(u,(S,w)=>Ri(w));if(y&&!b){const S=i.syncPointTree_.subtree(u);if(!S.isEmpty()){const w=mw(S);for(let N=0;N<w.length;++N){const P=w[N],q=P.query,Z=P0(i,P);i.listenProvider_.startListening(Ir(q),Fr(i,q),Z.hashFn,Z.onComplete)}}}!b&&_.length>0&&!r&&(y?i.listenProvider_.stopListening(Ir(t),null):_.forEach(S=>{const w=i.queryToTagMap.get(_c(S));i.listenProvider_.stopListening(Ir(S),w)}))}pw(i,_)}return m}function L0(i,t,s,r){const o=_h(i,r);if(o!=null){const u=vh(o),h=u.path,m=u.queryId,g=bt(h,t),_=new os(dh(m),g,s);return yh(i,h,_)}else return[]}function dw(i,t,s,r){const o=_h(i,r);if(o){const u=vh(o),h=u.path,m=u.queryId,g=bt(h,t),_=He.fromObject(s),y=new ma(dh(m),g,_);return yh(i,h,y)}else return[]}function fw(i,t,s,r=!1){const o=t._path;let u=null,h=!1;i.syncPointTree_.foreachOnPath(o,(S,w)=>{const N=bt(S,o);u=u||Ci(w,N),h=h||Ri(w)});let m=i.syncPointTree_.get(o);m?(h=h||Ri(m),u=u||Ci(m,je())):(m=new R0,i.syncPointTree_=i.syncPointTree_.set(o,m));let g;u!=null?g=!0:(g=!1,u=fe.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((w,N)=>{const P=Ci(N,je());P&&(u=u.updateImmediateChild(w,P))}));const _=I0(m,t);if(!_&&!t._queryParams.loadsAllData()){const S=_c(t);Y(!i.queryToTagMap.has(S),"View does not exist, but we have a tag");const w=gw();i.queryToTagMap.set(S,w),i.tagToQueryMap.set(w,S)}const y=pc(i.pendingWriteTree_,o);let b=nw(m,t,s,y,u,g);if(!_&&!h&&!r){const S=D0(m,t);b=b.concat(_w(i,t,S))}return b}function gh(i,t,s){const o=i.pendingWriteTree_,u=i.syncPointTree_.findOnPath(t,(h,m)=>{const g=bt(h,t),_=Ci(m,g);if(_)return _});return x0(o,t,u,s,!0)}function hw(i,t){const s=t._path;let r=null;i.syncPointTree_.foreachOnPath(s,(_,y)=>{const b=bt(_,s);r=r||Ci(y,b)});let o=i.syncPointTree_.get(s);o?r=r||Ci(o,je()):(o=new R0,i.syncPointTree_=i.syncPointTree_.set(s,o));const u=r!=null,h=u?new Ai(r,!0,!1):null,m=pc(i.pendingWriteTree_,t._path),g=j0(o,t,m,u?h.getNode():fe.EMPTY_NODE,u);return QC(g)}function Ta(i,t){return U0(t,i.syncPointTree_,null,pc(i.pendingWriteTree_,je()))}function U0(i,t,s,r){if(Ee(i.path))return z0(i,t,s,r);{const o=t.get(je());s==null&&o!=null&&(s=Ci(o,je()));let u=[];const h=Ne(i.path),m=i.operationForChild(h),g=t.children.get(h);if(g&&m){const _=s?s.getImmediateChild(h):null,y=T0(r,h);u=u.concat(U0(m,g,_,y))}return o&&(u=u.concat(ph(o,i,r,s))),u}}function z0(i,t,s,r){const o=t.get(je());s==null&&o!=null&&(s=Ci(o,je()));let u=[];return t.children.inorderTraversal((h,m)=>{const g=s?s.getImmediateChild(h):null,_=T0(r,h),y=i.operationForChild(h);y&&(u=u.concat(z0(y,m,g,_)))}),o&&(u=u.concat(ph(o,i,r,s))),u}function P0(i,t){const s=t.query,r=Fr(i,s);return{hashFn:()=>(KC(t)||fe.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?uw(i,s._path,r):cw(i,s._path);{const u=cN(o,s);return k0(i,s,null,u)}}}}function Fr(i,t){const s=_c(t);return i.queryToTagMap.get(s)}function _c(i){return i._path.toString()+"$"+i._queryIdentifier}function _h(i,t){return i.tagToQueryMap.get(t)}function vh(i){const t=i.indexOf("$");return Y(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new Pe(i.substr(0,t))}}function yh(i,t,s){const r=i.syncPointTree_.get(t);Y(r,"Missing sync point for query tag that we're tracking");const o=pc(i.pendingWriteTree_,t);return ph(r,s,o,null)}function mw(i){return i.fold((t,s,r)=>{if(s&&Ri(s))return[gc(s)];{let o=[];return s&&(o=O0(s)),gt(r,(u,h)=>{o=o.concat(h)}),o}})}function Ir(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(aw())(i._repo,i._path):i}function pw(i,t){for(let s=0;s<t.length;++s){const r=t[s];if(!r._queryParams.loadsAllData()){const o=_c(r),u=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(u)}}}function gw(){return rw++}function _w(i,t,s){const r=t._path,o=Fr(i,t),u=P0(i,s),h=i.listenProvider_.startListening(Ir(t),o,u.hashFn,u.onComplete),m=i.syncPointTree_.subtree(r);if(o)Y(!Ri(m.value),"If we're adding a query, it shouldn't be shadowed");else{const g=m.fold((_,y,b)=>{if(!Ee(_)&&y&&Ri(y))return[gc(y).query];{let S=[];return y&&(S=S.concat(O0(y).map(w=>w.query))),gt(b,(w,N)=>{S=S.concat(N)}),S}});for(let _=0;_<g.length;++_){const y=g[_];i.listenProvider_.stopListening(Ir(y),Fr(i,y))}}return h}class bh{constructor(t){this.node_=t}getImmediateChild(t){const s=this.node_.getImmediateChild(t);return new bh(s)}node(){return this.node_}}class Sh{constructor(t,s){this.syncTree_=t,this.path_=s}getImmediateChild(t){const s=Ke(this.path_,t);return new Sh(this.syncTree_,s)}node(){return gh(this.syncTree_,this.path_)}}const vw=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},Yv=function(i,t,s){if(!i||typeof i!="object")return i;if(Y(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return yw(i[".sv"],t,s);if(typeof i[".sv"]=="object")return bw(i[".sv"],t);Y(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},yw=function(i,t,s){if(i==="timestamp")return s.timestamp;Y(!1,"Unexpected server value: "+i)},bw=function(i,t,s){i.hasOwnProperty("increment")||Y(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const r=i.increment;typeof r!="number"&&Y(!1,"Unexpected increment value: "+r);const o=t.node();if(Y(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const h=o.getValue();return typeof h!="number"?r:h+r},B0=function(i,t,s,r){return Eh(t,new Sh(s,i),r)},H0=function(i,t,s){return Eh(i,new bh(t),s)};function Eh(i,t,s){const r=i.getPriority().val(),o=Yv(r,t.getImmediateChild(".priority"),s);let u;if(i.isLeafNode()){const h=i,m=Yv(h.getValue(),t,s);return m!==h.getValue()||o!==h.getPriority().val()?new ot(m,st(o)):i}else{const h=i;return u=h,o!==h.getPriority().val()&&(u=u.updatePriority(new ot(o))),h.forEachChild(Qe,(m,g)=>{const _=Eh(g,t.getImmediateChild(m),s);_!==g&&(u=u.updateImmediateChild(m,_))}),u}}class xh{constructor(t="",s=null,r={children:{},childCount:0}){this.name=t,this.parent=s,this.node=r}}function Th(i,t){let s=t instanceof Pe?t:new Pe(t),r=i,o=Ne(s);for(;o!==null;){const u=ua(r.node.children,o)||{children:{},childCount:0};r=new xh(o,r,u),s=Ge(s),o=Ne(s)}return r}function Na(i){return i.node.value}function G0(i,t){i.node.value=t,Rf(i)}function F0(i){return i.node.childCount>0}function Sw(i){return Na(i)===void 0&&!F0(i)}function vc(i,t){gt(i.node.children,(s,r)=>{t(new xh(s,i,r))})}function q0(i,t,s,r){s&&t(i),vc(i,o=>{q0(o,t,!0)})}function Ew(i,t,s){let r=i.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function il(i){return new Pe(i.parent===null?i.name:il(i.parent)+"/"+i.name)}function Rf(i){i.parent!==null&&xw(i.parent,i.name,i)}function xw(i,t,s){const r=Sw(s),o=gn(i.node.children,t);r&&o?(delete i.node.children[t],i.node.childCount--,Rf(i)):!r&&!o&&(i.node.children[t]=s.node,i.node.childCount++,Rf(i))}const Tw=/[\[\].#$\/\u0000-\u001F\u007F]/,Nw=/[\[\].#$\u0000-\u001F\u007F]/,uf=10*1024*1024,Nh=function(i){return typeof i=="string"&&i.length!==0&&!Tw.test(i)},V0=function(i){return typeof i=="string"&&i.length!==0&&!Nw.test(i)},Cw=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),V0(i)},ww=function(i){return i===null||typeof i=="string"||typeof i=="number"&&!Jf(i)||i&&typeof i=="object"&&gn(i,".sv")},Aw=function(i,t,s,r){yc(dc(i,"value"),t,s)},yc=function(i,t,s){const r=s instanceof Pe?new FN(s,i):s;if(t===void 0)throw new Error(i+"contains undefined "+Zi(r));if(typeof t=="function")throw new Error(i+"contains a function "+Zi(r)+" with contents = "+t.toString());if(Jf(t))throw new Error(i+"contains "+t.toString()+" "+Zi(r));if(typeof t=="string"&&t.length>uf/3&&fc(t)>uf)throw new Error(i+"contains a string greater than "+uf+" utf8 bytes "+Zi(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,u=!1;if(gt(t,(h,m)=>{if(h===".value")o=!0;else if(h!==".priority"&&h!==".sv"&&(u=!0,!Nh(h)))throw new Error(i+" contains an invalid key ("+h+") "+Zi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);qN(r,h),yc(i,m,r),VN(r)}),o&&u)throw new Error(i+' contains ".value" child '+Zi(r)+" in addition to actual children.")}},Rw=function(i,t){let s,r;for(s=0;s<t.length;s++){r=t[s];const u=zr(r);for(let h=0;h<u.length;h++)if(!(u[h]===".priority"&&h===u.length-1)){if(!Nh(u[h]))throw new Error(i+"contains an invalid key ("+u[h]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(GN);let o=null;for(s=0;s<t.length;s++){if(r=t[s],o!==null&&Zt(o,r))throw new Error(i+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}},jw=function(i,t,s,r){const o=dc(i,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const u=[];gt(t,(h,m)=>{const g=new Pe(h);if(yc(o,m,Ke(s,g)),sh(g)===".priority"&&!ww(m))throw new Error(o+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(g)}),Rw(o,u)},Y0=function(i,t,s,r){if(!V0(s))throw new Error(dc(i,t)+'was an invalid path = "'+s+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Ow=function(i,t,s,r){s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Y0(i,t,s)},Dw=function(i,t){if(Ne(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},Iw=function(i,t){const s=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Nh(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||s.length!==0&&!Cw(s))throw new Error(dc(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class Mw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ch(i,t){let s=null;for(let r=0;r<t.length;r++){const o=t[r],u=o.getPath();s!==null&&!d0(u,s.path)&&(i.eventLists_.push(s),s=null),s===null&&(s={events:[],path:u}),s.events.push(o)}s&&i.eventLists_.push(s)}function Jt(i,t,s){Ch(i,s),kw(i,r=>Zt(r,t)||Zt(t,r))}function kw(i,t){i.recursionDepth_++;let s=!0;for(let r=0;r<i.eventLists_.length;r++){const o=i.eventLists_[r];if(o){const u=o.path;t(u)?(Lw(i.eventLists_[r]),i.eventLists_[r]=null):s=!1}}s&&(i.eventLists_=[]),i.recursionDepth_--}function Lw(i){for(let t=0;t<i.events.length;t++){const s=i.events[t];if(s!==null){i.events[t]=null;const r=s.getEventRunner();Rr&&pt("event: "+s.toString()),xa(r)}}}const Uw="repo_interrupt",zw=25;class Pw{constructor(t,s,r,o){this.repoInfo_=t,this.forceRestClient_=s,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$o(),this.transactionQueueTree_=new xh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Bw(i,t,s){if(i.stats_=nh(i.repoInfo_),i.forceRestClient_||hN())i.server_=new Wo(i.repoInfo_,(r,o,u,h)=>{Xv(i,r,o,u,h)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>Kv(i,!0),0);else{if(typeof s<"u"&&s!==null){if(typeof s!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{at(s)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new zn(i.repoInfo_,t,(r,o,u,h)=>{Xv(i,r,o,u,h)},r=>{Kv(i,r)},r=>{Gw(i,r)},i.authTokenProvider_,i.appCheckProvider_,s),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(r=>{i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(r=>{i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=vN(i.repoInfo_,()=>new _C(i.stats_,i.server_)),i.infoData_=new fC,i.infoSyncTree_=new Vv({startListening:(r,o,u,h)=>{let m=[];const g=i.infoData_.getNode(r._path);return g.isEmpty()||(m=nl(i.infoSyncTree_,r._path,g),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),wh(i,"connected",!1),i.serverSyncTree_=new Vv({startListening:(r,o,u,h)=>(i.server_.listen(r,u,o,(m,g)=>{const _=h(m,g);Jt(i.eventQueue_,r._path,_)}),[]),stopListening:(r,o)=>{i.server_.unlisten(r,o)}})}function Hw(i){const s=i.infoData_.getNode(new Pe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+s}function bc(i){return vw({timestamp:Hw(i)})}function Xv(i,t,s,r,o){i.dataUpdateCount++;const u=new Pe(t);s=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,s):s;let h=[];if(o)if(r){const g=Vo(s,_=>st(_));h=dw(i.serverSyncTree_,u,g,o)}else{const g=st(s);h=L0(i.serverSyncTree_,u,g,o)}else if(r){const g=Vo(s,_=>st(_));h=ow(i.serverSyncTree_,u,g)}else{const g=st(s);h=nl(i.serverSyncTree_,u,g)}let m=u;h.length>0&&(m=ga(i,u)),Jt(i.eventQueue_,m,h)}function Kv(i,t){wh(i,"connected",t),t===!1&&Yw(i)}function Gw(i,t){gt(t,(s,r)=>{wh(i,s,r)})}function wh(i,t,s){const r=new Pe("/.info/"+t),o=st(s);i.infoData_.updateSnapshot(r,o);const u=nl(i.infoSyncTree_,r,o);Jt(i.eventQueue_,r,u)}function Ah(i){return i.nextWriteId_++}function Fw(i,t,s){const r=hw(i.serverSyncTree_,t);return r!=null?Promise.resolve(r):i.server_.get(t).then(o=>{const u=st(o).withIndex(t._queryParams.getIndex());fw(i.serverSyncTree_,t,s,!0);let h;if(t._queryParams.loadsAllData())h=nl(i.serverSyncTree_,t._path,u);else{const m=Fr(i.serverSyncTree_,t);h=L0(i.serverSyncTree_,t._path,u,m)}return Jt(i.eventQueue_,t._path,h),k0(i.serverSyncTree_,t,s,null,!0),u},o=>(sl(i,"get for query "+at(t)+" failed: "+o),Promise.reject(new Error(o))))}function qw(i,t,s,r,o){sl(i,"set",{path:t.toString(),value:s,priority:r});const u=bc(i),h=st(s,r),m=gh(i.serverSyncTree_,t),g=H0(h,m,u),_=Ah(i),y=M0(i.serverSyncTree_,t,g,_,!0);Ch(i.eventQueue_,y),i.server_.put(t.toString(),h.val(!0),(S,w)=>{const N=S==="ok";N||St("set at "+t+" failed: "+S);const P=Si(i.serverSyncTree_,_,!N);Jt(i.eventQueue_,t,P),jf(i,o,S,w)});const b=jh(i,t);ga(i,b),Jt(i.eventQueue_,b,[])}function Vw(i,t,s,r){sl(i,"update",{path:t.toString(),value:s});let o=!0;const u=bc(i),h={};if(gt(s,(m,g)=>{o=!1,h[m]=B0(Ke(t,m),st(g),i.serverSyncTree_,u)}),o)pt("update() called with empty data.  Don't do anything."),jf(i,r,"ok",void 0);else{const m=Ah(i),g=lw(i.serverSyncTree_,t,h,m);Ch(i.eventQueue_,g),i.server_.merge(t.toString(),s,(_,y)=>{const b=_==="ok";b||St("update at "+t+" failed: "+_);const S=Si(i.serverSyncTree_,m,!b),w=S.length>0?ga(i,t):t;Jt(i.eventQueue_,w,S),jf(i,r,_,y)}),gt(s,_=>{const y=jh(i,Ke(t,_));ga(i,y)}),Jt(i.eventQueue_,t,[])}}function Yw(i){sl(i,"onDisconnectEvents");const t=bc(i),s=$o();xf(i.onDisconnect_,je(),(o,u)=>{const h=B0(o,u,i.serverSyncTree_,t);y0(s,o,h)});let r=[];xf(s,je(),(o,u)=>{r=r.concat(nl(i.serverSyncTree_,o,u));const h=jh(i,o);ga(i,h)}),i.onDisconnect_=$o(),Jt(i.eventQueue_,je(),r)}function Xw(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Uw)}function sl(i,...t){let s="";i.persistentConnection_&&(s=i.persistentConnection_.id+":"),pt(s,...t)}function jf(i,t,s,r){t&&xa(()=>{if(s==="ok")t(null);else{const o=(s||"error").toUpperCase();let u=o;r&&(u+=": "+r);const h=new Error(u);h.code=o,t(h)}})}function X0(i,t,s){return gh(i.serverSyncTree_,t,s)||fe.EMPTY_NODE}function Rh(i,t=i.transactionQueueTree_){if(t||Sc(i,t),Na(t)){const s=Q0(i,t);Y(s.length>0,"Sending zero length transaction queue"),s.every(o=>o.status===0)&&Kw(i,il(t),s)}else F0(t)&&vc(t,s=>{Rh(i,s)})}function Kw(i,t,s){const r=s.map(_=>_.currentWriteId),o=X0(i,t,r);let u=o;const h=o.hash();for(let _=0;_<s.length;_++){const y=s[_];Y(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const b=bt(t,y.path);u=u.updateChild(b,y.currentOutputSnapshotRaw)}const m=u.val(!0),g=t;i.server_.put(g.toString(),m,_=>{sl(i,"transaction put response",{path:g.toString(),status:_});let y=[];if(_==="ok"){const b=[];for(let S=0;S<s.length;S++)s[S].status=2,y=y.concat(Si(i.serverSyncTree_,s[S].currentWriteId)),s[S].onComplete&&b.push(()=>s[S].onComplete(null,!0,s[S].currentOutputSnapshotResolved)),s[S].unwatcher();Sc(i,Th(i.transactionQueueTree_,t)),Rh(i,i.transactionQueueTree_),Jt(i.eventQueue_,t,y);for(let S=0;S<b.length;S++)xa(b[S])}else{if(_==="datastale")for(let b=0;b<s.length;b++)s[b].status===3?s[b].status=4:s[b].status=0;else{St("transaction at "+g.toString()+" failed: "+_);for(let b=0;b<s.length;b++)s[b].status=4,s[b].abortReason=_}ga(i,t)}},h)}function ga(i,t){const s=K0(i,t),r=il(s),o=Q0(i,s);return Qw(i,o,r),r}function Qw(i,t,s){if(t.length===0)return;const r=[];let o=[];const h=t.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<t.length;m++){const g=t[m],_=bt(s,g.path);let y=!1,b;if(Y(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)y=!0,b=g.abortReason,o=o.concat(Si(i.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=zw)y=!0,b="maxretry",o=o.concat(Si(i.serverSyncTree_,g.currentWriteId,!0));else{const S=X0(i,g.path,h);g.currentInputSnapshot=S;const w=t[m].update(S.val());if(w!==void 0){yc("transaction failed: Data returned ",w,g.path);let N=st(w);typeof w=="object"&&w!=null&&gn(w,".priority")||(N=N.updatePriority(S.getPriority()));const q=g.currentWriteId,Z=bc(i),H=H0(N,S,Z);g.currentOutputSnapshotRaw=N,g.currentOutputSnapshotResolved=H,g.currentWriteId=Ah(i),h.splice(h.indexOf(q),1),o=o.concat(M0(i.serverSyncTree_,g.path,H,g.currentWriteId,g.applyLocally)),o=o.concat(Si(i.serverSyncTree_,q,!0))}else y=!0,b="nodata",o=o.concat(Si(i.serverSyncTree_,g.currentWriteId,!0))}Jt(i.eventQueue_,s,o),o=[],y&&(t[m].status=2,(function(S){setTimeout(S,Math.floor(0))})(t[m].unwatcher),t[m].onComplete&&(b==="nodata"?r.push(()=>t[m].onComplete(null,!1,t[m].currentInputSnapshot)):r.push(()=>t[m].onComplete(new Error(b),!1,null))))}Sc(i,i.transactionQueueTree_);for(let m=0;m<r.length;m++)xa(r[m]);Rh(i,i.transactionQueueTree_)}function K0(i,t){let s,r=i.transactionQueueTree_;for(s=Ne(t);s!==null&&Na(r)===void 0;)r=Th(r,s),t=Ge(t),s=Ne(t);return r}function Q0(i,t){const s=[];return W0(i,t,s),s.sort((r,o)=>r.order-o.order),s}function W0(i,t,s){const r=Na(t);if(r)for(let o=0;o<r.length;o++)s.push(r[o]);vc(t,o=>{W0(i,o,s)})}function Sc(i,t){const s=Na(t);if(s){let r=0;for(let o=0;o<s.length;o++)s[o].status!==2&&(s[r]=s[o],r++);s.length=r,G0(t,s.length>0?s:void 0)}vc(t,r=>{Sc(i,r)})}function jh(i,t){const s=il(K0(i,t)),r=Th(i.transactionQueueTree_,t);return Ew(r,o=>{df(i,o)}),df(i,r),q0(r,o=>{df(i,o)}),s}function df(i,t){const s=Na(t);if(s){const r=[];let o=[],u=-1;for(let h=0;h<s.length;h++)s[h].status===3||(s[h].status===1?(Y(u===h-1,"All SENT items should be at beginning of queue."),u=h,s[h].status=3,s[h].abortReason="set"):(Y(s[h].status===0,"Unexpected transaction status in abort"),s[h].unwatcher(),o=o.concat(Si(i.serverSyncTree_,s[h].currentWriteId,!0)),s[h].onComplete&&r.push(s[h].onComplete.bind(null,new Error("set"),!1,null))));u===-1?G0(t,void 0):s.length=u+1,Jt(i.eventQueue_,il(t),o);for(let h=0;h<r.length;h++)xa(r[h])}}function Ww(i){let t="";const s=i.split("/");for(let r=0;r<s.length;r++)if(s[r].length>0){let o=s[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function $w(i){const t={};i.charAt(0)==="?"&&(i=i.substring(1));for(const s of i.split("&")){if(s.length===0)continue;const r=s.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):St(`Invalid query segment '${s}' in query '${i}'`)}return t}const Qv=function(i,t){const s=Zw(i),r=s.namespace;s.domain==="firebase.com"&&Hn(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&s.domain!=="localhost"&&Hn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||sN();const o=s.scheme==="ws"||s.scheme==="wss";return{repoInfo:new t0(s.host,s.secure,r,o,t,"",r!==s.subdomain),path:new Pe(s.pathString)}},Zw=function(i){let t="",s="",r="",o="",u="",h=!0,m="https",g=443;if(typeof i=="string"){let _=i.indexOf("//");_>=0&&(m=i.substring(0,_-1),i=i.substring(_+2));let y=i.indexOf("/");y===-1&&(y=i.length);let b=i.indexOf("?");b===-1&&(b=i.length),t=i.substring(0,Math.min(y,b)),y<b&&(o=Ww(i.substring(y,b)));const S=$w(i.substring(Math.min(i.length,b)));_=t.indexOf(":"),_>=0?(h=m==="https"||m==="wss",g=parseInt(t.substring(_+1),10)):_=t.length;const w=t.slice(0,_);if(w.toLowerCase()==="localhost")s="localhost";else if(w.split(".").length<=2)s=w;else{const N=t.indexOf(".");r=t.substring(0,N).toLowerCase(),s=t.substring(N+1),u=r}"ns"in S&&(u=S.ns)}return{host:t,port:g,domain:s,subdomain:r,secure:h,scheme:m,pathString:o,namespace:u}};class Jw{constructor(t,s,r,o){this.eventType=t,this.eventRegistration=s,this.snapshot=r,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+at(this.snapshot.exportVal())}}class eA{constructor(t,s,r){this.eventRegistration=t,this.error=s,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class tA{constructor(t,s){this.snapshotCallback=t,this.cancelCallback=s}onValue(t,s){this.snapshotCallback.call(null,t,s)}onCancel(t){return Y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Oh{constructor(t,s,r,o){this._repo=t,this._path=s,this._queryParams=r,this._orderByCalled=o}get key(){return Ee(this._path)?null:sh(this._path)}get ref(){return new Fn(this._repo,this._path)}get _queryIdentifier(){const t=kv(this._queryParams),s=eh(t);return s==="{}"?"default":s}get _queryObject(){return kv(this._queryParams)}isEqual(t){if(t=vt(t),!(t instanceof Oh))return!1;const s=this._repo===t._repo,r=d0(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return s&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+HN(this._path)}}class Fn extends Oh{constructor(t,s){super(t,s,new oh,!1)}get parent(){const t=u0(this._path);return t===null?null:new Fn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class qr{constructor(t,s,r){this._node=t,this.ref=s,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const s=new Pe(t),r=Of(this.ref,t);return new qr(this._node.getChild(s),r,Qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>t(new qr(o,Of(this.ref,r),Qe)))}hasChild(t){const s=new Pe(t);return!this._node.getChild(s).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ts(i,t){return i=vt(i),i._checkNotDeleted("ref"),t!==void 0?Of(i._root,t):i._root}function Of(i,t){return i=vt(i),Ne(i._path)===null?Ow("child","path",t):Y0("child","path",t),new Fn(i._repo,Ke(i._path,t))}function Df(i,t){i=vt(i),Dw("set",i._path),Aw("set",t,i._path);const s=new $r;return qw(i._repo,i._path,t,null,s.wrapCallback(()=>{})),s.promise}function nA(i,t){jw("update",t,i._path);const s=new $r;return Vw(i._repo,i._path,t,s.wrapCallback(()=>{})),s.promise}function Vr(i){i=vt(i);const t=new tA(()=>{}),s=new Dh(t);return Fw(i._repo,i,s).then(r=>new qr(r,new Fn(i._repo,i._path),i._queryParams.getIndex()))}class Dh{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,s){const r=s._queryParams.getIndex();return new Jw("value",this,new qr(t.snapshotNode,new Fn(s._repo,s._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,s){return this.callbackContext.hasCancelCallback?new eA(this,t,s):null}matches(t){return t instanceof Dh?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}JC(Fn);sw(Fn);const iA="FIREBASE_DATABASE_EMULATOR_HOST",If={};let sA=!1;function aA(i,t,s,r){const o=t.lastIndexOf(":"),u=t.substring(0,o),h=ba(u);i.repoInfo_=new t0(t,h,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,s),r&&(i.authTokenProvider_=r)}function rA(i,t,s,r,o){let u=r||i.options.databaseURL;u===void 0&&(i.options.projectId||Hn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pt("Using default host for project ",i.options.projectId),u=`${i.options.projectId}-default-rtdb.firebaseio.com`);let h=Qv(u,o),m=h.repoInfo,g;typeof process<"u"&&_v&&(g=_v[iA]),g?(u=`http://${g}?ns=${m.namespace}`,h=Qv(u,o),m=h.repoInfo):h.repoInfo.secure;const _=new pN(i.name,i.options,t);Iw("Invalid Firebase Database URL",h),Ee(h.path)||Hn("Database URL must point to the root of a Firebase Database (not including a child path).");const y=oA(m,i,_,new mN(i,s));return new cA(y,i)}function lA(i,t){const s=If[t];(!s||s[i.key]!==i)&&Hn(`Database ${t}(${i.repoInfo_}) has already been deleted.`),Xw(i),delete s[i.key]}function oA(i,t,s,r){let o=If[t.name];o||(o={},If[t.name]=o);let u=o[i.toURLString()];return u&&Hn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new Pw(i,sA,s,r),o[i.toURLString()]=u,u}class cA{constructor(t,s){this._repoInternal=t,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Bw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fn(this._repo,je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(lA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Hn("Cannot call "+t+" on a deleted database.")}}function uA(i=zy(),t){const s=Zf(i,"database").getImmediate({identifier:t});if(!s._instanceStarted){const r=T1("database");r&&dA(s,...r)}return s}function dA(i,t,s,r={}){i=vt(i),i._checkNotDeleted("useEmulator");const o=`${t}:${s}`,u=i._repoInternal;if(i._instanceStarted){if(o===i._repoInternal.repoInfo_.host&&as(r,u.repoInfo_.emulatorOptions))return;Hn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let h;if(u.repoInfo_.nodeAdmin)r.mockUserToken&&Hn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),h=new Uo(Uo.OWNER);else if(r.mockUserToken){const m=typeof r.mockUserToken=="string"?r.mockUserToken:N1(r.mockUserToken,i.app.options.projectId);h=new Uo(m)}ba(t)&&(Oy(t),Dy("Database",!0)),aA(u,o,r,h)}function fA(i){ZT(Ea),da(new rs("database",(t,{instanceIdentifier:s})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),u=t.getProvider("app-check-internal");return rA(r,o,u,s)},"PUBLIC").setMultipleInstances(!0)),Ti(vv,yv,i),Ti(vv,yv,"esm2020")}zn.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};zn.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};fA();var hA="firebase",mA="12.9.0";Ti(hA,mA,"app");function $0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pA=$0,Z0=new Zr("auth","Firebase",$0());const ac=new Wf("@firebase/auth");function gA(i,...t){ac.logLevel<=ze.WARN&&ac.warn(`Auth (${Ea}): ${i}`,...t)}function zo(i,...t){ac.logLevel<=ze.ERROR&&ac.error(`Auth (${Ea}): ${i}`,...t)}function on(i,...t){throw Ih(i,...t)}function mn(i,...t){return Ih(i,...t)}function J0(i,t,s){const r={...pA(),[t]:s};return new Zr("auth","Firebase",r).create(t,{appName:i.name})}function Pn(i){return J0(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ih(i,...t){if(typeof i!="string"){const s=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(s,...r)}return Z0.create(i,...t)}function de(i,t,...s){if(!i)throw Ih(t,...s)}function Ln(i){const t="INTERNAL ASSERTION FAILED: "+i;throw zo(t),new Error(t)}function Gn(i,t){i||Ln(t)}function Mf(){return typeof self<"u"&&self.location?.href||""}function _A(){return Wv()==="http:"||Wv()==="https:"}function Wv(){return typeof self<"u"&&self.location?.protocol||null}function vA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_A()||R1()||"connection"in navigator)?navigator.onLine:!0}function yA(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class al{constructor(t,s){this.shortDelay=t,this.longDelay=s,Gn(s>t,"Short delay should be less than long delay!"),this.isMobile=Qf()||Iy()}get(){return vA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mh(i,t){Gn(i.emulator,"Emulator should always be set here");const{url:s}=i.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}class eb{static initialize(t,s,r){this.fetchImpl=t,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const SA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EA=new al(3e4,6e4);function Oi(i,t){return i.tenantId&&!t.tenantId?{...t,tenantId:i.tenantId}:t}async function qn(i,t,s,r,o={}){return tb(i,o,async()=>{let u={},h={};r&&(t==="GET"?h=r:u={body:JSON.stringify(r)});const m=Sa({key:i.config.apiKey,...h}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const _={method:t,headers:g,...u};return A1()||(_.referrerPolicy="no-referrer"),i.emulatorConfig&&ba(i.emulatorConfig.host)&&(_.credentials="include"),eb.fetch()(await nb(i,i.config.apiHost,s,m),_)})}async function tb(i,t,s){i._canInitEmulator=!1;const r={...bA,...t};try{const o=new TA(i),u=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Mo(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mo(i,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Mo(i,"email-already-in-use",h);if(g==="USER_DISABLED")throw Mo(i,"user-disabled",h);const y=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw J0(i,y,_);on(i,y)}}catch(o){if(o instanceof ji)throw o;on(i,"network-request-failed",{message:String(o)})}}async function rl(i,t,s,r,o={}){const u=await qn(i,t,s,r,o);return"mfaPendingCredential"in u&&on(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function nb(i,t,s,r){const o=`${t}${s}?${r}`,u=i,h=u.config.emulator?Mh(i.config,o):`${i.config.apiScheme}://${o}`;return SA.includes(s)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function xA(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(mn(this.auth,"network-request-failed")),EA.get())})}}function Mo(i,t,s){const r={appName:i.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const o=mn(i,t,r);return o.customData._tokenResponse=s,o}function $v(i){return i!==void 0&&i.enterprise!==void 0}class NA{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===t)return xA(s.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function CA(i,t){return qn(i,"GET","/v2/recaptchaConfig",Oi(i,t))}async function wA(i,t){return qn(i,"POST","/v1/accounts:delete",t)}async function rc(i,t){return qn(i,"POST","/v1/accounts:lookup",t)}function Mr(i){if(i)try{const t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function AA(i,t=!1){const s=vt(i),r=await s.getIdToken(t),o=kh(r);de(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:r,authTime:Mr(ff(o.auth_time)),issuedAtTime:Mr(ff(o.iat)),expirationTime:Mr(ff(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ff(i){return Number(i)*1e3}function kh(i){const[t,s,r]=i.split(".");if(t===void 0||s===void 0||r===void 0)return zo("JWT malformed, contained fewer than 3 sections"),null;try{const o=qo(s);return o?JSON.parse(o):(zo("Failed to decode base64 JWT payload"),null)}catch(o){return zo("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Zv(i){const t=kh(i);return de(t,"internal-error"),de(typeof t.exp<"u","internal-error"),de(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function _a(i,t,s=!1){if(s)return t;try{return await t}catch(r){throw r instanceof ji&&RA(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function RA({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class jA{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const s=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class kf{constructor(t,s){this.createdAt=t,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mr(this.lastLoginAt),this.creationTime=Mr(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function lc(i){const t=i.auth,s=await i.getIdToken(),r=await _a(i,rc(t,{idToken:s}));de(r?.users.length,t,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?ib(o.providerUserInfo):[],h=DA(i.providerData,u),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!h?.length,_=m?g:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new kf(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(i,y)}async function OA(i){const t=vt(i);await lc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function DA(i,t){return[...i.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function ib(i){return i.map(({providerId:t,...s})=>({providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}async function IA(i,t){const s=await tb(i,{},async()=>{const r=Sa({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await nb(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return i.emulatorConfig&&ba(i.emulatorConfig.host)&&(g.credentials="include"),eb.fetch()(h,g)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function MA(i,t){return qn(i,"POST","/v2/accounts:revokeToken",Oi(i,t))}class la{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){de(t.idToken,"internal-error"),de(typeof t.idToken<"u","internal-error"),de(typeof t.refreshToken<"u","internal-error");const s="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Zv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,s)}updateFromIdToken(t){de(t.length!==0,"internal-error");const s=Zv(t);this.updateTokensAndExpiration(t,null,s)}async getToken(t,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,s){const{accessToken:r,refreshToken:o,expiresIn:u}=await IA(t,s);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,s,r){this.refreshToken=s||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,s){const{refreshToken:r,accessToken:o,expirationTime:u}=s,h=new la;return r&&(de(typeof r=="string","internal-error",{appName:t}),h.refreshToken=r),o&&(de(typeof o=="string","internal-error",{appName:t}),h.accessToken=o),u&&(de(typeof u=="number","internal-error",{appName:t}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new la,this.toJSON())}_performRefresh(){return Ln("not implemented")}}function gi(i,t){de(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}class rn{constructor({uid:t,auth:s,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new jA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new kf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const s=await _a(this,this.stsTokenManager.getToken(this.auth,t));return de(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(t){return AA(this,t)}reload(){return OA(this)}_assign(t){this!==t&&(de(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(s=>({...s})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const s=new rn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(t){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,s=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),s&&await lc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(Pn(this.auth));const t=await this.getIdToken();return await _a(this,wA(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,s){const r=s.displayName??void 0,o=s.email??void 0,u=s.phoneNumber??void 0,h=s.photoURL??void 0,m=s.tenantId??void 0,g=s._redirectEventId??void 0,_=s.createdAt??void 0,y=s.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:w,providerData:N,stsTokenManager:P}=s;de(b&&P,t,"internal-error");const q=la.fromJSON(this.name,P);de(typeof b=="string",t,"internal-error"),gi(r,t.name),gi(o,t.name),de(typeof S=="boolean",t,"internal-error"),de(typeof w=="boolean",t,"internal-error"),gi(u,t.name),gi(h,t.name),gi(m,t.name),gi(g,t.name),gi(_,t.name),gi(y,t.name);const Z=new rn({uid:b,auth:t,email:o,emailVerified:S,displayName:r,isAnonymous:w,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:q,createdAt:_,lastLoginAt:y});return N&&Array.isArray(N)&&(Z.providerData=N.map(H=>({...H}))),g&&(Z._redirectEventId=g),Z}static async _fromIdTokenResponse(t,s,r=!1){const o=new la;o.updateFromServerResponse(s);const u=new rn({uid:s.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await lc(u),u}static async _fromGetAccountInfoResponse(t,s,r){const o=s.users[0];de(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?ib(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new la;m.updateFromIdToken(r);const g=new rn({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new kf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,_),g}}const Jv=new Map;function Un(i){Gn(i instanceof Function,"Expected a class definition");let t=Jv.get(i);return t?(Gn(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,Jv.set(i,t),t)}class sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,s){this.storage[t]=s}async _get(t){const s=this.storage[t];return s===void 0?null:s}async _remove(t){delete this.storage[t]}_addListener(t,s){}_removeListener(t,s){}}sb.type="NONE";const ey=sb;function Po(i,t,s){return`firebase:${i}:${t}:${s}`}class oa{constructor(t,s,r){this.persistence=t,this.auth=s,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Po(this.userKey,o.apiKey,u),this.fullPersistenceKey=Po("persistence",o.apiKey,u),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const s=await rc(this.auth,{idToken:t}).catch(()=>{});return s?rn._fromGetAccountInfoResponse(this.auth,s,t):null}return rn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,s,r="authUser"){if(!s.length)return new oa(Un(ey),t,r);const o=(await Promise.all(s.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||Un(ey);const h=Po(r,t.config.apiKey,t.name);let m=null;for(const _ of s)try{const y=await _._get(h);if(y){let b;if(typeof y=="string"){const S=await rc(t,{idToken:y}).catch(()=>{});if(!S)break;b=await rn._fromGetAccountInfoResponse(t,S,y)}else b=rn._fromJSON(t,y);_!==u&&(m=b),u=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new oa(u,t,r):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(s.map(async _=>{if(_!==u)try{await _._remove(h)}catch{}})),new oa(u,t,r))}}function ty(i){const t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ob(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ab(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ub(t))return"Blackberry";if(db(t))return"Webos";if(rb(t))return"Safari";if((t.includes("chrome/")||lb(t))&&!t.includes("edge/"))return"Chrome";if(cb(t))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(s);if(r?.length===2)return r[1]}return"Other"}function ab(i=Et()){return/firefox\//i.test(i)}function rb(i=Et()){const t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function lb(i=Et()){return/crios\//i.test(i)}function ob(i=Et()){return/iemobile/i.test(i)}function cb(i=Et()){return/android/i.test(i)}function ub(i=Et()){return/blackberry/i.test(i)}function db(i=Et()){return/webos/i.test(i)}function Lh(i=Et()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function kA(i=Et()){return Lh(i)&&!!window.navigator?.standalone}function LA(){return j1()&&document.documentMode===10}function fb(i=Et()){return Lh(i)||cb(i)||db(i)||ub(i)||/windows phone/i.test(i)||ob(i)}function hb(i,t=[]){let s;switch(i){case"Browser":s=ty(Et());break;case"Worker":s=`${ty(Et())}-${i}`;break;default:s=i}const r=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${Ea}/${r}`}class UA{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,s){const r=u=>new Promise((h,m)=>{try{const g=t(u);h(g)}catch(g){m(g)}});r.onAbort=s,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const s=[];try{for(const r of this.queue)await r(t),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function zA(i,t={}){return qn(i,"GET","/v2/passwordPolicy",Oi(i,t))}const PA=6;class BA{constructor(t){const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??PA,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,s),this.validatePasswordCharacterOptions(t,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(t,s){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=t.length>=r),o&&(s.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,s,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class HA{constructor(t,s,r,o){this.app=t,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ny(this),this.idTokenSubscription=new ny(this),this.beforeStateQueue=new UA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,s){return s&&(this._popupRedirectResolver=Un(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await oa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const s=await rc(this,{idToken:t}),r=await rn._fromGetAccountInfoResponse(this,s,t);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if($t(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=r?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===h)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(t){try{await lc(t)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=yA()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if($t(this.app))return Promise.reject(Pn(this));const s=t?vt(t):null;return s&&de(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(t,s=!1){if(!this._deleted)return t&&de(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(Pn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return $t(this.app)?Promise.reject(Pn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await zA(this),s=new BA(t);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Zr("auth","Firebase",t())}onAuthStateChanged(t,s,r){return this.registerStateListener(this.authStateSubscription,t,s,r)}beforeAuthStateChanged(t,s){return this.beforeStateQueue.pushCallback(t,s)}onIdTokenChanged(t,s,r){return this.registerStateListener(this.idTokenSubscription,t,s,r)}authStateReady(){return new Promise((t,s)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},s)}})}async revokeAccessToken(t){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await MA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,s){const r=await this.getOrInitRedirectPersistenceManager(s);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const s=t&&Un(t)||this._popupRedirectResolver;de(s,this,"argument-error"),this.redirectPersistenceManager=await oa.create(this,[Un(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,s,r,o){if(this._deleted)return()=>{};const u=typeof s=="function"?s:s.next.bind(s);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof s=="function"){const g=t.addObserver(s,r,o);return()=>{h=!0,g()}}else{const g=t.addObserver(s);return()=>{h=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=hb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(t["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&gA(`Error while retrieving App Check token: ${t.error}`),t?.token}}function gs(i){return vt(i)}class ny{constructor(t){this.auth=t,this.observer=null,this.addObserver=B1(s=>this.observer=s)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ec={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GA(i){Ec=i}function mb(i){return Ec.loadJS(i)}function FA(){return Ec.recaptchaEnterpriseScript}function qA(){return Ec.gapiScript}function VA(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class YA{constructor(){this.enterprise=new XA}ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}class XA{ready(t){t()}execute(t,s){return Promise.resolve("token")}render(t,s){return""}}const KA="recaptcha-enterprise",pb="NO_RECAPTCHA";class QA{constructor(t){this.type=KA,this.auth=gs(t)}async verify(t="verify",s=!1){async function r(u){if(!s){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{CA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new NA(g);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,h(_.siteKey)}}).catch(g=>{m(g)})})}function o(u,h,m){const g=window.grecaptcha;$v(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:t}).then(_=>{h(_)}).catch(()=>{h(pb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YA().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{r(this.auth).then(m=>{if(!s&&$v(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=FA();g.length!==0&&(g+=m),mb(g).then(()=>{o(m,u,h)}).catch(_=>{h(_)})}}).catch(m=>{h(m)})})}}async function iy(i,t,s,r=!1,o=!1){const u=new QA(i);let h;if(o)h=pb;else try{h=await u.verify(s)}catch{h=await u.verify(s,!0)}const m={...t};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Lf(i,t,s,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await iy(i,t,s,s==="getOobCode");return r(i,u)}else return r(i,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await iy(i,t,s,s==="getOobCode");return r(i,h)}else return Promise.reject(u)})}function WA(i,t){const s=Zf(i,"auth");if(s.isInitialized()){const o=s.getImmediate(),u=s.getOptions();if(as(u,t??{}))return o;on(o,"already-initialized")}return s.initialize({options:t})}function $A(i,t){const s=t?.persistence||[],r=(Array.isArray(s)?s:[s]).map(Un);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(r,t?.popupRedirectResolver)}function ZA(i,t,s){const r=gs(i);de(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=gb(t),{host:h,port:m}=JA(t),g=m===null?"":`:${m}`,_={url:`${u}//${h}${g}/`},y=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(as(_,r.config.emulator)&&as(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,ba(h)?(Oy(`${u}//${h}${g}`),Dy("Auth",!0)):eR()}function gb(i){const t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function JA(i){const t=gb(i),s=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:sy(r.substr(u.length+1))}}else{const[u,h]=r.split(":");return{host:u,port:sy(h)}}}function sy(i){if(!i)return null;const t=Number(i);return isNaN(t)?null:t}function eR(){function i(){const t=document.createElement("p"),s=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Uh{constructor(t,s){this.providerId=t,this.signInMethod=s}toJSON(){return Ln("not implemented")}_getIdTokenResponse(t){return Ln("not implemented")}_linkToIdToken(t,s){return Ln("not implemented")}_getReauthenticationResolver(t){return Ln("not implemented")}}async function tR(i,t){return qn(i,"POST","/v1/accounts:signUp",t)}async function nR(i,t){return rl(i,"POST","/v1/accounts:signInWithPassword",Oi(i,t))}async function iR(i,t){return rl(i,"POST","/v1/accounts:signInWithEmailLink",Oi(i,t))}async function sR(i,t){return rl(i,"POST","/v1/accounts:signInWithEmailLink",Oi(i,t))}class Yr extends Uh{constructor(t,s,r,o=null){super("password",r),this._email=t,this._password=s,this._tenantId=o}static _fromEmailAndPassword(t,s){return new Yr(t,s,"password")}static _fromEmailAndCode(t,s,r=null){return new Yr(t,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lf(t,s,"signInWithPassword",nR);case"emailLink":return iR(t,{email:this._email,oobCode:this._password});default:on(t,"internal-error")}}async _linkToIdToken(t,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lf(t,r,"signUpPassword",tR);case"emailLink":return sR(t,{idToken:s,email:this._email,oobCode:this._password});default:on(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function ca(i,t){return rl(i,"POST","/v1/accounts:signInWithIdp",Oi(i,t))}const aR="http://localhost";class us extends Uh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const s=new us(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(s.idToken=t.idToken),t.accessToken&&(s.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(s.nonce=t.nonce),t.pendingToken&&(s.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(s.accessToken=t.oauthToken,s.secret=t.oauthTokenSecret):on("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...u}=s;if(!r||!o)return null;const h=new us(r,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(t){const s=this.buildRequest();return ca(t,s)}_linkToIdToken(t,s){const r=this.buildRequest();return r.idToken=s,ca(t,r)}_getReauthenticationResolver(t){const s=this.buildRequest();return s.autoCreate=!1,ca(t,s)}buildRequest(){const t={requestUri:aR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),t.postBody=Sa(s)}return t}}function rR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lR(i){const t=Cr(wr(i)).link,s=t?Cr(wr(t)).deep_link_id:null,r=Cr(wr(i)).deep_link_id;return(r?Cr(wr(r)).link:null)||r||s||t||i}class zh{constructor(t){const s=Cr(wr(t)),r=s.apiKey??null,o=s.oobCode??null,u=rR(s.mode??null);de(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(t){const s=lR(t);try{return new zh(s)}catch{return null}}}class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(t,s){return Yr._fromEmailAndPassword(t,s)}static credentialWithLink(t,s){const r=zh.parseLink(s);return de(r,"argument-error"),Yr._fromEmailAndCode(t,r.code,r.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _b{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class ll extends _b{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class _i extends ll{constructor(){super("facebook.com")}static credential(t){return us._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _i.credentialFromTaggedObject(t)}static credentialFromError(t){return _i.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _i.credential(t.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";class vi extends ll{constructor(){super("google.com"),this.addScope("profile")}static credential(t,s){return us._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:s})}static credentialFromResult(t){return vi.credentialFromTaggedObject(t)}static credentialFromError(t){return vi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:s,oauthAccessToken:r}=t;if(!s&&!r)return null;try{return vi.credential(s,r)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";class yi extends ll{constructor(){super("github.com")}static credential(t){return us._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return yi.credentialFromTaggedObject(t)}static credentialFromError(t){return yi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return yi.credential(t.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";class bi extends ll{constructor(){super("twitter.com")}static credential(t,s){return us._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:s})}static credentialFromResult(t){return bi.credentialFromTaggedObject(t)}static credentialFromError(t){return bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=t;if(!s||!r)return null;try{return bi.credential(s,r)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";async function oR(i,t){return rl(i,"POST","/v1/accounts:signUp",Oi(i,t))}class ds{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,s,r,o=!1){const u=await rn._fromIdTokenResponse(t,r,o),h=ay(r);return new ds({user:u,providerId:h,_tokenResponse:r,operationType:s})}static async _forOperation(t,s,r){await t._updateTokensIfNecessary(r,!0);const o=ay(r);return new ds({user:t,providerId:o,_tokenResponse:r,operationType:s})}}function ay(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class oc extends ji{constructor(t,s,r,o){super(s.code,s.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,oc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,s,r,o){return new oc(t,s,r,o)}}function vb(i,t,s,r){return(t==="reauthenticate"?s._getReauthenticationResolver(i):s._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?oc._fromErrorAndOperation(i,u,t,r):u})}async function cR(i,t,s=!1){const r=await _a(i,t._linkToIdToken(i.auth,await i.getIdToken()),s);return ds._forOperation(i,"link",r)}async function uR(i,t,s=!1){const{auth:r}=i;if($t(r.app))return Promise.reject(Pn(r));const o="reauthenticate";try{const u=await _a(i,vb(r,o,t,i),s);de(u.idToken,r,"internal-error");const h=kh(u.idToken);de(h,r,"internal-error");const{sub:m}=h;return de(i.uid===m,r,"user-mismatch"),ds._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&on(r,"user-mismatch"),u}}async function yb(i,t,s=!1){if($t(i.app))return Promise.reject(Pn(i));const r="signIn",o=await vb(i,r,t),u=await ds._fromIdTokenResponse(i,r,o);return s||await i._updateCurrentUser(u.user),u}async function dR(i,t){return yb(gs(i),t)}async function bb(i){const t=gs(i);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function fR(i,t,s){if($t(i.app))return Promise.reject(Pn(i));const r=gs(i),h=await Lf(r,{returnSecureToken:!0,email:t,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&bb(i),g}),m=await ds._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(m.user),m}function hR(i,t,s){return $t(i.app)?Promise.reject(Pn(i)):dR(vt(i),Ca.credential(t,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bb(i),r})}async function mR(i,t){return qn(i,"POST","/v1/accounts:update",t)}async function pR(i,{displayName:t,photoURL:s}){if(t===void 0&&s===void 0)return;const r=vt(i),u={idToken:await r.getIdToken(),displayName:t,photoUrl:s,returnSecureToken:!0},h=await _a(r,mR(r.auth,u));r.displayName=h.displayName||null,r.photoURL=h.photoUrl||null;const m=r.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(h)}function gR(i,t,s,r){return vt(i).onIdTokenChanged(t,s,r)}function _R(i,t,s){return vt(i).beforeAuthStateChanged(t,s)}function vR(i,t,s,r){return vt(i).onAuthStateChanged(t,s,r)}function yR(i){return vt(i).signOut()}const cc="__sak";class Sb{constructor(t,s){this.storageRetriever=t,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(cc,"1"),this.storage.removeItem(cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,s){return this.storage.setItem(t,JSON.stringify(s)),Promise.resolve()}_get(t){const s=this.storage.getItem(t);return Promise.resolve(s?JSON.parse(s):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const bR=1e3,SR=10;class Eb extends Sb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,s)=>this.onStorageEvent(t,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),o=this.localCache[s];r!==o&&t(s,o,r)}}onStorageEvent(t,s=!1){if(!t.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const r=t.key;s?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!s&&this.localCache[r]===h||this.notifyListeners(r,h)},u=this.storage.getItem(r);LA()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,SR):o()}notifyListeners(t,s){this.localCache[t]=s;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:s,newValue:r}),!0)})},bR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,s){await super._set(t,s),this.localCache[t]=JSON.stringify(s)}async _get(t){const s=await super._get(t);return this.localCache[t]=JSON.stringify(s),s}async _remove(t){await super._remove(t),delete this.localCache[t]}}Eb.type="LOCAL";const ER=Eb;class xb extends Sb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,s){}_removeListener(t,s){}}xb.type="SESSION";const Tb=xb;function xR(i){return Promise.all(i.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(s){return{fulfilled:!1,reason:s}}}))}class xc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const s=this.receivers.find(o=>o.isListeningto(t));if(s)return s;const r=new xc(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const s=t,{eventId:r,eventType:o,data:u}=s.data,h=this.handlersMap[o];if(!h?.size)return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(h).map(async _=>_(s.origin,u)),g=await xR(m);s.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(s)}_unsubscribe(t,s){this.handlersMap[t]&&s&&this.handlersMap[t].delete(s),(!s||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xc.receivers=[];function Ph(i="",t=10){let s="";for(let r=0;r<t;r++)s+=Math.floor(Math.random()*10);return i+s}class TR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,s,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const _=Ph("",20);o.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(b){const S=b;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(y),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(y),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:t,eventId:_,data:s},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function pn(){return window}function NR(i){pn().location.href=i}function Nb(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}async function CR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wR(){return navigator?.serviceWorker?.controller||null}function AR(){return Nb()?self:null}const Cb="firebaseLocalStorageDb",RR=1,uc="firebaseLocalStorage",wb="fbase_key";class ol{constructor(t){this.request=t}toPromise(){return new Promise((t,s)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Tc(i,t){return i.transaction([uc],t?"readwrite":"readonly").objectStore(uc)}function jR(){const i=indexedDB.deleteDatabase(Cb);return new ol(i).toPromise()}function Uf(){const i=indexedDB.open(Cb,RR);return new Promise((t,s)=>{i.addEventListener("error",()=>{s(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(uc,{keyPath:wb})}catch(o){s(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(uc)?t(r):(r.close(),await jR(),t(await Uf()))})})}async function ry(i,t,s){const r=Tc(i,!0).put({[wb]:t,value:s});return new ol(r).toPromise()}async function OR(i,t){const s=Tc(i,!1).get(t),r=await new ol(s).toPromise();return r===void 0?null:r.value}function ly(i,t){const s=Tc(i,!0).delete(t);return new ol(s).toPromise()}const DR=800,IR=3;class Ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uf(),this.db)}async _withRetries(t){let s=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(s++>IR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xc._getInstance(AR()),this.receiver._subscribe("keyChanged",async(t,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(t,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await CR(),!this.activeServiceWorker)return;this.sender=new TR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||wR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Uf();return await ry(t,cc,"1"),await ly(t,cc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>ry(r,t,s)),this.localCache[t]=s,this.notifyServiceWorker(t)))}async _get(t){const s=await this._withRetries(r=>OR(r,t));return this.localCache[t]=s,s}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(s=>ly(s,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Tc(o,!1).getAll();return new ol(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(t,s){this.localCache[t]=s;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ab.type="LOCAL";const MR=Ab;new al(3e4,6e4);function kR(i,t){return t?Un(t):(de(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Bh extends Uh{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ca(t,this._buildIdpRequest())}_linkToIdToken(t,s){return ca(t,this._buildIdpRequest(s))}_getReauthenticationResolver(t){return ca(t,this._buildIdpRequest())}_buildIdpRequest(t){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(s.idToken=t),s}}function LR(i){return yb(i.auth,new Bh(i),i.bypassAuthState)}function UR(i){const{auth:t,user:s}=i;return de(s,t,"internal-error"),uR(s,new Bh(i),i.bypassAuthState)}async function zR(i){const{auth:t,user:s}=i;return de(s,t,"internal-error"),cR(s,new Bh(i),i.bypassAuthState)}class Rb{constructor(t,s,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(t,s)=>{this.pendingPromise={resolve:t,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:s,sessionId:r,postBody:o,tenantId:u,error:h,type:m}=t;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:s,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return LR;case"linkViaPopup":case"linkViaRedirect":return zR;case"reauthViaPopup":case"reauthViaRedirect":return UR;default:on(this.auth,"internal-error")}}resolve(t){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const PR=new al(2e3,1e4);class sa extends Rb{constructor(t,s,r,o,u){super(t,s,o,u),this.provider=r,this.authWindow=null,this.pollId=null,sa.currentPopupAction&&sa.currentPopupAction.cancel(),sa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return de(t,this.auth,"internal-error"),t}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");const t=Ph();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sa.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,PR.get())};t()}}sa.currentPopupAction=null;const BR="pendingRedirect",Bo=new Map;class HR extends Rb{constructor(t,s,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let t=Bo.get(this.auth._key());if(!t){try{const r=await GR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(s){t=()=>Promise.reject(s)}Bo.set(this.auth._key(),t)}return this.bypassAuthState||Bo.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const s=await this.auth._redirectUserForId(t.eventId);if(s)return this.user=s,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GR(i,t){const s=VR(t),r=qR(i);if(!await r._isAvailable())return!1;const o=await r._get(s)==="true";return await r._remove(s),o}function FR(i,t){Bo.set(i._key(),t)}function qR(i){return Un(i._redirectPersistence)}function VR(i){return Po(BR,i.config.apiKey,i.name)}async function YR(i,t,s=!1){if($t(i.app))return Promise.reject(Pn(i));const r=gs(i),o=kR(r,t),h=await new HR(r,o,s).execute();return h&&!s&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,t)),h}const XR=600*1e3;class KR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(s=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!QR(t)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=t,s=!0)),s}sendToConsumer(t,s){if(t.error&&!jb(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";s.onError(mn(this.auth,r))}else s.onAuthEvent(t)}isEventForConsumer(t,s){const r=s.eventId===null||!!t.eventId&&t.eventId===s.eventId;return s.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=XR&&this.cachedEventUids.clear(),this.cachedEventUids.has(oy(t))}saveEventToCache(t){this.cachedEventUids.add(oy(t)),this.lastProcessedEventTime=Date.now()}}function oy(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function jb({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function QR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jb(i);default:return!1}}async function WR(i,t={}){return qn(i,"GET","/v1/projects",t)}const $R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZR=/^https?/;async function JR(i){if(i.config.emulator)return;const{authorizedDomains:t}=await WR(i);for(const s of t)try{if(ej(s))return}catch{}on(i,"unauthorized-domain")}function ej(i){const t=Mf(),{protocol:s,hostname:r}=new URL(t);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&r===""?s==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):s==="chrome-extension:"&&h.hostname===r}if(!ZR.test(s))return!1;if($R.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const tj=new al(3e4,6e4);function cy(){const i=pn().___jsl;if(i?.H){for(const t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let s=0;s<i.CP.length;s++)i.CP[s]=null}}function nj(i){return new Promise((t,s)=>{function r(){cy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cy(),s(mn(i,"network-request-failed"))},timeout:tj.get()})}if(pn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(pn().gapi?.load)r();else{const o=VA("iframefcb");return pn()[o]=()=>{gapi.load?r():s(mn(i,"network-request-failed"))},mb(`${qA()}?onload=${o}`).catch(u=>s(u))}}).catch(t=>{throw Ho=null,t})}let Ho=null;function ij(i){return Ho=Ho||nj(i),Ho}const sj=new al(5e3,15e3),aj="__/auth/iframe",rj="emulator/auth/iframe",lj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cj(i){const t=i.config;de(t.authDomain,i,"auth-domain-config-required");const s=t.emulator?Mh(t,rj):`https://${i.config.authDomain}/${aj}`,r={apiKey:t.apiKey,appName:i.name,v:Ea},o=oj.get(i.config.apiHost);o&&(r.eid=o);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${s}?${Sa(r).slice(1)}`}async function uj(i){const t=await ij(i),s=pn().gapi;return de(s,i,"internal-error"),t.open({where:document.body,url:cj(i),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lj,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const h=mn(i,"network-request-failed"),m=pn().setTimeout(()=>{u(h)},sj.get());function g(){pn().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(h)})}))}const dj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fj=500,hj=600,mj="_blank",pj="http://localhost";class uy{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gj(i,t,s,r=fj,o=hj){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...dj,width:r.toString(),height:o.toString(),top:u,left:h},_=Et().toLowerCase();s&&(m=lb(_)?mj:s),ab(_)&&(t=t||pj,g.scrollbars="yes");const y=Object.entries(g).reduce((S,[w,N])=>`${S}${w}=${N},`,"");if(kA(_)&&m!=="_self")return _j(t||"",m),new uy(null);const b=window.open(t||"",m,y);de(b,i,"popup-blocked");try{b.focus()}catch{}return new uy(b)}function _j(i,t){const s=document.createElement("a");s.href=i,s.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}const vj="__/auth/handler",yj="emulator/auth/handler",bj=encodeURIComponent("fac");async function dy(i,t,s,r,o,u){de(i.config.authDomain,i,"auth-domain-config-required"),de(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:s,redirectUrl:r,v:Ea,eventId:o};if(t instanceof _b){t.setDefaultLanguage(i.languageCode),h.providerId=t.providerId||"",mf(t.getCustomParameters())||(h.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,b]of Object.entries({}))h[y]=b}if(t instanceof ll){const y=t.getScopes().filter(b=>b!=="");y.length>0&&(h.scopes=y.join(","))}i.tenantId&&(h.tid=i.tenantId);const m=h;for(const y of Object.keys(m))m[y]===void 0&&delete m[y];const g=await i._getAppCheckToken(),_=g?`#${bj}=${encodeURIComponent(g)}`:"";return`${Sj(i)}?${Sa(m).slice(1)}${_}`}function Sj({config:i}){return i.emulator?Mh(i,yj):`https://${i.authDomain}/${vj}`}const hf="webStorageSupport";class Ej{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tb,this._completeRedirectFn=YR,this._overrideRedirectResult=FR}async _openPopup(t,s,r,o){Gn(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await dy(t,s,r,Mf(),o);return gj(t,u,Ph())}async _openRedirect(t,s,r,o){await this._originValidation(t);const u=await dy(t,s,r,Mf(),o);return NR(u),new Promise(()=>{})}_initialize(t){const s=t._key();if(this.eventManagers[s]){const{manager:o,promise:u}=this.eventManagers[s];return o?Promise.resolve(o):(Gn(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(t){const s=await uj(t),r=new KR(t);return s.register("authEvent",o=>(de(o?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=s,r}_isIframeWebStorageSupported(t,s){this.iframes[t._key()].send(hf,{type:hf},o=>{const u=o?.[0]?.[hf];u!==void 0&&s(!!u),on(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const s=t._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=JR(t)),this.originValidationPromises[s]}get _shouldInitProactively(){return fb()||rb()||Lh()}}const xj=Ej;var fy="@firebase/auth",hy="1.12.0";class Tj{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const s=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,s),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const s=this.internalListeners.get(t);s&&(this.internalListeners.delete(t),s(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Nj(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cj(i){da(new rs("auth",(t,{options:s})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=r.options;de(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hb(i)},_=new HA(r,o,u,g);return $A(_,s),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,s,r)=>{t.getProvider("auth-internal").initialize()})),da(new rs("auth-internal",t=>{const s=gs(t.getProvider("auth").getImmediate());return(r=>new Tj(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti(fy,hy,Nj(i)),Ti(fy,hy,"esm2020")}const wj=300,Aj=jy("authIdTokenMaxAge")||wj;let my=null;const Rj=i=>async t=>{const s=t&&await t.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>Aj)return;const o=s?.token;my!==o&&(my=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function jj(i=zy()){const t=Zf(i,"auth");if(t.isInitialized())return t.getImmediate();const s=WA(i,{popupRedirectResolver:xj,persistence:[MR,ER,Tb]}),r=jy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const h=Rj(u.toString());_R(s,h,()=>h(s.currentUser)),gR(s,m=>h(m))}}const o=Ay("auth");return o&&ZA(s,`http://${o}`),s}function Oj(){return document.getElementsByTagName("head")?.[0]??document}GA({loadJS(i){return new Promise((t,s)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=t,r.onerror=o=>{const u=mn("internal-error");u.customData=o,s(u)},r.type="text/javascript",r.charset="UTF-8",Oj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cj("Browser");const Dj={apiKey:"AIzaSyBhZ7XGKFde4UWy5H3i9NzVGYN-joVvoSY",authDomain:"pl-football-fantasy.firebaseapp.com",databaseURL:"https://pl-football-fantasy-default-rtdb.europe-west1.firebasedatabase.app",projectId:"pl-football-fantasy",storageBucket:"pl-football-fantasy.firebasestorage.app",messagingSenderId:"875638327100",appId:"1:875638327100:web:020b2630584c6d1e6dc039",measurementId:"G-FNBYMP2H7H"},Ob=Uy(Dj),ns=uA(Ob),na=jj(Ob);function Ij(){const[i,t]=ee.useState([]),[s,r]=ee.useState(!0),[o,u]=ee.useState([]),[h,m]=ee.useState({}),[g,_]=ee.useState(!1);if(ee.useEffect(()=>{async function B(){try{const[K,te,Q]=await Promise.all([Vr(ts(ns,"users")),Vr(ts(ns,"xptsSnapshots")),hs()]),he=K.val();if(he){const pe=Object.entries(he).map(([ue,ie])=>({uid:ue,name:ie.name||"Unknown",email:ie.email||"N/A",fplCode:ie.fplCode||"N/A",createdAt:ie.createdAt||null}));pe.sort((ue,ie)=>(ie.createdAt||"").localeCompare(ue.createdAt||"")),t(pe)}const Ce=te.val();if(Ce){const pe=[];for(const[,se]of Object.entries(Ce))for(const[,L]of Object.entries(se))pe.push(L);pe.sort((se,L)=>L.gameweek-se.gameweek),u(pe);const ie=Q.events.find(se=>se.is_current)?.id||1;if(pe.length>0){_(!0);const se=await Mj(pe,ie);m(se),_(!1)}}}catch(K){console.error("Failed to load admin data:",K)}finally{r(!1)}}B()},[]),s)return f.jsxs("div",{className:"loading-container",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:"Loading admin data..."})]});const y=i.length,b=i.filter(B=>B.fplCode&&B.fplCode!=="N/A").length,S=i.filter(B=>B.createdAt?Date.now()-new Date(B.createdAt).getTime()<10080*60*1e3:!1).length,w={};i.forEach(B=>{if(!B.createdAt)return;const K=B.createdAt.slice(0,10);w[K]=(w[K]||0)+1});const N=Object.keys(w).sort(),P=Math.max(...Object.values(w),1),q=o.filter(B=>{const K=`${B.uid}-${B.gameweek}-${B.playerIn.id}`;return h[K]&&h[K].verdict!=="pending"}),Z=q.filter(B=>{const K=`${B.uid}-${B.gameweek}-${B.playerIn.id}`;return h[K]?.verdict==="correct"}).length,H=o.length-q.length,X=q.length>0?Math.round(Z/q.length*100):0;return f.jsxs("div",{className:"admin-page",children:[f.jsx("h2",{className:"admin-title",children:"Admin Dashboard"}),f.jsxs("div",{className:"admin-stats",children:[f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"admin-stat-value",children:y}),f.jsx("div",{className:"admin-stat-label",children:"Total Users"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"admin-stat-value",children:b}),f.jsx("div",{className:"admin-stat-label",children:"With FPL Code"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"admin-stat-value",children:S}),f.jsx("div",{className:"admin-stat-label",children:"New This Week"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsxs("div",{className:"admin-stat-value",children:[y>0?Math.round(b/y*100):0,"%"]}),f.jsx("div",{className:"admin-stat-label",children:"FPL Linked"})]})]}),N.length>0&&f.jsxs("div",{className:"admin-section",children:[f.jsx("h3",{children:"Registrations Over Time"}),f.jsx("div",{className:"reg-chart",children:N.map(B=>f.jsxs("div",{className:"reg-bar-group",children:[f.jsx("div",{className:"reg-bar-wrapper",children:f.jsx("div",{className:"reg-bar",style:{height:`${w[B]/P*100}%`},children:f.jsx("span",{className:"reg-bar-count",children:w[B]})})}),f.jsx("span",{className:"reg-bar-label",children:new Date(B+"T00:00:00").toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},B))})]}),f.jsxs("div",{className:"admin-section",children:[f.jsxs("h3",{children:["All Users (",y,")"]}),f.jsx("div",{className:"admin-table-wrapper",children:f.jsxs("table",{className:"admin-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Name"}),f.jsx("th",{children:"Email"}),f.jsx("th",{children:"FPL Code"}),f.jsx("th",{children:"Registered"})]})}),f.jsx("tbody",{children:i.map(B=>f.jsxs("tr",{children:[f.jsx("td",{children:B.name}),f.jsx("td",{children:B.email}),f.jsx("td",{className:"mono",children:B.fplCode}),f.jsx("td",{children:B.createdAt?new Date(B.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"N/A"})]},B.uid))})]})})]}),f.jsxs("div",{className:"admin-section",children:[f.jsxs("h3",{children:["xPts Prediction Tracker (",o.length," predictions)"]}),o.length===0?f.jsx("p",{className:"admin-xpts-empty",children:"No xPts predictions recorded yet. Predictions are captured when users visit the Transfers tab."}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"admin-xpts-stats",children:[f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"admin-stat-value",children:o.length}),f.jsx("div",{className:"admin-stat-label",children:"Tracked"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsxs("div",{className:"admin-stat-value",children:[X,"%"]}),f.jsx("div",{className:"admin-stat-label",children:"Accuracy"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"admin-stat-value",children:Z}),f.jsx("div",{className:"admin-stat-label",children:"Correct"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"admin-stat-value",children:H}),f.jsx("div",{className:"admin-stat-label",children:"Pending"})]})]}),f.jsx("div",{className:"admin-table-wrapper",children:f.jsxs("table",{className:"admin-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"User"}),f.jsx("th",{children:"GW"}),f.jsx("th",{children:"Player Out"}),f.jsx("th",{children:"Out xPts"}),f.jsx("th",{children:"Player In"}),f.jsx("th",{children:"In xPts"}),f.jsx("th",{children:"Actual Diff"}),f.jsx("th",{children:"Verdict"})]})}),f.jsx("tbody",{children:o.map(B=>{const K=`${B.uid}-${B.gameweek}-${B.playerIn.id}`,te=h[K],Q=te?.actualDiff,he=te?.verdict||"pending",Ce=(B.playerOut.avgXpts||0)>(B.playerIn.avgXpts||0),pe=(B.playerIn.avgXpts||0)>(B.playerOut.avgXpts||0);return f.jsxs("tr",{children:[f.jsx("td",{children:B.userName}),f.jsxs("td",{children:["GW",B.gameweek]}),f.jsxs("td",{children:[B.playerOut.name,f.jsxs("span",{className:"admin-xpts-club",children:[" ",B.playerOut.club]})]}),f.jsx("td",{className:Ce?"admin-xpts-higher":"",children:B.playerOut.avgXpts??""}),f.jsxs("td",{children:[B.playerIn.name,f.jsxs("span",{className:"admin-xpts-club",children:[" ",B.playerIn.club]})]}),f.jsx("td",{className:pe?"admin-xpts-higher":"",children:B.playerIn.avgXpts??""}),f.jsx("td",{className:Q>0?"admin-xpts-correct":Q<0?"admin-xpts-wrong":"",children:g?"...":Q!=null?Q>0?`+${Q}`:Q:""}),f.jsx("td",{children:f.jsx("span",{className:`admin-xpts-badge admin-xpts-badge-${he}`,children:he})})]},K)})})]})})]})]})]})}async function Mj(i,t){const s=new Set;for(const m of i)for(let g=m.gameweek;g<=t;g++)s.add(g);const r={},o=[...s].sort((m,g)=>m-g),u=5;for(let m=0;m<o.length;m+=u){const g=o.slice(m,m+u),_=await Promise.all(g.map(y=>Gf(y).catch(()=>null)));g.forEach((y,b)=>{_[b]&&(r[y]=_[b])})}const h={};for(const m of i){const g=`${m.uid}-${m.gameweek}-${m.playerIn.id}`;let _=0,y=0,b=!1;for(let q=m.gameweek;q<=t;q++){const Z=r[q];if(!Z)continue;const H=Z.elements.find(B=>B.id===m.playerIn.id),X=Z.elements.find(B=>B.id===m.playerOut.id);_+=H?.stats?.total_points||0,y+=X?.stats?.total_points||0,b=!0}if(!b){h[g]={actualDiff:null,verdict:"pending"};continue}const S=_-y,w=(m.playerIn.avgXpts||0)>=(m.playerOut.avgXpts||0),N=S>=0,P=w===N?"correct":"wrong";h[g]={actualDiff:S,verdict:P}}return h}const kj="maghovk@gmail.com",Db=ee.createContext(null);function Lj({children:i}){const[t,s]=ee.useState(null),[r,o]=ee.useState(null),[u,h]=ee.useState(!0),m=t?.email===kj;ee.useEffect(()=>vR(na,async w=>{if(w){const q=(await Vr(ts(ns,`users/${w.uid}`))).val()?.fplCode??null;q&&Wd(q),o(q),s(w)}else s(null),o(null);h(!1)}),[]);async function g(S,w,N,P){const{user:q}=await fR(na,w,N);await pR(q,{displayName:S}),await Df(ts(ns,`users/${q.uid}`),{name:S,email:w,fplCode:Number(P),createdAt:new Date().toISOString()}),Wd(Number(P)),o(Number(P))}async function _(S){if(!na.currentUser)return;const w=Number(S);await nA(ts(ns,`users/${na.currentUser.uid}`),{fplCode:w}),Wd(w),o(w)}async function y(S,w){await hR(na,S,w)}async function b(){await yR(na)}return f.jsx(Db.Provider,{value:{user:t,fplCode:r,loading:u,isAdmin:m,register:g,login:y,logout:b,updateFplCode:_},children:i})}function Nc(){return ee.useContext(Db)}const Uj=["All","GK","DEF","MID","FWD"];function zj(){const{fplCode:i,user:t}=Nc(),{data:s,loading:r,error:o,reload:u}=es(Lx,[i]),h=ee.useMemo(()=>s?.transfers||[],[s]),m=ee.useMemo(()=>s?.teams||{},[s]),[g,_]=ee.useState(null),[y,b]=ee.useState("All"),[S,w]=ee.useState(new Set),N=ee.useRef({});ee.useEffect(()=>{if(!h.length||!t)return;const L=ts(ns,`transferCache/${t.uid}`);async function F(){try{const V=(await Vr(L)).val(),W=new Set;if(V?.transfers){const J=new Set(V.transfers.map(le=>`${le.gameweek}-${le.playerIn.id}`));h.forEach((le,x)=>{J.has(`${le.gameweek}-${le.playerIn.id}`)||W.add(x)}),W.size>0&&w(W)}await Df(L,{transfers:h.map(J=>({gameweek:J.gameweek,transferCost:J.transferCost,netGain:J.netGain,gameweeksCompared:J.gameweeksCompared,playerIn:{id:J.playerIn.id,name:J.playerIn.name,position:J.playerIn.position,club:J.playerIn.club,pointsSinceTransfer:J.playerIn.pointsSinceTransfer},playerOut:{id:J.playerOut.id,name:J.playerOut.name,position:J.playerOut.position,club:J.playerOut.club,pointsSinceTransfer:J.playerOut.pointsSinceTransfer}})),updatedAt:new Date().toISOString()});for(const J of W){const le=h[J],x=`${le.gameweek}-${le.playerIn.id}`,I=ts(ns,`xptsSnapshots/${t.uid}/${x}`);if((await Vr(I)).exists())continue;let G={avgXpts:null,topReasons:[]},re={avgXpts:null,topReasons:[]};try{const ae=ss(le.playerIn,le.playerIn.upcomingFixtures,m,3);G={avgXpts:ae.avgXpts,topReasons:ae.topReasons}}catch(ae){console.warn("xPts calc failed for playerIn",le.playerIn.name,ae)}try{const ae=ss(le.playerOut,le.playerOut.upcomingFixtures,m,3);re={avgXpts:ae.avgXpts,topReasons:ae.topReasons}}catch(ae){console.warn("xPts calc failed for playerOut",le.playerOut.name,ae)}await Df(I,{uid:t.uid,userName:t.displayName||"Unknown",capturedAt:new Date().toISOString(),gameweek:le.gameweek,transferCost:le.transferCost||0,playerOut:{id:le.playerOut.id,name:le.playerOut.name,position:le.playerOut.position,club:le.playerOut.club,avgXpts:re.avgXpts,topReasons:re.topReasons},playerIn:{id:le.playerIn.id,name:le.playerIn.name,position:le.playerIn.position,club:le.playerIn.club,avgXpts:G.avgXpts,topReasons:G.topReasons}})}}catch(j){console.error("Transfer cache sync error:",j)}}F()},[h,m,t]);const P=ee.useCallback(L=>{const F=N.current[L];F&&(F.scrollIntoView({behavior:"smooth",block:"center"}),_(L),F.classList.add("transfer-highlight"),setTimeout(()=>F.classList.remove("transfer-highlight"),2e3))},[]);if(r)return f.jsxs("div",{className:"loading-container",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:"Analysing your transfers..."})]});if(o)return f.jsxs("div",{className:"error-container",children:[f.jsxs("p",{children:["Failed to load transfers: ",o]}),f.jsx("button",{className:"btn btn-primary",onClick:u,children:"Retry"})]});if(h.length===0)return f.jsxs("div",{className:"transfers-empty",children:[f.jsx("div",{className:"empty-icon",children:f.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("polyline",{points:"17 1 21 5 17 9"}),f.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),f.jsx("polyline",{points:"7 23 3 19 7 15"}),f.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]})}),f.jsx("h3",{children:"No Transfers Yet"}),f.jsx("p",{children:"Your transfer history will appear here once you make transfers."})]});const q=y==="All"?h:h.filter(L=>L.playerIn.position===y||L.playerOut.position===y),Z=h.length,H=h.reduce((L,F)=>L+F.netGain,0),X=h.filter(L=>L.netGain>0).length,B=Z>0?Math.round(X/Z*100):0,K=h.reduce((L,F,j)=>F.netGain>h[L].netGain?j:L,0),te=h.reduce((L,F,j)=>F.netGain<h[L].netGain?j:L,0),Q=h[K],he=h[te],Ce=h.reduce((L,F)=>L+(F.transferCost||0),0),pe=[...h].sort((L,F)=>L.gameweek-F.gameweek),ue=[];let ie=0;for(const L of pe)ie+=L.netGain,ue.push({gw:L.gameweek,total:ie,name:`${L.playerOut.name}  ${L.playerIn.name}`});const se=Math.max(...ue.map(L=>Math.abs(L.total)),1);return f.jsxs("div",{className:"transfer-tracker",children:[S.size>0&&f.jsxs("div",{className:"new-transfer-banner",children:[f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),f.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),S.size," new transfer",S.size>1?"s":""," detected since last visit!",f.jsx("button",{className:"new-transfer-dismiss",onClick:()=>w(new Set),children:"Dismiss"})]}),f.jsxs("div",{className:"transfer-stats",children:[f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"transfer-stat-value",children:Z}),f.jsx("div",{className:"transfer-stat-label",children:"Transfers Made"})]}),f.jsxs("div",{className:`stat-card ${H>=0?"stat-positive":"stat-negative"}`,children:[f.jsxs("div",{className:"transfer-stat-value",children:[H>=0?"+":"",H]}),f.jsx("div",{className:"transfer-stat-label",children:"Net Points Gain"})]}),f.jsxs("div",{className:`stat-card ${B>=50?"stat-positive":"stat-negative"}`,children:[f.jsxs("div",{className:"transfer-stat-value",children:[B,"%"]}),f.jsx("div",{className:"transfer-stat-label",children:"Success Rate"})]}),f.jsxs("div",{className:"stat-card clickable-stat stat-positive",onClick:()=>P(K),children:[f.jsxs("div",{className:"transfer-stat-value",children:["+",Q.netGain]}),f.jsx("div",{className:"transfer-stat-label",children:"Best Transfer "})]}),f.jsxs("div",{className:"stat-card clickable-stat stat-negative",onClick:()=>P(te),children:[f.jsx("div",{className:"transfer-stat-value",children:he.netGain}),f.jsx("div",{className:"transfer-stat-label",children:"Worst Transfer "})]})]}),Ce>0&&f.jsxs("div",{className:"transfer-cost-banner",children:["Total transfer costs: ",f.jsxs("strong",{children:["-",Ce," pts"]})," (hits taken)"]}),ue.length>1&&f.jsxs("div",{className:"cumulative-section",children:[f.jsx("h3",{className:"section-title",children:"Cumulative Net Gain"}),f.jsxs("div",{className:"cumulative-chart",children:[f.jsx("div",{className:"chart-zero-line"}),ue.map((L,F)=>{const j=L.total>=0,V=Math.max(Math.abs(L.total)/se*50,2);return f.jsxs("div",{className:"chart-bar-group",children:[f.jsx("div",{className:"chart-bar-area",children:j?f.jsxs("div",{className:"chart-bar-top",children:[f.jsxs("span",{className:"chart-bar-val",children:[L.total>=0?"+":"",L.total]}),f.jsx("div",{className:"chart-bar bar-positive",style:{height:`${V}%`}})]}):f.jsxs("div",{className:"chart-bar-bottom",children:[f.jsx("div",{className:"chart-bar bar-negative",style:{height:`${V}%`}}),f.jsx("span",{className:"chart-bar-val",children:L.total})]})}),f.jsxs("span",{className:"chart-bar-label",children:["GW",L.gw]})]},F)})]})]}),f.jsxs("div",{className:"transfer-filter-bar",children:[f.jsx("span",{className:"filter-label",children:"Filter:"}),Uj.map(L=>f.jsx("button",{className:`filter-btn ${y===L?"filter-active":""}`,onClick:()=>b(L),children:L},L)),f.jsxs("span",{className:"filter-count",children:[q.length," transfer",q.length!==1?"s":""]})]}),f.jsx("div",{className:"transfer-list",children:q.map(L=>{const F=h.indexOf(L),j=g===F,V=L.netGain>=0,W=S.has(F);return f.jsxs("div",{ref:J=>N.current[F]=J,className:`transfer-card ${V?"transfer-positive":"transfer-negative"} ${W?"transfer-new":""}`,onClick:()=>_(j?null:F),children:[W&&f.jsx("div",{className:"new-badge",children:"NEW"}),f.jsxs("div",{className:"transfer-header",children:[f.jsxs("span",{className:"transfer-gw",children:["GW",L.gameweek]}),f.jsxs("div",{className:`transfer-net ${V?"net-positive":"net-negative"}`,children:[V?"+":"",L.netGain," pts"]})]}),f.jsxs("div",{className:"transfer-players",children:[f.jsxs("div",{className:"transfer-player out",children:[f.jsx("div",{className:"transfer-direction",children:"OUT"}),f.jsxs("div",{className:"transfer-player-info",children:[f.jsx("span",{className:"transfer-player-name",children:L.playerOut.name}),f.jsxs("span",{className:"transfer-player-meta",children:[L.playerOut.club,"  ",L.playerOut.position]})]}),f.jsxs("div",{className:"transfer-player-points",children:[L.playerOut.pointsSinceTransfer," pts"]})]}),f.jsx("div",{className:"transfer-arrow",children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{d:"M12 5v14M5 12l7 7 7-7"})})}),f.jsxs("div",{className:"transfer-player in",children:[f.jsx("div",{className:"transfer-direction",children:"IN"}),f.jsxs("div",{className:"transfer-player-info",children:[f.jsx("span",{className:"transfer-player-name",children:L.playerIn.name}),f.jsxs("span",{className:"transfer-player-meta",children:[L.playerIn.club,"  ",L.playerIn.position]})]}),f.jsxs("div",{className:"transfer-player-points",children:[L.playerIn.pointsSinceTransfer," pts"]})]})]}),L.transferCost>0&&f.jsxs("div",{className:"transfer-hit",children:["-",L.transferCost," pt hit"]}),f.jsxs("div",{className:"transfer-meta",children:[L.gameweeksCompared," GW",L.gameweeksCompared!==1?"s":""," compared",f.jsx("span",{className:"expand-hint",children:j?"":""})]}),j&&f.jsxs("div",{className:"transfer-breakdown",children:[f.jsxs("div",{className:"breakdown-header",children:[f.jsx("span",{children:"GW"}),f.jsx("span",{children:L.playerOut.name}),f.jsx("span",{children:L.playerIn.name}),f.jsx("span",{children:"Diff"})]}),L.gwBreakdown.map(J=>f.jsxs("div",{className:"breakdown-row",children:[f.jsx("span",{className:"breakdown-gw",children:J.gw}),f.jsx("span",{className:"breakdown-pts",children:J.outPts}),f.jsx("span",{className:"breakdown-pts",children:J.inPts}),f.jsxs("span",{className:`breakdown-diff ${J.diff>=0?"diff-positive":"diff-negative"}`,children:[J.diff>=0?"+":"",J.diff]})]},J.gw)),f.jsxs("div",{className:"breakdown-row breakdown-total",children:[f.jsx("span",{className:"breakdown-gw",children:"Total"}),f.jsx("span",{className:"breakdown-pts",children:L.playerOut.pointsSinceTransfer}),f.jsx("span",{className:"breakdown-pts",children:L.playerIn.pointsSinceTransfer}),f.jsxs("span",{className:`breakdown-diff ${L.netGain>=0?"diff-positive":"diff-negative"}`,children:[L.netGain>=0?"+":"",L.netGain]})]})]})]},F)})})]})}function Pj(){const{login:i,register:t}=Nc(),[s,r]=ee.useState(!1),[o,u]=ee.useState({name:"",email:"",password:"",fplCode:""}),[h,m]=ee.useState(""),[g,_]=ee.useState(!1);function y(S){u(w=>({...w,[S.target.name]:S.target.value}))}async function b(S){S.preventDefault(),m(""),_(!0);try{if(s){if(!o.name.trim())throw new Error("Name is required.");if(!o.fplCode.trim())throw new Error("FPL kode is required.");await t(o.name.trim(),o.email,o.password,o.fplCode)}else await i(o.email,o.password)}catch(w){m(w.message||"Something went wrong.")}finally{_(!1)}}return f.jsx("div",{className:"auth-page",children:f.jsxs("div",{className:"auth-card",children:[f.jsxs("div",{className:"auth-brand",children:[f.jsx("div",{className:"brand-icon",children:"FF"}),f.jsxs("div",{children:[f.jsx("h1",{children:"My Football Fantasy"}),f.jsx("p",{className:"subtitle",children:"Season 2025/26"})]})]}),f.jsx("h2",{className:"auth-title",children:s?"Create account":"Sign in"}),f.jsxs("form",{onSubmit:b,className:"auth-form",children:[s&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"name",children:"Name"}),f.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:o.name,onChange:y,placeholder:"Your name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",children:"Email"}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o.email,onChange:y,placeholder:"you@example.com"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"password",children:"Password"}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:s?"new-password":"current-password",required:!0,value:o.password,onChange:y,placeholder:""})]}),s&&f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"fplCode",children:"FPL kode"}),f.jsx("input",{id:"fplCode",name:"fplCode",type:"number",required:!0,value:o.fplCode,onChange:y,placeholder:"e.g. 5398119"})]}),h&&f.jsx("p",{className:"auth-error",children:h}),f.jsx("button",{type:"submit",className:"btn btn-primary auth-submit",disabled:g,children:g?"Please wait...":s?"Create account":"Sign in"})]}),f.jsxs("p",{className:"auth-toggle",children:[s?"Already have an account?":"No account yet?"," ",f.jsx("button",{type:"button",className:"auth-toggle-btn",onClick:()=>{r(S=>!S),m("")},children:s?"Sign in":"Create account"})]})]})})}const py=[{id:"team",label:"My Team",icon:"shield"},{id:"formation",label:"Formation",icon:"formation"},{id:"points",label:"Points",icon:"chart"},{id:"trade",label:"Trade Analyzer",icon:"swap"},{id:"transfers",label:"Transfers",icon:"transfers"},{id:"fixtures",label:"Fixtures",icon:"calendar"}],Bj={id:"admin",label:"Admin",icon:"admin"},Hj={shield:f.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),chart:f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),f.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),f.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),swap:f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("polyline",{points:"17 1 21 5 17 9"}),f.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),f.jsx("polyline",{points:"7 23 3 19 7 15"}),f.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),calendar:f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),f.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),f.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),f.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),formation:f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2"}),f.jsx("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),f.jsx("circle",{cx:"7",cy:"10",r:"1.5",fill:"currentColor"}),f.jsx("circle",{cx:"17",cy:"10",r:"1.5",fill:"currentColor"}),f.jsx("circle",{cx:"8",cy:"16",r:"1.5",fill:"currentColor"}),f.jsx("circle",{cx:"16",cy:"16",r:"1.5",fill:"currentColor"}),f.jsx("circle",{cx:"12",cy:"21",r:"1.5",fill:"currentColor"})]}),transfers:f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M12 2v20M2 12h20"}),f.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor",stroke:"none"}),f.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor",stroke:"none"}),f.jsx("path",{d:"M7 9l5-5 5 5M17 15l-5 5-5-5"})]}),admin:f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M12 15c-3.87 0-7 1.57-7 3.5V21h14v-2.5c0-1.93-3.13-3.5-7-3.5z"}),f.jsx("circle",{cx:"12",cy:"8",r:"4"}),f.jsx("path",{d:"M19 8l1.5 1.5L22 8"})]})};function Gj(){const{user:i,fplCode:t,isAdmin:s,logout:r}=Nc(),[o,u]=ee.useState("team"),[h,m]=ee.useState("ff"),{data:g,loading:_,error:y,reload:b}=es(jx,[t]),S=s?[...py,Bj]:py;return f.jsxs("div",{className:"app",children:[f.jsx("header",{className:"app-header",children:f.jsxs("div",{className:"header-content",children:[f.jsxs("div",{className:"brand",children:[f.jsx("div",{className:"brand-icon",children:"FF"}),f.jsxs("div",{children:[f.jsx("h1",{children:"My Football Fantasy"}),f.jsx("p",{className:"subtitle",children:"Season 2025/26"})]})]}),f.jsx("nav",{className:"nav-tabs",children:S.map(w=>f.jsxs("button",{className:`nav-tab ${o===w.id?"active":""}`,onClick:()=>u(w.id),children:[Hj[w.icon],f.jsx("span",{children:w.label})]},w.id))}),f.jsxs("div",{className:"user-info",children:[f.jsx("span",{className:"user-name",children:i.displayName}),f.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Logout"})]})]})}),f.jsxs("main",{className:"app-main",children:[o==="team"&&f.jsx(Hx,{teamData:g,teamLoading:_,teamError:y,teamReload:b}),o==="formation"&&f.jsx(m1,{teamData:g,teamLoading:_,teamError:y,teamReload:b}),o==="points"&&f.jsx(Vx,{teamData:g,teamLoading:_,teamError:y,teamReload:b}),o==="trade"&&f.jsx(Zx,{teamData:g,teamLoading:_,teamError:y,teamReload:b}),o==="transfers"&&f.jsx(zj,{}),o==="fixtures"&&f.jsx(a1,{}),o==="admin"&&s&&f.jsx(Ij,{})]}),f.jsx("div",{className:"version-label",children:"v0.02"})]})}function Fj(){const{user:i,loading:t}=Nc();return t?f.jsx("div",{className:"app-loading",children:f.jsx("div",{className:"loading-spinner"})}):i?f.jsx(Gj,{}):f.jsx(Pj,{})}function qj(){return f.jsx(Lj,{children:f.jsx(Fj,{})})}dx.createRoot(document.getElementById("root")).render(f.jsx(ee.StrictMode,{children:f.jsx(qj,{})}));
